module.exports=[27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},2564,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n=Buffer.from([254,255,255,255,255,255,255,255]),i=Buffer.alloc(0);class o{constructor(e,t,r){this.initialSize=e,this.encoding=t||"ucs2",this.doubleSizeGrowth=r||!1,this.buffer=Buffer.alloc(this.initialSize,0),this.compositeBuffer=i,this.position=0}get data(){return this.newBuffer(0),this.compositeBuffer}copyFrom(e){let t=e.length;this.makeRoomFor(t),e.copy(this.buffer,this.position),this.position+=t}makeRoomFor(e){if(this.buffer.length-this.position<e)if(this.doubleSizeGrowth){let t=Math.max(128,2*this.buffer.length);for(;t<e;)t*=2;this.newBuffer(t)}else this.newBuffer(e)}newBuffer(e){let t=this.buffer.slice(0,this.position);this.compositeBuffer=Buffer.concat([this.compositeBuffer,t]),this.buffer=0===e?i:Buffer.alloc(e,0),this.position=0}writeUInt8(e){this.makeRoomFor(1),this.buffer.writeUInt8(e,this.position),this.position+=1}writeUInt16LE(e){this.makeRoomFor(2),this.buffer.writeUInt16LE(e,this.position),this.position+=2}writeUShort(e){this.writeUInt16LE(e)}writeUInt16BE(e){this.makeRoomFor(2),this.buffer.writeUInt16BE(e,this.position),this.position+=2}writeUInt24LE(e){this.makeRoomFor(3),this.buffer[this.position+2]=e>>>16&255,this.buffer[this.position+1]=e>>>8&255,this.buffer[this.position]=255&e,this.position+=3}writeUInt32LE(e){this.makeRoomFor(4),this.buffer.writeUInt32LE(e,this.position),this.position+=4}writeBigInt64LE(e){this.makeRoomFor(8),this.buffer.writeBigInt64LE(e,this.position),this.position+=8}writeInt64LE(e){this.writeBigInt64LE(BigInt(e))}writeUInt64LE(e){this.writeBigUInt64LE(BigInt(e))}writeBigUInt64LE(e){this.makeRoomFor(8),this.buffer.writeBigUInt64LE(e,this.position),this.position+=8}writeUInt32BE(e){this.makeRoomFor(4),this.buffer.writeUInt32BE(e,this.position),this.position+=4}writeUInt40LE(e){this.writeInt32LE(-1&e),this.writeUInt8(Math.floor(23283064365386963e-26*e))}writeInt8(e){this.makeRoomFor(1),this.buffer.writeInt8(e,this.position),this.position+=1}writeInt16LE(e){this.makeRoomFor(2),this.buffer.writeInt16LE(e,this.position),this.position+=2}writeInt16BE(e){this.makeRoomFor(2),this.buffer.writeInt16BE(e,this.position),this.position+=2}writeInt32LE(e){this.makeRoomFor(4),this.buffer.writeInt32LE(e,this.position),this.position+=4}writeInt32BE(e){this.makeRoomFor(4),this.buffer.writeInt32BE(e,this.position),this.position+=4}writeFloatLE(e){this.makeRoomFor(4),this.buffer.writeFloatLE(e,this.position),this.position+=4}writeDoubleLE(e){this.makeRoomFor(8),this.buffer.writeDoubleLE(e,this.position),this.position+=8}writeString(e,t){null==t&&(t=this.encoding);let r=Buffer.byteLength(e,t);this.makeRoomFor(r),this.buffer.write(e,this.position,t),this.position+=r}writeBVarchar(e,t){this.writeUInt8(e.length),this.writeString(e,t)}writeUsVarchar(e,t){this.writeUInt16LE(e.length),this.writeString(e,t)}writeUsVarbyte(e,t){let r;null==t&&(t=this.encoding),e instanceof Buffer?r=e.length:(e=e.toString(),r=Buffer.byteLength(e,t)),this.writeUInt16LE(r),e instanceof Buffer?this.writeBuffer(e):(this.makeRoomFor(r),this.buffer.write(e,this.position,t),this.position+=r)}writePLPBody(e,t){let r;null==t&&(t=this.encoding),e instanceof Buffer?r=e.length:(e=e.toString(),r=Buffer.byteLength(e,t)),this.writeBuffer(n),r>0&&(this.writeUInt32LE(r),e instanceof Buffer?this.writeBuffer(e):(this.makeRoomFor(r),this.buffer.write(e,this.position,t),this.position+=r)),this.writeUInt32LE(0)}writeBuffer(e){let t=e.length;this.makeRoomFor(t),e.copy(this.buffer,this.position),this.position+=t}writeMoney(e){this.writeInt32LE(Math.floor(23283064365386963e-26*e)),this.writeInt32LE(-1&e)}}r.default=o,t.exports=o},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},2986,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Token=r.TYPE=r.SSPIToken=r.RowToken=r.RoutingEnvChangeToken=r.RollbackTransactionEnvChangeToken=r.ReturnValueToken=r.ReturnStatusToken=r.ResetConnectionEnvChangeToken=r.PacketSizeEnvChangeToken=r.OrderToken=r.NBCRowToken=r.LoginAckToken=r.LanguageEnvChangeToken=r.InfoMessageToken=r.FedAuthInfoToken=r.FeatureExtAckToken=r.ErrorMessageToken=r.DoneToken=r.DoneProcToken=r.DoneInProcToken=r.DatabaseMirroringPartnerEnvChangeToken=r.DatabaseEnvChangeToken=r.CommitTransactionEnvChangeToken=r.CollationChangeToken=r.ColMetadataToken=r.CharsetEnvChangeToken=r.BeginTransactionEnvChangeToken=void 0,r.TYPE={ALTMETADATA:136,ALTROW:211,COLMETADATA:129,COLINFO:165,DONE:253,DONEPROC:254,DONEINPROC:255,ENVCHANGE:227,ERROR:170,FEATUREEXTACK:174,FEDAUTHINFO:238,INFO:171,LOGINACK:173,NBCROW:210,OFFSET:120,ORDER:169,RETURNSTATUS:121,RETURNVALUE:172,ROW:209,SSPI:237,TABNAME:164};class n{constructor(e,t){this.name=e,this.handlerName=t}}r.Token=n,r.ColMetadataToken=class extends n{constructor(e){super("COLMETADATA","onColMetadata"),this.columns=e}},r.DoneToken=class extends n{constructor({more:e,sqlError:t,attention:r,serverError:n,rowCount:i,curCmd:o}){super("DONE","onDone"),this.more=e,this.sqlError=t,this.attention=r,this.serverError=n,this.rowCount=i,this.curCmd=o}},r.DoneInProcToken=class extends n{constructor({more:e,sqlError:t,attention:r,serverError:n,rowCount:i,curCmd:o}){super("DONEINPROC","onDoneInProc"),this.more=e,this.sqlError=t,this.attention=r,this.serverError=n,this.rowCount=i,this.curCmd=o}},r.DoneProcToken=class extends n{constructor({more:e,sqlError:t,attention:r,serverError:n,rowCount:i,curCmd:o}){super("DONEPROC","onDoneProc"),this.more=e,this.sqlError=t,this.attention=r,this.serverError=n,this.rowCount=i,this.curCmd=o}},r.DatabaseEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onDatabaseChange"),this.type="DATABASE",this.newValue=e,this.oldValue=t}},r.LanguageEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onLanguageChange"),this.type="LANGUAGE",this.newValue=e,this.oldValue=t}},r.CharsetEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onCharsetChange"),this.type="CHARSET",this.newValue=e,this.oldValue=t}},r.PacketSizeEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onPacketSizeChange"),this.type="PACKET_SIZE",this.newValue=e,this.oldValue=t}},r.BeginTransactionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onBeginTransaction"),this.type="BEGIN_TXN",this.newValue=e,this.oldValue=t}},r.CommitTransactionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onCommitTransaction"),this.type="COMMIT_TXN",this.newValue=e,this.oldValue=t}},r.RollbackTransactionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onRollbackTransaction"),this.type="ROLLBACK_TXN",this.newValue=e,this.oldValue=t}},r.DatabaseMirroringPartnerEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onDatabaseMirroringPartner"),this.type="DATABASE_MIRRORING_PARTNER",this.newValue=e,this.oldValue=t}},r.ResetConnectionEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onResetConnection"),this.type="RESET_CONNECTION",this.newValue=e,this.oldValue=t}},r.CollationChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onSqlCollationChange"),this.type="SQL_COLLATION",this.newValue=e,this.oldValue=t}},r.RoutingEnvChangeToken=class extends n{constructor(e,t){super("ENVCHANGE","onRoutingChange"),this.type="ROUTING_CHANGE",this.newValue=e,this.oldValue=t}},r.FeatureExtAckToken=class extends n{constructor(e,t){super("FEATUREEXTACK","onFeatureExtAck"),this.fedAuth=e,this.utf8Support=t}},r.FedAuthInfoToken=class extends n{constructor(e,t){super("FEDAUTHINFO","onFedAuthInfo"),this.spn=e,this.stsurl=t}},r.InfoMessageToken=class extends n{constructor({number:e,state:t,class:r,message:n,serverName:i,procName:o,lineNumber:a}){super("INFO","onInfoMessage"),this.number=e,this.state=t,this.class=r,this.message=n,this.serverName=i,this.procName=o,this.lineNumber=a}},r.ErrorMessageToken=class extends n{constructor({number:e,state:t,class:r,message:n,serverName:i,procName:o,lineNumber:a}){super("ERROR","onErrorMessage"),this.number=e,this.state=t,this.class=r,this.message=n,this.serverName=i,this.procName=o,this.lineNumber=a}},r.LoginAckToken=class extends n{constructor({interface:e,tdsVersion:t,progName:r,progVersion:n}){super("LOGINACK","onLoginAck"),this.interface=e,this.tdsVersion=t,this.progName=r,this.progVersion=n}},r.NBCRowToken=class extends n{constructor(e){super("NBCROW","onRow"),this.columns=e}},r.OrderToken=class extends n{constructor(e){super("ORDER","onOrder"),this.orderColumns=e}},r.ReturnStatusToken=class extends n{constructor(e){super("RETURNSTATUS","onReturnStatus"),this.value=e}},r.ReturnValueToken=class extends n{constructor({paramOrdinal:e,paramName:t,metadata:r,value:n}){super("RETURNVALUE","onReturnValue"),this.paramOrdinal=e,this.paramName=t,this.metadata=r,this.value=n}},r.RowToken=class extends n{constructor(e){super("ROW","onRow"),this.columns=e}},r.SSPIToken=class extends n{constructor(e,t){super("SSPICHALLENGE","onSSPI"),this.ntlmpacket=e,this.ntlmpacketBuffer=t}}},14746,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(27699),i=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564)),o=e.r(88947),a=e.r(2986);let s={nullable:1,updateableReadWrite:4,nullableUnknown:32768},l={FINAL:0},c=Buffer.from([a.TYPE.ROW]),u=Buffer.from([16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),d=Buffer.from([0]);class h extends o.Transform{constructor(e){super({writableObjectMode:!0}),this.bulkLoad=e,this.mainOptions=e.options,this.columns=e.columns,this.columnMetadataWritten=!1}_transform(e,t,r){this.columnMetadataWritten||(this.push(this.bulkLoad.getColMetaData()),this.columnMetadataWritten=!0),this.push(c);for(let t=0;t<this.columns.length;t++){let n=this.columns[t],i=Array.isArray(e)?e[t]:e[n.objName];if(!this.bulkLoad.firstRowWritten)try{i=n.type.validate(i,n.collation)}catch(e){return r(e)}let o={length:n.length,scale:n.scale,precision:n.precision,value:i};if("Text"===n.type.name||"Image"===n.type.name||"NText"===n.type.name){if(null==i){this.push(d);continue}this.push(u)}try{for(let e of(this.push(n.type.generateParameterLength(o,this.mainOptions)),n.type.generateParameterData(o,this.mainOptions)))this.push(e)}catch(e){return r(e)}}process.nextTick(r)}_flush(e){this.push(this.bulkLoad.createDoneToken()),process.nextTick(e)}}class f extends n.EventEmitter{constructor(e,t,r,{checkConstraints:n=!1,fireTriggers:i=!1,keepNulls:o=!1,lockTable:a=!1,order:s={}},l){if("boolean"!=typeof n)throw TypeError('The "options.checkConstraints" property must be of type boolean.');if("boolean"!=typeof i)throw TypeError('The "options.fireTriggers" property must be of type boolean.');if("boolean"!=typeof o)throw TypeError('The "options.keepNulls" property must be of type boolean.');if("boolean"!=typeof a)throw TypeError('The "options.lockTable" property must be of type boolean.');if("object"!=typeof s||null===s)throw TypeError('The "options.order" property must be of type object.');for(let[e,t]of Object.entries(s))if("ASC"!==t&&"DESC"!==t)throw TypeError('The value of the "'+e+'" key in the "options.order" object must be either "ASC" or "DESC".');super(),this.error=void 0,this.canceled=!1,this.executionStarted=!1,this.collation=t,this.table=e,this.options=r,this.callback=l,this.columns=[],this.columnsByName={},this.firstRowWritten=!1,this.streamingMode=!1,this.rowToPacketTransform=new h(this),this.bulkOptions={checkConstraints:n,fireTriggers:i,keepNulls:o,lockTable:a,order:s}}addColumn(e,t,{output:r=!1,length:n,precision:i,scale:o,objName:a=e,nullable:s=!0}){if(this.firstRowWritten)throw Error("Columns cannot be added to bulk insert after the first row has been written.");if(this.executionStarted)throw Error("Columns cannot be added to bulk insert after execution has started.");let l={type:t,name:e,value:null,output:r,length:n,precision:i,scale:o,objName:a,nullable:s,collation:this.collation};(48&t.id)==32&&null==l.length&&t.resolveLength&&(l.length=t.resolveLength(l)),t.resolvePrecision&&null==l.precision&&(l.precision=t.resolvePrecision(l)),t.resolveScale&&null==l.scale&&(l.scale=t.resolveScale(l)),this.columns.push(l),this.columnsByName[e]=l}getOptionsSql(){let e=[];if(this.bulkOptions.checkConstraints&&e.push("CHECK_CONSTRAINTS"),this.bulkOptions.fireTriggers&&e.push("FIRE_TRIGGERS"),this.bulkOptions.keepNulls&&e.push("KEEP_NULLS"),this.bulkOptions.lockTable&&e.push("TABLOCK"),this.bulkOptions.order){let t=[];for(let[e,r]of Object.entries(this.bulkOptions.order))t.push(`${e} ${r}`);t.length&&e.push(`ORDER (${t.join(", ")})`)}return e.length>0?` WITH (${e.join(",")})`:""}getBulkInsertSql(){let e="insert bulk "+this.table+"(";for(let t=0,r=this.columns.length;t<r;t++){let r=this.columns[t];0!==t&&(e+=", "),e+="["+r.name+"] "+r.type.declaration(r)}return e+=")",e+=this.getOptionsSql()}getTableCreationSql(){let e="CREATE TABLE "+this.table+"(\n";for(let t=0,r=this.columns.length;t<r;t++){let r=this.columns[t];0!==t&&(e+=",\n"),e+="["+r.name+"] "+r.type.declaration(r),void 0!==r.nullable&&(e+=" "+(r.nullable?"NULL":"NOT NULL"))}return e+"\n)"}getColMetaData(){let e=new i.default(100,null,!0);e.writeUInt8(a.TYPE.COLMETADATA),e.writeUInt16LE(this.columns.length);for(let t=0,r=this.columns.length;t<r;t++){let r=this.columns[t];this.options.tdsVersion<"7_2"?e.writeUInt16LE(0):e.writeUInt32LE(0);let n=s.updateableReadWrite;r.nullable?n|=s.nullable:void 0===r.nullable&&this.options.tdsVersion>="7_2"&&(n|=s.nullableUnknown),e.writeUInt16LE(n),e.writeBuffer(r.type.generateTypeInfo(r,this.options)),r.type.hasTableName&&e.writeUsVarchar(this.table,"ucs2"),e.writeBVarchar(r.name,"ucs2")}return e.data}setTimeout(e){this.timeout=e}createDoneToken(){let e=new i.default(this.options.tdsVersion<"7_2"?9:13);e.writeUInt8(a.TYPE.DONE);let t=l.FINAL;return e.writeUInt16LE(t),e.writeUInt16LE(0),e.writeUInt32LE(0),this.options.tdsVersion>="7_2"&&e.writeUInt32LE(0),e.data}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}}r.default=f,t.exports=f},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},55004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},4446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},79594,(e,t,r)=>{t.exports=e.x("dns",()=>require("dns"))},12249,(e,t,r)=>{t.exports=e.x("constants",()=>require("constants"))},41716,e=>{"use strict";e.s(["__addDisposableResource",()=>D,"__assign",()=>n,"__asyncDelegator",()=>A,"__asyncGenerator",()=>v,"__asyncValues",()=>C,"__await",()=>b,"__awaiter",()=>h,"__classPrivateFieldGet",()=>N,"__classPrivateFieldIn",()=>k,"__classPrivateFieldSet",()=>P,"__createBinding",()=>p,"__decorate",()=>o,"__disposeResources",()=>L,"__esDecorate",()=>s,"__exportStar",()=>m,"__extends",()=>r,"__generator",()=>f,"__importDefault",()=>R,"__importStar",()=>O,"__makeTemplateObject",()=>S,"__metadata",()=>d,"__param",()=>a,"__propKey",()=>c,"__read",()=>y,"__rest",()=>i,"__rewriteRelativeImportExtension",()=>U,"__runInitializers",()=>l,"__setFunctionName",()=>u,"__spread",()=>_,"__spreadArray",()=>T,"__spreadArrays",()=>E,"__values",()=>g,"default",()=>x]);var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function o(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function a(e,t){return function(r,n){t(r,n,e)}}function s(e,t,r,n,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,f=r.length-1;f>=0;f--){var p={};for(var m in n)p[m]="access"===m?{}:n[m];for(var m in n.access)p.access[m]=n.access[m];p.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,r[f])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(s=a(g.get))&&(d.get=s),(s=a(g.set))&&(d.set=s),(s=a(g.init))&&i.unshift(s)}else(s=a(g))&&("field"===l?i.unshift(s):d[c]=s)}u&&Object.defineProperty(u,n.name,d),h=!0}function l(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function c(e){return"symbol"==typeof e?e:"".concat(e)}function u(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})}function f(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var p=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function m(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function E(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function T(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})},t&&(n[e]=t(n[e])))}function s(e,t){try{var r;(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(l,c):u(o[0][2],r)}catch(e){u(o[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function A(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:!1}:i?i(t):t}:i}}function C(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=g(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){var o,a,s;o=n,a=i,s=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:s})},a)})}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},I=function(e){return(I=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=I(e),n=0;n<r.length;n++)"default"!==r[n]&&p(t,e,r[n]);return w(t,e),t}function R(e){return e&&e.__esModule?e:{default:e}}function N(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function P(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function k(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function D(e,t,r){if(null!=t){var n,i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var M="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function L(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(e){return t(e),i()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function U(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,i,o){return r?t?".jsx":".js":!n||i&&o?n+i+"."+o.toLowerCase()+"js":e}):e}let x={__extends:r,__assign:n,__rest:i,__decorate:o,__param:a,__esDecorate:s,__runInitializers:l,__propKey:c,__setFunctionName:u,__metadata:d,__awaiter:h,__generator:f,__createBinding:p,__exportStar:m,__values:g,__read:y,__spread:_,__spreadArrays:E,__spreadArray:T,__await:b,__asyncGenerator:v,__asyncDelegator:A,__asyncValues:C,__makeTemplateObject:S,__importStar:O,__importDefault:R,__classPrivateFieldGet:N,__classPrivateFieldSet:P,__classPrivateFieldIn:k,__addDisposableResource:D,__disposeResources:L,__rewriteRelativeImportExtension:U}},73881,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbortError=void 0,r.AbortError=class extends Error{constructor(e){super(e),this.name="AbortError"}}},46573,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.log=function(e,...t){a.default.stderr.write(`${o.default.format(e,...t)}${i.EOL}`)};let n=e.r(41716),i=e.r(60526),o=n.__importDefault(e.r(12057)),a=n.__importDefault(e.r(59639))},80768,(e,t,r)=>{"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(46573),o="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0,a=[],s=[],l=[];o&&u(o);let c=Object.assign(e=>f(e),{enable:u,enabled:d,disable:function(){let e=n||"";return u(""),e},log:i.log});function u(e){for(let t of(n=e,a=[],s=[],e.split(",").map(e=>e.trim())))t.startsWith("-")?s.push(t.substring(1)):a.push(t);for(let e of l)e.enabled=d(e.namespace)}function d(e){if(e.endsWith("*"))return!0;for(let t of s)if(h(e,t))return!1;for(let t of a)if(h(e,t))return!0;return!1}function h(e,t){if(-1===t.indexOf("*"))return e===t;let r=t;if(-1!==t.indexOf("**")){let e=[],n="";for(let r of t)if("*"===r&&"*"===n)continue;else n=r,e.push(r);r=e.join("")}let n=0,i=0,o=r.length,a=e.length,s=-1,l=-1;for(;n<a&&i<o;)if("*"===r[i]){if(s=i,++i===o)return!0;for(;e[n]!==r[i];)if(++n===a)return!1;l=n,n++,i++;continue}else if(r[i]===e[n])i++,n++;else{if(!(s>=0)||(i=s+1,(n=l+1)===a))return!1;for(;e[n]!==r[i];)if(++n===a)return!1;l=n,n++,i++;continue}let c=n===e.length,u=i===r.length,d=i===r.length-1&&"*"===r[i];return c&&(u||d)}function f(e){let t=Object.assign(function(...r){t.enabled&&(r.length>0&&(r[0]=`${e} ${r[0]}`),t.log(...r))},{enabled:d(e),destroy:p,log:c.log,namespace:e,extend:m});return l.push(t),t}function p(){let e=l.indexOf(this);return e>=0&&(l.splice(e,1),!0)}function m(e){let t=f(`${this.namespace}:${e}`);return t.log=this.log,t}r.default=c},51343,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TypeSpecRuntimeLogger=void 0,r.createLoggerContext=l,r.setLogLevel=function(e){c.setLogLevel(e)},r.getLogLevel=function(){return c.getLogLevel()},r.createClientLogger=function(e){return c.createClientLogger(e)};let n=e.r(41716).__importDefault(e.r(80768)),i=["verbose","info","warning","error"],o={verbose:400,info:300,warning:200,error:100};function a(e,t){t.log=(...t)=>{e.log(...t)}}function s(e){return i.includes(e)}function l(e){let t,r=new Set,l="undefined"!=typeof process&&process.env&&process.env[e.logLevelEnvVarName]||void 0,c=(0,n.default)(e.namespace);function u(e){if(e&&!s(e))throw Error(`Unknown log level '${e}'. Acceptable values: ${i.join(",")}`);t=e;let o=[];for(let e of r)d(e)&&o.push(e.namespace);n.default.enable(o.join(","))}function d(e){return!!(t&&o[e.level]<=o[t])}function h(e,t){let i=Object.assign(e.extend(t),{level:t});if(a(e,i),d(i)){let e=n.default.disable();n.default.enable(e+","+i.namespace)}return r.add(i),i}return c.log=(...e)=>{n.default.log(...e)},l&&(s(l)?u(l):console.error(`${e.logLevelEnvVarName} set to unknown log level '${l}'; logging is not enabled. Acceptable values: ${i.join(", ")}.`)),{setLogLevel:u,getLogLevel:function(){return t},createClientLogger:function(e){let t=c.extend(e);return a(c,t),{error:h(t,"error"),warning:h(t,"warning"),info:h(t,"info"),verbose:h(t,"verbose")}},logger:c}}let c=l({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});r.TypeSpecRuntimeLogger=c.logger},91381,(e,t,r)=>{"use strict";function n(e){return e.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),r.createHttpHeaders=function(e){return new i(e)};class i{_headersMap;constructor(e){if(this._headersMap=new Map,e)for(let t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(n(e),{name:e,value:String(t).trim()})}get(e){return this._headersMap.get(n(e))?.value}has(e){return this._headersMap.has(n(e))}delete(e){this._headersMap.delete(n(e))}toJSON(e={}){let t={};if(e.preserveCase)for(let e of this._headersMap.values())t[e.name]=e.value;else for(let[e,r]of this._headersMap)t[e]=r.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(let t of e.values())yield[t.name,t.value]}(this._headersMap)}}},90044,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},1890,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},66680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},59085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.randomUUID=function(){return i()};let n=e.r(66680),i="function"==typeof globalThis?.crypto?.randomUUID?globalThis.crypto.randomUUID.bind(globalThis.crypto):n.randomUUID},7371,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createPipelineRequest=function(e){return new o(e)};let n=e.r(91381),i=e.r(59085);class o{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(e){this.url=e.url,this.body=e.body,this.headers=e.headers??(0,n.createHttpHeaders)(),this.method=e.method??"GET",this.timeout=e.timeout??0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=e.disableKeepAlive??!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=e.withCredentials??!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,i.randomUUID)(),this.allowInsecureConnection=e.allowInsecureConnection??!1,this.enableBrowserStreams=e.enableBrowserStreams??!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}}},83788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createEmptyPipeline=function(){return i.create()};let n=new Set(["Deserialize","Serialize","Retry","Sign"]);class i{_policies=[];_orderedPolicies;constructor(e){this._policies=e?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!n.has(t.phase))throw Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!n.has(t.afterPhase))throw Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){let t=[];return this._policies=this._policies.filter(r=>(!e.name||r.policy.name!==e.name)&&(!e.phase||r.options.phase!==e.phase)||(t.push(r.policy),!1)),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((e,t)=>r=>t.sendRequest(r,e),t=>e.sendRequest(t))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new i(this._policies)}static create(){return new i}orderPolicies(){let e=[],t=new Map;function r(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let n=r("Serialize"),i=r("None"),o=r("Deserialize"),a=r("Retry"),s=r("Sign"),l=[n,i,o,a,s];function c(e){return"Retry"===e?a:"Serialize"===e?n:"Deserialize"===e?o:"Sign"===e?s:i}for(let e of this._policies){let r=e.policy,n=e.options,i=r.name;if(t.has(i))throw Error("Duplicate policy names not allowed in pipeline");let o={policy:r,dependsOn:new Set,dependants:new Set};n.afterPhase&&(o.afterPhase=c(n.afterPhase),o.afterPhase.hasAfterPolicies=!0),t.set(i,o),c(n.phase).policies.add(o)}for(let e of this._policies){let{policy:r,options:n}=e,i=r.name,o=t.get(i);if(!o)throw Error(`Missing node for policy ${i}`);if(n.afterPolicies)for(let e of n.afterPolicies){let r=t.get(e);r&&(o.dependsOn.add(r),r.dependants.add(o))}if(n.beforePolicies)for(let e of n.beforePolicies){let r=t.get(e);r&&(r.dependsOn.add(o),o.dependants.add(r))}}function u(r){for(let n of(r.hasRun=!0,r.policies))if((!n.afterPhase||n.afterPhase.hasRun&&!n.afterPhase.policies.size)&&0===n.dependsOn.size){for(let t of(e.push(n.policy),n.dependants))t.dependsOn.delete(n);t.delete(n.policy.name),r.policies.delete(n)}}let d=0;for(;t.size>0;){d++;let t=e.length;if(!function(){for(let e of l){if(u(e),e.policies.size>0&&e!==i){i.hasRun||u(i);return}e.hasAfterPolicies&&u(i)}}(),e.length<=t&&d>1)throw Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}},80237,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObject=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}},13350,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isError=function(e){if((0,n.isObject)(e)){let t="string"==typeof e.name,r="string"==typeof e.message;return t&&r}return!1};let n=e.r(80237)},65888,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.custom=void 0,r.custom=e.r(12057).inspect.custom},92158,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Sanitizer=void 0;let n=e.r(80237),i="REDACTED",o=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],a=["api-version"];r.Sanitizer=class{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=o.concat(e),t=a.concat(t),this.allowedHeaderNames=new Set(e.map(e=>e.toLowerCase())),this.allowedQueryParameters=new Set(t.map(e=>e.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(e,r)=>{if(r instanceof Error)return{...r,name:r.name,message:r.message};if("headers"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e){if("response"===e)return;else if("operationSpec"===e)return;else if(Array.isArray(r)||(0,n.isObject)(r)){if(t.has(r))return"[Circular]";t.add(r)}return r}},2)}sanitizeUrl(e){if("string"!=typeof e||null===e||""===e)return e;let t=new URL(e);if(!t.search)return e;for(let[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,i);return t.toString()}sanitizeHeaders(e){let t={};for(let r of Object.keys(e))this.allowedHeaderNames.has(r.toLowerCase())?t[r]=e[r]:t[r]=i;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;let t={};for(let r of Object.keys(e))this.allowedQueryParameters.has(r.toLowerCase())?t[r]=e[r]:t[r]=i;return t}}},64571,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RestError=void 0,r.isRestError=function(e){return e instanceof a||(0,n.isError)(e)&&"RestError"===e.name};let n=e.r(13350),i=e.r(65888),o=new(e.r(92158)).Sanitizer;class a extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1});let r=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,i.custom,{value:()=>`RestError: ${this.message} 
 ${o.sanitize({...this,request:{...this.request,agent:r},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,a.prototype)}}r.RestError=a},31999,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.uint8ArrayToString=function(e,t){return Buffer.from(e).toString(t)},r.stringToUint8Array=function(e,t){return Buffer.from(e,t)}},47299,(e,t,r)=>{t.exports=e.x("node:http",()=>require("node:http"))},43698,(e,t,r)=>{t.exports=e.x("node:https",()=>require("node:https"))},27028,(e,t,r)=>{t.exports=e.x("node:zlib",()=>require("node:zlib"))},81111,(e,t,r)=>{t.exports=e.x("node:stream",()=>require("node:stream"))},96401,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logger=void 0,r.logger=(0,e.r(51343).createClientLogger)("ts-http-runtime")},21515,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBodyLength=E,r.createNodeHttpClient=function(){return new _};let n=e.r(41716),i=n.__importDefault(e.r(47299)),o=n.__importDefault(e.r(43698)),a=n.__importDefault(e.r(27028)),s=e.r(81111),l=e.r(73881),c=e.r(91381),u=e.r(64571),d=e.r(96401),h=e.r(92158),f={};function p(e){return e&&"function"==typeof e.pipe}function m(e){return!1===e.readable?Promise.resolve():new Promise(t=>{let r=()=>{t(),e.removeListener("close",r),e.removeListener("end",r),e.removeListener("error",r)};e.on("close",r),e.on("end",r),e.on("error",r)})}function g(e){return e&&"number"==typeof e.byteLength}class y extends s.Transform{loadedBytes=0;progressCallback;_transform(e,t,r){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),r()}catch(e){r(e)}}constructor(e){super(),this.progressCallback=e}}class _{cachedHttpAgent;cachedHttpsAgents=new WeakMap;async sendRequest(e){let t,r,n,i=new AbortController;if(e.abortSignal){if(e.abortSignal.aborted)throw new l.AbortError("The operation was aborted. Request has already been canceled.");t=e=>{"abort"===e.type&&i.abort()},e.abortSignal.addEventListener("abort",t)}e.timeout>0&&(r=setTimeout(()=>{let t=new h.Sanitizer;d.logger.info(`request to '${t.sanitizeUrl(e.url)}' timed out. canceling...`),i.abort()},e.timeout));let o=e.headers.get("Accept-Encoding"),s=o?.includes("gzip")||o?.includes("deflate"),f="function"==typeof e.body?e.body():e.body;if(f&&!e.headers.has("Content-Length")){let t=E(f);null!==t&&e.headers.set("Content-Length",t)}try{var g;if(f&&e.onUploadProgress){let t=e.onUploadProgress,r=new y(t);r.on("error",e=>{d.logger.error("Error in upload progress",e)}),p(f)?f.pipe(r):r.end(f),f=r}let t=await this.makeRequest(e,i,f);void 0!==r&&clearTimeout(r);let o=function(e){let t=(0,c.createHttpHeaders)();for(let r of Object.keys(e.headers)){let n=e.headers[r];Array.isArray(n)?n.length>0&&t.set(r,n[0]):n&&t.set(r,n)}return t}(t),l={status:t.statusCode??0,headers:o,request:e};if("HEAD"===e.method)return t.resume(),l;n=s?function(e,t){let r=t.get("Content-Encoding");if("gzip"===r){let t=a.default.createGunzip();return e.pipe(t),t}if("deflate"===r){let t=a.default.createInflate();return e.pipe(t),t}return e}(t,o):t;let h=e.onDownloadProgress;if(h){let e=new y(h);e.on("error",e=>{d.logger.error("Error in download progress",e)}),n.pipe(e),n=e}return e.streamResponseStatusCodes?.has(1/0)||e.streamResponseStatusCodes?.has(l.status)?l.readableStreamBody=n:l.bodyAsText=await (g=n,new Promise((e,t)=>{let r=[];g.on("data",e=>{Buffer.isBuffer(e)?r.push(e):r.push(Buffer.from(e))}),g.on("end",()=>{e(Buffer.concat(r).toString("utf8"))}),g.on("error",e=>{e&&e?.name==="AbortError"?t(e):t(new u.RestError(`Error reading response as text: ${e.message}`,{code:u.RestError.PARSE_ERROR}))})})),l}finally{if(e.abortSignal&&t){let r=Promise.resolve();p(f)&&(r=m(f));let i=Promise.resolve();p(n)&&(i=m(n)),Promise.all([r,i]).then(()=>{t&&e.abortSignal?.removeEventListener("abort",t)}).catch(e=>{d.logger.warning("Error when cleaning up abortListener on httpRequest",e)})}}}makeRequest(e,t,r){let n=new URL(e.url),a="https:"!==n.protocol;if(a&&!e.allowInsecureConnection)throw Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let s={agent:e.agent??this.getOrCreateAgent(e,a),hostname:n.hostname,path:`${n.pathname}${n.search}`,port:n.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0}),...e.requestOverrides};return new Promise((n,c)=>{let h=a?i.default.request(s,n):o.default.request(s,n);h.once("error",t=>{c(new u.RestError(t.message,{code:t.code??u.RestError.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{let e=new l.AbortError("The operation was aborted. Rejecting from abort signal callback while making request.");h.destroy(e),c(e)}),r&&p(r)?r.pipe(h):r?"string"==typeof r||Buffer.isBuffer(r)?h.end(r):g(r)?h.end(ArrayBuffer.isView(r)?Buffer.from(r.buffer):Buffer.from(r)):(d.logger.error("Unrecognized body type",r),c(new u.RestError("Unrecognized body type"))):h.end()})}getOrCreateAgent(e,t){let r=e.disableKeepAlive;if(t)return r?i.default.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new i.default.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(r&&!e.tlsSettings)return o.default.globalAgent;let t=e.tlsSettings??f,n=this.cachedHttpsAgents.get(t);return n&&!r===n.options.keepAlive||(d.logger.info("No cached TLS Agent exist, creating a new Agent"),n=new o.default.Agent({keepAlive:!r,...t}),this.cachedHttpsAgents.set(t,n)),n}}}function E(e){if(!e)return 0;if(Buffer.isBuffer(e))return e.length;if(p(e))return null;if(g(e))return e.byteLength;if("string"==typeof e)return Buffer.from(e).length;else return null}},63166,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultHttpClient=function(){return(0,n.createNodeHttpClient)()};let n=e.r(21515)},50590,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logPolicyName=void 0,r.logPolicy=function(e={}){let t=e.logger??n.logger.info,o=new i.Sanitizer({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:r.logPolicyName,async sendRequest(e,r){if(!t.enabled)return r(e);t(`Request: ${o.sanitize(e)}`);let n=await r(e);return t(`Response status code: ${n.status}`),t(`Headers: ${o.sanitize(n.headers)}`),n}}};let n=e.r(96401),i=e.r(92158);r.logPolicyName="logPolicy"},40609,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.redirectPolicyName=void 0,r.redirectPolicy=function(e={}){let{maxRetries:t=20}=e;return{name:r.redirectPolicyName,async sendRequest(e,r){let n=await r(e);return i(r,n,t)}}},r.redirectPolicyName="redirectPolicy";let n=["GET","HEAD"];async function i(e,t,r,o=0){let{request:a,status:s,headers:l}=t,c=l.get("location");if(c&&(300===s||301===s&&n.includes(a.method)||302===s&&n.includes(a.method)||303===s&&"POST"===a.method||307===s)&&o<r){let t=new URL(c,a.url);a.url=t.toString(),303===s&&(a.method="GET",a.headers.delete("Content-Length"),delete a.body),a.headers.delete("Authorization");let n=await e(a);return i(e,n,r,o+1)}return t}},14863,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHeaderName=function(){return"User-Agent"},r.setPlatformSpecificData=a;let n=e.r(41716),i=n.__importDefault(e.r(60526)),o=n.__importDefault(e.r(59639));async function a(e){if(o.default&&o.default.versions){let t=o.default.versions;t.bun?e.set("Bun",t.bun):t.deno?e.set("Deno",t.deno):t.node&&e.set("Node",t.node)}e.set("OS",`(${i.default.arch()}-${i.default.type()}-${i.default.release()})`)}},70398,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_RETRY_POLICY_COUNT=r.SDK_VERSION=void 0,r.SDK_VERSION="0.3.1",r.DEFAULT_RETRY_POLICY_COUNT=3},60994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUserAgentHeaderName=function(){return(0,n.getHeaderName)()},r.getUserAgentValue=o;let n=e.r(14863),i=e.r(70398);async function o(e){let t=new Map;t.set("ts-http-runtime",i.SDK_VERSION),await (0,n.setPlatformSpecificData)(t);let r=function(e){let t=[];for(let[r,n]of e){let e=n?`${r}/${n}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r}},47229,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.userAgentPolicyName=void 0,r.userAgentPolicy=function(e={}){let t=(0,n.getUserAgentValue)(e.userAgentPrefix);return{name:r.userAgentPolicyName,sendRequest:async(e,r)=>(e.headers.has(i)||e.headers.set(i,await t),r(e))}};let n=e.r(60994),i=(0,n.getUserAgentHeaderName)();r.userAgentPolicyName="userAgentPolicy"},2303,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decompressResponsePolicyName=void 0,r.decompressResponsePolicy=function(){return{name:r.decompressResponsePolicyName,sendRequest:async(e,t)=>("HEAD"!==e.method&&e.headers.set("Accept-Encoding","gzip,deflate"),t(e))}},r.decompressResponsePolicyName="decompressResponsePolicy"},22783,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRandomIntegerInclusive=function(e,t){return e=Math.ceil(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e}},53757,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateRetryDelay=function(e,t){let r=t.retryDelayInMs*Math.pow(2,e),i=Math.min(t.maxRetryDelayInMs,r);return{retryAfterInMs:i/2+(0,n.getRandomIntegerInclusive)(0,i/2)}};let n=e.r(22783)},64583,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.delay=function(e,t,r){return new Promise((i,o)=>{let a,s,l=()=>o(new n.AbortError(r?.abortErrorMsg?r?.abortErrorMsg:"The operation was aborted.")),c=()=>{r?.abortSignal&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(a&&clearTimeout(a),c(),l()),r?.abortSignal&&r.abortSignal.aborted)return l();a=setTimeout(()=>{c(),i(t)},e),r?.abortSignal&&r.abortSignal.addEventListener("abort",s)})},r.parseHeaderValueAsNumber=function(e,t){let r=e.headers.get(t);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n};let n=e.r(73881)},43700,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isThrottlingRetryResponse=function(e){return Number.isFinite(a(e))},r.throttlingRetryStrategy=function(){return{name:"throttlingRetryStrategy",retry({response:e}){let t=a(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}};let n=e.r(64583),i="Retry-After",o=["retry-after-ms","x-ms-retry-after-ms",i];function a(e){if(e&&[429,503].includes(e.status))try{for(let t of o){let r=(0,n.parseHeaderValueAsNumber)(e,t);if(0===r||r){let e=t===i?1e3:1;return r*e}}let t=e.headers.get(i);if(!t)return;let r=Date.parse(t)-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch{return}}},17729,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exponentialRetryStrategy=function(e={}){let t=e.retryDelayInMs??1e3,r=e.maxRetryDelayInMs??64e3;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:l,responseError:c}){let u=a(c),d=u&&e.ignoreSystemErrors,h=o(l),f=h&&e.ignoreHttpStatusCodes;return l&&((0,i.isThrottlingRetryResponse)(l)||!h)||f||d?{skipStrategy:!0}:!c||u||h?(0,n.calculateRetryDelay)(s,{retryDelayInMs:t,maxRetryDelayInMs:r}):{errorToThrow:c}}}},r.isExponentialRetryResponse=o,r.isSystemError=a;let n=e.r(53757),i=e.r(43700);function o(e){return!!(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}function a(e){return!!e&&("ETIMEDOUT"===e.code||"ESOCKETTIMEDOUT"===e.code||"ECONNREFUSED"===e.code||"ECONNRESET"===e.code||"ENOENT"===e.code||"ENOTFOUND"===e.code)}},5780,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.retryPolicy=function(e,t={maxRetries:a.DEFAULT_RETRY_POLICY_COUNT}){let r=t.logger||s;return{name:"retryPolicy",async sendRequest(o,s){let l,c,u=-1;e:for(;;){u+=1,l=void 0,c=void 0;try{r.info(`Retry ${u}: Attempting to send request`,o.requestId),l=await s(o),r.info(`Retry ${u}: Received a response from request`,o.requestId)}catch(e){if(r.error(`Retry ${u}: Received an error from request`,o.requestId),c=e,!e||"RestError"!==c.name)throw e;l=c.response}if(o.abortSignal?.aborted)throw r.error(`Retry ${u}: Request aborted.`),new i.AbortError;if(u>=(t.maxRetries??a.DEFAULT_RETRY_POLICY_COUNT)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(l)return l;throw Error("Maximum retries reached with no response or error to throw")}for(let t of(r.info(`Retry ${u}: Processing ${e.length} retry strategies.`),e)){let e=t.logger||r;e.info(`Retry ${u}: Processing retry strategy ${t.name}.`);let i=t.retry({retryCount:u,response:l,responseError:c});if(i.skipStrategy){e.info(`Retry ${u}: Skipped.`);continue}let{errorToThrow:a,retryAfterInMs:s,redirectTo:d}=i;if(a)throw e.error(`Retry ${u}: Retry strategy ${t.name} throws error:`,a),a;if(s||0===s){e.info(`Retry ${u}: Retry strategy ${t.name} retries after ${s}`),await (0,n.delay)(s,void 0,{abortSignal:o.abortSignal});continue e}if(d){e.info(`Retry ${u}: Retry strategy ${t.name} redirects to ${d}`),o.url=d;continue e}}if(c)throw r.info("None of the retry strategies could work with the received error. Throwing it."),c;if(l)return r.info("None of the retry strategies could work with the received response. Returning it."),l}}}};let n=e.r(64583),i=e.r(73881),o=e.r(51343),a=e.r(70398),s=(0,o.createClientLogger)("ts-http-runtime retryPolicy")},58279,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultRetryPolicyName=void 0,r.defaultRetryPolicy=function(e={}){return{name:r.defaultRetryPolicyName,sendRequest:(0,o.retryPolicy)([(0,i.throttlingRetryStrategy)(),(0,n.exponentialRetryStrategy)(e)],{maxRetries:e.maxRetries??a.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};let n=e.r(17729),i=e.r(43700),o=e.r(5780),a=e.r(70398);r.defaultRetryPolicyName="defaultRetryPolicy"},54618,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isReactNative=r.isNodeRuntime=r.isNodeLike=r.isBun=r.isDeno=r.isWebWorker=r.isBrowser=void 0,r.isBrowser=!1,r.isWebWorker="object"==typeof self&&"function"==typeof self?.importScripts&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),r.isDeno="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno,r.isBun="undefined"!=typeof Bun&&void 0!==Bun.version,r.isNodeLike=void 0!==globalThis.process&&!!globalThis.process.version&&!!globalThis.process.versions?.node,r.isNodeRuntime=r.isNodeLike&&!r.isBun&&!r.isDeno,r.isReactNative="undefined"!=typeof navigator&&navigator?.product==="ReactNative"},41973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formDataPolicyName=void 0,r.formDataPolicy=function(){return{name:r.formDataPolicyName,async sendRequest(e,t){if(i.isNodeLike&&"undefined"!=typeof FormData&&e.body instanceof FormData&&(e.formData=function(e){let t={};for(let[r,n]of e.entries())t[r]??=[],t[r].push(n);return t}(e.body),e.body=void 0),e.formData){let t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?e.body=function(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,e.toString());else t.append(r,n.toString());return t.toString()}(e.formData):await a(e.formData,e),e.formData=void 0}return t(e)}}};let n=e.r(31999),i=e.r(54618),o=e.r(91381);async function a(e,t){let r=t.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;t.headers.set("Content-Type",r??"multipart/form-data");let i=[];for(let[t,r]of Object.entries(e))for(let e of Array.isArray(r)?r:[r])if("string"==typeof e)i.push({headers:(0,o.createHttpHeaders)({"Content-Disposition":`form-data; name="${t}"`}),body:(0,n.stringToUint8Array)(e,"utf-8")});else if(null==e||"object"!=typeof e)throw Error(`Unexpected value for key ${t}: ${e}. Value should be serialized to string first.`);else{let r=e.name||"blob",n=(0,o.createHttpHeaders)();n.set("Content-Disposition",`form-data; name="${t}"; filename="${r}"`),n.set("Content-Type",e.type||"application/octet-stream"),i.push({headers:n,body:e})}t.multipartBody={parts:i}}r.formDataPolicyName="formDataPolicy"},49719,(e,t,r)=>{t.exports=e.x("assert",()=>require("assert"))},44200,(e,t,r)=>{function n(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var r,i,o,a,s=typeof e;if("string"===s&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(c){var u=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*u;case"weeks":case"week":case"w":return 6048e5*u;case"days":case"day":case"d":return 864e5*u;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*u;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*u;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:break}}}return}if("number"===s&&isFinite(e)){return t.long?(i=Math.abs(r=e))>=864e5?n(r,i,864e5,"day"):i>=36e5?n(r,i,36e5,"hour"):i>=6e4?n(r,i,6e4,"minute"):i>=1e3?n(r,i,1e3,"second"):r+" ms":(a=Math.abs(o=e))>=864e5?Math.round(o/864e5)+"d":a>=36e5?Math.round(o/36e5)+"h":a>=6e4?Math.round(o/6e4)+"m":a>=1e3?Math.round(o/1e3)+"s":o+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},27558,(e,t,r)=>{t.exports=function(t){function r(e){let t,i,o,a=null;function s(...e){if(!s.enabled)return;let n=Number(new Date);s.diff=n-(t||n),s.prev=t,s.curr=n,t=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return"%";i++;let o=r.formatters[n];if("function"==typeof o){let r=e[i];t=o.call(s,r),e.splice(i,1),i--}return t}),r.formatArgs.call(s,e),(s.log||r.log).apply(s,e)}return s.namespace=e,s.useColors=r.useColors(),s.color=r.selectColor(e),s.extend=n,s.destroy=r.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==r.namespaces&&(i=r.namespaces,o=r.enabled(e)),o),set:e=>{a=e}}),"function"==typeof r.init&&r.init(s),s}function n(e,t){let n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function i(e,t){let r=0,n=0,i=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,o=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){let e=[...r.names,...r.skips.map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){for(let t of(r.save(e),r.namespaces=e,r.names=[],r.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===t[0]?r.skips.push(t.slice(1)):r.names.push(t)},r.enabled=function(e){for(let t of r.skips)if(i(e,t))return!1;for(let t of r.names)if(i(e,t))return!0;return!1},r.humanize=e.r(44200),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},70722,(e,t,r)=>{t.exports=e.x("tty",()=>require("tty"))},38308,(e,t,r)=>{"use strict";t.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return -1!==n&&(-1===i||n<i)}},6173,(e,t,r)=>{"use strict";let n;e.r(46786);let i=e.r(70722),o=e.r(38308),{env:a}=process;function s(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===n)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!t&&void 0===n)return 0;let r=n||0;if("dumb"===a.TERM)return r;if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in a)||"codeship"===a.CI_NAME?1:r;if("TEAMCITY_VERSION"in a)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION);if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){let e=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:r}o("no-color")||o("no-colors")||o("color=false")||o("color=never")?n=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(n=1),"FORCE_COLOR"in a&&(n="true"===a.FORCE_COLOR?1:"false"===a.FORCE_COLOR?0:0===a.FORCE_COLOR.length?1:Math.min(parseInt(a.FORCE_COLOR,10),3)),t.exports={supportsColor:function(e){return s(l(e,e&&e.isTTY))},stdout:s(l(!0,i.isatty(1))),stderr:s(l(!0,i.isatty(2)))}},33102,(e,t,r)=>{let n=e.r(70722),i=e.r(24361);r.init=function(e){e.inspectOpts={};let t=Object.keys(r.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=r.inspectOpts[t[n]]},r.log=function(...e){return process.stderr.write(i.formatWithOptions(r.inspectOpts,...e)+"\n")},r.formatArgs=function(e){let{namespace:n,useColors:i}=this;if(i){let r=this.color,i="\x1b[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${n} \u001B[0m`;e[0]=o+e[0].split("\n").join("\n"+o),e.push(i+"m+"+t.exports.humanize(this.diff)+"\x1b[0m")}else e[0]=(r.inspectOpts.hideDate?"":new Date().toISOString()+" ")+n+" "+e[0]},r.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},r.load=function(){return process.env.DEBUG},r.useColors=function(){return"colors"in r.inspectOpts?!!r.inspectOpts.colors:n.isatty(process.stderr.fd)},r.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),r.colors=[6,2,3,4,5,1];try{let t=e.r(6173);t&&(t.stderr||t).level>=2&&(r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}r.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.exports=e.r(27558)(r);let{formatters:o}=t.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},74630,(e,t,r)=>{r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),e.splice(i,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){let e;try{e=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},r.useColors=function(){let e;return!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),r.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e.r(27558)(r);let{formatters:n}=t.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},18986,(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?t.exports=e.r(74630):t.exports=e.r(33102)},21517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},24836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},98735,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.req=r.json=r.toBuffer=void 0;let a=o(e.r(21517)),s=o(e.r(24836));async function l(e){let t=0,r=[];for await(let n of e)t+=n.length,r.push(n);return Buffer.concat(r,t)}r.toBuffer=l,r.json=async function(e){let t=(await l(e)).toString("utf8");try{return JSON.parse(t)}catch(e){throw e.message+=` (input: ${t})`,e}},r.req=function(e,t={}){let r=(("string"==typeof e?e:e.href).startsWith("https:")?s:a).request(e,t),n=new Promise((e,t)=>{r.once("response",e).once("error",t).end()});return r.then=n.then.bind(n),r}},50860,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.Agent=void 0;let s=o(e.r(4446)),l=o(e.r(21517)),c=e.r(24836);a(e.r(98735),r);let u=Symbol("AgentBaseInternalState");class d extends l.Agent{constructor(e){super(e),this[u]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}let{stack:t}=Error();return"string"==typeof t&&t.split("\n").some(e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:"))}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let t=new s.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||null===t)return;let r=this.sockets[e],n=r.indexOf(t);-1!==n&&(r.splice(n,1),this.totalSocketCount--,0===r.length&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?c.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,r){let n={...t,secureEndpoint:this.isSecureEndpoint(t)},i=this.getName(n),o=this.incrementSockets(i);Promise.resolve().then(()=>this.connect(e,n)).then(a=>{if(this.decrementSockets(i,o),a instanceof l.Agent)try{return a.addRequest(e,n)}catch(e){return r(e)}this[u].currentSocket=a,super.createSocket(e,t,r)},e=>{this.decrementSockets(i,o),r(e)})}createConnection(){let e=this[u].currentSocket;if(this[u].currentSocket=void 0,!e)throw Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[u].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(e){this[u]&&(this[u].defaultPort=e)}get protocol(){return this[u].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[u]&&(this[u].protocol=e)}}r.Agent=d},92509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},15359,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.parseProxyResponse=void 0;let i=(0,n(e.r(18986)).default)("https-proxy-agent:parse-proxy-response");r.parseProxyResponse=function(e){return new Promise((t,r)=>{let n=0,o=[];function a(){let l=e.read();l?function(l){o.push(l),n+=l.length;let c=Buffer.concat(o,n),u=c.indexOf("\r\n\r\n");if(-1===u){i("have not received end of HTTP headers yet..."),a();return}let d=c.slice(0,u).toString("ascii").split("\r\n"),h=d.shift();if(!h)return e.destroy(),r(Error("No header received from proxy CONNECT response"));let f=h.split(" "),p=+f[1],m=f.slice(2).join(" "),g={};for(let t of d){if(!t)continue;let n=t.indexOf(":");if(-1===n)return e.destroy(),r(Error(`Invalid header from proxy CONNECT response: "${t}"`));let i=t.slice(0,n).toLowerCase(),o=t.slice(n+1).trimStart(),a=g[i];"string"==typeof a?g[i]=[a,o]:Array.isArray(a)?a.push(o):g[i]=o}i("got proxy server response: %o %o",h,g),s(),t({connect:{statusCode:p,statusText:m,headers:g},buffered:c})}(l):e.once("readable",a)}function s(){e.removeListener("end",l),e.removeListener("error",c),e.removeListener("readable",a)}function l(){s(),i("onend"),r(Error("Proxy connection ended before receiving CONNECT response"))}function c(e){s(),i("onerror %o",e),r(e)}e.on("error",c),e.on("end",l),a()})}},86306,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.HttpsProxyAgent=void 0;let s=o(e.r(4446)),l=o(e.r(55004)),c=a(e.r(49719)),u=a(e.r(18986)),d=e.r(50860),h=e.r(92509),f=e.r(15359),p=(0,u.default)("https-proxy-agent"),m=e=>void 0===e.servername&&e.host&&!s.isIP(e.host)?{...e,servername:e.host}:e;class g extends d.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy="string"==typeof e?new h.URL(e):e,this.proxyHeaders=t?.headers??{},p("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),n=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?_(t,"headers"):null,host:r,port:n}}async connect(e,t){let r,{proxy:n}=this;if(!t.host)throw TypeError('No "host" provided');"https:"===n.protocol?(p("Creating `tls.Socket`: %o",this.connectOpts),r=l.connect(m(this.connectOpts))):(p("Creating `net.Socket`: %o",this.connectOpts),r=s.connect(this.connectOpts));let i="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},o=s.isIPv6(t.host)?`[${t.host}]`:t.host,a=`CONNECT ${o}:${t.port} HTTP/1.1\r
`;if(n.username||n.password){let e=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;i["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}for(let e of(i.Host=`${o}:${t.port}`,i["Proxy-Connection"]||(i["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(i)))a+=`${e}: ${i[e]}\r
`;let u=(0,f.parseProxyResponse)(r);r.write(`${a}\r
`);let{connect:d,buffered:h}=await u;if(e.emit("proxyConnect",d),this.emit("proxyConnect",d,e),200===d.statusCode)return(e.once("socket",y),t.secureEndpoint)?(p("Upgrading socket connection to TLS"),l.connect({..._(m(t),"host","path","port"),socket:r})):r;r.destroy();let g=new s.Socket({writable:!1});return g.readable=!0,e.once("socket",e=>{p("Replaying proxy buffer for failed request"),(0,c.default)(e.listenerCount("data")>0),e.push(h),e.push(null)}),g}}function y(e){e.resume()}function _(e,...t){let r,n={};for(r in e)t.includes(r)||(n[r]=e[r]);return n}g.protocols=["http","https"],r.HttpsProxyAgent=g},59205,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.HttpProxyAgent=void 0;let s=o(e.r(4446)),l=o(e.r(55004)),c=a(e.r(18986)),u=e.r(27699),d=e.r(50860),h=e.r(92509),f=(0,c.default)("http-proxy-agent");class p extends d.Agent{constructor(e,t){super(t),this.proxy="string"==typeof e?new h.URL(e):e,this.proxyHeaders=t?.headers??{},f("Creating new HttpProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),n=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={...t?function(e,...t){let r,n={};for(r in e)t.includes(r)||(n[r]=e[r]);return n}(t,"headers"):null,host:r,port:n}}addRequest(e,t){e._header=null,this.setRequestProps(e,t),super.addRequest(e,t)}setRequestProps(e,t){let{proxy:r}=this,n=t.secureEndpoint?"https:":"http:",i=e.getHeader("host")||"localhost",o=`${n}//${i}`,a=new h.URL(e.path,o);80!==t.port&&(a.port=String(t.port)),e.path=String(a);let s="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders};if(r.username||r.password){let e=`${decodeURIComponent(r.username)}:${decodeURIComponent(r.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}for(let t of(s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(s))){let r=s[t];r&&e.setHeader(t,r)}}async connect(e,t){let r,n,i;return e._header=null,e.path.includes("://")||this.setRequestProps(e,t),f("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(f("Patching connection write() output buffer with updated header"),n=(r=e.outputData[0].data).indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+r.substring(n),f("Output buffer: %o",e.outputData[0].data)),"https:"===this.proxy.protocol?(f("Creating `tls.Socket`: %o",this.connectOpts),i=l.connect(this.connectOpts)):(f("Creating `net.Socket`: %o",this.connectOpts),i=s.connect(this.connectOpts)),await (0,u.once)(i,"connect"),i}}p.protocols=["http","https"],r.HttpProxyAgent=p},80735,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.globalNoProxyList=r.proxyPolicyName=void 0,r.loadNoProxy=u,r.getDefaultProxySettings=function(e){if(!e&&!(e=c()))return;let t=new URL(e);return{host:(t.protocol?t.protocol+"//":"")+t.hostname,port:Number.parseInt(t.port||"80"),username:t.username,password:t.password}},r.proxyPolicy=function(e,t){a||r.globalNoProxyList.push(...u());let n=e?d(e):function(){let e=c();return e?new URL(e):void 0}(),i={};return{name:r.proxyPolicyName,sendRequest:async(e,o)=>(!e.proxySettings&&n&&!function(e,t,r){if(0===t.length)return!1;let n=new URL(e).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let e of t)"."===e[0]?n.endsWith(e)?i=!0:n.length===e.length-1&&n===e.slice(1)&&(i=!0):n===e&&(i=!0);return r?.set(n,i),i}(e.url,t?.customNoProxyList??r.globalNoProxyList,t?.customNoProxyList?void 0:s)?h(e,i,n):e.proxySettings&&h(e,i,d(e.proxySettings)),o(e))}};let n=e.r(86306),i=e.r(59205),o=e.r(96401);r.proxyPolicyName="proxyPolicy",r.globalNoProxyList=[];let a=!1,s=new Map;function l(e){return process.env[e]?process.env[e]:process.env[e.toLowerCase()]?process.env[e.toLowerCase()]:void 0}function c(){let e=l("HTTPS_PROXY"),t=l("ALL_PROXY"),r=l("HTTP_PROXY");return e||t||r}function u(){let e=l("NO_PROXY");return(a=!0,e)?e.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function d(e){let t;try{t=new URL(e.host)}catch{throw Error(`Expecting a valid host string in proxy settings, but found "${e.host}".`)}return t.port=String(e.port),e.username&&(t.username=e.username),e.password&&(t.password=e.password),t}function h(e,t,r){if(e.agent)return;let a="https:"!==new URL(e.url).protocol;e.tlsSettings&&o.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=e.headers.toJSON();a?(t.httpProxyAgent||(t.httpProxyAgent=new i.HttpProxyAgent(r,{headers:s})),e.agent=t.httpProxyAgent):(t.httpsProxyAgent||(t.httpsProxyAgent=new n.HttpsProxyAgent(r,{headers:s})),e.agent=t.httpsProxyAgent)}},28241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.agentPolicyName=void 0,r.agentPolicy=function(e){return{name:r.agentPolicyName,sendRequest:async(t,r)=>(t.agent||(t.agent=e),r(t))}},r.agentPolicyName="agentPolicy"},36066,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tlsPolicyName=void 0,r.tlsPolicy=function(e){return{name:r.tlsPolicyName,sendRequest:async(t,r)=>(t.tlsSettings||(t.tlsSettings=e),r(t))}},r.tlsPolicyName="tlsPolicy"},98677,(e,t,r)=>{"use strict";function n(e){return!!(e&&"function"==typeof e.pipe)}function i(e){return!!(e&&"function"==typeof e.getReader&&"function"==typeof e.tee)}function o(e){return n(e)||i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeReadableStream=n,r.isWebReadableStream=i,r.isBinaryBody=function(e){return void 0!==e&&(e instanceof Uint8Array||o(e)||"function"==typeof e||e instanceof Blob)},r.isReadableStream=o,r.isBlob=function(e){return"function"==typeof e.stream}},75183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concat=l;let n=e.r(88947),i=e.r(98677);async function*o(){let e=this.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}function a(e){return e instanceof ReadableStream?(e[Symbol.asyncIterator]||(e[Symbol.asyncIterator]=o.bind(e)),e.values||(e.values=o.bind(e)),n.Readable.fromWeb(e)):e}function s(e){return e instanceof Uint8Array?n.Readable.from(Buffer.from(e)):(0,i.isBlob)(e)?a(e.stream()):a(e)}async function l(e){return function(){let t=e.map(e=>"function"==typeof e?e():e).map(s);return n.Readable.from(async function*(){for(let e of t)for await(let t of e)yield t}())}}},99503,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.multipartPolicyName=void 0,r.multipartPolicy=function(){return{name:r.multipartPolicyName,async sendRequest(e,t){if(!e.multipartBody)return t(e);if(e.body)throw Error("multipartBody and regular body cannot be set at the same time");let r=e.multipartBody.boundary,n=e.headers.get("Content-Type")??"multipart/mixed",i=n.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!i)throw Error(`Got multipart request body, but content-type header was not multipart: ${n}`);let[,a,c]=i;if(c&&r&&c!==r)throw Error(`Multipart boundary was specified as ${c} in the header, but got ${r} in the request body`);if(r??=c){var u=r;if(u.length>70)throw Error(`Multipart boundary "${u}" exceeds maximum length of 70 characters`);if(Array.from(u).some(e=>!l.has(e)))throw Error(`Multipart boundary "${u}" contains invalid characters`)}else r=`----AzSDKFormBoundary${(0,o.randomUUID)()}`;return e.headers.set("Content-Type",`${a}; boundary=${r}`),await s(e,e.multipartBody.parts,r),e.multipartBody=void 0,t(e)}}};let n=e.r(31999),i=e.r(98677),o=e.r(59085),a=e.r(75183);async function s(e,t,r){let o=[(0,n.stringToUint8Array)(`--${r}`,"utf-8"),...t.flatMap(e=>[(0,n.stringToUint8Array)("\r\n","utf-8"),(0,n.stringToUint8Array)(function(e){let t="";for(let[r,n]of e)t+=`${r}: ${n}\r
`;return t}(e.headers),"utf-8"),(0,n.stringToUint8Array)("\r\n","utf-8"),e.body,(0,n.stringToUint8Array)(`\r
--${r}`,"utf-8")]),(0,n.stringToUint8Array)("--\r\n\r\n","utf-8")],s=function(e){let t=0;for(let r of e){let e=r instanceof Uint8Array?r.byteLength:(0,i.isBlob)(r)?-1===r.size?void 0:r.size:void 0;if(void 0===e)return;t+=e}return t}(o);s&&e.headers.set("Content-Length",s),e.body=await (0,a.concat)(o)}r.multipartPolicyName="multipartPolicy";let l=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?")},94894,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createPipelineFromOptions=function(e){let t=(0,i.createEmptyPipeline)();return u.isNodeLike&&(e.agent&&t.addPolicy((0,h.agentPolicy)(e.agent)),e.tlsOptions&&t.addPolicy((0,f.tlsPolicy)(e.tlsOptions)),t.addPolicy((0,d.proxyPolicy)(e.proxyOptions)),t.addPolicy((0,s.decompressResponsePolicy)())),t.addPolicy((0,c.formDataPolicy)(),{beforePolicies:[p.multipartPolicyName]}),t.addPolicy((0,a.userAgentPolicy)(e.userAgentOptions)),t.addPolicy((0,p.multipartPolicy)(),{afterPhase:"Deserialize"}),t.addPolicy((0,l.defaultRetryPolicy)(e.retryOptions),{phase:"Retry"}),u.isNodeLike&&t.addPolicy((0,o.redirectPolicy)(e.redirectOptions),{afterPhase:"Retry"}),t.addPolicy((0,n.logPolicy)(e.loggingOptions),{afterPhase:"Sign"}),t};let n=e.r(50590),i=e.r(83788),o=e.r(40609),a=e.r(47229),s=e.r(2303),l=e.r(58279),c=e.r(41973),u=e.r(54618),d=e.r(80735),h=e.r(28241),f=e.r(36066),p=e.r(99503)},66656,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apiVersionPolicyName=void 0,r.apiVersionPolicy=function(e){return{name:r.apiVersionPolicyName,sendRequest:(t,r)=>{let n=new URL(t.url);return!n.searchParams.get("api-version")&&e.apiVersion&&(t.url=`${t.url}${Array.from(n.searchParams.keys()).length>0?"&":"?"}api-version=${e.apiVersion}`),r(t)}}},r.apiVersionPolicyName="ApiVersionPolicy"},63182,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isOAuth2TokenCredential=function(e){return"getOAuth2Token"in e},r.isBearerTokenCredential=function(e){return"getBearerToken"in e},r.isBasicCredential=function(e){return"username"in e&&"password"in e},r.isApiKeyCredential=function(e){return"key"in e}},82377,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ensureSecureConnection=function(e,t){if(!e.url.toLowerCase().startsWith("https://"))if(function(e,t){if(t.allowInsecureConnection&&e.allowInsecureConnection){let t=new URL(e.url);if("localhost"===t.hostname||"127.0.0.1"===t.hostname)return!0}return!1}(e,t)){let e="Sending token over insecure transport. Assume any token issued is compromised.";n.logger.warning(e),"function"!=typeof process?.emitWarning||i||(i=!0,process.emitWarning(e))}else throw Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")};let n=e.r(96401),i=!1},46155,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apiKeyAuthenticationPolicyName=void 0,r.apiKeyAuthenticationPolicy=function(e){return{name:r.apiKeyAuthenticationPolicyName,async sendRequest(t,r){(0,n.ensureSecureConnection)(t,e);let i=(t.authSchemes??e.authSchemes)?.find(e=>"apiKey"===e.kind);if(!i)return r(t);if("header"!==i.apiKeyLocation)throw Error(`Unsupported API key location: ${i.apiKeyLocation}`);return t.headers.set(i.name,e.credential.key),r(t)}}};let n=e.r(82377);r.apiKeyAuthenticationPolicyName="apiKeyAuthenticationPolicy"},62033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.basicAuthenticationPolicyName=void 0,r.basicAuthenticationPolicy=function(e){return{name:r.basicAuthenticationPolicyName,async sendRequest(t,r){if((0,i.ensureSecureConnection)(t,e),!(t.authSchemes??e.authSchemes)?.find(e=>"http"===e.kind&&"basic"===e.scheme))return r(t);let{username:o,password:a}=e.credential,s=(0,n.uint8ArrayToString)((0,n.stringToUint8Array)(`${o}:${a}`,"utf-8"),"base64");return t.headers.set("Authorization",`Basic ${s}`),r(t)}}};let n=e.r(31999),i=e.r(82377);r.basicAuthenticationPolicyName="bearerAuthenticationPolicy"},72539,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bearerAuthenticationPolicyName=void 0,r.bearerAuthenticationPolicy=function(e){return{name:r.bearerAuthenticationPolicyName,async sendRequest(t,r){if((0,n.ensureSecureConnection)(t,e),!(t.authSchemes??e.authSchemes)?.find(e=>"http"===e.kind&&"bearer"===e.scheme))return r(t);let i=await e.credential.getBearerToken({abortSignal:t.abortSignal});return t.headers.set("Authorization",`Bearer ${i}`),r(t)}}};let n=e.r(82377);r.bearerAuthenticationPolicyName="bearerAuthenticationPolicy"},10093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.oauth2AuthenticationPolicyName=void 0,r.oauth2AuthenticationPolicy=function(e){return{name:r.oauth2AuthenticationPolicyName,async sendRequest(t,r){(0,n.ensureSecureConnection)(t,e);let i=(t.authSchemes??e.authSchemes)?.find(e=>"oauth2"===e.kind);if(!i)return r(t);let o=await e.credential.getOAuth2Token(i.flows,{abortSignal:t.abortSignal});return t.headers.set("Authorization",`Bearer ${o}`),r(t)}}};let n=e.r(82377);r.oauth2AuthenticationPolicyName="oauth2AuthenticationPolicy"},71407,(e,t,r)=>{"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultPipeline=function(e={}){let t=(0,o.createPipelineFromOptions)(e);t.addPolicy((0,a.apiVersionPolicy)(e));let{credential:r,authSchemes:n,allowInsecureConnection:i}=e;return r&&((0,s.isApiKeyCredential)(r)?t.addPolicy((0,l.apiKeyAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:i})):(0,s.isBasicCredential)(r)?t.addPolicy((0,c.basicAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:i})):(0,s.isBearerTokenCredential)(r)?t.addPolicy((0,u.bearerAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:i})):(0,s.isOAuth2TokenCredential)(r)&&t.addPolicy((0,d.oauth2AuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:i}))),t},r.getCachedDefaultHttpsClient=function(){return n||(n=(0,i.createDefaultHttpClient)()),n};let i=e.r(63166),o=e.r(94894),a=e.r(66656),s=e.r(63182),l=e.r(46155),c=e.r(62033),u=e.r(72539),d=e.r(10093)},9526,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buildBodyPart=c,r.buildMultipartBody=function(e){return{parts:e.map(c)}};let n=e.r(64571),i=e.r(91381),o=e.r(31999),a=e.r(98677);function s(e,t){if(e.headers){let r=Object.keys(e.headers).find(e=>e.toLowerCase()===t.toLowerCase());if(r)return e.headers[r]}}function l(e){return JSON.stringify(e)}function c(e){let t=function(e){let t=s(e,"content-type");if(t)return t;if(null===e.contentType)return;if(e.contentType)return e.contentType;let{body:r}=e;if(null!=r)return"string"==typeof r||"number"==typeof r||"boolean"==typeof r?"text/plain; charset=UTF-8":r instanceof Blob?r.type||"application/octet-stream":(0,a.isBinaryBody)(r)?"application/octet-stream":"application/json"}(e),r=function(e){let t,r=s(e,"content-disposition");if(r)return r;if(void 0===e.dispositionType&&void 0===e.name&&void 0===e.filename)return;let n=e.dispositionType??"form-data";if(e.name&&(n+=`; name=${l(e.name)}`),e.filename)t=e.filename;else if("undefined"!=typeof File&&e.body instanceof File){let r=e.body.name;""!==r&&(t=r)}return t&&(n+=`; filename=${l(t)}`),n}(e),c=(0,i.createHttpHeaders)(e.headers??{});return t&&c.set("content-type",t),r&&c.set("content-disposition",r),{headers:c,body:function(e,t){if(void 0===e)return new Uint8Array([]);if((0,a.isBinaryBody)(e))return e;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return(0,o.stringToUint8Array)(String(e),"utf-8");if(t&&/application\/(.+\+)?json(;.+)?/i.test(String(t)))return(0,o.stringToUint8Array)(JSON.stringify(e),"utf-8");throw new n.RestError(`Unsupported body/content-type combination: ${e}, ${t}`)}(e.body,t)}}},14221,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sendRequest=c;let n=e.r(64571),i=e.r(91381),o=e.r(7371),a=e.r(71407),s=e.r(98677),l=e.r(9526);async function c(e,t,r,u={},d){let h=d??(0,a.getCachedDefaultHttpsClient)(),f=function(e,t,r={}){let n=function(e={}){return e.contentType??e.headers?.["content-type"]??function(e){if(ArrayBuffer.isView(e))return"application/octet-stream";if("string"==typeof e)try{JSON.parse(e)}catch(e){return}return"application/json"}(e.body)}(r),{body:a,multipartBody:c}=function(e,t=""){if(void 0===e)return{body:void 0};if("undefined"!=typeof FormData&&e instanceof FormData||(0,s.isReadableStream)(e))return{body:e};if(ArrayBuffer.isView(e))return{body:e instanceof Uint8Array?e:JSON.stringify(e)};switch(t.split(";")[0]){case"application/json":return{body:JSON.stringify(e)};case"multipart/form-data":if(Array.isArray(e))return{multipartBody:(0,l.buildMultipartBody)(e)};return{body:JSON.stringify(e)};case"text/plain":return{body:String(e)};default:if("string"==typeof e)return{body:e};return{body:JSON.stringify(e)}}}(r.body,n),u=(0,i.createHttpHeaders)({...r.headers?r.headers:{},accept:r.accept??r.headers?.accept??"application/json",...(void 0!==a||void 0!==c)&&n&&{"content-type":n}});return(0,o.createPipelineRequest)({url:t,method:e,body:a,multipartBody:c,headers:u,allowInsecureConnection:r.allowInsecureConnection,abortSignal:r.abortSignal,onUploadProgress:r.onUploadProgress,onDownloadProgress:r.onDownloadProgress,timeout:r.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:r.responseAsStream?new Set([1/0]):void 0})}(e,t,u);try{let e=await r.sendRequest(h,f),t=e.headers.toJSON(),i=e.readableStreamBody??e.browserStreamBody,o=u.responseAsStream||void 0!==i?void 0:function(e){let t=(e.headers.get("content-type")??"").split(";")[0],r=e.bodyAsText??"";if("text/plain"===t)return String(r);try{return r?JSON.parse(r):void 0}catch(i){if("application/json"===t)throw function(e,t){let r=`Error "${t}" occurred while parsing the response body - ${e.bodyAsText}.`,i=t.code??n.RestError.PARSE_ERROR;return new n.RestError(r,{code:i,statusCode:e.status,request:e.request,response:e})}(e,i);return String(r)}}(e),a=i??o;return u?.onResponse&&u.onResponse({...e,request:f,rawHeaders:t,parsedBody:o}),{request:f,headers:t,status:`${e.status}`,body:a}}catch(e){if((0,n.isRestError)(e)&&e.response&&u.onResponse){let{response:t}=e,r=t.headers.toJSON();u?.onResponse({...t,request:f,rawHeaders:r},e)}throw e}}},5687,(e,t,r)=>{"use strict";function n(e,t,r,n){let i=(Array.isArray(n)?n:"object"==typeof n&&n.toString===Object.prototype.toString?Object.entries(n).flat():[n]).map(r=>{if(null==r)return"";if(!r.toString||"function"!=typeof r.toString)throw Error(`Query parameters must be able to be represented as string, ${e} can't`);let n=void 0!==r.toISOString?r.toISOString():r.toString();return t?n:encodeURIComponent(n)}).join("pipeDelimited"===r?"|":"spaceDelimited"===r?"%20":",");return`${t?e:encodeURIComponent(e)}=${i}`}function i(e,t){if(!t.pathParameters)return e;for(let[r,n]of Object.entries(t.pathParameters)){if(null==n)throw Error(`Path parameters ${r} must not be undefined or null`);if(!n.toString||"function"!=typeof n.toString)throw Error(`Path parameters must be able to be represented as string, ${r} can't`);let i=void 0!==n.toISOString?n.toISOString():String(n);t.skipUrlEncoding||(i=encodeURIComponent(n)),e=o(e,`{${r}}`,i)??""}return e}function o(e,t,r){return e&&t?e.split(t).join(r||""):e}Object.defineProperty(r,"__esModule",{value:!0}),r.buildRequestUrl=function(e,t,r,o={}){return t.startsWith("https://")||t.startsWith("http://")?t:(e=i(e,o),t=function(e,t,r={}){for(let n of t){let t="object"==typeof n&&(n.allowReserved??!1),i="object"==typeof n?n.value:n;r.skipUrlEncoding||t||(i=encodeURIComponent(i)),e=e.replace(/\{[\w-]+\}/,String(i))}return e}(t,r,o),new URL(function(e,t={}){if(!t.queryParameters)return e;let r=new URL(e),i=t.queryParameters,o=[];for(let e of Object.keys(i)){let r=i[e];if(null==r)continue;let a=function(e){let t=e.value;return void 0!==t&&void 0!==t.toString&&"function"==typeof t.toString}(r),s=a?r.value:r,l=!!a&&(r.explode??!1),c=a&&r.style?r.style:"form";if(l)if(Array.isArray(s))for(let r of s)o.push(n(e,t.skipUrlEncoding??!1,c,r));else if("object"==typeof s)for(let[e,r]of Object.entries(s))o.push(n(e,t.skipUrlEncoding??!1,c,r));else throw Error("explode can only be set to true for objects and arrays");else o.push(n(e,t.skipUrlEncoding??!1,c,s))}return""!==r.search&&(r.search+="&"),r.search+=o.join("&"),r.toString()}(`${e}/${t}`,o)).toString().replace(/([^:]\/)\/+/g,"$1"))},r.buildBaseUrl=i,r.replaceAll=o},17045,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getClient=function(e,t={}){let r=t.pipeline??(0,n.createDefaultPipeline)(t);if(t.additionalPolicies?.length)for(let{policy:e,position:n}of t.additionalPolicies){let t="perRetry"===n?"Sign":void 0;r.addPolicy(e,{afterPhase:t})}let{allowInsecureConnection:i,httpClient:a}=t,l=t.endpoint??e,c=(e,...t)=>{let n=r=>(0,o.buildRequestUrl)(l,e,t,{allowInsecureConnection:i,...r});return{get:(e={})=>s("GET",n(e),r,e,i,a),post:(e={})=>s("POST",n(e),r,e,i,a),put:(e={})=>s("PUT",n(e),r,e,i,a),patch:(e={})=>s("PATCH",n(e),r,e,i,a),delete:(e={})=>s("DELETE",n(e),r,e,i,a),head:(e={})=>s("HEAD",n(e),r,e,i,a),options:(e={})=>s("OPTIONS",n(e),r,e,i,a),trace:(e={})=>s("TRACE",n(e),r,e,i,a)}};return{path:c,pathUnchecked:c,pipeline:r}};let n=e.r(71407),i=e.r(14221),o=e.r(5687),a=e.r(54618);function s(e,t,r,n,o,s){return o=n.allowInsecureConnection??o,{then:function(a,l){return(0,i.sendRequest)(e,t,r,{...n,allowInsecureConnection:o},s).then(a,l)},async asBrowserStream(){if(!a.isNodeLike)return(0,i.sendRequest)(e,t,r,{...n,allowInsecureConnection:o,responseAsStream:!0},s);throw Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.")},async asNodeStream(){if(a.isNodeLike)return(0,i.sendRequest)(e,t,r,{...n,allowInsecureConnection:o,responseAsStream:!0},s);throw Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}},80098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.operationOptionsToRequestParameters=function(e){return{allowInsecureConnection:e.requestOptions?.allowInsecureConnection,timeout:e.requestOptions?.timeout,skipUrlEncoding:e.requestOptions?.skipUrlEncoding,abortSignal:e.abortSignal,onUploadProgress:e.requestOptions?.onUploadProgress,onDownloadProgress:e.requestOptions?.onDownloadProgress,headers:{...e.requestOptions?.headers},onResponse:e.onResponse}}},65364,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createRestError=function(e,t){var r;let a="string"==typeof e?t:e,s=a.body?.error??a.body,l="string"==typeof e?e:s?.message??`Unexpected status code: ${a.status}`;return new n.RestError(l,{statusCode:o(a.status),code:s?.code,request:a.request,response:(r=a,{headers:(0,i.createHttpHeaders)(r.headers),request:r.request,status:o(r.status)??-1})})};let n=e.r(64571),i=e.r(91381);function o(e){let t=Number.parseInt(e);return Number.isNaN(t)?void 0:t}},50540,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createRestError=r.operationOptionsToRequestParameters=r.getClient=r.createDefaultHttpClient=r.uint8ArrayToString=r.stringToUint8Array=r.isRestError=r.RestError=r.createEmptyPipeline=r.createPipelineRequest=r.createHttpHeaders=r.TypeSpecRuntimeLogger=r.setLogLevel=r.getLogLevel=r.createClientLogger=r.AbortError=void 0;let n=e.r(41716);var i=e.r(73881);Object.defineProperty(r,"AbortError",{enumerable:!0,get:function(){return i.AbortError}});var o=e.r(51343);Object.defineProperty(r,"createClientLogger",{enumerable:!0,get:function(){return o.createClientLogger}}),Object.defineProperty(r,"getLogLevel",{enumerable:!0,get:function(){return o.getLogLevel}}),Object.defineProperty(r,"setLogLevel",{enumerable:!0,get:function(){return o.setLogLevel}}),Object.defineProperty(r,"TypeSpecRuntimeLogger",{enumerable:!0,get:function(){return o.TypeSpecRuntimeLogger}});var a=e.r(91381);Object.defineProperty(r,"createHttpHeaders",{enumerable:!0,get:function(){return a.createHttpHeaders}}),n.__exportStar(e.r(90044),r),n.__exportStar(e.r(1890),r);var s=e.r(7371);Object.defineProperty(r,"createPipelineRequest",{enumerable:!0,get:function(){return s.createPipelineRequest}});var l=e.r(83788);Object.defineProperty(r,"createEmptyPipeline",{enumerable:!0,get:function(){return l.createEmptyPipeline}});var c=e.r(64571);Object.defineProperty(r,"RestError",{enumerable:!0,get:function(){return c.RestError}}),Object.defineProperty(r,"isRestError",{enumerable:!0,get:function(){return c.isRestError}});var u=e.r(31999);Object.defineProperty(r,"stringToUint8Array",{enumerable:!0,get:function(){return u.stringToUint8Array}}),Object.defineProperty(r,"uint8ArrayToString",{enumerable:!0,get:function(){return u.uint8ArrayToString}});var d=e.r(63166);Object.defineProperty(r,"createDefaultHttpClient",{enumerable:!0,get:function(){return d.createDefaultHttpClient}});var h=e.r(17045);Object.defineProperty(r,"getClient",{enumerable:!0,get:function(){return h.getClient}});var f=e.r(80098);Object.defineProperty(r,"operationOptionsToRequestParameters",{enumerable:!0,get:function(){return f.operationOptionsToRequestParameters}});var p=e.r(65364);Object.defineProperty(r,"createRestError",{enumerable:!0,get:function(){return p.createRestError}})},28053,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createEmptyPipeline=function(){return(0,n.createEmptyPipeline)()};let n=e.r(50540)},15555,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLoggerContext=void 0;var n=e.r(51343);Object.defineProperty(r,"createLoggerContext",{enumerable:!0,get:function(){return n.createLoggerContext}})},9491,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzureLogger=void 0,r.setLogLevel=function(e){n.setLogLevel(e)},r.getLogLevel=function(){return n.getLogLevel()},r.createClientLogger=function(e){return n.createClientLogger(e)};let n=(0,e.r(15555).createLoggerContext)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});r.AzureLogger=n.logger},17848,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logger=void 0,r.logger=(0,e.r(9491).createClientLogger)("core-rest-pipeline")},58168,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exponentialRetryPolicyName=void 0,r.exponentialRetryPolicy=function(e={}){return(0,i.retryPolicy)([(0,n.exponentialRetryStrategy)({...e,ignoreSystemErrors:!0})],{maxRetries:e.maxRetries??o.DEFAULT_RETRY_POLICY_COUNT})};let n=e.r(17729),i=e.r(5780),o=e.r(70398);r.exponentialRetryPolicyName="exponentialRetryPolicy"},69302,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.systemErrorRetryPolicyName=void 0,r.systemErrorRetryPolicy=function(e={}){return{name:r.systemErrorRetryPolicyName,sendRequest:(0,i.retryPolicy)([(0,n.exponentialRetryStrategy)({...e,ignoreHttpStatusCodes:!0})],{maxRetries:e.maxRetries??o.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};let n=e.r(17729),i=e.r(5780),o=e.r(70398);r.systemErrorRetryPolicyName="systemErrorRetryPolicy"},94636,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throttlingRetryPolicyName=void 0,r.throttlingRetryPolicy=function(e={}){return{name:r.throttlingRetryPolicyName,sendRequest:(0,i.retryPolicy)([(0,n.throttlingRetryStrategy)()],{maxRetries:e.maxRetries??o.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};let n=e.r(43700),i=e.r(5780),o=e.r(70398);r.throttlingRetryPolicyName="throttlingRetryPolicy"},51576,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.userAgentPolicyName=r.userAgentPolicy=r.tlsPolicyName=r.tlsPolicy=r.redirectPolicyName=r.redirectPolicy=r.getDefaultProxySettings=r.proxyPolicyName=r.proxyPolicy=r.multipartPolicyName=r.multipartPolicy=r.logPolicyName=r.logPolicy=r.formDataPolicyName=r.formDataPolicy=r.throttlingRetryPolicyName=r.throttlingRetryPolicy=r.systemErrorRetryPolicyName=r.systemErrorRetryPolicy=r.retryPolicy=r.exponentialRetryPolicyName=r.exponentialRetryPolicy=r.defaultRetryPolicyName=r.defaultRetryPolicy=r.decompressResponsePolicyName=r.decompressResponsePolicy=r.agentPolicyName=r.agentPolicy=void 0;var n=e.r(28241);Object.defineProperty(r,"agentPolicy",{enumerable:!0,get:function(){return n.agentPolicy}}),Object.defineProperty(r,"agentPolicyName",{enumerable:!0,get:function(){return n.agentPolicyName}});var i=e.r(2303);Object.defineProperty(r,"decompressResponsePolicy",{enumerable:!0,get:function(){return i.decompressResponsePolicy}}),Object.defineProperty(r,"decompressResponsePolicyName",{enumerable:!0,get:function(){return i.decompressResponsePolicyName}});var o=e.r(58279);Object.defineProperty(r,"defaultRetryPolicy",{enumerable:!0,get:function(){return o.defaultRetryPolicy}}),Object.defineProperty(r,"defaultRetryPolicyName",{enumerable:!0,get:function(){return o.defaultRetryPolicyName}});var a=e.r(58168);Object.defineProperty(r,"exponentialRetryPolicy",{enumerable:!0,get:function(){return a.exponentialRetryPolicy}}),Object.defineProperty(r,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return a.exponentialRetryPolicyName}});var s=e.r(5780);Object.defineProperty(r,"retryPolicy",{enumerable:!0,get:function(){return s.retryPolicy}});var l=e.r(69302);Object.defineProperty(r,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return l.systemErrorRetryPolicy}}),Object.defineProperty(r,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return l.systemErrorRetryPolicyName}});var c=e.r(94636);Object.defineProperty(r,"throttlingRetryPolicy",{enumerable:!0,get:function(){return c.throttlingRetryPolicy}}),Object.defineProperty(r,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return c.throttlingRetryPolicyName}});var u=e.r(41973);Object.defineProperty(r,"formDataPolicy",{enumerable:!0,get:function(){return u.formDataPolicy}}),Object.defineProperty(r,"formDataPolicyName",{enumerable:!0,get:function(){return u.formDataPolicyName}});var d=e.r(50590);Object.defineProperty(r,"logPolicy",{enumerable:!0,get:function(){return d.logPolicy}}),Object.defineProperty(r,"logPolicyName",{enumerable:!0,get:function(){return d.logPolicyName}});var h=e.r(99503);Object.defineProperty(r,"multipartPolicy",{enumerable:!0,get:function(){return h.multipartPolicy}}),Object.defineProperty(r,"multipartPolicyName",{enumerable:!0,get:function(){return h.multipartPolicyName}});var f=e.r(80735);Object.defineProperty(r,"proxyPolicy",{enumerable:!0,get:function(){return f.proxyPolicy}}),Object.defineProperty(r,"proxyPolicyName",{enumerable:!0,get:function(){return f.proxyPolicyName}}),Object.defineProperty(r,"getDefaultProxySettings",{enumerable:!0,get:function(){return f.getDefaultProxySettings}});var p=e.r(40609);Object.defineProperty(r,"redirectPolicy",{enumerable:!0,get:function(){return p.redirectPolicy}}),Object.defineProperty(r,"redirectPolicyName",{enumerable:!0,get:function(){return p.redirectPolicyName}});var m=e.r(36066);Object.defineProperty(r,"tlsPolicy",{enumerable:!0,get:function(){return m.tlsPolicy}}),Object.defineProperty(r,"tlsPolicyName",{enumerable:!0,get:function(){return m.tlsPolicyName}});var g=e.r(47229);Object.defineProperty(r,"userAgentPolicy",{enumerable:!0,get:function(){return g.userAgentPolicy}}),Object.defineProperty(r,"userAgentPolicyName",{enumerable:!0,get:function(){return g.userAgentPolicyName}})},42422,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logPolicyName=void 0,r.logPolicy=function(e={}){return(0,i.logPolicy)({logger:n.logger.info,...e})};let n=e.r(17848),i=e.r(51576);r.logPolicyName=i.logPolicyName},53488,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.redirectPolicyName=void 0,r.redirectPolicy=function(e={}){return(0,n.redirectPolicy)(e)};let n=e.r(51576);r.redirectPolicyName=n.redirectPolicyName},12034,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHeaderName=function(){return"User-Agent"},r.setPlatformSpecificData=a;let n=e.r(41716),i=n.__importDefault(e.r(60526)),o=n.__importDefault(e.r(59639));async function a(e){if(o.default&&o.default.versions){let t=o.default.versions;t.bun?e.set("Bun",t.bun):t.deno?e.set("Deno",t.deno):t.node&&e.set("Node",t.node)}e.set("OS",`(${i.default.arch()}-${i.default.type()}-${i.default.release()})`)}},80991,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_RETRY_POLICY_COUNT=r.SDK_VERSION=void 0,r.SDK_VERSION="1.22.1",r.DEFAULT_RETRY_POLICY_COUNT=3},53671,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUserAgentHeaderName=function(){return(0,n.getHeaderName)()},r.getUserAgentValue=o;let n=e.r(12034),i=e.r(80991);async function o(e){let t=new Map;t.set("core-rest-pipeline",i.SDK_VERSION),await (0,n.setPlatformSpecificData)(t);let r=function(e){let t=[];for(let[r,n]of e){let e=n?`${r}/${n}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r}},60940,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.userAgentPolicyName=void 0,r.userAgentPolicy=function(e={}){let t=(0,n.getUserAgentValue)(e.userAgentPrefix);return{name:r.userAgentPolicyName,sendRequest:async(e,r)=>(e.headers.has(i)||e.headers.set(i,await t),r(e))}};let n=e.r(53671),i=(0,n.getUserAgentHeaderName)();r.userAgentPolicyName="userAgentPolicy"},76933,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.computeSha256Hmac=i,r.computeSha256Hash=o;let n=e.r(66680);async function i(e,t,r){let i=Buffer.from(e,"base64");return(0,n.createHmac)("sha256",i).update(t).digest(r)}async function o(e,t){return(0,n.createHash)("sha256").update(e).digest(t)}},32981,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Sanitizer=r.uint8ArrayToString=r.stringToUint8Array=r.isWebWorker=r.isReactNative=r.isDeno=r.isNodeRuntime=r.isNodeLike=r.isBun=r.isBrowser=r.randomUUID=r.computeSha256Hmac=r.computeSha256Hash=r.isError=r.isObject=r.getRandomIntegerInclusive=r.calculateRetryDelay=void 0;var n=e.r(53757);Object.defineProperty(r,"calculateRetryDelay",{enumerable:!0,get:function(){return n.calculateRetryDelay}});var i=e.r(22783);Object.defineProperty(r,"getRandomIntegerInclusive",{enumerable:!0,get:function(){return i.getRandomIntegerInclusive}});var o=e.r(80237);Object.defineProperty(r,"isObject",{enumerable:!0,get:function(){return o.isObject}});var a=e.r(13350);Object.defineProperty(r,"isError",{enumerable:!0,get:function(){return a.isError}});var s=e.r(76933);Object.defineProperty(r,"computeSha256Hash",{enumerable:!0,get:function(){return s.computeSha256Hash}}),Object.defineProperty(r,"computeSha256Hmac",{enumerable:!0,get:function(){return s.computeSha256Hmac}});var l=e.r(59085);Object.defineProperty(r,"randomUUID",{enumerable:!0,get:function(){return l.randomUUID}});var c=e.r(54618);Object.defineProperty(r,"isBrowser",{enumerable:!0,get:function(){return c.isBrowser}}),Object.defineProperty(r,"isBun",{enumerable:!0,get:function(){return c.isBun}}),Object.defineProperty(r,"isNodeLike",{enumerable:!0,get:function(){return c.isNodeLike}}),Object.defineProperty(r,"isNodeRuntime",{enumerable:!0,get:function(){return c.isNodeRuntime}}),Object.defineProperty(r,"isDeno",{enumerable:!0,get:function(){return c.isDeno}}),Object.defineProperty(r,"isReactNative",{enumerable:!0,get:function(){return c.isReactNative}}),Object.defineProperty(r,"isWebWorker",{enumerable:!0,get:function(){return c.isWebWorker}});var u=e.r(31999);Object.defineProperty(r,"stringToUint8Array",{enumerable:!0,get:function(){return u.stringToUint8Array}}),Object.defineProperty(r,"uint8ArrayToString",{enumerable:!0,get:function(){return u.uint8ArrayToString}});var d=e.r(92158);Object.defineProperty(r,"Sanitizer",{enumerable:!0,get:function(){return d.Sanitizer}})},57616,(e,t,r)=>{"use strict";async function n(e,t){let r=new AbortController;function n(){r.abort()}t?.abortSignal?.addEventListener("abort",n);try{return await Promise.race(e.map(e=>e({abortSignal:r.signal})))}finally{r.abort(),t?.abortSignal?.removeEventListener("abort",n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.cancelablePromiseRace=n},94979,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbortError=void 0,r.AbortError=class extends Error{constructor(e){super(e),this.name="AbortError"}}},61446,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbortError=void 0;var n=e.r(94979);Object.defineProperty(r,"AbortError",{enumerable:!0,get:function(){return n.AbortError}})},21995,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createAbortablePromise=function(e,t){let{cleanupBeforeAbort:r,abortSignal:i,abortErrorMsg:o}=t??{};return new Promise((t,a)=>{function s(){a(new n.AbortError(o??"The operation was aborted."))}function l(){i?.removeEventListener("abort",c)}function c(){r?.(),l(),s()}if(i?.aborted)return s();try{e(e=>{l(),t(e)},e=>{l(),a(e)})}catch(e){a(e)}i?.addEventListener("abort",c)})};let n=e.r(61446)},57971,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.delay=function(e,t){let r,{abortSignal:i,abortErrorMsg:o}=t??{};return(0,n.createAbortablePromise)(t=>{r=setTimeout(t,e)},{cleanupBeforeAbort:()=>clearTimeout(r),abortSignal:i,abortErrorMsg:o??"The delay was aborted."})},r.calculateRetryDelay=function(e,t){let r=t.retryDelayInMs*Math.pow(2,e),n=Math.min(t.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+(0,i.getRandomIntegerInclusive)(0,n/2)}};let n=e.r(21995),i=e.r(32981)},49812,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getErrorMessage=function(e){if((0,n.isError)(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}};let n=e.r(32981)},82002,(e,t,r)=>{"use strict";function n(e){return null!=e}function i(e,t){return n(e)&&"object"==typeof e&&t in e}Object.defineProperty(r,"__esModule",{value:!0}),r.isDefined=n,r.isObjectWithProperties=function(e,t){if(!n(e)||"object"!=typeof e)return!1;for(let r of t)if(!i(e,r))return!1;return!0},r.objectHasProperty=i},96555,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isWebWorker=r.isReactNative=r.isNodeRuntime=r.isNodeLike=r.isNode=r.isDeno=r.isBun=r.isBrowser=r.objectHasProperty=r.isObjectWithProperties=r.isDefined=r.getErrorMessage=r.delay=r.createAbortablePromise=r.cancelablePromiseRace=void 0,r.calculateRetryDelay=function(e,t){return n.calculateRetryDelay(e,t)},r.computeSha256Hash=function(e,t){return n.computeSha256Hash(e,t)},r.computeSha256Hmac=function(e,t,r){return n.computeSha256Hmac(e,t,r)},r.getRandomIntegerInclusive=function(e,t){return n.getRandomIntegerInclusive(e,t)},r.isError=function(e){return n.isError(e)},r.isObject=function(e){return n.isObject(e)},r.randomUUID=function(){return n.randomUUID()},r.uint8ArrayToString=function(e,t){return n.uint8ArrayToString(e,t)},r.stringToUint8Array=function(e,t){return n.stringToUint8Array(e,t)};let n=e.r(41716).__importStar(e.r(32981));var i=e.r(57616);Object.defineProperty(r,"cancelablePromiseRace",{enumerable:!0,get:function(){return i.cancelablePromiseRace}});var o=e.r(21995);Object.defineProperty(r,"createAbortablePromise",{enumerable:!0,get:function(){return o.createAbortablePromise}});var a=e.r(57971);Object.defineProperty(r,"delay",{enumerable:!0,get:function(){return a.delay}});var s=e.r(49812);Object.defineProperty(r,"getErrorMessage",{enumerable:!0,get:function(){return s.getErrorMessage}});var l=e.r(82002);Object.defineProperty(r,"isDefined",{enumerable:!0,get:function(){return l.isDefined}}),Object.defineProperty(r,"isObjectWithProperties",{enumerable:!0,get:function(){return l.isObjectWithProperties}}),Object.defineProperty(r,"objectHasProperty",{enumerable:!0,get:function(){return l.objectHasProperty}}),r.isBrowser=n.isBrowser,r.isBun=n.isBun,r.isDeno=n.isDeno,r.isNode=n.isNodeLike,r.isNodeLike=n.isNodeLike,r.isNodeRuntime=n.isNodeRuntime,r.isReactNative=n.isReactNative,r.isWebWorker=n.isWebWorker},18796,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hasRawContent=a,r.getRawContent=function(e){return a(e)?e[o]():e},r.createFileFromStream=function(e,t,r={}){return{...i,type:r.type??"",lastModified:r.lastModified??new Date().getTime(),webkitRelativePath:r.webkitRelativePath??"",size:r.size??-1,name:t,stream:()=>{let t=e();if(t&&"function"==typeof t.pipe)throw Error("Not supported: a Node stream was provided as input to createFileFromStream.");return t},[o]:e}},r.createFile=function(e,t,r={}){return n.isNodeLike?{...i,type:r.type??"",lastModified:r.lastModified??new Date().getTime(),webkitRelativePath:r.webkitRelativePath??"",size:e.byteLength,name:t,arrayBuffer:async()=>e.buffer,stream:()=>new Blob([e]).stream(),[o]:()=>e}:new File([e],t,r)};let n=e.r(96555),i={arrayBuffer:()=>{throw Error("Not implemented")},bytes:()=>{throw Error("Not implemented")},slice:()=>{throw Error("Not implemented")},text:()=>{throw Error("Not implemented")}},o=Symbol("rawContent");function a(e){return"function"==typeof e[o]}},77709,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.multipartPolicyName=void 0,r.multipartPolicy=function(){let e=(0,n.multipartPolicy)();return{name:r.multipartPolicyName,sendRequest:async(t,r)=>{if(t.multipartBody)for(let e of t.multipartBody.parts)(0,i.hasRawContent)(e.body)&&(e.body=(0,i.getRawContent)(e.body));return e.sendRequest(t,r)}}};let n=e.r(51576),i=e.r(18796);r.multipartPolicyName=n.multipartPolicyName},82486,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decompressResponsePolicyName=void 0,r.decompressResponsePolicy=function(){return(0,n.decompressResponsePolicy)()};let n=e.r(51576);r.decompressResponsePolicyName=n.decompressResponsePolicyName},970,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultRetryPolicyName=void 0,r.defaultRetryPolicy=function(e={}){return(0,n.defaultRetryPolicy)(e)};let n=e.r(51576);r.defaultRetryPolicyName=n.defaultRetryPolicyName},83994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formDataPolicyName=void 0,r.formDataPolicy=function(){return(0,n.formDataPolicy)()};let n=e.r(51576);r.formDataPolicyName=n.formDataPolicyName},65424,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.proxyPolicyName=void 0,r.getDefaultProxySettings=function(e){return(0,n.getDefaultProxySettings)(e)},r.proxyPolicy=function(e,t){return(0,n.proxyPolicy)(e,t)};let n=e.r(51576);r.proxyPolicyName=n.proxyPolicyName},7439,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setClientRequestIdPolicyName=void 0,r.setClientRequestIdPolicy=function(e="x-ms-client-request-id"){return{name:r.setClientRequestIdPolicyName,sendRequest:async(t,r)=>(t.headers.has(e)||t.headers.set(e,t.requestId),r(t))}},r.setClientRequestIdPolicyName="setClientRequestIdPolicy"},44512,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.agentPolicyName=void 0,r.agentPolicy=function(e){return(0,n.agentPolicy)(e)};let n=e.r(51576);r.agentPolicyName=n.agentPolicyName},31625,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tlsPolicyName=void 0,r.tlsPolicy=function(e){return(0,n.tlsPolicy)(e)};let n=e.r(51576);r.tlsPolicyName=n.tlsPolicyName},95705,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TracingContextImpl=r.knownContextKeys=void 0,r.createTracingContext=function(e={}){let t=new n(e.parentContext);return e.span&&(t=t.setValue(r.knownContextKeys.span,e.span)),e.namespace&&(t=t.setValue(r.knownContextKeys.namespace,e.namespace)),t},r.knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};class n{_contextMap;constructor(e){this._contextMap=e instanceof n?new Map(e._contextMap):new Map}setValue(e,t){let r=new n(this);return r._contextMap.set(e,t),r}getValue(e){return this._contextMap.get(e)}deleteValue(e){let t=new n(this);return t._contextMap.delete(e),t}}r.TracingContextImpl=n},60304,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0,r.state={instrumenterImplementation:void 0}},46880,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultTracingSpan=o,r.createDefaultInstrumenter=a,r.useInstrumenter=function(e){i.state.instrumenterImplementation=e},r.getInstrumenter=function(){return i.state.instrumenterImplementation||(i.state.instrumenterImplementation=a()),i.state.instrumenterImplementation};let n=e.r(95705),i=e.r(60304);function o(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function a(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:o(),tracingContext:(0,n.createTracingContext)({parentContext:t.tracingContext})}),withContext:(e,t,...r)=>t(...r)}}},43063,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTracingClient=function(e){let{namespace:t,packageName:r,packageVersion:o}=e;function a(e,a,s){let l=(0,n.getInstrumenter)().startSpan(e,{...s,packageName:r,packageVersion:o,tracingContext:a?.tracingOptions?.tracingContext}),c=l.tracingContext,u=l.span;return c.getValue(i.knownContextKeys.namespace)||(c=c.setValue(i.knownContextKeys.namespace,t)),u.setAttribute("az.namespace",c.getValue(i.knownContextKeys.namespace)),{span:u,updatedOptions:Object.assign({},a,{tracingOptions:{...a?.tracingOptions,tracingContext:c}})}}async function s(e,t,r,n){let{span:i,updatedOptions:o}=a(e,t,n);try{let e=await l(o.tracingOptions.tracingContext,()=>Promise.resolve(r(o,i)));return i.setStatus({status:"success"}),e}catch(e){throw i.setStatus({status:"error",error:e}),e}finally{i.end()}}function l(e,t,...r){return(0,n.getInstrumenter)().withContext(e,t,...r)}return{startSpan:a,withSpan:s,withContext:l,parseTraceparentHeader:function(e){return(0,n.getInstrumenter)().parseTraceparentHeader(e)},createRequestHeaders:function(e){return(0,n.getInstrumenter)().createRequestHeaders(e)}}};let n=e.r(46880),i=e.r(95705)},88072,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTracingClient=r.useInstrumenter=void 0;var n=e.r(46880);Object.defineProperty(r,"useInstrumenter",{enumerable:!0,get:function(){return n.useInstrumenter}});var i=e.r(43063);Object.defineProperty(r,"createTracingClient",{enumerable:!0,get:function(){return i.createTracingClient}})},16015,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RestError=void 0,r.isRestError=function(e){return(0,n.isRestError)(e)};let n=e.r(50540);r.RestError=n.RestError},13277,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tracingPolicyName=void 0,r.tracingPolicy=function(e={}){let t=(0,o.getUserAgentValue)(e.userAgentPrefix),u=new c.Sanitizer({additionalAllowedQueryParameters:e.additionalAllowedQueryParameters}),d=function(){try{return(0,n.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:i.SDK_VERSION})}catch(e){a.logger.warning(`Error when creating the TracingClient: ${(0,s.getErrorMessage)(e)}`);return}}();return{name:r.tracingPolicyName,async sendRequest(e,r){if(!d)return r(e);let n=await t,i={"http.url":u.sanitizeUrl(e.url),"http.method":e.method,"http.user_agent":n,requestId:e.requestId};n&&(i["http.user_agent"]=n);let{span:o,tracingContext:c}=function(e,t,r){try{let{span:n,updatedOptions:i}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording())return void n.end();let o=e.createRequestHeaders(i.tracingOptions.tracingContext);for(let[e,r]of Object.entries(o))t.headers.set(e,r);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(e){a.logger.warning(`Skipping creating a tracing span due to an error: ${(0,s.getErrorMessage)(e)}`);return}}(d,e,i)??{};if(!o||!c)return r(e);try{let t=await d.withContext(c,r,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);let r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),t.status>=400&&e.setStatus({status:"error"}),e.end()}catch(e){a.logger.warning(`Skipping tracing span processing due to an error: ${(0,s.getErrorMessage)(e)}`)}}(o,t),t}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:(0,s.isError)(t)?t:void 0}),(0,l.isRestError)(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){a.logger.warning(`Skipping tracing span processing due to an error: ${(0,s.getErrorMessage)(e)}`)}}(o,e),e}}}};let n=e.r(88072),i=e.r(80991),o=e.r(53671),a=e.r(17848),s=e.r(96555),l=e.r(16015),c=e.r(32981);r.tracingPolicyName="tracingPolicy"},54306,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wrapAbortSignalLike=function(e){if(e instanceof AbortSignal)return{abortSignal:e};if(e.aborted)return{abortSignal:AbortSignal.abort(e.reason)};let t=new AbortController,r=!0;function n(){r&&(e.removeEventListener("abort",i),r=!1)}function i(){t.abort(e.reason),n()}return e.addEventListener("abort",i),{abortSignal:t.signal,cleanup:n}}},39677,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wrapAbortSignalLikePolicyName=void 0,r.wrapAbortSignalLikePolicy=function(){return{name:r.wrapAbortSignalLikePolicyName,sendRequest:async(e,t)=>{if(!e.abortSignal)return t(e);let{abortSignal:r,cleanup:i}=(0,n.wrapAbortSignalLike)(e.abortSignal);e.abortSignal=r;try{return await t(e)}finally{i?.()}}}};let n=e.r(54306);r.wrapAbortSignalLikePolicyName="wrapAbortSignalLikePolicy"},86265,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createPipelineFromOptions=function(e){let t=(0,i.createEmptyPipeline)();return d.isNodeLike&&(e.agent&&t.addPolicy((0,p.agentPolicy)(e.agent)),e.tlsOptions&&t.addPolicy((0,m.tlsPolicy)(e.tlsOptions)),t.addPolicy((0,h.proxyPolicy)(e.proxyOptions)),t.addPolicy((0,l.decompressResponsePolicy)())),t.addPolicy((0,y.wrapAbortSignalLikePolicy)()),t.addPolicy((0,u.formDataPolicy)(),{beforePolicies:[s.multipartPolicyName]}),t.addPolicy((0,a.userAgentPolicy)(e.userAgentOptions)),t.addPolicy((0,f.setClientRequestIdPolicy)(e.telemetryOptions?.clientRequestIdHeaderName)),t.addPolicy((0,s.multipartPolicy)(),{afterPhase:"Deserialize"}),t.addPolicy((0,c.defaultRetryPolicy)(e.retryOptions),{phase:"Retry"}),t.addPolicy((0,g.tracingPolicy)({...e.userAgentOptions,...e.loggingOptions}),{afterPhase:"Retry"}),d.isNodeLike&&t.addPolicy((0,o.redirectPolicy)(e.redirectOptions),{afterPhase:"Retry"}),t.addPolicy((0,n.logPolicy)(e.loggingOptions),{afterPhase:"Sign"}),t};let n=e.r(42422),i=e.r(28053),o=e.r(53488),a=e.r(60940),s=e.r(77709),l=e.r(82486),c=e.r(970),u=e.r(83994),d=e.r(96555),h=e.r(65424),f=e.r(7439),p=e.r(44512),m=e.r(31625),g=e.r(13277),y=e.r(39677)},88952,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultHttpClient=function(){let e=(0,n.createDefaultHttpClient)();return{async sendRequest(t){let{abortSignal:r,cleanup:n}=t.abortSignal?(0,i.wrapAbortSignalLike)(t.abortSignal):{};try{return t.abortSignal=r,await e.sendRequest(t)}finally{n?.()}}}};let n=e.r(50540),i=e.r(54306)},20656,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createHttpHeaders=function(e){return(0,n.createHttpHeaders)(e)};let n=e.r(50540)},45346,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createPipelineRequest=function(e){return(0,n.createPipelineRequest)(e)};let n=e.r(50540)},62835,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exponentialRetryPolicyName=void 0,r.exponentialRetryPolicy=function(e={}){return(0,n.exponentialRetryPolicy)(e)};let n=e.r(51576);r.exponentialRetryPolicyName=n.exponentialRetryPolicyName},5991,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.systemErrorRetryPolicyName=void 0,r.systemErrorRetryPolicy=function(e={}){return(0,n.systemErrorRetryPolicy)(e)};let n=e.r(51576);r.systemErrorRetryPolicyName=n.systemErrorRetryPolicyName},26369,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.throttlingRetryPolicyName=void 0,r.throttlingRetryPolicy=function(e={}){return(0,n.throttlingRetryPolicy)(e)};let n=e.r(51576);r.throttlingRetryPolicyName=n.throttlingRetryPolicyName},15901,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.retryPolicy=function(e,t={maxRetries:i.DEFAULT_RETRY_POLICY_COUNT}){return(0,o.retryPolicy)(e,{logger:a,...t})};let n=e.r(9491),i=e.r(80991),o=e.r(51576),a=(0,n.createClientLogger)("core-rest-pipeline retryPolicy")},53624,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CYCLER_OPTIONS=void 0,r.createTokenCycler=function(e,t){let n,o=null,a=null,s={...r.DEFAULT_CYCLER_OPTIONS,...t},l={get isRefreshing(){return null!==o},get shouldRefresh(){if(l.isRefreshing)return!1;if(a?.refreshAfterTimestamp&&a.refreshAfterTimestamp<Date.now())return!0;return(a?.expiresOnTimestamp??0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return null===a||a.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function c(t,r){return l.isRefreshing||(o=i(()=>e.getToken(t,r),s.retryIntervalInMs,a?.expiresOnTimestamp??Date.now()).then(e=>(o=null,a=e,n=r.tenantId,a)).catch(e=>{throw o=null,a=null,n=void 0,e})),o}return async(e,t)=>{let r=!!t.claims,i=n!==t.tenantId;return(r&&(a=null),i||r||l.mustRefresh)?c(e,t):(l.shouldRefresh&&c(e,t),a)}};let n=e.r(96555);async function i(e,t,r){async function i(){if(Date.now()<r)try{return await e()}catch{return null}{let t=await e();if(null===t)throw Error("Failed to refresh access token.");return t}}let o=await i();for(;null===o;)await (0,n.delay)(t),o=await i();return o}r.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4}},13482,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bearerTokenAuthenticationPolicyName=void 0,r.bearerTokenAuthenticationPolicy=function(e){let{credential:t,scopes:o,challengeCallbacks:u}=e,h=e.logger||i.logger,f={authorizeRequest:u?.authorizeRequest?.bind(u)??s,authorizeRequestOnChallenge:u?.authorizeRequestOnChallenge?.bind(u)},p=t?(0,n.createTokenCycler)(t):()=>Promise.resolve(null);return{name:r.bearerTokenAuthenticationPolicyName,async sendRequest(e,t){let r,n;if(!e.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");if(await f.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:e,getAccessToken:p,logger:h}),[r,n]=await a(e,t),l(r)){let i=d(r.headers.get("WWW-Authenticate"));if(i){let s;try{s=atob(i)}catch(e){return h.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),r}await c({scopes:Array.isArray(o)?o:[o],response:r,request:e,getAccessToken:p,logger:h},s)&&([r,n]=await a(e,t))}else if(f.authorizeRequestOnChallenge&&(await f.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:e,response:r,getAccessToken:p,logger:h})&&([r,n]=await a(e,t)),l(r))&&(i=d(r.headers.get("WWW-Authenticate")))){let s;try{s=atob(i)}catch(e){return h.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),r}await c({scopes:Array.isArray(o)?o:[o],response:r,request:e,getAccessToken:p,logger:h},s)&&([r,n]=await a(e,t))}}if(!n)return r;throw n}}},r.parseChallenges=u;let n=e.r(53624),i=e.r(17848),o=e.r(16015);async function a(e,t){try{return[await t(e),void 0]}catch(e){if((0,o.isRestError)(e)&&e.response)return[e.response,e];throw e}}async function s(e){let{scopes:t,getAccessToken:r,request:n}=e,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(t,i);o&&e.request.headers.set("Authorization",`Bearer ${o.token}`)}function l(e){return 401===e.status&&e.headers.has("WWW-Authenticate")}async function c(e,t){let{scopes:r}=e,n=await e.getAccessToken(r,{enableCae:!0,claims:t});return!!n&&(e.request.headers.set("Authorization",`${n.tokenType??"Bearer"} ${n.token}`),!0)}function u(e){let t,r=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,n=/(\w+)="([^"]*)"/g,i=[];for(;null!==(t=r.exec(e));){let e,r=t[1],o=t[2],a={};for(;null!==(e=n.exec(o));)a[e[1]]=e[2];i.push({scheme:r,params:a})}return i}function d(e){if(!e)return;let t=u(e);return t.find(e=>"Bearer"===e.scheme&&e.params.claims&&"insufficient_claims"===e.params.error)?.params.claims}r.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy"},34534,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ndJsonPolicyName=void 0,r.ndJsonPolicy=function(){return{name:r.ndJsonPolicyName,async sendRequest(e,t){if("string"==typeof e.body&&e.body.startsWith("[")){let t=JSON.parse(e.body);Array.isArray(t)&&(e.body=t.map(e=>JSON.stringify(e)+"\n").join(""))}return t(e)}}},r.ndJsonPolicyName="ndJsonPolicy"},22794,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.auxiliaryAuthenticationHeaderPolicyName=void 0,r.auxiliaryAuthenticationHeaderPolicy=function(e){let{credentials:t,scopes:s}=e,l=e.logger||i.logger,c=new WeakMap;return{name:r.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(e,i){if(!e.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!t||0===t.length)return l.info(`${r.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),i(e);let u=[];for(let r of t){let t=c.get(r);t||(t=(0,n.createTokenCycler)(r),c.set(r,t)),u.push(a({scopes:Array.isArray(s)?s:[s],request:e,getAccessToken:t,logger:l}))}let d=(await Promise.all(u)).filter(e=>!!e);return 0===d.length?l.warning(`None of the auxiliary tokens are valid. ${o} header will not be set.`):e.headers.set(o,d.map(e=>`Bearer ${e}`).join(", ")),i(e)}}};let n=e.r(53624),i=e.r(17848);r.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";let o="x-ms-authorization-auxiliary";async function a(e){let{scopes:t,getAccessToken:r,request:n}=e,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions};return(await r(t,i))?.token??""}},38709,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createFileFromStream=r.createFile=r.agentPolicyName=r.agentPolicy=r.auxiliaryAuthenticationHeaderPolicyName=r.auxiliaryAuthenticationHeaderPolicy=r.ndJsonPolicyName=r.ndJsonPolicy=r.bearerTokenAuthenticationPolicyName=r.bearerTokenAuthenticationPolicy=r.formDataPolicyName=r.formDataPolicy=r.tlsPolicyName=r.tlsPolicy=r.userAgentPolicyName=r.userAgentPolicy=r.defaultRetryPolicy=r.tracingPolicyName=r.tracingPolicy=r.retryPolicy=r.throttlingRetryPolicyName=r.throttlingRetryPolicy=r.systemErrorRetryPolicyName=r.systemErrorRetryPolicy=r.redirectPolicyName=r.redirectPolicy=r.getDefaultProxySettings=r.proxyPolicyName=r.proxyPolicy=r.multipartPolicyName=r.multipartPolicy=r.logPolicyName=r.logPolicy=r.setClientRequestIdPolicyName=r.setClientRequestIdPolicy=r.exponentialRetryPolicyName=r.exponentialRetryPolicy=r.decompressResponsePolicyName=r.decompressResponsePolicy=r.isRestError=r.RestError=r.createPipelineRequest=r.createHttpHeaders=r.createDefaultHttpClient=r.createPipelineFromOptions=r.createEmptyPipeline=void 0;var n=e.r(28053);Object.defineProperty(r,"createEmptyPipeline",{enumerable:!0,get:function(){return n.createEmptyPipeline}});var i=e.r(86265);Object.defineProperty(r,"createPipelineFromOptions",{enumerable:!0,get:function(){return i.createPipelineFromOptions}});var o=e.r(88952);Object.defineProperty(r,"createDefaultHttpClient",{enumerable:!0,get:function(){return o.createDefaultHttpClient}});var a=e.r(20656);Object.defineProperty(r,"createHttpHeaders",{enumerable:!0,get:function(){return a.createHttpHeaders}});var s=e.r(45346);Object.defineProperty(r,"createPipelineRequest",{enumerable:!0,get:function(){return s.createPipelineRequest}});var l=e.r(16015);Object.defineProperty(r,"RestError",{enumerable:!0,get:function(){return l.RestError}}),Object.defineProperty(r,"isRestError",{enumerable:!0,get:function(){return l.isRestError}});var c=e.r(82486);Object.defineProperty(r,"decompressResponsePolicy",{enumerable:!0,get:function(){return c.decompressResponsePolicy}}),Object.defineProperty(r,"decompressResponsePolicyName",{enumerable:!0,get:function(){return c.decompressResponsePolicyName}});var u=e.r(62835);Object.defineProperty(r,"exponentialRetryPolicy",{enumerable:!0,get:function(){return u.exponentialRetryPolicy}}),Object.defineProperty(r,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return u.exponentialRetryPolicyName}});var d=e.r(7439);Object.defineProperty(r,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return d.setClientRequestIdPolicy}}),Object.defineProperty(r,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return d.setClientRequestIdPolicyName}});var h=e.r(42422);Object.defineProperty(r,"logPolicy",{enumerable:!0,get:function(){return h.logPolicy}}),Object.defineProperty(r,"logPolicyName",{enumerable:!0,get:function(){return h.logPolicyName}});var f=e.r(77709);Object.defineProperty(r,"multipartPolicy",{enumerable:!0,get:function(){return f.multipartPolicy}}),Object.defineProperty(r,"multipartPolicyName",{enumerable:!0,get:function(){return f.multipartPolicyName}});var p=e.r(65424);Object.defineProperty(r,"proxyPolicy",{enumerable:!0,get:function(){return p.proxyPolicy}}),Object.defineProperty(r,"proxyPolicyName",{enumerable:!0,get:function(){return p.proxyPolicyName}}),Object.defineProperty(r,"getDefaultProxySettings",{enumerable:!0,get:function(){return p.getDefaultProxySettings}});var m=e.r(53488);Object.defineProperty(r,"redirectPolicy",{enumerable:!0,get:function(){return m.redirectPolicy}}),Object.defineProperty(r,"redirectPolicyName",{enumerable:!0,get:function(){return m.redirectPolicyName}});var g=e.r(5991);Object.defineProperty(r,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return g.systemErrorRetryPolicy}}),Object.defineProperty(r,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return g.systemErrorRetryPolicyName}});var y=e.r(26369);Object.defineProperty(r,"throttlingRetryPolicy",{enumerable:!0,get:function(){return y.throttlingRetryPolicy}}),Object.defineProperty(r,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return y.throttlingRetryPolicyName}});var _=e.r(15901);Object.defineProperty(r,"retryPolicy",{enumerable:!0,get:function(){return _.retryPolicy}});var E=e.r(13277);Object.defineProperty(r,"tracingPolicy",{enumerable:!0,get:function(){return E.tracingPolicy}}),Object.defineProperty(r,"tracingPolicyName",{enumerable:!0,get:function(){return E.tracingPolicyName}});var T=e.r(970);Object.defineProperty(r,"defaultRetryPolicy",{enumerable:!0,get:function(){return T.defaultRetryPolicy}});var b=e.r(60940);Object.defineProperty(r,"userAgentPolicy",{enumerable:!0,get:function(){return b.userAgentPolicy}}),Object.defineProperty(r,"userAgentPolicyName",{enumerable:!0,get:function(){return b.userAgentPolicyName}});var v=e.r(31625);Object.defineProperty(r,"tlsPolicy",{enumerable:!0,get:function(){return v.tlsPolicy}}),Object.defineProperty(r,"tlsPolicyName",{enumerable:!0,get:function(){return v.tlsPolicyName}});var A=e.r(83994);Object.defineProperty(r,"formDataPolicy",{enumerable:!0,get:function(){return A.formDataPolicy}}),Object.defineProperty(r,"formDataPolicyName",{enumerable:!0,get:function(){return A.formDataPolicyName}});var C=e.r(13482);Object.defineProperty(r,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return C.bearerTokenAuthenticationPolicy}}),Object.defineProperty(r,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return C.bearerTokenAuthenticationPolicyName}});var S=e.r(34534);Object.defineProperty(r,"ndJsonPolicy",{enumerable:!0,get:function(){return S.ndJsonPolicy}}),Object.defineProperty(r,"ndJsonPolicyName",{enumerable:!0,get:function(){return S.ndJsonPolicyName}});var w=e.r(22794);Object.defineProperty(r,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return w.auxiliaryAuthenticationHeaderPolicy}}),Object.defineProperty(r,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return w.auxiliaryAuthenticationHeaderPolicyName}});var I=e.r(44512);Object.defineProperty(r,"agentPolicy",{enumerable:!0,get:function(){return I.agentPolicy}}),Object.defineProperty(r,"agentPolicyName",{enumerable:!0,get:function(){return I.agentPolicyName}});var O=e.r(18796);Object.defineProperty(r,"createFile",{enumerable:!0,get:function(){return O.createFile}}),Object.defineProperty(r,"createFileFromStream",{enumerable:!0,get:function(){return O.createFileFromStream}})},15273,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBearerTokenProvider=function(e,t,r){let{abortSignal:i,tracingOptions:o}=r||{},a=(0,n.createEmptyPipeline)();return a.addPolicy((0,n.bearerTokenAuthenticationPolicy)({credential:e,scopes:t})),async function(){let e=await a.sendRequest({sendRequest:e=>Promise.resolve({request:e,status:200,headers:e.headers})},(0,n.createPipelineRequest)({url:"https://example.com",abortSignal:i,tracingOptions:o})),t=e.headers.get("authorization")?.split(" ")[1];if(!t)throw Error("Failed to get access token");return t}};let n=e.r(38709)},59766,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_TOKEN_CACHE_NAME=r.CACHE_NON_CAE_SUFFIX=r.CACHE_CAE_SUFFIX=r.ALL_TENANTS=r.DefaultAuthority=r.DefaultAuthorityHost=r.AzureAuthorityHosts=r.DefaultTenantId=r.DeveloperSignOnClientId=r.SDK_VERSION=void 0,r.SDK_VERSION="4.12.0",r.DeveloperSignOnClientId="04b07795-8ddb-461a-bbee-02f9e1bf7b46",r.DefaultTenantId="common",function(e){e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureGovernment="https://login.microsoftonline.us",e.AzurePublicCloud="https://login.microsoftonline.com"}(n||(r.AzureAuthorityHosts=n={})),r.DefaultAuthorityHost=n.AzurePublicCloud,r.DefaultAuthority="login.microsoftonline.com",r.ALL_TENANTS=["*"],r.CACHE_CAE_SUFFIX="cae",r.CACHE_NON_CAE_SUFFIX="nocae",r.DEFAULT_TOKEN_CACHE_NAME="msal.cache"},56695,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.msalPlugins=r.msalNodeFlowVSCodeCredentialControl=r.msalNodeFlowNativeBrokerControl=r.vsCodeBrokerInfo=r.vsCodeAuthRecordPath=r.nativeBrokerInfo=r.msalNodeFlowCacheControl=r.persistenceProvider=void 0,r.hasNativeBroker=function(){return void 0!==r.nativeBrokerInfo},r.hasVSCodePlugin=function(){return void 0!==r.vsCodeAuthRecordPath&&void 0!==r.vsCodeBrokerInfo};let n=e.r(59766);r.persistenceProvider=void 0,r.msalNodeFlowCacheControl={setPersistence(e){r.persistenceProvider=e}},r.nativeBrokerInfo=void 0,r.vsCodeAuthRecordPath=void 0,r.vsCodeBrokerInfo=void 0,r.msalNodeFlowNativeBrokerControl={setNativeBroker(e){r.nativeBrokerInfo={broker:e}}},r.msalNodeFlowVSCodeCredentialControl={setVSCodeAuthRecordPath(e){r.vsCodeAuthRecordPath=e},setVSCodeBroker(e){r.vsCodeBrokerInfo={broker:e}}};let i={missing:(e,t,r)=>`${e} was requested, but no plugin was configured or no authentication record was found. You must install the ${t} plugin package (npm install --save ${t}) and enable it by importing \`useIdentityPlugin\` from \`@azure/identity\` and calling useIdentityPlugin(${r}) before using enableBroker.`,unavailable:(e,t)=>`${e} was requested, and the plugin is configured, but the broker is unavailable. Ensure the ${e} plugin is properly installed and configured. Check for missing native dependencies and ensure the package is properly installed. See the README for prerequisites on installing and using ${t}.`},o={vsCode:{credentialName:"Visual Studio Code Credential",packageName:"@azure/identity-vscode",pluginVar:"vsCodePlugin",get brokerInfo(){return r.vsCodeBrokerInfo}},native:{credentialName:"Broker for WAM",packageName:"@azure/identity-broker",pluginVar:"nativeBrokerPlugin",get brokerInfo(){return r.nativeBrokerInfo}}};r.msalPlugins={generatePluginConfiguration:function(e){let t={cache:{},broker:{...e.brokerOptions,isEnabled:e.brokerOptions?.enabled??!1,enableMsaPassthrough:e.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(e.tokenCachePersistenceOptions?.enabled){if(void 0===r.persistenceProvider)throw Error("Persistent token caching was requested, but no persistence provider was configured. You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`) and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling `useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`.");let i=e.tokenCachePersistenceOptions.name||n.DEFAULT_TOKEN_CACHE_NAME;t.cache.cachePlugin=(0,r.persistenceProvider)({name:`${i}.${n.CACHE_NON_CAE_SUFFIX}`,...e.tokenCachePersistenceOptions}),t.cache.cachePluginCae=(0,r.persistenceProvider)({name:`${i}.${n.CACHE_CAE_SUFFIX}`,...e.tokenCachePersistenceOptions})}return e.brokerOptions?.enabled&&(t.broker.nativeBrokerPlugin=function(e){let{credentialName:t,packageName:r,pluginVar:n,brokerInfo:a}=o[e?"vsCode":"native"];if(void 0===a)throw Error(i.missing(t,r,n));if(!1===a.broker.isBrokerAvailable)throw Error(i.unavailable(t,r));return a.broker}(e.isVSCodeCredential||!1)),t}}},89006,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useIdentityPlugin=function(e){e(i)};let n=e.r(56695),i={cachePluginControl:n.msalNodeFlowCacheControl,nativeBrokerPluginControl:n.msalNodeFlowNativeBrokerControl,vsCodeCredentialControl:n.msalNodeFlowVSCodeCredentialControl}},12304,(e,t,r)=>{"use strict";function n(e){return{error:e.error,errorDescription:e.error_description,correlationId:e.correlation_id,errorCodes:e.error_codes,timestamp:e.timestamp,traceId:e.trace_id}}Object.defineProperty(r,"__esModule",{value:!0}),r.AuthenticationRequiredError=r.AggregateAuthenticationError=r.AggregateAuthenticationErrorName=r.AuthenticationError=r.AuthenticationErrorName=r.CredentialUnavailableError=r.CredentialUnavailableErrorName=void 0,r.CredentialUnavailableErrorName="CredentialUnavailableError",r.CredentialUnavailableError=class extends Error{constructor(e,t){super(e,t),this.name=r.CredentialUnavailableErrorName}},r.AuthenticationErrorName="AuthenticationError",r.AuthenticationError=class extends Error{statusCode;errorResponse;constructor(e,t,i){let o={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(function(e){return e&&"string"==typeof e.error&&"string"==typeof e.error_description}(t))o=n(t);else if("string"==typeof t)try{let e=JSON.parse(t);o=n(e)}catch(r){o=400===e?{error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${t}`}:{error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${t}`}}else o={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${o.error} Status code: ${e}
More details:
${o.errorDescription},`,i),this.statusCode=e,this.errorResponse=o,this.name=r.AuthenticationErrorName}},r.AggregateAuthenticationErrorName="AggregateAuthenticationError",r.AggregateAuthenticationError=class extends Error{errors;constructor(e,t){super(`${t}
${e.join("\n")}`),this.errors=e,this.name=r.AggregateAuthenticationErrorName}},r.AuthenticationRequiredError=class extends Error{scopes;getTokenOptions;constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}}},8317,(e,t,r)=>{"use strict";function n(e){return e.reduce((e,t)=>(process.env[t]?e.assigned.push(t):e.missing.push(t),e),{missing:[],assigned:[]})}function i(e,t,n=r.logger){let o=t?`${t.fullTitle} ${e}`:e;return{title:e,fullTitle:o,info:function(e){n.info(`${o} =>`,e)},warning:function(e){n.warning(`${o} =>`,e)},verbose:function(e){n.verbose(`${o} =>`,e)},error:function(e){n.error(`${o} =>`,e)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.logger=void 0,r.processEnvVars=n,r.logEnvVars=function(e,t){let{assigned:i}=n(t);r.logger.info(`${e} => Found the following environment variables: ${i.join(", ")}`)},r.formatSuccess=function(e){return`SUCCESS. Scopes: ${Array.isArray(e)?e.join(", "):e}.`},r.formatError=function(e,t){let r="ERROR.";return e?.length&&(r+=` Scopes: ${Array.isArray(e)?e.join(", "):e}.`),`${r} Error message: ${"string"==typeof t?t:t.message}.`},r.credentialLoggerInstance=i,r.credentialLogger=function(e,t=r.logger){let n=i(e,void 0,t);return{...n,parent:t,getToken:i("=> getToken()",n,t)}},r.logger=(0,e.r(9491).createClientLogger)("identity")},52951,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tracingClient=void 0;let n=e.r(59766);r.tracingClient=(0,e.r(88072).createTracingClient)({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:n.SDK_VERSION})},82733,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChainedTokenCredential=r.logger=void 0;let n=e.r(12304),i=e.r(8317),o=e.r(52951);r.logger=(0,i.credentialLogger)("ChainedTokenCredential"),r.ChainedTokenCredential=class{_sources=[];constructor(...e){this._sources=e}async getToken(e,t={}){let{token:r}=await this.getTokenInternal(e,t);return r}async getTokenInternal(e,t={}){let a,s=null,l=[];return o.tracingClient.withSpan("ChainedTokenCredential.getToken",t,async t=>{for(let n=0;n<this._sources.length&&null===s;n++)try{s=await this._sources[n].getToken(e,t),a=this._sources[n]}catch(t){if("CredentialUnavailableError"===t.name||"AuthenticationRequiredError"===t.name)l.push(t);else throw r.logger.getToken.info((0,i.formatError)(e,t)),t}if(!s&&l.length>0){let t=new n.AggregateAuthenticationError(l,"ChainedTokenCredential authentication failed.");throw r.logger.getToken.info((0,i.formatError)(e,t)),t}if(r.logger.getToken.info(`Result for ${a.constructor.name}: ${(0,i.formatSuccess)(e)}`),null===s)throw new n.CredentialUnavailableError("Failed to retrieve a valid token");return{token:s,successfulCredential:a}})}}},30657,e=>{"use strict";let t,r;e.s(["NIL",()=>E,"parse",()=>p,"stringify",()=>u,"v1",()=>f,"v3",()=>g,"v4",()=>y,"v5",()=>_,"validate",()=>l,"version",()=>T],30657),e.s([],75712),e.i(75712);var n=e.i(54799);let i=new Uint8Array(256),o=i.length;function a(){return o>i.length-16&&(n.default.randomFillSync(i),o=0),i.slice(o,o+=16)}let s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(e){return"string"==typeof e&&s.test(e)},c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).substr(1));let u=function(e,t=0){let r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r},d=0,h=0,f=function(e,n,i){let o=n&&i||0,s=n||Array(16),l=(e=e||{}).node||t,c=void 0!==e.clockseq?e.clockseq:r;if(null==l||null==c){let n=e.random||(e.rng||a)();null==l&&(l=t=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==c&&(c=r=(n[6]<<8|n[7])&16383)}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:h+1,m=f-d+(p-h)/1e4;if(m<0&&void 0===e.clockseq&&(c=c+1&16383),(m<0||f>d)&&void 0===e.nsecs&&(p=0),p>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");d=f,h=p,r=c;let g=((0xfffffff&(f+=122192928e5))*1e4+p)%0x100000000;s[o++]=g>>>24&255,s[o++]=g>>>16&255,s[o++]=g>>>8&255,s[o++]=255&g;let y=f/0x100000000*1e4&0xfffffff;s[o++]=y>>>8&255,s[o++]=255&y,s[o++]=y>>>24&15|16,s[o++]=y>>>16&255,s[o++]=c>>>8|128,s[o++]=255&c;for(let e=0;e<6;++e)s[o+e]=l[e];return n||u(s)},p=function(e){let t;if(!l(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/0x10000000000&255,r[11]=t/0x100000000&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function m(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=p(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=a[e];return i}return u(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}let g=m("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n.default.createHash("md5").update(e).digest()}),y=function(e,t,r){let n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return u(n)},_=m("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n.default.createHash("sha1").update(e).digest()}),E="00000000-0000-0000-0000-000000000000",T=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},47121,(e,t,r)=>{"use strict";let n={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},i={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},o=[n.OPENID_SCOPE,n.PROFILE_SCOPE,n.OFFLINE_ACCESS_SCOPE],a=[...o,n.EMAIL_SCOPE],s={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},l={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},c={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},u={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},d={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},h={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},f={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},p={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},m={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},g="appmetadata",y={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},_={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},E={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},T={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},b={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},v={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},A={username:"username",password:"password"},C={FAILED_AUTO_DETECTION:"1",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},S={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},w={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},I="unexpected_error",O="post_request_failed";var R=Object.freeze({__proto__:null,postRequestFailed:O,unexpectedError:I});let N={[I]:"Unexpected error in authentication.",[O]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},P={unexpectedError:{code:I,desc:N[I]},postRequestFailed:{code:O,desc:N[O]}};class k extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,k.prototype),this.errorCode=e||n.EMPTY_STRING,this.errorMessage=t||n.EMPTY_STRING,this.subError=r||n.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}let D="client_info_decoding_error",M="client_info_empty_error",L="token_parsing_error",U="null_or_empty_token",x="endpoints_resolution_error",F="network_error",B="openid_config_error",q="hash_not_deserialized",H="invalid_state",j="state_mismatch",Y="state_not_found",$="nonce_mismatch",V="auth_time_not_found",z="max_age_transpired",G="multiple_matching_tokens",W="multiple_matching_accounts",K="multiple_matching_appMetadata",Q="request_cannot_be_made",X="cannot_remove_empty_scope",Z="cannot_append_scopeset",J="empty_input_scopeset",ee="device_code_polling_cancelled",et="device_code_expired",er="device_code_unknown_error",en="no_account_in_silent_request",ei="invalid_cache_record",eo="invalid_cache_environment",ea="no_account_found",es="no_crypto_object",el="unexpected_credential_type",ec="invalid_assertion",eu="invalid_client_credential",ed="token_refresh_required",eh="user_timeout_reached",ef="token_claims_cnf_required_for_signedjwt",ep="authorization_code_missing_from_server_response",em="binding_key_not_removed",eg="end_session_endpoint_not_supported",ey="key_id_missing",e_="no_network_connectivity",eE="user_canceled",eT="missing_tenant_id_error",eb="method_not_implemented",ev="nested_app_auth_bridge_disabled";var eA=Object.freeze({__proto__:null,authTimeNotFound:V,authorizationCodeMissingFromServerResponse:ep,bindingKeyNotRemoved:em,cannotAppendScopeSet:Z,cannotRemoveEmptyScope:X,clientInfoDecodingError:D,clientInfoEmptyError:M,deviceCodeExpired:et,deviceCodePollingCancelled:ee,deviceCodeUnknownError:er,emptyInputScopeSet:J,endSessionEndpointNotSupported:eg,endpointResolutionError:x,hashNotDeserialized:q,invalidAssertion:ec,invalidCacheEnvironment:eo,invalidCacheRecord:ei,invalidClientCredential:eu,invalidState:H,keyIdMissing:ey,maxAgeTranspired:z,methodNotImplemented:eb,missingTenantIdError:eT,multipleMatchingAccounts:W,multipleMatchingAppMetadata:K,multipleMatchingTokens:G,nestedAppAuthBridgeDisabled:ev,networkError:F,noAccountFound:ea,noAccountInSilentRequest:en,noCryptoObject:es,noNetworkConnectivity:e_,nonceMismatch:$,nullOrEmptyToken:U,openIdConfigError:B,requestCannotBeMade:Q,stateMismatch:j,stateNotFound:Y,tokenClaimsCnfRequiredForSignedJwt:ef,tokenParsingError:L,tokenRefreshRequired:ed,unexpectedCredentialType:el,userCanceled:eE,userTimeoutReached:eh});let eC={[D]:"The client info could not be parsed/decoded correctly",[M]:"The client info was empty",[L]:"Token cannot be parsed",[U]:"The token is null or empty",[x]:"Endpoints cannot be resolved",[F]:"Network request failed",[B]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[q]:"The hash parameters could not be deserialized",[H]:"State was not the expected format",[j]:"State mismatch error",[Y]:"State not found",[$]:"Nonce mismatch error",[V]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[z]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[G]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[W]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[K]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Q]:"Token request cannot be made without authorization code or refresh token.",[X]:"Cannot remove null or empty scope from ScopeSet",[Z]:"Cannot append ScopeSet",[J]:"Empty input ScopeSet cannot be processed",[ee]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[et]:"Device code is expired.",[er]:"Device code stopped polling for unknown reasons.",[en]:"Please pass an account object, silent flow is not supported without account information",[ei]:"Cache record object was null or undefined.",[eo]:"Invalid environment when attempting to create cache entry",[ea]:"No account found in cache for given key.",[es]:"No crypto object detected.",[el]:"Unexpected credential type.",[ec]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[eu]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ed]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[eh]:"User defined timeout for device code polling reached",[ef]:"Cannot generate a POP jwt if the token_claims are not populated",[ep]:"Server response does not contain an authorization code to proceed",[em]:"Could not remove the credential's binding key from storage.",[eg]:"The provided authority does not support logout",[ey]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[e_]:"No network connectivity. Check your internet connection.",[eE]:"User cancelled the flow.",[eT]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[eb]:"This method has not been implemented",[ev]:"The nested app auth bridge is disabled"},eS={clientInfoDecodingError:{code:D,desc:eC[D]},clientInfoEmptyError:{code:M,desc:eC[M]},tokenParsingError:{code:L,desc:eC[L]},nullOrEmptyToken:{code:U,desc:eC[U]},endpointResolutionError:{code:x,desc:eC[x]},networkError:{code:F,desc:eC[F]},unableToGetOpenidConfigError:{code:B,desc:eC[B]},hashNotDeserialized:{code:q,desc:eC[q]},invalidStateError:{code:H,desc:eC[H]},stateMismatchError:{code:j,desc:eC[j]},stateNotFoundError:{code:Y,desc:eC[Y]},nonceMismatchError:{code:$,desc:eC[$]},authTimeNotFoundError:{code:V,desc:eC[V]},maxAgeTranspired:{code:z,desc:eC[z]},multipleMatchingTokens:{code:G,desc:eC[G]},multipleMatchingAccounts:{code:W,desc:eC[W]},multipleMatchingAppMetadata:{code:K,desc:eC[K]},tokenRequestCannotBeMade:{code:Q,desc:eC[Q]},removeEmptyScopeError:{code:X,desc:eC[X]},appendScopeSetError:{code:Z,desc:eC[Z]},emptyInputScopeSetError:{code:J,desc:eC[J]},DeviceCodePollingCancelled:{code:ee,desc:eC[ee]},DeviceCodeExpired:{code:et,desc:eC[et]},DeviceCodeUnknownError:{code:er,desc:eC[er]},NoAccountInSilentRequest:{code:en,desc:eC[en]},invalidCacheRecord:{code:ei,desc:eC[ei]},invalidCacheEnvironment:{code:eo,desc:eC[eo]},noAccountFound:{code:ea,desc:eC[ea]},noCryptoObj:{code:es,desc:eC[es]},unexpectedCredentialType:{code:el,desc:eC[el]},invalidAssertion:{code:ec,desc:eC[ec]},invalidClientCredential:{code:eu,desc:eC[eu]},tokenRefreshRequired:{code:ed,desc:eC[ed]},userTimeoutReached:{code:eh,desc:eC[eh]},tokenClaimsRequired:{code:ef,desc:eC[ef]},noAuthorizationCodeFromServer:{code:ep,desc:eC[ep]},bindingKeyNotRemovedError:{code:em,desc:eC[em]},logoutNotSupported:{code:eg,desc:eC[eg]},keyIdMissing:{code:ey,desc:eC[ey]},noNetworkConnectivity:{code:e_,desc:eC[e_]},userCanceledError:{code:eE,desc:eC[eE]},missingTenantIdError:{code:eT,desc:eC[eT]},nestedAppAuthBridgeDisabled:{code:ev,desc:eC[ev]}};class ew extends k{constructor(e,t){super(e,t?`${eC[e]}: ${t}`:eC[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ew.prototype)}}function eI(e,t){return new ew(e,t)}function eO(e,t){let r=eR(e);try{let e=t(r);return JSON.parse(e)}catch(e){throw eI(L)}}function eR(e){if(!e)throw eI(U);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw eI(L);return t[2]}function eN(e,t){if(0===t||Date.now()-3e5>e+t)throw eI(z)}var eP=Object.freeze({__proto__:null,checkMaxAge:eN,extractTokenClaims:eO,getJWSPayload:eR});let ek={Default:0,Adfs:1,Dsts:2,Ciam:3},eD="redirect_uri_empty",eM="claims_request_parsing_error",eL="authority_uri_insecure",eU="url_parse_error",ex="empty_url_error",eF="empty_input_scopes_error",eB="invalid_claims",eq="token_request_empty",eH="logout_request_empty",ej="invalid_code_challenge_method",eY="pkce_params_missing",e$="invalid_cloud_discovery_metadata",eV="invalid_authority_metadata",ez="untrusted_authority",eG="missing_ssh_jwk",eW="missing_ssh_kid",eK="missing_nonce_authentication_header",eQ="invalid_authentication_header",eX="cannot_set_OIDCOptions",eZ="cannot_allow_platform_broker",eJ="authority_mismatch",e0="invalid_request_method_for_EAR",e1="invalid_authorize_post_body_parameters";var e2=Object.freeze({__proto__:null,authorityMismatch:eJ,authorityUriInsecure:eL,cannotAllowPlatformBroker:eZ,cannotSetOIDCOptions:eX,claimsRequestParsingError:eM,emptyInputScopesError:eF,invalidAuthenticationHeader:eQ,invalidAuthorityMetadata:eV,invalidAuthorizePostBodyParameters:e1,invalidClaims:eB,invalidCloudDiscoveryMetadata:e$,invalidCodeChallengeMethod:ej,invalidRequestMethodForEAR:e0,logoutRequestEmpty:eH,missingNonceAuthenticationHeader:eK,missingSshJwk:eG,missingSshKid:eW,pkceParamsMissing:eY,redirectUriEmpty:eD,tokenRequestEmpty:eq,untrustedAuthority:ez,urlEmptyError:ex,urlParseError:eU});let e5={[eD]:"A redirect URI is required for all calls, and none has been set.",[eM]:"Could not parse the given claims request object.",[eL]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[eU]:"URL could not be parsed into appropriate segments.",[ex]:"URL was empty or null.",[eF]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[eB]:"Given claims parameter must be a stringified JSON object.",[eq]:"Token request was empty and not found in cache.",[eH]:"The logout request was null or undefined.",[ej]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[eY]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[e$]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[eV]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[ez]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[eG]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[eW]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[eK]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[eQ]:"Invalid authentication header provided",[eX]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[eZ]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[eJ]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[e1]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[e0]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},e8={redirectUriNotSet:{code:eD,desc:e5[eD]},claimsRequestParsingError:{code:eM,desc:e5[eM]},authorityUriInsecure:{code:eL,desc:e5[eL]},urlParseError:{code:eU,desc:e5[eU]},urlEmptyError:{code:ex,desc:e5[ex]},emptyScopesError:{code:eF,desc:e5[eF]},invalidClaimsRequest:{code:eB,desc:e5[eB]},tokenRequestEmptyError:{code:eq,desc:e5[eq]},logoutRequestEmptyError:{code:eH,desc:e5[eH]},invalidCodeChallengeMethod:{code:ej,desc:e5[ej]},invalidCodeChallengeParams:{code:eY,desc:e5[eY]},invalidCloudDiscoveryMetadata:{code:e$,desc:e5[e$]},invalidAuthorityMetadata:{code:eV,desc:e5[eV]},untrustedAuthority:{code:ez,desc:e5[ez]},missingSshJwk:{code:eG,desc:e5[eG]},missingSshKid:{code:eW,desc:e5[eW]},missingNonceAuthenticationHeader:{code:eK,desc:e5[eK]},invalidAuthenticationHeader:{code:eQ,desc:e5[eQ]},cannotSetOIDCOptions:{code:eX,desc:e5[eX]},cannotAllowPlatformBroker:{code:eZ,desc:e5[eZ]},authorityMismatch:{code:eJ,desc:e5[eJ]},invalidAuthorizePostBodyParameters:{code:e1,desc:e5[e1]},invalidRequestMethodForEAR:{code:e0,desc:e5[e0]}};class e6 extends k{constructor(e){super(e,e5[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,e6.prototype)}}function e4(e){return new e6(e)}class e3{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),n=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach(e=>{if(e.trim()){let[r,i]=e.split(/=(.+)/g,2);r&&i&&(t[n(r)]=n(i))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}function e9(e){if(!e)return e;let t=e.toLowerCase();return e3.endsWith(t,"?")?t=t.slice(0,-1):e3.endsWith(t,"?/")&&(t=t.slice(0,-2)),e3.endsWith(t,"/")||(t+="/"),t}function e7(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function te(e){if(!e||0>e.indexOf("="))return null;try{let t=e7(e),r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch(e){throw eI(q)}return null}function tt(e,t=!0,r){let n=[];return e.forEach((e,i)=>{!t&&r&&i in r?n.push(`${i}=${e}`):n.push(`${i}=${encodeURIComponent(e)}`)}),n.join("&")}var tr=Object.freeze({__proto__:null,getDeserializedResponse:te,mapToQueryString:tt,normalizeUrlForComparison:function(e){if(!e)return e;let t=e.split("#")[0];try{let e=new URL(t),r=e.origin+e.pathname+e.search;return e9(r)}catch(e){return e9(t)}},stripLeadingHashOrQuery:e7});class tn{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw e4(ex);e.includes("#")||(this._urlString=tn.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return e3.endsWith(t,"?")?t=t.slice(0,-1):e3.endsWith(t,"?/")&&(t=t.slice(0,-2)),e3.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw e4(eU)}if(!e.HostNameAndPort||!e.PathSegments)throw e4(eU);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw e4(eL)}static appendQueryString(e,t){return t?0>e.indexOf("?")?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return tn.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&0!==r.length&&(r[0]===l.COMMON||r[0]===l.ORGANIZATIONS)&&(r[0]=e),tn.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw e4(eU);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},n=r.AbsolutePath.split("/");return r.PathSegments=n=n.filter(e=>e&&e.length>0),r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw e4(eU);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===n.FORWARD_SLASH){let r=new tn(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new tn(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!te(e)}}let ti={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},to=ti.endpointMetadata,ta=ti.instanceDiscoveryMetadata,ts=new Set;function tl(e,t,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),e&&t){let i=tc(t,e);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function tc(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(n.aliases.includes(t))return n}return null}ta.metadata.forEach(e=>{e.aliases.forEach(e=>{ts.add(e)})});let tu={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"},td={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},th={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},tf=new Map([[th.AcquireTokenByCode,"ATByCode"],[th.AcquireTokenByRefreshToken,"ATByRT"],[th.AcquireTokenSilent,"ATS"],[th.AcquireTokenSilentAsync,"ATSAsync"],[th.AcquireTokenPopup,"ATPopup"],[th.AcquireTokenRedirect,"ATRedirect"],[th.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[th.CryptoOptsSignJwt,"CryptoSignJwt"],[th.SilentCacheClientAcquireToken,"SltCacheClientAT"],[th.SilentIframeClientAcquireToken,"SltIframeClientAT"],[th.SilentRefreshClientAcquireToken,"SltRClientAT"],[th.SsoSilent,"SsoSlt"],[th.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[th.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[th.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[th.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[th.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[th.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[th.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[th.BrokerHandhshake,"BrokerHandshake"],[th.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[th.AcquireTokenByBroker,"ATByBroker"],[th.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[th.RefreshTokenClientAcquireToken,"RTClientAT"],[th.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[th.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[th.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[th.AcquireTokenFromCache,"ATFromCache"],[th.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[th.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[th.AcquireTokenBySilentIframe,"ATBySltIframe"],[th.InitializeBaseRequest,"InitBaseReq"],[th.InitializeSilentRequest,"InitSltReq"],[th.InitializeClientApplication,"InitClientApplication"],[th.InitializeCache,"InitCache"],[th.ImportExistingCache,"importCache"],[th.SetUserData,"setUserData"],[th.LocalStorageUpdated,"localStorageUpdated"],[th.SilentIframeClientTokenHelper,"SIClientTHelper"],[th.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[th.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[th.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[th.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[th.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[th.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[th.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[th.GetAuthCodeUrl,"GetAuthCodeUrl"],[th.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[th.HandleCodeResponse,"HandleCodeResp"],[th.HandleResponseEar,"HandleRespEar"],[th.HandleResponseCode,"HandleRespCode"],[th.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[th.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[th.AuthClientAcquireToken,"AuthClientAT"],[th.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[th.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[th.PopTokenGenerateCnf,"PopTGenCnf"],[th.PopTokenGenerateKid,"PopTGenKid"],[th.HandleServerTokenResponse,"HandleServerTRes"],[th.DeserializeResponse,"DeserializeRes"],[th.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[th.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[th.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[th.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[th.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[th.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[th.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[th.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[th.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[th.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[th.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[th.AcquireTokenByCodeAsync,"ATByCodeAsync"],[th.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[th.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[th.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[th.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[th.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[th.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[th.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[th.NativeGenerateAuthResult,"NtvGenAuthRes"],[th.RemoveHiddenIframe,"RemoveHiddenIframe"],[th.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[th.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[th.GeneratePkceCodes,"GenPkceCodes"],[th.GenerateCodeVerifier,"GenCodeVerifier"],[th.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[th.Sha256Digest,"Sha256Digest"],[th.GetRandomValues,"GetRandomValues"],[th.GenerateHKDF,"genHKDF"],[th.GenerateBaseKey,"genBaseKey"],[th.Base64Decode,"b64Decode"],[th.UrlEncodeArr,"urlEncArr"],[th.Encrypt,"encrypt"],[th.Decrypt,"decrypt"],[th.GenerateEarKey,"genEarKey"],[th.DecryptEarResponse,"decryptEarResp"]]),tp={NotStarted:0,InProgress:1,Completed:2},tm=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]),tg=(e,t,r,n,i)=>(...o)=>{r.trace(`Executing function ${t}`);let a=n?.startMeasurement(t,i);i&&n?.incrementFields({[t+"CallCount"]:1},i);try{let n=e(...o);return a?.end({success:!0}),r.trace(`Returning result from ${t}`),n}catch(e){r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw a?.end({success:!1},e),e}},ty=(e,t,r,n,i)=>(...o)=>{r.trace(`Executing function ${t}`);let a=n?.startMeasurement(t,i);return i&&n?.incrementFields({[t+"CallCount"]:1},i),n?.setPreQueueTime(t,i),e(...o).then(e=>(r.trace(`Returning result from ${t}`),a?.end({success:!0}),e)).catch(e=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw a?.end({success:!1},e),e})};class t_{constructor(e,t,r,n){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=n}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(th.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=C.ENVIRONMENT_VARIABLE;else{let e=t_.IMDS_OPTIONS;try{let o=await ty(this.getRegionFromIMDS.bind(this),th.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(n.IMDS_VERSION,e);if(o.status===i.SUCCESS&&(r=o.body,t.region_source=C.IMDS),o.status===i.BAD_REQUEST){let n=await ty(this.getCurrentVersion.bind(this),th.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=C.FAILED_AUTO_DETECTION,null;let o=await ty(this.getRegionFromIMDS.bind(this),th.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(n,e);o.status===i.SUCCESS&&(r=o.body,t.region_source=C.IMDS)}}catch(e){return t.region_source=C.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=C.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(th.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${n.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,n.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(th.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let t=await this.networkInterface.sendGetRequestAsync(`${n.IMDS_ENDPOINT}?format=json`,e);if(t.status===i.BAD_REQUEST&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0)return t.body["newest-versions"][0];return null}catch(e){return null}}}function tE(){return Math.round(new Date().getTime()/1e3)}function tT(e){return e?new Date(1e3*Number(e)):new Date}function tb(e,t){let r=Number(e)||0;return tE()+t>r}function tv(e){return Number(e)>tE()}t_.IMDS_OPTIONS={headers:{Metadata:"true"}};var tA=Object.freeze({__proto__:null,delay:function(e,t){return new Promise(r=>setTimeout(()=>r(t),e))},isCacheExpired:function(e,t){let r=Number(e)+24*t*36e5;return Date.now()>r},isTokenExpired:tb,nowSeconds:tE,toDateFromSeconds:tT,toSecondsFromDate:function(e){return e.getTime()/1e3},wasClockTurnedBack:tv});function tC(e,t,r,n,i){return{credentialType:m.ID_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,realm:i,lastUpdatedAt:Date.now().toString()}}function tS(e,t,r,n,i,o,a,s,l,c,u,d,h,f,p){let g={homeAccountId:e,credentialType:m.ACCESS_TOKEN,secret:r,cachedAt:tE().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:n,realm:i,target:o,tokenType:u||T.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(g.userAssertionHash=d),c&&(g.refreshOn=c.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=p),g.tokenType?.toLowerCase()!==T.BEARER.toLowerCase())switch(g.credentialType=m.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case T.POP:let y=eO(r,l);if(!y?.cnf?.kid)throw eI(ef);g.keyId=y.cnf.kid;break;case T.SSH:g.keyId=h}return g}function tw(e,t,r,n,i,o,a){let s={credentialType:m.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return o&&(s.userAssertionHash=o),i&&(s.familyId=i),a&&(s.expiresOn=a.toString()),s}function tI(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function tO(){return tE()+y.REFRESH_TIME_SECONDS}function tR(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function tN(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function tP(e){return e.expiresAt<=tE()}var tk=Object.freeze({__proto__:null,createAccessTokenEntity:tS,createIdTokenEntity:tC,createRefreshTokenEntity:tw,generateAppMetadataKey:function({environment:e,clientId:t}){return[g,e,t].join(p.CACHE_KEY_SEPARATOR).toLowerCase()},generateAuthorityMetadataExpiresAt:tO,isAccessTokenEntity:function(e){return!!e&&tI(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===m.ACCESS_TOKEN||e.credentialType===m.ACCESS_TOKEN_WITH_AUTH_SCHEME)},isAppMetadataEntity:function(e,t){return!!t&&0===e.indexOf(g)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")},isAuthorityMetadataEntity:function(e,t){return!!t&&0===e.indexOf(y.CACHE_KEY)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")},isAuthorityMetadataExpired:tP,isCredentialEntity:tI,isIdTokenEntity:function(e){return!!e&&tI(e)&&e.hasOwnProperty("realm")&&e.credentialType===m.ID_TOKEN},isRefreshTokenEntity:function(e){return!!e&&tI(e)&&e.credentialType===m.REFRESH_TOKEN},isServerTelemetryEntity:function(e,t){let r=0===e.indexOf(E.CACHE_KEY),n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n},isThrottlingEntity:function(e,t){let r=!1;e&&(r=0===e.indexOf(b.THROTTLING_PREFIX));let n=!0;return t&&(n=t.hasOwnProperty("throttleTime")),r&&n},updateAuthorityEndpointMetadata:tR,updateCloudDiscoveryMetadata:tN});class tD{constructor(e,t,r,n,i,o,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=o,this.managedIdentity=s||!1,this.regionDiscovery=new t_(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(n.CIAM_AUTH_URL))return ek.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case n.ADFS:return ek.Adfs;case n.DSTS:return ek.Dsts}return ek.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new tn(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw eI(x)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw eI(x)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw eI(x)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw eI(eg);return this.replacePath(this.metadata.end_session_endpoint)}throw eI(x)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw eI(x)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw eI(x)}canReplaceTenant(e){return 1===e.PathSegments.length&&!tD.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ek.Default&&this.protocolMode!==tu.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,r=new tn(this.metadata.canonical_authority).getUrlComponents(),n=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,i)=>{let o=n[i];if(0===i&&this.canReplaceTenant(r)){let e=new tn(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ek.Adfs||this.protocolMode===tu.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(th.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=await ty(this.updateCloudDiscoveryMetadata.bind(this),th.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=await ty(this.updateEndpointMetadata.bind(this),th.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:tO(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==_.CACHE&&r?.source!==_.CACHE&&(e.expiresAt=tO(),e.canonical_authority=this.canonicalAuthority);let n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(th.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===_.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(tR(e,await ty(this.updateMetadataWithRegionalInformation.bind(this),th.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let r=await ty(this.getEndpointMetadataFromNetwork.bind(this),th.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await ty(this.updateMetadataWithRegionalInformation.bind(this),th.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),tR(e,r,!0),_.NETWORK;throw eI(B,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),tR(e,t,!1),{source:_.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let t=this.getEndpointMetadataFromHardcodedValues();if(t)return tR(e,t,!1),{source:_.HARDCODED_VALUES,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=tP(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:_.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new tn(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw e4(eV)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(th.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${e}`);try{var t;let r=await this.networkInterface.sendGetRequestAsync(e,{});if((t=r.body).hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri"))return r.body;return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in to?to[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(th.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==n.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=S.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,tD.replaceWithRegionalInformation(e,t);let r=await ty(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),th.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=S.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,tD.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=S.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(th.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=await ty(this.getCloudDiscoveryMetadataFromNetwork.bind(this),th.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return tN(e,r,!0),_.NETWORK;throw e4(ez)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||n.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||n.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||n.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),tN(e,t,!1),_.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{var r;let t=(r=this.hostnameAndPort,tc(ta.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),tN(e,t,!1),_.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let i=tP(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!i?(this.logger.verbose("Found cloud discovery metadata in the cache."),_.CACHE):(i&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ek.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),tD.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=tc(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),e4(e$)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),tD.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(th.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${n.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t=null;try{var r,i;let o,a,s=await this.networkInterface.sendGetRequestAsync(e,{});if((r=s.body).hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata"))a=(o=s.body).metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else{if(!((i=s.body).hasOwnProperty("error")&&i.hasOwnProperty("error_description")))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),(o=s.body).error===n.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),t=tc(a,this.hostnameAndPort)}catch(e){return e instanceof k?this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${e.errorCode}
Error Description: ${e.errorMessage}`):this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${e.name}
Error Description: ${e.message}`),null}return t||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),t=tD.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),t}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&tn.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==td.None){let e=t.tenant?t.tenant:n.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${e}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return n.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw eI(x)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return ts.has(e)}static isPublicCloudAuthority(e){return n.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let i=new tn(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${t}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${t}.${n.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let s=tn.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return r?`${s}?${r}`:s}static replaceWithRegionalInformation(e,t){let r={...e};return r.authorization_endpoint=tD.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=tD.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=tD.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,r=new tn(e).getUrlComponents();if(0===r.PathSegments.length&&r.HostNameAndPort.endsWith(n.CIAM_AUTH_URL)){let e=r.HostNameAndPort.split(".")[0];t=`${t}${e}${n.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}function tM(e){return e.endsWith(n.FORWARD_SLASH)?e:`${e}${n.FORWARD_SLASH}`}async function tL(e,t,r,n,i,o,a){a?.addQueueMeasurement(th.AuthorityFactoryCreateDiscoveredInstance,o);let s=tD.transformCIAMAuthority(tM(e)),l=new tD(s,t,r,n,i,o,a);try{return await ty(l.resolveEndpointsAsync.bind(l),th.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch(e){throw eI(x)}}tD.reservedTenantDomains=new Set(["{tenant}","{tenantid}",l.COMMON,l.CONSUMERS,l.ORGANIZATIONS]);var tU=Object.freeze({__proto__:null,createDiscoveredInstance:tL});let tx="client_id",tF="redirect_uri",tB="response_type",tq="response_mode",tH="grant_type",tj="claims",tY="scope",t$="refresh_token",tV="state",tz="nonce",tG="prompt",tW="code",tK="code_challenge",tQ="code_challenge_method",tX="code_verifier",tZ="client-request-id",tJ="x-client-SKU",t0="x-client-VER",t1="x-client-OS",t2="x-client-CPU",t5="x-client-current-telemetry",t8="x-client-last-telemetry",t6="x-ms-lib-capability",t4="x-app-name",t3="x-app-ver",t9="post_logout_redirect_uri",t7="id_token_hint",re="device_code",rt="client_secret",rr="client_assertion",rn="client_assertion_type",ri="token_type",ro="req_cnf",ra="assertion",rs="requested_token_use",rl="return_spa_code",rc="nativebroker",ru="logout_hint",rd="login_hint",rh="domain_hint",rf="brk_client_id",rp="brk_redirect_uri",rm="instance_aware",rg="ear_jwk",ry="ear_jwe_crypto";var r_=Object.freeze({__proto__:null,ACCESS_TOKEN:"access_token",BROKER_CLIENT_ID:rf,BROKER_REDIRECT_URI:rp,CCS_HEADER:"X-AnchorMailbox",CLAIMS:tj,CLIENT_ASSERTION:rr,CLIENT_ASSERTION_TYPE:rn,CLIENT_ID:tx,CLIENT_INFO:"client_info",CLIENT_REQUEST_ID:tZ,CLIENT_SECRET:rt,CODE:tW,CODE_CHALLENGE:tK,CODE_CHALLENGE_METHOD:tQ,CODE_VERIFIER:tX,DEVICE_CODE:re,DOMAIN_HINT:rh,EAR_JWE_CRYPTO:ry,EAR_JWK:rg,ERROR:"error",ERROR_DESCRIPTION:"error_description",EXPIRES_IN:"expires_in",FOCI:"foci",GRANT_TYPE:tH,ID_TOKEN:"id_token",ID_TOKEN_HINT:t7,INSTANCE_AWARE:rm,LOGIN_HINT:rd,LOGOUT_HINT:ru,NATIVE_BROKER:rc,NONCE:tz,OBO_ASSERTION:ra,ON_BEHALF_OF:"on_behalf_of",POST_LOGOUT_URI:t9,PROMPT:tG,REDIRECT_URI:tF,REFRESH_TOKEN:t$,REFRESH_TOKEN_EXPIRES_IN:"refresh_token_expires_in",REQUESTED_TOKEN_USE:rs,REQ_CNF:ro,RESPONSE_MODE:tq,RESPONSE_TYPE:tB,RETURN_SPA_CODE:rl,SCOPE:tY,SESSION_STATE:"session_state",SID:"sid",STATE:tV,TOKEN_TYPE:ri,X_APP_NAME:t4,X_APP_VER:t3,X_CLIENT_CPU:t2,X_CLIENT_CURR_TELEM:t5,X_CLIENT_EXTRA_SKU:"x-client-xtra-sku",X_CLIENT_LAST_TELEM:t8,X_CLIENT_OS:t1,X_CLIENT_SKU:tJ,X_CLIENT_VER:t0,X_MS_LIB_CAPABILITY:t6});let rE={createNewGuid:()=>{throw eI(eb)},base64Decode:()=>{throw eI(eb)},base64Encode:()=>{throw eI(eb)},base64UrlEncode:()=>{throw eI(eb)},encodeKid:()=>{throw eI(eb)},async getPublicKeyThumbprint(){throw eI(eb)},async removeTokenBindingKey(){throw eI(eb)},async clearKeystore(){throw eI(eb)},async signJwt(){throw eI(eb)},async hashString(){throw eI(eb)}};r.LogLevel=void 0,function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(r.LogLevel||(r.LogLevel={}));class rT{constructor(e,t,i){this.level=r.LogLevel.Info;let o=e||rT.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||(()=>{}),this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level="number"==typeof o.logLevel?o.logLevel:r.LogLevel.Info,this.correlationId=o.correlationId||n.EMPTY_STRING,this.packageName=t||n.EMPTY_STRING,this.packageVersion=i||n.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:r.LogLevel.Info}}clone(e,t,r){return new rT({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let n=new Date().toUTCString(),i=`[${n}] : [${t.correlationId||this.correlationId||""}]`,o=`${i} : ${this.packageName}@${this.packageVersion} : ${r.LogLevel[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:r.LogLevel.Error,containsPii:!1,correlationId:t||n.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Error,containsPii:!0,correlationId:t||n.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:r.LogLevel.Warning,containsPii:!1,correlationId:t||n.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Warning,containsPii:!0,correlationId:t||n.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:r.LogLevel.Info,containsPii:!1,correlationId:t||n.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Info,containsPii:!0,correlationId:t||n.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:r.LogLevel.Verbose,containsPii:!1,correlationId:t||n.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Verbose,containsPii:!0,correlationId:t||n.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:r.LogLevel.Trace,containsPii:!1,correlationId:t||n.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Trace,containsPii:!0,correlationId:t||n.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}let rb="@azure/msal-common",rv="15.12.0";class rA{constructor(e){let t=e?e3.trimArrayEntries([...e]):[],r=t?e3.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw e4(eF);this.scopes=new Set,r.forEach(e=>this.scopes.add(e))}static fromString(e){return new rA((e||n.EMPTY_STRING).split(" "))}static createSearchScopes(e){let t=new rA(e&&e.length>0?e:[...o]);return t.containsOnlyOIDCScopes()?t.removeScope(n.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){let t=new rA(this.printScopesLowerCase().split(" "));return!!e&&t.scopes.has(e.toLowerCase())}containsScopeSet(e){return!!e&&!(e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let e=0;return a.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(e){throw eI(Z)}}removeScope(e){if(!e)throw eI(X);this.scopes.delete(e.trim())}removeOIDCScopes(){a.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw eI(J);let t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw eI(J);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):n.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function rC(e,t){return!!e&&!!t&&e===t.split(".")[1]}function rS(e,t,r,n){if(!n)return{tenantId:r,localAccountId:t,username:"",isHomeTenant:rC(r,e)};{let{oid:t,sub:r,tid:i,name:o,tfp:a,acr:s,preferred_username:l,upn:c,login_hint:u}=n,d=i||a||s||"";return{tenantId:d,localAccountId:t||r||"",name:o,username:l||c||"",loginHint:u,isHomeTenant:rC(d,e)}}}function rw(e,t,r,n){let i=e;if(t){let{isHomeTenant:r,...n}=t;i={...e,...n}}if(r){let{isHomeTenant:t,...o}=rS(e.homeAccountId,e.localAccountId,e.tenantId,r);i={...i,...o,idTokenClaims:r,idToken:n}}return i}let rI="cache_quota_exceeded",rO="cache_error_unknown";var rR=Object.freeze({__proto__:null,cacheErrorUnknown:rO,cacheQuotaExceeded:rI});let rN={[rI]:"Exceeded cache storage capacity.",[rO]:"Unexpected error occurred when using cache storage."};class rP extends k{constructor(e,t){let r=t||(rN[e]?rN[e]:rN[rO]);super(`${e}: ${r}`),Object.setPrototypeOf(this,rP.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function rk(e){return e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new rP(rI):new rP(e.name,e.message):new rP(rO)}class rD{constructor(e,t,r,n,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(rb,rv),this.staticAuthorityOptions=i,this.performanceClient=n}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(e=>!e))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let r=this.getAllAccounts(e,t);return r.length>1?r.sort(e=>e.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,n,i){let o;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let a=this.getIdToken(e,n,t,r.tenantId);return a&&(o=eO(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,i))?null:rw(e,r,o,a?.secret)}getTenantProfilesFromAccountEntity(e,t,r,n){let i=e.getAccountInfo(),o=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let e=o.get(r);if(!e)return[];o=new Map([[r,e]])}let s=[];return o.forEach(e=>{let r=this.getTenantedAccountInfoByFilter(i,a,e,t,n);r&&s.push(r)}),s}tenantProfileMatchesFilter(e,t){return(!t.localAccountId||!!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&(!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return(!t||(!t.localAccountId||!!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))&&(!t.loginHint||!!this.matchLoginHintFromTokenClaims(e,t.loginHint))&&(!t.username||!!this.matchUsername(e.preferred_username,t.username))&&(!t.name||!!this.matchName(e,t.name))&&(!t.sid||!!this.matchSid(e,t.sid)))&&!0}async saveCacheRecord(e,t,r){if(!e)throw eI(ei);try{e.account&&await this.setAccount(e.account,t),e.idToken&&r?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&r?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&r?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(e){if(this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof k)throw e;throw rk(e)}}async saveAccessToken(e,t){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),i=rA.fromString(e.target);n.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,r,!1))return;let n=this.getAccessTokenCredential(e,t);n&&this.credentialMatchesFilter(n,r)&&rA.fromString(n.target).intersectingScopeSets(i)&&this.removeAccessToken(e,t)}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),n=[];return r.forEach(r=>{let i=this.getAccount(r,t);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;let o={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,o));a&&0===a.length||n.push(i)}),n}credentialMatchesFilter(e,t){return(!t.clientId||!!this.matchClientId(e,t.clientId))&&(!t.userAssertionHash||!!this.matchUserAssertionHash(e,t.userAssertionHash))&&("string"!=typeof t.homeAccountId||!!this.matchHomeAccountId(e,t.homeAccountId))&&(!t.environment||!!this.matchEnvironment(e,t.environment))&&(!t.realm||!!this.matchRealm(e,t.realm))&&(!t.credentialType||!!this.matchCredentialType(e,t.credentialType))&&(!t.familyId||!!this.matchFamilyId(e,t.familyId))&&(!t.target||!!this.matchTarget(e,t.target))&&(!t.requestedClaimsHash&&!e.requestedClaimsHash||e.requestedClaimsHash===t.requestedClaimsHash)&&(e.credentialType!==m.ACCESS_TOKEN_WITH_AUTH_SCHEME||(!t.tokenType||!!this.matchTokenType(e,t.tokenType))&&(t.tokenType!==T.SSH||!t.keyId||!!this.matchKeyId(e,t.keyId)))&&!0}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;let n=this.getAppMetadata(t);n&&(!e.environment||this.matchEnvironment(n,e.environment))&&(!e.clientId||this.matchClientId(n,e.clientId))&&(r[t]=n)}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;let n=this.getAuthorityMetadata(t);n&&-1!==n.aliases.indexOf(e)&&(r=n)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let r=this.getTokenKeys(),n=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);r.idToken.filter(n).forEach(e=>{this.removeIdToken(e,t)}),r.accessToken.filter(n).forEach(e=>{this.removeAccessToken(e,t)}),r.refreshToken.filter(n).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==m.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==T.POP)return;let n=r.keyId;n&&this.cryptoImpl.removeTokenBindingKey(n).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${n}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:m.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(o,t,r),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let r=a;if(!n){let t=new Map;a.forEach((r,n)=>{r.realm===e.tenantId&&t.set(n,r)});let n=t.size;if(n<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===n)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;r=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),r.forEach((e,r)=>{this.removeIdToken(r,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let n=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return n.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,{clientId:this.clientId,...e}))return;let n=this.getIdTokenCredential(r,t);n&&this.credentialMatchesFilter(n,e)&&i.set(r,n)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return(!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,n){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let o=rA.createSearchScopes(t.scopes),a=t.authenticationScheme||T.BEARER,s=a&&a.toLowerCase()!==T.BEARER.toLowerCase()?m.ACCESS_TOKEN_WITH_AUTH_SCHEME:m.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:n||e.tenantId,target:o,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=r&&r.accessToken||this.getTokenKeys().accessToken,u=[];c.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){let t=this.getAccessTokenCredential(e,i);t&&this.credentialMatchesFilter(t,l)&&u.push(t)}});let d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),u.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),i)}),this.performanceClient.addFields({multiMatchedAT:u.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),u[0])}accessTokenKeyMatchesFilter(e,t,r){let n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===n.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){let e=t.target.asArray();for(let t=0;t<e.length;t++)if(r&&!n.includes(e[t].toLowerCase()))return!1;else if(!r&&n.includes(e[t].toLowerCase()))break}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),n=[];return r.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;let i=this.getAccessTokenCredential(r,t);i&&this.credentialMatchesFilter(i,e)&&n.push(i)}),n}getRefreshToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:m.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},a=n&&n.refreshToken||this.getTokenKeys().refreshToken,s=[];a.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,o)){let t=this.getRefreshTokenCredential(e,r);t&&this.credentialMatchesFilter(t,o)&&s.push(t)}});let l=s.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&i&&r&&i.addFields({multiMatchedRT:l},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),s[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return(!t.familyId||-1!==r.indexOf(t.familyId.toLowerCase()))&&(!!t.familyId||!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map(e=>r[e]),i=n.length;if(i<1)return null;if(i>1)throw eI(K);return n[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&"1"===t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&"string"==typeof e&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let r=function(e,t){let r,n=e.canonicalAuthority;if(n){let i=new tn(n).getUrlComponents().HostNameAndPort;r=tl(i,e.cloudDiscoveryMetadata?.metadata,_.CONFIG,t)||tl(i,ta.metadata,_.HARDCODED_VALUES,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return(e.credentialType===m.ACCESS_TOKEN||e.credentialType===m.ACCESS_TOKEN_WITH_AUTH_SCHEME)&&!!e.target&&rA.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return -1!==e.indexOf(g)}isAuthorityMetadata(e){return -1!==e.indexOf(y.CACHE_KEY)}generateAuthorityMetadataCacheKey(e){return`${y.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}}class rM extends rD{async setAccount(){throw eI(eb)}getAccount(){throw eI(eb)}async setIdTokenCredential(){throw eI(eb)}getIdTokenCredential(){throw eI(eb)}async setAccessTokenCredential(){throw eI(eb)}getAccessTokenCredential(){throw eI(eb)}async setRefreshTokenCredential(){throw eI(eb)}getRefreshTokenCredential(){throw eI(eb)}setAppMetadata(){throw eI(eb)}getAppMetadata(){throw eI(eb)}setServerTelemetry(){throw eI(eb)}getServerTelemetry(){throw eI(eb)}setAuthorityMetadata(){throw eI(eb)}getAuthorityMetadata(){throw eI(eb)}getAuthorityMetadataKeys(){throw eI(eb)}setThrottlingCache(){throw eI(eb)}getThrottlingCache(){throw eI(eb)}removeItem(){throw eI(eb)}getKeys(){throw eI(eb)}getAccountKeys(){throw eI(eb)}getTokenKeys(){throw eI(eb)}generateCredentialKey(){throw eI(eb)}generateAccountKey(){throw eI(eb)}}class rL{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class rU{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:tp.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new rL}}startPerformanceMeasurement(){return new rL}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}let rx={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},rF={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:r.LogLevel.Info,correlationId:n.EMPTY_STRING},rB={claimsBasedCachingEnabled:!1},rq={async sendGetRequestAsync(){throw eI(eb)},async sendPostRequestAsync(){throw eI(eb)}},rH={sku:n.SKU,version:rv,cpu:n.EMPTY_STRING,os:n.EMPTY_STRING},rj={clientSecret:n.EMPTY_STRING,clientAssertion:void 0},rY={azureCloudInstance:td.None,tenant:`${n.DEFAULT_COMMON_TENANT}`},r$={application:{appName:"",appVersion:""}};function rV(e){return e.authOptions.authority.options.protocolMode===tu.OIDC}let rz={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};function rG(e,t){if(!e)throw eI(M);try{let r=t(e);return JSON.parse(r)}catch(e){throw eI(D)}}function rW(e){if(!e)throw eI(D);let t=e.split(p.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?n.EMPTY_STRING:t[1]}}function rK(e,t,r){if(!t)return;let n=e.get(tx);n&&e.has(rf)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:e.get(tF)},t)}function rQ(e,t){e.set(tq,t||d.QUERY)}function rX(e,t,r=!0,n=o){!r||n.includes("openid")||t.includes("openid")||n.push("openid");let i=new rA(r?[...t||[],...n]:t||[]);e.set(tY,i.printScopes())}function rZ(e,t){e.set(tx,t)}function rJ(e,t){e.set(tF,t)}function r0(e,t){e.set(t9,t)}function r1(e,t){e.set(t7,t)}function r2(e,t){e.set(rh,t)}function r5(e,t){e.set(rd,t)}function r8(e,t){e.set(s.CCS_HEADER,`UPN:${t}`)}function r6(e,t){e.set(s.CCS_HEADER,`Oid:${t.uid}@${t.utid}`)}function r4(e,t){e.set("sid",t)}function r3(e,t,r){let n=np(t,r);try{JSON.parse(n)}catch(e){throw e4(eB)}e.set(tj,n)}function r9(e,t){e.set(tZ,t)}function r7(e,t){e.set(tJ,t.sku),e.set(t0,t.version),t.os&&e.set(t1,t.os),t.cpu&&e.set(t2,t.cpu)}function ne(e,t){t?.appName&&e.set(t4,t.appName),t?.appVersion&&e.set(t3,t.appVersion)}function nt(e,t){e.set(tG,t)}function nr(e,t){t&&e.set(tV,t)}function nn(e,t){e.set(tz,t)}function ni(e,t){e.set(tW,t)}function no(e,t){e.set(t$,t)}function na(e,t){e.set(tX,t)}function ns(e,t){e.set(rt,t)}function nl(e,t){t&&e.set(rr,t)}function nc(e,t){t&&e.set(rn,t)}function nu(e,t){e.set(tH,t)}function nd(e){e.set("client_info","1")}function nh(e){e.has(rm)||e.set(rm,"true")}function nf(e,t){Object.entries(t).forEach(([t,r])=>{!e.has(t)&&r&&e.set(t,r)})}function np(e,t){let r;if(e)try{r=JSON.parse(e)}catch(e){throw e4(eB)}else r={};return t&&t.length>0&&(r.hasOwnProperty(c.ACCESS_TOKEN)||(r[c.ACCESS_TOKEN]={}),r[c.ACCESS_TOKEN][c.XMS_CC]={values:t}),JSON.stringify(r)}function nm(e,t){t&&(e.set(ri,T.POP),e.set(ro,t))}function ng(e,t){t&&(e.set(ri,T.SSH),e.set(ro,t))}function ny(e,t){e.set(t5,t.generateCurrentRequestHeaderValue()),e.set(t8,t.generateLastRequestHeaderValue())}function n_(e){e.set(t6,b.X_MS_LIB_CAPABILITY_VALUE)}function nE(e,t){e.set(ru,t)}function nT(e,t,r){e.has(rf)||e.set(rf,t),e.has(rp)||e.set(rp,r)}var nb=Object.freeze({__proto__:null,addApplicationTelemetry:ne,addAuthorizationCode:ni,addBrokerParameters:nT,addCcsOid:r6,addCcsUpn:r8,addClaims:r3,addClientAssertion:nl,addClientAssertionType:nc,addClientCapabilitiesToClaims:np,addClientId:rZ,addClientInfo:nd,addClientSecret:ns,addCodeChallengeParams:function(e,t,r){if(t&&r)e.set(tK,t),e.set(tQ,r);else throw e4(eY)},addCodeVerifier:na,addCorrelationId:r9,addDeviceCode:function(e,t){e.set(re,t)},addDomainHint:r2,addEARParameters:function(e,t){e.set(rg,encodeURIComponent(t)),e.set(ry,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")},addExtraQueryParameters:nf,addGrantType:nu,addIdTokenHint:r1,addInstanceAware:nh,addLibraryInfo:r7,addLoginHint:r5,addLogoutHint:nE,addNativeBroker:function(e){e.set(rc,"1")},addNonce:nn,addOboAssertion:function(e,t){e.set(ra,t)},addPassword:function(e,t){e.set(A.password,t)},addPopToken:nm,addPostBodyParameters:function(e,t){Object.entries(t).forEach(([t,r])=>{r&&e.set(t,r)})},addPostLogoutRedirectUri:r0,addPrompt:nt,addRedirectUri:rJ,addRefreshToken:no,addRequestTokenUse:function(e,t){e.set(rs,t)},addResponseMode:rQ,addResponseType:function(e,t){e.set(tB,t)},addScopes:rX,addServerTelemetry:ny,addSid:r4,addSshJwk:ng,addState:nr,addThrottling:n_,addUsername:function(e,t){e.set(A.username,t)},instrumentBrokerParams:rK});class nv extends k{constructor(e,t,r,n,i){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=i,Object.setPrototypeOf(this,nv.prototype)}}function nA(e,t,r){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:r,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}class nC{static generateThrottlingStorageKey(e){return`${b.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let i=nC.generateThrottlingStorageKey(t),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now())return void e.removeItem(i,r);throw new nv(o.errorCodes?.join(" ")||n.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r,n){if(nC.checkResponseStatus(r)||nC.checkResponseForRetryAfter(r)){let i={throttleTime:nC.calculateThrottleTime(parseInt(r.headers[s.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(nC.generateThrottlingStorageKey(t),i,n)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(s.RETRY_AFTER)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){let t=Date.now()/1e3;return Math.floor(1e3*Math.min(t+((e<=0?0:e)||b.DEFAULT_THROTTLE_TIME_SECONDS),t+b.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(e,t,r,n){let i=nA(t,r,n),o=this.generateThrottlingStorageKey(i);e.removeItem(o,r.correlationId)}}class nS extends k{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,nS.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}class nw{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:s,libraryInfo:l,telemetry:c,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){let f={...rF,...r};return{authOptions:{clientCapabilities:[],azureCloudOptions:rY,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...e},systemOptions:{...rx,...t},loggerOptions:f,cacheOptions:{...rB,...n},storageInterface:i||new rM(e.clientId,rE,new rT(f),new rU),networkInterface:o||rq,cryptoInterface:a||rE,clientCredentials:s||rj,libraryInfo:{...rH,...l},telemetry:{...r$,...c},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new rT(this.config.loggerOptions,rb,rv),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[s.CONTENT_TYPE]=n.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case rz.HOME_ACCOUNT_ID:try{let r=rW(e.credential);t[s.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case rz.UPN:t[s.CCS_HEADER]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,r,n,i,o){o&&this.performanceClient?.addQueueMeasurement(o,i);let a=await this.sendPostRequest(n,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,n){let i;nC.preProcess(this.cacheManager,e,n);try{let e=(i=await ty(this.networkClient.sendPostRequestAsync.bind(this.networkClient),th.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,n)(t,r)).headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:e[s.X_MS_HTTP_VERSION]||"",requestId:e[s.X_MS_REQUEST_ID]||""},n)}catch(e){if(e instanceof nS){let t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[s.X_MS_HTTP_VERSION]||"",requestId:t[s.X_MS_REQUEST_ID]||"",contentTypeHeader:t[s.CONTENT_TYPE]||void 0,contentLengthHeader:t[s.CONTENT_LENGTH]||void 0,httpStatus:e.httpStatus},n),e.error}if(e instanceof k)throw e;throw eI(F)}return nC.postProcess(this.cacheManager,e,i,n),i}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(th.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,n=await tL(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=n}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&nT(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&nf(t,e.tokenQueryParameters),r9(t,e.correlationId),rK(t,e.correlationId,this.performanceClient),tt(t)}}function nI(e){return e&&(e.tid||e.tfp||e.acr)||null}class nO{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){let n,i=new nO;t.authorityType===ek.Adfs?i.authorityType=f.ADFS_ACCOUNT_TYPE:t.protocolMode===tu.OIDC?i.authorityType=f.GENERIC_ACCOUNT_TYPE:i.authorityType=f.MSSTS_ACCOUNT_TYPE,e.clientInfo&&r&&(n=rG(e.clientInfo,r)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||t&&t.getPreferredCache();if(!o)throw eI(eo);i.environment=o,i.realm=n?.utid||nI(e.idTokenClaims)||"",i.localAccountId=n?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||s||"",i.loginHint=e.idTokenClaims?.login_hint,i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let t=rS(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[t]}return i}static createFromAccountInfo(e,t,r){let n=new nO;return n.authorityType=e.authorityType||f.GENERIC_ACCOUNT_TYPE,n.homeAccountId=e.homeAccountId,n.localAccountId=e.localAccountId,n.nativeAccountId=e.nativeAccountId,n.realm=e.tenantId,n.environment=e.environment,n.username=e.username,n.name=e.name,n.loginHint=e.loginHint,n.cloudGraphHostName=t,n.msGraphHost=r,n.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),n}static generateHomeAccountId(e,t,r,n,i){if(t!==ek.Adfs&&t!==ek.Dsts){if(e)try{let t=rG(e,n.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let n=!0;if(r){let r=e.idTokenClaims||{},i=t.idTokenClaims||{};n=r.iat===i.iat&&r.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n}}let nR="no_tokens_found",nN="native_account_unavailable",nP="refresh_token_expired",nk="ux_not_allowed",nD="interaction_required",nM="consent_required",nL="login_required",nU="bad_token";var nx=Object.freeze({__proto__:null,badToken:nU,consentRequired:nM,interactionRequired:nD,loginRequired:nL,nativeAccountUnavailable:nN,noTokensFound:nR,refreshTokenExpired:nP,uxNotAllowed:nk});let nF=[nD,nM,nL,nU,nk],nB=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],nq={[nR]:"No refresh token found in the cache. Please sign-in.",[nN]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[nP]:"Refresh token has expired.",[nU]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[nk]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},nH={noTokensFoundError:{code:nR,desc:nq[nR]},native_account_unavailable:{code:nN,desc:nq[nN]},bad_token:{code:nU,desc:nq[nU]}};class nj extends k{constructor(e,t,r,i,o,a,s,l){super(e,t,r),Object.setPrototypeOf(this,nj.prototype),this.timestamp=i||n.EMPTY_STRING,this.traceId=o||n.EMPTY_STRING,this.correlationId=a||n.EMPTY_STRING,this.claims=s||n.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}}function nY(e,t,r){let n=!!e&&nF.indexOf(e)>-1,i=!!r&&nB.indexOf(r)>-1,o=!!t&&nF.some(e=>t.indexOf(e)>-1);return n||o||i}function n$(e){return new nj(e,nq[e])}class nV{static setRequestState(e,t,r){let i=nV.generateLibraryState(e,r);return t?`${i}${n.RESOURCE_DELIM}${t}`:i}static generateLibraryState(e,t){if(!e)throw eI(es);let r={id:e.createNewGuid()};t&&(r.meta=t);let n=JSON.stringify(r);return e.base64Encode(n)}static parseRequestState(e,t){if(!e)throw eI(es);if(!t)throw eI(H);try{let r=t.split(n.RESOURCE_DELIM),i=r[0],o=r.length>1?r.slice(1).join(n.RESOURCE_DELIM):n.EMPTY_STRING,a=e.base64Decode(i),s=JSON.parse(a);return{userRequestState:o||n.EMPTY_STRING,libraryState:s}}catch(e){throw eI(H)}}}let nz={SW:"sw"};class nG{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(th.PopTokenGenerateCnf,e.correlationId);let r=await ty(this.generateKid.bind(this),th.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),n=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:n}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(th.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:nz.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,n){let{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:a,shrNonce:s,shrOptions:l}=r,c=o?new tn(o):void 0,u=c?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:tE(),m:i?.toUpperCase(),u:u?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...n},t,l,r.correlationId)}}class nW{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class nK{constructor(e,t,r,n,i,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||n.NOT_AVAILABLE} - Timestamp: ${e.timestamp||n.NOT_AVAILABLE} - Description: ${e.error_description||n.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||n.NOT_AVAILABLE} - Trace ID: ${e.trace_id||n.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,a=new nv(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=i.SERVER_ERROR_RANGE_START&&e.status<=i.SERVER_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${a}`);if(t&&e.status&&e.status>=i.CLIENT_ERROR_RANGE_START&&e.status<=i.CLIENT_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${a}`);if(nY(e.error,e.error_description,e.suberror))throw new nj(e.error,e.error_description,e.suberror,e.timestamp||n.EMPTY_STRING,e.trace_id||n.EMPTY_STRING,e.correlation_id||n.EMPTY_STRING,e.claims||n.EMPTY_STRING,o);throw a}}async handleServerTokenResponse(e,t,r,i,o,a,s,l,c){let u,d,h;if(this.performanceClient?.addQueueMeasurement(th.HandleServerTokenResponse,e.correlation_id),e.id_token){if(u=eO(e.id_token||n.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&u.nonce!==o.nonce)throw eI($);if(i.maxAge||0===i.maxAge){let e=u.auth_time;if(!e)throw eI(V);eN(e,i.maxAge)}}this.homeAccountIdentifier=nO.generateHomeAccountId(e.client_info||n.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u),o&&o.state&&(d=nV.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let f=this.generateCacheRecord(e,t,r,i,u,a,o);try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new nW(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),s&&!l&&f.account){let e=this.cacheStorage.generateAccountKey(f.account.getAccountInfo());if(!this.cacheStorage.getAccount(e,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await nK.generateAuthenticationResult(this.cryptoObj,t,f,!1,i,u,d,void 0,c)}await this.cacheStorage.saveCacheRecord(f,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return nK.generateAuthenticationResult(this.cryptoObj,t,f,!1,i,u,d,e,c)}generateCacheRecord(e,t,r,n,i,o,a){let s,l,c=t.getPreferredCache();if(!c)throw eI(eo);let u=nI(i);e.id_token&&i&&(s=tC(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),l=nQ(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,n.correlationId,i,e.client_info,c,u,a,void 0,this.logger));let d=null;if(e.access_token){let i=e.scope?rA.fromString(e.scope):new rA(n.scopes||[]),a=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,s=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,l=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=r+a;d=tS(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||t.tenant||"",i.printScopes(),h,h+s,this.cryptoObj.base64Decode,l&&l>0?r+l:void 0,e.token_type,o,e.key_id,n.claims,n.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),h=tw(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,t)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:c,familyId:e.foci}),{account:l,idToken:s,accessToken:d,refreshToken:h,appMetadata:f}}static async generateAuthenticationResult(e,t,r,i,o,a,s,l,c){let u,d,h=n.EMPTY_STRING,f=[],p=null,m=n.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==T.POP||o.popKid)h=r.accessToken.secret;else{let t=new nG(e),{secret:n,keyId:i}=r.accessToken;if(!i)throw eI(ey);h=await t.signPopToken(n,i,o)}f=rA.fromString(r.accessToken.target).asArray(),p=tT(r.accessToken.expiresOn),u=tT(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(d=tT(r.accessToken.refreshOn))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");let g=a?.oid||a?.sub||"",y=a?.tid||"";l?.spa_accountid&&r.account&&(r.account.nativeAccountId=l?.spa_accountid);let _=r.account?rw(r.account.getAccountInfo(),void 0,a,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:g,tenantId:y,scopes:f,account:_,idToken:r?.idToken?.secret||"",idTokenClaims:a||{},accessToken:h,fromCache:i,expiresOn:p,extExpiresOn:u,refreshOn:d,correlationId:o.correlationId,requestId:c||n.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||n.EMPTY_STRING,state:s?s.userRequestState:n.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||n.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||n.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}}function nQ(e,t,r,n,i,o,a,s,l,c,u,d){d?.verbose("setCachedAccount called");let h=e.getAccountKeys().find(e=>e.startsWith(r)),f=null;h&&(f=e.getAccount(h,i));let p=f||nO.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:u},t,n),m=p.tenantProfiles||[],g=l||p.realm;if(g&&!m.find(e=>e.tenantId===g)){let e=rS(r,p.localAccountId,g,o);m.push(e)}return p.tenantProfiles=m,p}async function nX(e,t,r){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:r})}var nZ=Object.freeze({__proto__:null,getClientAssertion:nX});function nJ(e,t){let r,n;if(!e.state||!t)throw e.state?eI(Y,"Cached State"):eI(Y,"Server State");try{r=decodeURIComponent(e.state)}catch(t){throw eI(H,e.state)}try{n=decodeURIComponent(t)}catch(t){throw eI(H,e.state)}if(r!==n)throw eI(j);if(e.error||e.error_description||e.suberror){let t=function(e){let t="code=",r=e.error_uri?.lastIndexOf(t);return r&&r>=0?e.error_uri?.substring(r+t.length):void 0}(e);if(nY(e.error,e.error_description,e.suberror))throw new nj(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new nv(e.error||"",e.error_description,e.suberror,t)}}var n0=Object.freeze({__proto__:null,getAuthorizationCodePayload:function(e,t){if(nJ(e,t),!e.code)throw eI(ep);return e},getAuthorizeUrl:function(e,t,r,n){let i=tt(t,r,n);return tn.appendQueryString(e.authorizationEndpoint,i)},getStandardAuthorizeRequestParameters:function(e,t,r,n){let i=t.correlationId,o=new Map;if(rZ(o,t.embeddedClientId||t.extraQueryParameters?.[tx]||e.clientId),rX(o,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),rJ(o,t.redirectUri),r9(o,i),rQ(o,t.responseMode),nd(o),t.prompt&&(nt(o,t.prompt),n?.addFields({prompt:t.prompt},i)),t.domainHint&&(r2(o,t.domainHint),n?.addFields({domainHintFromRequest:!0},i)),t.prompt!==u.SELECT_ACCOUNT)if(t.sid&&t.prompt===u.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r4(o,t.sid),n?.addFields({sidFromRequest:!0},i);else if(t.account){var a,s;let e=(a=t.account,a.idTokenClaims?.sid||null),l=(s=t.account).loginHint||s.idTokenClaims?.login_hint||null;if(l&&t.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r5(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let e=rW(t.account.homeAccountId);r6(o,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===u.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r4(o,e),n?.addFields({sidFromClaim:!0},i);try{let e=rW(t.account.homeAccountId);r6(o,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r5(o,t.loginHint),r8(o,t.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(t.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r5(o,t.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let e=rW(t.account.homeAccountId);r6(o,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r5(o,t.loginHint),r8(o,t.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&nn(o,t.nonce),t.state&&nr(o,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&r3(o,t.claims,e.clientCapabilities),t.embeddedClientId&&nT(o,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(rm)||nh(o),o},validateAuthorizationResponse:nJ});class n1{constructor(e,t){this.cacheOutcome=w.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||n.EMPTY_STRING,this.wrapperVer=e.wrapperVer||n.EMPTY_STRING,this.telemetryCacheKey=E.CACHE_KEY+p.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${E.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let n=t.join(E.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(E.VALUE_SEPARATOR);return[E.SCHEMA_VERSION,i,n].join(E.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n1.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(E.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(E.VALUE_SEPARATOR),i=e.errors.length,o=t<i?E.OVERFLOW_TRUE:E.OVERFLOW_FALSE,a=[i,o].join(E.VALUE_SEPARATOR);return[E.SCHEMA_VERSION,e.cacheHits,r,n,a].join(E.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=E.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof k?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(E.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){let e=this.getLastRequests(),t=n1.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,i=0,o=e.errors.length;for(t=0;t<o;t++){let o=e.failedRequests[2*t]||n.EMPTY_STRING,a=e.failedRequests[2*t+1]||n.EMPTY_STRING,s=e.errors[t]||n.EMPTY_STRING;if((i+=o.toString().length+a.toString().length+s.length+3)<E.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||n.EMPTY_STRING),e.push(this.regionSource||n.EMPTY_STRING),e.push(this.regionOutcome||n.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){let{skus:t,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=e,a=new Map([[0,[r,n]],[2,[i,o]]]),s=[];if(t?.length){if((s=t.split(",")).length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){let{skuArr:t,index:r,skuName:n,skuVersion:i}=e;r>=t.length||(t[r]=[n,i].join("|"))}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}}r.AADAuthorityConstants=l,r.AADServerParamKeys=r_,r.AccountEntity=nO,r.AuthError=k,r.AuthErrorCodes=R,r.AuthErrorMessage=P,r.AuthToken=eP,r.AuthenticationHeaderParser=class{constructor(e){this.headers=e}getShrNonce(){let e=this.headers[s.AuthenticationInfo];if(e){let t=this.parseChallenges(e);if(t.nextnonce)return t.nextnonce;throw e4(eQ)}let t=this.headers[s.WWWAuthenticate];if(t){let e=this.parseChallenges(t);if(e.nonce)return e.nonce;throw e4(eQ)}throw e4(eK)}parseChallenges(e){let t=e.indexOf(" "),r=e.substr(t+1).split(","),i={};return r.forEach(e=>{let[t,r]=e.split("=");i[t]=unescape(r.replace(/['"]+/g,n.EMPTY_STRING))}),i}},r.AuthenticationScheme=T,r.Authority=tD,r.AuthorityFactory=tU,r.AuthorityType=ek,r.AuthorizationCodeClient=class extends nw{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(th.AuthClientAcquireToken,e.correlationId),!e.code)throw eI(Q);let r=tE(),n=await ty(this.executeTokenRequest.bind(this),th.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=n.headers?.[s.X_MS_REQUEST_ID],o=new nK(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(n.body),ty(o.handleServerTokenResponse.bind(o),th.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,t,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw e4(eH);let t=this.createLogoutUrlQueryString(e);return tn.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){let r;this.performanceClient?.addQueueMeasurement(th.AuthClientExecuteTokenRequest,t.correlationId);let n=this.createTokenQueryParameters(t),i=tn.appendQueryString(e.tokenEndpoint,n),o=await ty(this.createTokenRequestBody.bind(this),th.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);if(t.clientInfo)try{let e=rG(t.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${e.uid}${p.CLIENT_INFO_SEPARATOR}${e.utid}`,type:rz.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}let a=this.createTokenRequestHeaders(r||t.ccsCredential),s=nA(this.config.authOptions.clientId,t);return ty(this.executePostToTokenEndpoint.bind(this),th.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(i,o,a,s,t.correlationId,th.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){let t;this.performanceClient?.addQueueMeasurement(th.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(rZ(r,e.embeddedClientId||e.tokenBodyParameters?.[tx]||this.config.authOptions.clientId),this.includeRedirectUri)rJ(r,e.redirectUri);else if(!e.redirectUri)throw e4(eD);if(rX(r,e.scopes,!0,this.oidcDefaultScopes),ni(r,e.code),r7(r,this.config.libraryInfo),ne(r,this.config.telemetry.application),n_(r),this.serverTelemetryManager&&!rV(this.config)&&ny(r,this.serverTelemetryManager),e.codeVerifier&&na(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&ns(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let t=this.config.clientCredentials.clientAssertion;nl(r,await nX(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),nc(r,t.assertionType)}if(nu(r,h.AUTHORIZATION_CODE_GRANT),nd(r),e.authenticationScheme===T.POP){let t=new nG(this.cryptoUtils,this.performanceClient);nm(r,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await ty(t.generateCnf.bind(t),th.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===T.SSH)if(e.sshJwk)ng(r,e.sshJwk);else throw e4(eG);if((!e3.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r3(r,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{let r=rG(e.clientInfo,this.cryptoUtils.base64Decode);t={credential:`${r.uid}${p.CLIENT_INFO_SEPARATOR}${r.utid}`,type:rz.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else t=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case rz.HOME_ACCOUNT_ID:try{let e=rW(t.credential);r6(r,e)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case rz.UPN:r8(r,t.credential)}return e.embeddedClientId&&nT(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&nf(r,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[rl]||nf(r,{[rl]:"1"}),rK(r,e.correlationId,this.performanceClient),tt(r)}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&r0(t,e.postLogoutRedirectUri),e.correlationId&&r9(t,e.correlationId),e.idTokenHint&&r1(t,e.idTokenHint),e.state&&nr(t,e.state),e.logoutHint&&nE(t,e.logoutHint),e.extraQueryParameters&&nf(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&nh(t),tt(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}},r.Authorize=n0,r.AzureCloudInstance=td,r.BaseClient=nw,r.CacheAccountType=f,r.CacheError=rP,r.CacheErrorCodes=rR,r.CacheHelpers=tk,r.CacheManager=rD,r.CacheOutcome=w,r.CacheType={ADFS:1001,MSA:1002,MSSTS:1003,GENERIC:1004,ACCESS_TOKEN:2001,REFRESH_TOKEN:2002,ID_TOKEN:2003,APP_METADATA:3001,UNDEFINED:9999},r.CcsCredentialType=rz,r.ClaimsRequestKeys=c,r.ClientAssertionUtils=nZ,r.ClientAuthError=ew,r.ClientAuthErrorCodes=eA,r.ClientAuthErrorMessage=eS,r.ClientConfigurationError=e6,r.ClientConfigurationErrorCodes=e2,r.ClientConfigurationErrorMessage=e8,r.CodeChallengeMethodValues={PLAIN:"plain",S256:"S256"},r.Constants=n,r.CredentialType=m,r.DEFAULT_CRYPTO_IMPLEMENTATION=rE,r.DEFAULT_SYSTEM_OPTIONS=rx,r.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=300,r.DefaultStorageClass=rM,r.EncodingTypes={BASE64:"base64",HEX:"hex",UTF8:"utf-8"},r.Errors=v,r.GrantType=h,r.HeaderNames=s,r.HttpMethod={GET:"GET",POST:"POST"},r.HttpStatus=i,r.IntFields=tm,r.InteractionRequiredAuthError=nj,r.InteractionRequiredAuthErrorCodes=nx,r.InteractionRequiredAuthErrorMessage=nH,r.JsonWebTokenTypes={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},r.Logger=rT,r.NetworkError=nS,r.OAuthResponseType={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},r.OIDC_DEFAULT_SCOPES=o,r.ONE_DAY_IN_MS=864e5,r.PasswordGrantConstants=A,r.PerformanceEventAbbreviations=tf,r.PerformanceEventStatus=tp,r.PerformanceEvents=th,r.PersistentCacheKeys={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},r.PopTokenGenerator=nG,r.PromptValue=u,r.ProtocolMode=tu,r.ProtocolUtils=nV,r.RefreshTokenClient=class extends nw{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(th.RefreshTokenClientAcquireToken,e.correlationId);let t=tE(),r=await ty(this.executeTokenRequest.bind(this),th.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),n=r.headers?.[s.X_MS_REQUEST_ID],i=new nK(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),ty(i.handleServerTokenResponse.bind(i),th.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,n)}async acquireTokenByRefreshToken(e){if(!e)throw e4(eq);if(this.performanceClient?.addQueueMeasurement(th.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw eI(en);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await ty(this.acquireTokenWithCachedRefreshToken.bind(this),th.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let e=r instanceof nj&&r.errorCode===nR,t=r instanceof nv&&r.errorCode===v.INVALID_GRANT_ERROR&&r.subError===v.CLIENT_MISMATCH_ERROR;if(e||t);else throw r}return ty(this.acquireTokenWithCachedRefreshToken.bind(this),th.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(th.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=tg(this.cacheManager.getRefreshToken.bind(this.cacheManager),th.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw n$(nR);if(r.expiresOn&&tb(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),n$(nP);let n={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||T.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:rz.HOME_ACCOUNT_ID}};try{return await ty(this.acquireToken.bind(this),th.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(n)}catch(t){if(t instanceof nj&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),t.subError===nU)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let t=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw t}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(th.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),n=tn.appendQueryString(t.tokenEndpoint,r),i=await ty(this.createTokenRequestBody.bind(this),th.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=nA(this.config.authOptions.clientId,e);return ty(this.executePostToTokenEndpoint.bind(this),th.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(n,i,o,a,e.correlationId,th.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(th.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(rZ(t,e.embeddedClientId||e.tokenBodyParameters?.[tx]||this.config.authOptions.clientId),e.redirectUri&&rJ(t,e.redirectUri),rX(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),nu(t,h.REFRESH_TOKEN_GRANT),nd(t),r7(t,this.config.libraryInfo),ne(t,this.config.telemetry.application),n_(t),this.serverTelemetryManager&&!rV(this.config)&&ny(t,this.serverTelemetryManager),no(t,e.refreshToken),this.config.clientCredentials.clientSecret&&ns(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;nl(t,await nX(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),nc(t,r.assertionType)}if(e.authenticationScheme===T.POP){let r=new nG(this.cryptoUtils,this.performanceClient);nm(t,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await ty(r.generateCnf.bind(r),th.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===T.SSH)if(e.sshJwk)ng(t,e.sshJwk);else throw e4(eG);if((!e3.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r3(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case rz.HOME_ACCOUNT_ID:try{let r=rW(e.ccsCredential.credential);r6(t,r)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case rz.UPN:r8(t,e.ccsCredential.credential)}return e.embeddedClientId&&nT(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&nf(t,e.tokenBodyParameters),rK(t,e.correlationId,this.performanceClient),tt(t)}},r.RequestParameterBuilder=nb,r.ResponseHandler=nK,r.ResponseMode=d,r.ScopeSet=rA,r.ServerError=nv,r.ServerResponseType={QUERY:"query",FRAGMENT:"fragment"},r.ServerTelemetryManager=n1,r.SilentFlowClient=class extends nw{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(th.SilentFlowClientAcquireCachedToken,e.correlationId);let t=w.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!e3.isEmptyObj(e.claims))throw this.setCacheOutcome(w.FORCE_REFRESH_OR_CLAIMS,e.correlationId),eI(ed);if(!e.account)throw eI(en);let r=e.account.tenantId||function(e){let t=new tn(e).getUrlComponents(),r=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case l.COMMON:case l.ORGANIZATIONS:case l.CONSUMERS:return;default:return r}}(e.authority),n=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,n,r);if(i)if(tv(i.cachedAt)||tb(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(w.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),eI(ed);else i.refreshOn&&tb(i.refreshOn,0)&&(t=w.PROACTIVELY_REFRESHED);else throw this.setCacheOutcome(w.NO_CACHED_ACCESS_TOKEN,e.correlationId),eI(ed);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,n,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ty(this.generateResultFromCacheRecord.bind(this),th.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==w.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let r;if(this.performanceClient?.addQueueMeasurement(th.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(r=eO(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){let e=r?.auth_time;if(!e)throw eI(V);eN(e,t.maxAge)}return nK.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}},r.StringUtils=e3,r.StubPerformanceClient=rU,r.StubPerformanceMeasurement=rL,r.StubbedNetworkModule={sendGetRequestAsync:()=>Promise.reject(eI(eb)),sendPostRequestAsync:()=>Promise.reject(eI(eb))},r.THE_FAMILY_ID="1",r.ThrottlingConstants=b,r.ThrottlingUtils=nC,r.TimeUtils=tA,r.TokenCacheContext=nW,r.UrlString=tn,r.UrlUtils=tr,r.buildAccountToCache=nQ,r.buildClientInfo=rG,r.buildClientInfoFromHomeAccountId=rW,r.buildStaticAuthorityOptions=function(e){let t,r=e.cloudDiscoveryMetadata;if(r)try{t=JSON.parse(r)}catch(e){throw e4(e$)}return{canonicalAuthority:e.authority?tM(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:t}},r.buildTenantProfile=rS,r.createAuthError=function(e,t){return new k(e,t?`${N[e]} ${t}`:N[e])},r.createCacheError=rk,r.createClientAuthError=eI,r.createClientConfigurationError=e4,r.createInteractionRequiredAuthError=n$,r.createNetworkError=function(e,t,r,n){return e.errorMessage=`${e.errorMessage}, additionalErrorInfo: error.name:${n?.name}, error.message:${n?.message}`,new nS(e,t,r)},r.formatAuthorityUri=tM,r.getClientAssertion=nX,r.getRequestThumbprint=nA,r.getTenantIdFromIdTokenClaims=nI,r.invoke=tg,r.invokeAsync=ty,r.tenantIdMatchesHomeTenant=rC,r.updateAccountTenantProfileData=rw,r.version=rv},87140,(e,t,r)=>{"use strict";var n=e.r(47121);let i="missing_kid_error",o="missing_alg_error",a={[i]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[o]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class s extends n.AuthError{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,s.prototype)}}function l(e){return new s(e,a[e])}class c{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw l(i);if(!e.alg)throw l(o);return JSON.stringify(new c({typ:e.typ||n.JsonWebTokenTypes.Pop,kid:e.kid,alg:e.alg}))}}function u(e){let t=e.lastIndexOf(" ")+1;if(t<1)return e;let r=e.substring(t),n=r.lastIndexOf("/");return(n=n<0?r.lastIndexOf("\\"):n)>=0?(e.substring(0,t)+"("+r.substring(n+1)+(")"===r.charAt(r.length-1)?"":")")).trimStart():e.trimStart()}r.AADAuthorityConstants=n.AADAuthorityConstants,r.AADServerParamKeys=n.AADServerParamKeys,r.AccountEntity=n.AccountEntity,r.AuthError=n.AuthError,r.AuthErrorCodes=n.AuthErrorCodes,r.AuthErrorMessage=n.AuthErrorMessage,r.AuthToken=n.AuthToken,r.AuthenticationHeaderParser=n.AuthenticationHeaderParser,r.AuthenticationScheme=n.AuthenticationScheme,r.Authority=n.Authority,r.AuthorityFactory=n.AuthorityFactory,r.AuthorityType=n.AuthorityType,r.AuthorizationCodeClient=n.AuthorizationCodeClient,r.AuthorizeProtocol=n.Authorize,r.AzureCloudInstance=n.AzureCloudInstance,r.BaseClient=n.BaseClient,r.CacheAccountType=n.CacheAccountType,r.CacheError=n.CacheError,r.CacheErrorCodes=n.CacheErrorCodes,r.CacheHelpers=n.CacheHelpers,r.CacheManager=n.CacheManager,r.CacheOutcome=n.CacheOutcome,r.CacheType=n.CacheType,r.CcsCredentialType=n.CcsCredentialType,r.ClaimsRequestKeys=n.ClaimsRequestKeys,r.ClientAuthError=n.ClientAuthError,r.ClientAuthErrorCodes=n.ClientAuthErrorCodes,r.ClientAuthErrorMessage=n.ClientAuthErrorMessage,r.ClientConfigurationError=n.ClientConfigurationError,r.ClientConfigurationErrorCodes=n.ClientConfigurationErrorCodes,r.ClientConfigurationErrorMessage=n.ClientConfigurationErrorMessage,r.CodeChallengeMethodValues=n.CodeChallengeMethodValues,r.Constants=n.Constants,r.CredentialType=n.CredentialType,r.DEFAULT_CRYPTO_IMPLEMENTATION=n.DEFAULT_CRYPTO_IMPLEMENTATION,r.DEFAULT_SYSTEM_OPTIONS=n.DEFAULT_SYSTEM_OPTIONS,r.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=n.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,r.DefaultStorageClass=n.DefaultStorageClass,r.EncodingTypes=n.EncodingTypes,r.Errors=n.Errors,r.GrantType=n.GrantType,r.HeaderNames=n.HeaderNames,r.HttpMethod=n.HttpMethod,r.HttpStatus=n.HttpStatus,r.IntFields=n.IntFields,r.InteractionRequiredAuthError=n.InteractionRequiredAuthError,r.InteractionRequiredAuthErrorCodes=n.InteractionRequiredAuthErrorCodes,r.InteractionRequiredAuthErrorMessage=n.InteractionRequiredAuthErrorMessage,r.JsonWebTokenTypes=n.JsonWebTokenTypes,Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return n.LogLevel}}),r.Logger=n.Logger,r.NetworkError=n.NetworkError,r.OAuthResponseType=n.OAuthResponseType,r.OIDC_DEFAULT_SCOPES=n.OIDC_DEFAULT_SCOPES,r.ONE_DAY_IN_MS=n.ONE_DAY_IN_MS,r.PasswordGrantConstants=n.PasswordGrantConstants,r.PerformanceEventStatus=n.PerformanceEventStatus,r.PerformanceEvents=n.PerformanceEvents,r.PersistentCacheKeys=n.PersistentCacheKeys,r.PopTokenGenerator=n.PopTokenGenerator,r.PromptValue=n.PromptValue,r.ProtocolMode=n.ProtocolMode,r.ProtocolUtils=n.ProtocolUtils,r.RefreshTokenClient=n.RefreshTokenClient,r.RequestParameterBuilder=n.RequestParameterBuilder,r.ResponseHandler=n.ResponseHandler,r.ResponseMode=n.ResponseMode,r.ScopeSet=n.ScopeSet,r.ServerError=n.ServerError,r.ServerResponseType=n.ServerResponseType,r.ServerTelemetryManager=n.ServerTelemetryManager,r.SilentFlowClient=n.SilentFlowClient,r.StringUtils=n.StringUtils,r.StubPerformanceClient=n.StubPerformanceClient,r.StubbedNetworkModule=n.StubbedNetworkModule,r.THE_FAMILY_ID=n.THE_FAMILY_ID,r.ThrottlingConstants=n.ThrottlingConstants,r.ThrottlingUtils=n.ThrottlingUtils,r.TimeUtils=n.TimeUtils,r.UrlString=n.UrlString,r.UrlUtils=n.UrlUtils,r.buildAccountToCache=n.buildAccountToCache,r.buildClientInfo=n.buildClientInfo,r.buildClientInfoFromHomeAccountId=n.buildClientInfoFromHomeAccountId,r.buildStaticAuthorityOptions=n.buildStaticAuthorityOptions,r.buildTenantProfile=n.buildTenantProfile,r.createAuthError=n.createAuthError,r.createCacheError=n.createCacheError,r.createClientAuthError=n.createClientAuthError,r.createClientConfigurationError=n.createClientConfigurationError,r.createInteractionRequiredAuthError=n.createInteractionRequiredAuthError,r.createNetworkError=n.createNetworkError,r.formatAuthorityUri=n.formatAuthorityUri,r.getRequestThumbprint=n.getRequestThumbprint,r.getTenantIdFromIdTokenClaims=n.getTenantIdFromIdTokenClaims,r.invoke=n.invoke,r.invokeAsync=n.invokeAsync,r.tenantIdMatchesHomeTenant=n.tenantIdMatchesHomeTenant,r.updateAccountTenantProfileData=n.updateAccountTenantProfileData,r.version=n.version,r.JoseHeader=c,r.PerformanceClient=class{constructor(e,t,r,i,o,a,s,l){for(let l of(this.authority=t,this.libraryName=i,this.libraryVersion=o,this.applicationTelemetry=a,this.clientId=e,this.logger=r,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=s||new Set,n.IntFields))this.intFields.add(l);for(let[e,t]of(this.abbreviations=l||new Map,n.PerformanceEventAbbreviations))this.abbreviations.set(e,t)}startPerformanceMeasurement(e,t){return{}}getPreQueueTime(e,t){let r=this.preQueueTimeByCorrelationId.get(t);return r?r.name!==e?void this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${e}, unable to add queue measurement`):r.time:void this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${t}, unable to add queue measurement`)}calculateQueuedTime(e,t){return e<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${e}`),0):t<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${t}`),0):t<e?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):t-e}addQueueMeasurement(e,t,r,n){if(!t)return void this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${e}, cannot add queue measurement`);if(0===r)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${e} is ${r}`);else if(!r)return void this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${e}`);let i={eventName:e,queueTime:n?0:r,manuallyCompleted:n},o=this.queueMeasurements.get(t);o?(o.push(i),this.queueMeasurements.set(t,o)):(this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${t} to queue measurements`),this.queueMeasurements.set(t,[i])),this.preQueueTimeByCorrelationId.delete(t)}startMeasurement(e,t){var r,i;let o=t||this.generateId();t||this.logger.info(`PerformanceClient: No correlation id provided for ${e}, generating`,o),this.logger.trace(`PerformanceClient: Performance measurement started for ${e}`,o);let a={eventId:this.generateId(),status:n.PerformanceEventStatus.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:o,appName:this.applicationTelemetry?.appName,appVersion:this.applicationTelemetry?.appVersion};return this.cacheEventByCorrelationId(a),r=this.abbreviations,(i=this.eventStack.get(o))&&i.push({name:r.get(a.name)||a.name}),{end:(e,t)=>this.endMeasurement({...a,...e},t),discard:()=>this.discardMeasurements(a.correlationId),add:e=>this.addFields(e,a.correlationId),increment:e=>this.incrementFields(e,a.correlationId),event:a,measurement:new n.StubPerformanceMeasurement}}endMeasurement(e,t){let r=this.eventsByCorrelationId.get(e.correlationId);if(!r)return this.logger.trace(`PerformanceClient: Measurement not found for ${e.eventId}`,e.correlationId),null;let i=e.eventId===r.eventId,o={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};e.durationMs=Math.round(e.durationMs||this.getDurationMs(e.startTimeMs));let a=JSON.stringify(function(e,t,r,i){let o;if(!r?.length)return;let a=e=>e.length?e[e.length-1]:void 0,s=t.get(e.name)||e.name,l=a(r);if(l?.name!==s)return;let c=r?.pop();if(!c)return;let u=i instanceof n.AuthError?i.errorCode:i instanceof Error?i.name:void 0,d=i instanceof n.AuthError?i.subError:void 0;u&&c.childErr!==u&&(c.err=u,d&&(c.subErr=d)),delete c.name,delete c.childErr;let h={...c,dur:e.durationMs};e.success||(h.fail=1);let f=a(r);if(!f)return{[s]:h};if(u&&(f.childErr=u),f[s]){let e=Object.keys(f).filter(e=>e.startsWith(s)).length;o=`${s}_${e+1}`}else o=s;return f[o]=h,f}(e,this.abbreviations,this.eventStack.get(r.correlationId),t));if(i?(o=this.getQueueInfo(e.correlationId),this.discardMeasurements(r.correlationId)):r.incompleteSubMeasurements?.delete(e.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${e.name}: ${e.durationMs} ms`,e.correlationId),t&&function(e,t,r,i=5){if(!(e instanceof Error))return t.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",r.correlationId);if(e instanceof n.AuthError){r.errorCode=e.errorCode,r.subErrorCode=e.subError,(e instanceof n.ServerError||e instanceof n.InteractionRequiredAuthError)&&(r.serverErrorNo=e.errorNo);return}if(e instanceof n.CacheError){r.errorCode=e.errorCode;return}if(r.errorStack?.length)return t.trace("PerformanceClient.addErrorStack: Stack already exist",r.correlationId);if(!e.stack?.length)return t.trace("PerformanceClient.addErrorStack: Input stack is empty",r.correlationId);e.stack&&(r.errorStack=function(e,t){if(t<0)return[];let r=e.split("\n")||[],n=[],i=r[0];i.startsWith("TypeError: Cannot read property")||i.startsWith("TypeError: Cannot read properties of")||i.startsWith("TypeError: Cannot set property")||i.startsWith("TypeError: Cannot set properties of")||i.endsWith("is not a function")?n.push(u(i)):(i.startsWith("SyntaxError")||i.startsWith("TypeError"))&&n.push(u(i.replace(/['].*[']|["].*["]/g,"<redacted>")));for(let e=1;e<r.length&&!(n.length>=t);e++){let t=r[e];n.push(u(t))}return n}(e.stack,i)),r.errorName=e.name}(t,this.logger,r),!i)return r[e.name+"DurationMs"]=Math.floor(e.durationMs),{...r};i&&!t&&(r.errorCode||r.subErrorCode)&&(this.logger.trace(`PerformanceClient: Remove error and sub-error codes for root event ${e.name} as intermediate error was successfully handled`,e.correlationId),r.errorCode=void 0,r.subErrorCode=void 0);let s={...r,...e},l=0;return s.incompleteSubMeasurements?.forEach(t=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${t.name} found for ${e.name}`,s.correlationId),l++}),s.incompleteSubMeasurements=void 0,s={...s,queuedTimeMs:o.totalQueueTime,queuedCount:o.totalQueueCount,queuedManuallyCompletedCount:o.manuallyCompletedCount,status:n.PerformanceEventStatus.Completed,incompleteSubsCount:l,context:a},this.truncateIntegralFields(s),this.emitEvents([s],e.correlationId),s}addFields(e,t){this.logger.trace("PerformanceClient: Updating static fields");let r=this.eventsByCorrelationId.get(t);r?this.eventsByCorrelationId.set(t,{...r,...e}):this.logger.trace("PerformanceClient: Event not found for",t)}incrementFields(e,t){this.logger.trace("PerformanceClient: Updating counters");let r=this.eventsByCorrelationId.get(t);if(r)for(let t in e){if(r.hasOwnProperty(t)){if(isNaN(Number(r[t])))return}else r[t]=0;r[t]+=e[t]}else this.logger.trace("PerformanceClient: Event not found for",t)}cacheEventByCorrelationId(e){let t=this.eventsByCorrelationId.get(e.correlationId);t?(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} added/updated`,e.correlationId),t.incompleteSubMeasurements=t.incompleteSubMeasurements||new Map,t.incompleteSubMeasurements.set(e.eventId,{name:e.name,startTimeMs:e.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} started`,e.correlationId),this.eventsByCorrelationId.set(e.correlationId,{...e}),this.eventStack.set(e.correlationId,[]))}getQueueInfo(e){let t=this.queueMeasurements.get(e);t||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${e}`);let r=0,n=0,i=0;return t?.forEach(e=>{r+=e.queueTime,n++,i+=+!!e.manuallyCompleted}),{totalQueueTime:r,totalQueueCount:n,manuallyCompletedCount:i}}discardMeasurements(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e),this.logger.trace("PerformanceClient: QueueMeasurements discarded",e),this.queueMeasurements.delete(e),this.logger.trace("PerformanceClient: Pre-queue times discarded",e),this.preQueueTimeByCorrelationId.delete(e),this.logger.trace("PerformanceClient: Event stack discarded",e),this.eventStack.delete(e)}addPerformanceCallback(e){for(let[t,r]of this.callbacks)if(r.toString()===e.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${t}`),t;let t=this.generateId();return this.callbacks.set(t,e),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${t}`),t}removePerformanceCallback(e){let t=this.callbacks.delete(e);return t?this.logger.verbose(`PerformanceClient: Performance callback ${e} removed.`):this.logger.verbose(`PerformanceClient: Performance callback ${e} not removed.`),t}emitEvents(e,t){this.logger.verbose("PerformanceClient: Emitting performance events",t),this.callbacks.forEach((r,n)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${n}`,t),r.apply(null,[e])})}truncateIntegralFields(e){this.intFields.forEach(t=>{t in e&&"number"==typeof e[t]&&(e[t]=Math.floor(e[t]))})}getDurationMs(e){let t=Date.now()-e;return t<0?t:0}}},50247,(e,t,r)=>{"use strict";var n=e.r(47121),i=e.r(87140);r.AADAuthorityConstants=n.AADAuthorityConstants,r.AADServerParamKeys=n.AADServerParamKeys,r.AccountEntity=n.AccountEntity,r.AuthError=n.AuthError,r.AuthErrorCodes=n.AuthErrorCodes,r.AuthErrorMessage=n.AuthErrorMessage,r.AuthToken=n.AuthToken,r.AuthenticationHeaderParser=n.AuthenticationHeaderParser,r.AuthenticationScheme=n.AuthenticationScheme,r.Authority=n.Authority,r.AuthorityFactory=n.AuthorityFactory,r.AuthorityType=n.AuthorityType,r.AuthorizationCodeClient=n.AuthorizationCodeClient,r.AuthorizeProtocol=n.Authorize,r.AzureCloudInstance=n.AzureCloudInstance,r.BaseClient=n.BaseClient,r.CacheAccountType=n.CacheAccountType,r.CacheError=n.CacheError,r.CacheErrorCodes=n.CacheErrorCodes,r.CacheHelpers=n.CacheHelpers,r.CacheManager=n.CacheManager,r.CacheOutcome=n.CacheOutcome,r.CacheType=n.CacheType,r.CcsCredentialType=n.CcsCredentialType,r.ClaimsRequestKeys=n.ClaimsRequestKeys,r.ClientAssertionUtils=n.ClientAssertionUtils,r.ClientAuthError=n.ClientAuthError,r.ClientAuthErrorCodes=n.ClientAuthErrorCodes,r.ClientAuthErrorMessage=n.ClientAuthErrorMessage,r.ClientConfigurationError=n.ClientConfigurationError,r.ClientConfigurationErrorCodes=n.ClientConfigurationErrorCodes,r.ClientConfigurationErrorMessage=n.ClientConfigurationErrorMessage,r.CodeChallengeMethodValues=n.CodeChallengeMethodValues,r.Constants=n.Constants,r.CredentialType=n.CredentialType,r.DEFAULT_CRYPTO_IMPLEMENTATION=n.DEFAULT_CRYPTO_IMPLEMENTATION,r.DEFAULT_SYSTEM_OPTIONS=n.DEFAULT_SYSTEM_OPTIONS,r.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=n.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,r.DefaultStorageClass=n.DefaultStorageClass,r.EncodingTypes=n.EncodingTypes,r.Errors=n.Errors,r.GrantType=n.GrantType,r.HeaderNames=n.HeaderNames,r.HttpMethod=n.HttpMethod,r.HttpStatus=n.HttpStatus,r.IntFields=n.IntFields,r.InteractionRequiredAuthError=n.InteractionRequiredAuthError,r.InteractionRequiredAuthErrorCodes=n.InteractionRequiredAuthErrorCodes,r.InteractionRequiredAuthErrorMessage=n.InteractionRequiredAuthErrorMessage,r.JsonWebTokenTypes=n.JsonWebTokenTypes,Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return n.LogLevel}}),r.Logger=n.Logger,r.NetworkError=n.NetworkError,r.OAuthResponseType=n.OAuthResponseType,r.OIDC_DEFAULT_SCOPES=n.OIDC_DEFAULT_SCOPES,r.ONE_DAY_IN_MS=n.ONE_DAY_IN_MS,r.PasswordGrantConstants=n.PasswordGrantConstants,r.PerformanceEventStatus=n.PerformanceEventStatus,r.PerformanceEvents=n.PerformanceEvents,r.PersistentCacheKeys=n.PersistentCacheKeys,r.PopTokenGenerator=n.PopTokenGenerator,r.PromptValue=n.PromptValue,r.ProtocolMode=n.ProtocolMode,r.ProtocolUtils=n.ProtocolUtils,r.RefreshTokenClient=n.RefreshTokenClient,r.RequestParameterBuilder=n.RequestParameterBuilder,r.ResponseHandler=n.ResponseHandler,r.ResponseMode=n.ResponseMode,r.ScopeSet=n.ScopeSet,r.ServerError=n.ServerError,r.ServerResponseType=n.ServerResponseType,r.ServerTelemetryManager=n.ServerTelemetryManager,r.SilentFlowClient=n.SilentFlowClient,r.StringUtils=n.StringUtils,r.StubPerformanceClient=n.StubPerformanceClient,r.StubbedNetworkModule=n.StubbedNetworkModule,r.THE_FAMILY_ID=n.THE_FAMILY_ID,r.ThrottlingConstants=n.ThrottlingConstants,r.ThrottlingUtils=n.ThrottlingUtils,r.TimeUtils=n.TimeUtils,r.TokenCacheContext=n.TokenCacheContext,r.UrlString=n.UrlString,r.UrlUtils=n.UrlUtils,r.buildAccountToCache=n.buildAccountToCache,r.buildClientInfo=n.buildClientInfo,r.buildClientInfoFromHomeAccountId=n.buildClientInfoFromHomeAccountId,r.buildStaticAuthorityOptions=n.buildStaticAuthorityOptions,r.buildTenantProfile=n.buildTenantProfile,r.createAuthError=n.createAuthError,r.createCacheError=n.createCacheError,r.createClientAuthError=n.createClientAuthError,r.createClientConfigurationError=n.createClientConfigurationError,r.createInteractionRequiredAuthError=n.createInteractionRequiredAuthError,r.createNetworkError=n.createNetworkError,r.formatAuthorityUri=n.formatAuthorityUri,r.getClientAssertion=n.getClientAssertion,r.getRequestThumbprint=n.getRequestThumbprint,r.getTenantIdFromIdTokenClaims=n.getTenantIdFromIdTokenClaims,r.invoke=n.invoke,r.invokeAsync=n.invokeAsync,r.tenantIdMatchesHomeTenant=n.tenantIdMatchesHomeTenant,r.updateAccountTenantProfileData=n.updateAccountTenantProfileData,r.version=n.version,r.JoseHeader=i.JoseHeader,r.PerformanceClient=i.PerformanceClient},874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},96265,(e,t,r)=>{var n=e.r(874),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},13178,(e,t,r)=>{var n=e.r(96265).Buffer,i=e.r(88947);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick((function(){this.emit("end",e),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof e+")")}e.r(24361).inherits(o,i),o.prototype.write=function(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},t.exports=o},2390,(e,t,r)=>{"use strict";function n(e){return(e/8|0)+ +(e%8!=0)}var i={ES256:n(256),ES384:n(384),ES512:n(521)};t.exports=function(e){var t=i[e];if(t)return t;throw Error('Unknown algorithm "'+e+'"')}},75295,(e,t,r)=>{"use strict";var n=e.r(96265).Buffer,i=e.r(2390);function o(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function a(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}t.exports={derToJose:function(e,t){e=o(e);var r=i(t),a=r+1,s=e.length,l=0;if(48!==e[l++])throw Error('Could not find expected "seq"');var c=e[l++];if(129===c&&(c=e[l++]),s-l<c)throw Error('"seq" specified length of "'+c+'", only "'+(s-l)+'" remaining');if(2!==e[l++])throw Error('Could not find expected "int" for "r"');var u=e[l++];if(s-l-2<u)throw Error('"r" specified length of "'+u+'", only "'+(s-l-2)+'" available');if(a<u)throw Error('"r" specified length of "'+u+'", max of "'+a+'" is acceptable');var d=l;if(l+=u,2!==e[l++])throw Error('Could not find expected "int" for "s"');var h=e[l++];if(s-l!==h)throw Error('"s" specified length of "'+h+'", expected "'+(s-l)+'"');if(a<h)throw Error('"s" specified length of "'+h+'", max of "'+a+'" is acceptable');var f=l;if((l+=h)!==s)throw Error('Expected to consume entire buffer, but "'+(s-l)+'" bytes remain');var p=r-u,m=r-h,g=n.allocUnsafe(p+u+m+h);for(l=0;l<p;++l)g[l]=0;e.copy(g,l,d+Math.max(-p,0),d+u),l=r;for(var y=l;l<y+m;++l)g[l]=0;return e.copy(g,l,f+Math.max(-m,0),f+h),g=(g=g.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var r=i(t),s=e.length;if(s!==2*r)throw TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+s+'"');var l=a(e,0,r),c=a(e,r,e.length),u=r-l,d=r-c,h=2+u+1+1+d,f=h<128,p=n.allocUnsafe((f?2:3)+h),m=0;return p[m++]=48,f?p[m++]=h:(p[m++]=129,p[m++]=255&h),p[m++]=2,p[m++]=u,l<0?(p[m++]=0,m+=e.copy(p,m,0,r)):m+=e.copy(p,m,l,r),p[m++]=2,p[m++]=d,c<0?(p[m++]=0,e.copy(p,m,r)):e.copy(p,m,r+c),p}}},63822,(e,t,r)=>{"use strict";var n=e.r(874).Buffer,i=e.r(874).SlowBuffer;function o(e,t){if(!n.isBuffer(e)||!n.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}t.exports=o,o.install=function(){n.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var a=n.prototype.equal,s=i.prototype.equal;o.restore=function(){n.prototype.equal=a,i.prototype.equal=s}},80397,(e,t,r)=>{var n,i=e.r(96265).Buffer,o=e.r(54799),a=e.r(75295),s=e.r(24361),l="secret must be a string or buffer",c="key must be a string or a buffer",u="function"==typeof o.createPublicKey;function d(e){if(!i.isBuffer(e)&&"string"!=typeof e&&(!u||"object"!=typeof e||"string"!=typeof e.type||"string"!=typeof e.asymmetricKeyType||"function"!=typeof e.export))throw m(c)}function h(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m("key must be a string, a buffer or an object")}function f(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1);return TypeError(s.format.bind(s,e).apply(null,t))}function g(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function y(e){return function(t,r){!function(e){if(!i.isBuffer(e)){if("string"!=typeof e){if(!u||"object"!=typeof e||"secret"!==e.type||"function"!=typeof e.export)throw m(l)}}}(r),t=g(t);var n=o.createHmac("sha"+e,r);return f((n.update(t),n.digest("base64")))}}u&&(c+=" or a KeyObject",l+="or a KeyObject");var _="timingSafeEqual"in o?function(e,t){return e.byteLength===t.byteLength&&o.timingSafeEqual(e,t)}:function(t,r){return n||(n=e.r(63822)),n(t,r)};function E(e){return function(t,r,n){var o=y(e)(t,n);return _(i.from(r),i.from(o))}}function T(e){return function(t,r){h(r),t=g(t);var n=o.createSign("RSA-SHA"+e);return f((n.update(t),n.sign(r,"base64")))}}function b(e){return function(t,r,n){d(n),t=g(t),r=p(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function v(e){return function(t,r){h(r),t=g(t);var n=o.createSign("RSA-SHA"+e);return f((n.update(t),n.sign({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function A(e){return function(t,r,n){d(n),t=g(t),r=p(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function C(e){var t=T(e);return function(){var r=t.apply(null,arguments);return a.derToJose(r,"ES"+e)}}function S(e){var t=b(e);return function(r,n,i){return t(r,n=a.joseToDer(n,"ES"+e).toString("base64"),i)}}function w(){return function(){return""}}function I(){return function(e,t){return""===t}}t.exports=function(e){var t=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!t)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var r=(t[1]||t[3]).toLowerCase(),n=t[2];return{sign:({hs:y,rs:T,ps:v,es:C,none:w})[r](n),verify:({hs:E,rs:b,ps:A,es:S,none:I})[r](n)}}},34280,(e,t,r)=>{var n=e.r(874).Buffer;t.exports=function(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},5023,(e,t,r)=>{var n=e.r(96265).Buffer,i=e.r(13178),o=e.r(80397),a=e.r(88947),s=e.r(34280),l=e.r(24361);function c(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(e){var t,r,n,i=e.header,a=e.payload,u=e.secret||e.privateKey,d=e.encoding,h=o(i.alg),f=(t=(t=d)||"utf8",r=c(s(i),"binary"),n=c(s(a),t),l.format("%s.%s",r,n)),p=h.sign(f,u);return l.format("%s.%s",f,p)}function d(e){var t=new i(e.secret||e.privateKey||e.key);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new i(e.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}l.inherits(d,a),d.prototype.sign=function(){try{var e=u({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=u,t.exports=d},89602,(e,t,r)=>{var n=e.r(96265).Buffer,i=e.r(13178),o=e.r(80397),a=e.r(88947),s=e.r(34280),l=e.r(24361),c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(e){var t=e.split(".",1)[0],r=n.from(t,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(r))return r;try{return JSON.parse(r)}catch(e){return}}function d(e){return e.split(".")[2]}function h(e){return c.test(e)&&!!u(e)}function f(e,t,r){if(!t){var n=Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=d(e=s(e)),a=e.split(".",2).join(".");return o(t).verify(a,i,r)}function p(e,t){if(t=t||{},!h(e=s(e)))return null;var r,i,o=u(e);if(!o)return null;var a=(r=r||"utf8",i=e.split(".")[1],n.from(i,"base64").toString(r));return("JWT"===o.typ||t.json)&&(a=JSON.parse(a,t.encoding)),{header:o,payload:a,signature:d(e)}}function m(e){var t=new i((e=e||{}).secret||e.publicKey||e.key);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new i(e.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}l.inherits(m,a),m.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=p(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},m.decode=p,m.isValid=h,m.verify=f,t.exports=m},7679,(e,t,r)=>{var n=e.r(5023),i=e.r(89602);r.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],r.sign=n.sign,r.verify=i.verify,r.decode=i.decode,r.isValid=i.isValid,r.createSign=function(e){return new n(e)},r.createVerify=function(e){return new i(e)}},9785,(e,t,r)=>{var n=e.r(7679);t.exports=function(e,t){t=t||{};var r=n.decode(e,t);if(!r)return null;var i=r.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:r.header,payload:i,signature:r.signature}:i}},81107,(e,t,r)=>{var n=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.exports=n},54377,(e,t,r)=>{var n=e.r(81107),i=function(e,t){n.call(this,e),this.name="NotBeforeError",this.date=t};i.prototype=Object.create(n.prototype),i.prototype.constructor=i,t.exports=i},47892,(e,t,r)=>{var n=e.r(81107),i=function(e,t){n.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};i.prototype=Object.create(n.prototype),i.prototype.constructor=i,t.exports=i},73936,(e,t,r)=>{var n=e.r(44200);t.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=n(e);if(void 0===i)return;return Math.floor(r+i/1e3)}if("number"==typeof e)return r+e}},6137,(e,t,r)=>{"use strict";t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},64393,(e,t,r)=>{"use strict";t.exports="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},14697,(e,t,r)=>{"use strict";let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=e.r(6137),a=e.r(64393),s=(r=t.exports={}).re=[],l=r.safeRe=[],c=r.src=[],u=r.safeSrc=[],d=r.t={},h=0,f="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",o],[f,i]],m=(e,t,r)=>{let n=(e=>{for(let[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=h++;a(e,i,t),d[e]=i,c[i]=t,u[i]=n,s[i]=new RegExp(t,r?"g":void 0),l[i]=new RegExp(n,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),m("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${f}+`),m("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),m("FULL",`^${c[d.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),m("LOOSE",`^${c[d.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),m("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?`+`(?:${c[d.BUILD]})?`+"(?:$|[^\\d])"),m("COERCERTL",c[d.COERCE],!0),m("COERCERTLFULL",c[d.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",m("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",m("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},63094,(e,t,r)=>{"use strict";let n=Object.freeze({loose:!0}),i=Object.freeze({});t.exports=e=>e?"object"!=typeof e?n:e:i},94276,(e,t,r)=>{"use strict";let n=/^[0-9]+$/,i=(e,t)=>{let r=n.test(e),i=n.test(t);return r&&i&&(e*=1,t*=1),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1};t.exports={compareIdentifiers:i,rcompareIdentifiers:(e,t)=>i(t,e)}},80355,(e,t,r)=>{"use strict";let n=e.r(64393),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=e.r(6137),{safeRe:a,t:s}=e.r(14697),l=e.r(63094),{compareIdentifiers:c}=e.r(94276);class u{constructor(e,t){if(t=l(t),e instanceof u)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else e=e.version;else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return c(r,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return c(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?a[s.PRERELEASELOOSE]:a[s.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}t.exports=u},85e3,(e,t,r)=>{"use strict";let n=e.r(80355);t.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},59608,(e,t,r)=>{"use strict";let n=e.r(85e3);t.exports=(e,t)=>{let r=n(e,t);return r?r.version:null}},23401,(e,t,r)=>{"use strict";let n=e.r(85e3);t.exports=(e,t)=>{let r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},38280,(e,t,r)=>{"use strict";let n=e.r(80355);t.exports=(e,t,r,i,o)=>{"string"==typeof r&&(o=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,o).version}catch(e){return null}}},4571,(e,t,r)=>{"use strict";let n=e.r(85e3);t.exports=(e,t)=>{let r=n(e,null,!0),i=n(t,null,!0),o=r.compare(i);if(0===o)return null;let a=o>0,s=a?r:i,l=a?i:r,c=!!s.prerelease.length;if(l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}let u=c?"pre":"";return r.major!==i.major?u+"major":r.minor!==i.minor?u+"minor":r.patch!==i.patch?u+"patch":"prerelease"}},20839,(e,t,r)=>{"use strict";let n=e.r(80355);t.exports=(e,t)=>new n(e,t).major},90396,(e,t,r)=>{"use strict";let n=e.r(80355);t.exports=(e,t)=>new n(e,t).minor},95607,(e,t,r)=>{"use strict";let n=e.r(80355);t.exports=(e,t)=>new n(e,t).patch},73696,(e,t,r)=>{"use strict";let n=e.r(85e3);t.exports=(e,t)=>{let r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},50765,(e,t,r)=>{"use strict";let n=e.r(80355);t.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},93556,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t,r)=>n(t,e,r)},37842,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t)=>n(e,t,!0)},71794,(e,t,r)=>{"use strict";let n=e.r(80355);t.exports=(e,t,r)=>{let i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},24400,(e,t,r)=>{"use strict";let n=e.r(71794);t.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},48248,(e,t,r)=>{"use strict";let n=e.r(71794);t.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},69681,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t,r)=>n(e,t,r)>0},2785,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t,r)=>0>n(e,t,r)},74673,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t,r)=>0===n(e,t,r)},63694,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t,r)=>0!==n(e,t,r)},11200,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t,r)=>n(e,t,r)>=0},14399,(e,t,r)=>{"use strict";let n=e.r(50765);t.exports=(e,t,r)=>0>=n(e,t,r)},83953,(e,t,r)=>{"use strict";let n=e.r(74673),i=e.r(63694),o=e.r(69681),a=e.r(11200),s=e.r(2785),l=e.r(14399);t.exports=(e,t,r,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,c);case"!=":return i(e,r,c);case">":return o(e,r,c);case">=":return a(e,r,c);case"<":return s(e,r,c);case"<=":return l(e,r,c);default:throw TypeError(`Invalid operator: ${t}`)}}},68614,(e,t,r)=>{"use strict";let n=e.r(80355),i=e.r(85e3),{safeRe:o,t:a}=e.r(14697);t.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,i=t.includePrerelease?o[a.COERCERTLFULL]:o[a.COERCERTL];for(;(n=i.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i.lastIndex=n.index+n[1].length+n[2].length;i.lastIndex=-1}else r=e.match(t.includePrerelease?o[a.COERCEFULL]:o[a.COERCE]);if(null===r)return null;let s=r[2],l=r[3]||"0",c=r[4]||"0",u=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${s}.${l}.${c}${u}${d}`,t)}},25452,(e,t,r)=>{"use strict";t.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},43507,(e,t,r)=>{"use strict";let n=/\s+/g;class i{constructor(e,t){if(t=a(t),e instanceof i)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else return new i(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!y(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&_(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,r=o.get(t);if(r)return r;let n=this.options.loose,i=n?u[d.HYPHENRANGELOOSE]:u[d.HYPHENRANGE];l("hyphen replace",e=e.replace(i,N(this.options.includePrerelease))),l("comparator trim",e=e.replace(u[d.COMPARATORTRIM],h)),l("tilde trim",e=e.replace(u[d.TILDETRIM],f)),l("caret trim",e=e.replace(u[d.CARETTRIM],p));let a=e.split(" ").map(e=>T(e,this.options)).join(" ").split(/\s+/).map(e=>R(e,this.options));n&&(a=a.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(u[d.COMPARATORLOOSE])))),l("range list",a);let c=new Map;for(let e of a.map(e=>new s(e,this.options))){if(y(e))return[e];c.set(e.value,e)}c.size>1&&c.has("")&&c.delete("");let _=[...c.values()];return o.set(t,_),_}intersects(e,t){if(!(e instanceof i))throw TypeError("a Range is required");return this.set.some(r=>E(r,t)&&e.set.some(e=>E(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(P(this.set[t],e,this.options))return!0;return!1}}t.exports=i;let o=new(e.r(25452)),a=e.r(63094),s=e.r(91938),l=e.r(64393),c=e.r(80355),{safeRe:u,t:d,comparatorTrimReplace:h,tildeTrimReplace:f,caretTrimReplace:p}=e.r(14697),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=e.r(6137),y=e=>"<0.0.0-0"===e.value,_=e=>""===e.value,E=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},T=(e,t)=>(l("comp",e,t),l("caret",e=C(e,t)),l("tildes",e=v(e,t)),l("xrange",e=w(e,t)),l("stars",e=O(e,t)),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,v=(e,t)=>e.trim().split(/\s+/).map(e=>A(e,t)).join(" "),A=(e,t)=>{let r=t.loose?u[d.TILDELOOSE]:u[d.TILDE];return e.replace(r,(t,r,n,i,o)=>{let a;return l("tilde",e,t,r,n,i,o),b(r)?a="":b(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:b(i)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(l("replaceTilde pr",o),a=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,l("tilde return",a),a})},C=(e,t)=>e.trim().split(/\s+/).map(e=>S(e,t)).join(" "),S=(e,t)=>{l("caret",e,t);let r=t.loose?u[d.CARETLOOSE]:u[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,o,a)=>{let s;return l("caret",e,t,r,i,o,a),b(r)?s="":b(i)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:b(o)?s="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:a?(l("replaceCaret pr",a),s="0"===r?"0"===i?`>=${r}.${i}.${o}-${a} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${a} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),l("caret return",s),s})},w=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>I(e,t)).join(" ")),I=(e,t)=>{e=e.trim();let r=t.loose?u[d.XRANGELOOSE]:u[d.XRANGE];return e.replace(r,(r,n,i,o,a,s)=>{l("xRange",e,r,n,i,o,a,s);let c=b(i),u=c||b(o),d=u||b(a);return"="===n&&d&&(n=""),s=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&d?(u&&(o=0),a=0,">"===n?(n=">=",u?(i=+i+1,o=0):o=+o+1,a=0):"<="===n&&(n="<",u?i=+i+1:o=+o+1),"<"===n&&(s="-0"),r=`${n+i}.${o}.${a}${s}`):u?r=`>=${i}.0.0${s} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),l("xRange return",r),r})},O=(e,t)=>(l("replaceStars",e,t),e.trim().replace(u[d.STAR],"")),R=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),N=e=>(t,r,n,i,o,a,s,l,c,u,d,h)=>(r=b(n)?"":b(i)?`>=${n}.0.0${e?"-0":""}`:b(o)?`>=${n}.${i}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`,l=b(c)?"":b(u)?`<${+c+1}.0.0-0`:b(d)?`<${c}.${+u+1}.0-0`:h?`<=${c}.${u}.${d}-${h}`:e?`<${c}.${u}.${+d+1}-0`:`<=${l}`,`${r} ${l}`.trim()),P=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},91938,(e,t,r)=>{"use strict";let n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i)if(!!t.loose===e.loose)return e;else e=e.value;c("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){let t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}t.exports=i;let o=e.r(63094),{safeRe:a,t:s}=e.r(14697),l=e.r(83953),c=e.r(64393),u=e.r(80355),d=e.r(43507)},19919,(e,t,r)=>{"use strict";let n=e.r(43507);t.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},35477,(e,t,r)=>{"use strict";let n=e.r(43507);t.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},92331,(e,t,r)=>{"use strict";let n=e.r(80355),i=e.r(43507);t.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!o||-1===a.compare(e))&&(a=new n(o=e,r))}),o}},36934,(e,t,r)=>{"use strict";let n=e.r(80355),i=e.r(43507);t.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!o||1===a.compare(e))&&(a=new n(o=e,r))}),o}},71665,(e,t,r)=>{"use strict";let n=e.r(80355),i=e.r(43507),o=e.r(69681);t.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r)||(r=new n("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let i=e.set[t],a=null;i.forEach(e=>{let t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!a||o(t,a))&&(a=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),a&&(!r||o(r,a))&&(r=a)}return r&&e.test(r)?r:null}},29575,(e,t,r)=>{"use strict";let n=e.r(43507);t.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},16446,(e,t,r)=>{"use strict";let n=e.r(80355),i=e.r(91938),{ANY:o}=i,a=e.r(43507),s=e.r(19919),l=e.r(69681),c=e.r(2785),u=e.r(14399),d=e.r(11200);t.exports=(e,t,r,h)=>{let f,p,m,g,y;switch(e=new n(e,h),t=new a(t,h),r){case">":f=l,p=u,m=c,g=">",y=">=";break;case"<":f=c,p=d,m=l,g="<",y="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,h))return!1;for(let r=0;r<t.set.length;++r){let n=t.set[r],a=null,s=null;if(n.forEach(e=>{e.semver===o&&(e=new i(">=0.0.0")),a=a||e,s=s||e,f(e.semver,a.semver,h)?a=e:m(e.semver,s.semver,h)&&(s=e)}),a.operator===g||a.operator===y||(!s.operator||s.operator===g)&&p(e,s.semver)||s.operator===y&&m(e,s.semver))return!1}return!0}},71242,(e,t,r)=>{"use strict";let n=e.r(16446);t.exports=(e,t,r)=>n(e,t,">",r)},47578,(e,t,r)=>{"use strict";let n=e.r(16446);t.exports=(e,t,r)=>n(e,t,"<",r)},94505,(e,t,r)=>{"use strict";let n=e.r(43507);t.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},66281,(e,t,r)=>{"use strict";let n=e.r(19919),i=e.r(50765);t.exports=(e,t,r)=>{let o=[],a=null,s=null,l=e.sort((e,t)=>i(e,t,r));for(let e of l)n(e,t,r)?(s=e,a||(a=e)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);let c=[];for(let[e,t]of o)e===t?c.push(e):t||e!==l[0]?t?e===l[0]?c.push(`<=${t}`):c.push(`${e} - ${t}`):c.push(`>=${e}`):c.push("*");let u=c.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}},99249,(e,t,r)=>{"use strict";let n=e.r(43507),i=e.r(91938),{ANY:o}=i,a=e.r(19919),s=e.r(50765),l=[new i(">=0.0.0-0")],c=[new i(">=0.0.0")],u=(e,t,r)=>{let n,i,u,f,p,m,g;if(e===t)return!0;if(1===e.length&&e[0].semver===o)if(1===t.length&&t[0].semver===o)return!0;else e=r.includePrerelease?l:c;if(1===t.length&&t[0].semver===o)if(r.includePrerelease)return!0;else t=c;let y=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=d(n,t,r):"<"===t.operator||"<="===t.operator?i=h(i,t,r):y.add(t.semver);if(y.size>1)return null;if(n&&i&&((u=s(n.semver,i.semver,r))>0||0===u&&(">="!==n.operator||"<="!==i.operator)))return null;for(let e of y){if(n&&!a(e,String(n),r)||i&&!a(e,String(i),r))return null;for(let n of t)if(!a(e,String(n),r))return!1;return!0}let _=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver,E=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(_&&1===_.prerelease.length&&"<"===i.operator&&0===_.prerelease[0]&&(_=!1),t)){if(g=g||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,n){if(E&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===E.major&&e.semver.minor===E.minor&&e.semver.patch===E.patch&&(E=!1),">"===e.operator||">="===e.operator){if((f=d(n,e,r))===e&&f!==n)return!1}else if(">="===n.operator&&!a(n.semver,String(e),r))return!1}if(i){if(_&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===_.major&&e.semver.minor===_.minor&&e.semver.patch===_.patch&&(_=!1),"<"===e.operator||"<="===e.operator){if((p=h(i,e,r))===e&&p!==i)return!1}else if("<="===i.operator&&!a(i.semver,String(e),r))return!1}if(!e.operator&&(i||n)&&0!==u)return!1}return(!n||!m||!!i||0===u)&&(!i||!g||!!n||0===u)&&!E&&!_&&!0},d=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};t.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;t:for(let n of e.set){for(let e of t.set){let t=u(n,e,r);if(i=i||null!==t,t)continue t}if(i)return!1}return!0}},90650,(e,t,r)=>{"use strict";let n=e.r(14697),i=e.r(6137),o=e.r(80355),a=e.r(94276),s=e.r(85e3),l=e.r(59608),c=e.r(23401),u=e.r(38280),d=e.r(4571),h=e.r(20839),f=e.r(90396),p=e.r(95607),m=e.r(73696),g=e.r(50765),y=e.r(93556),_=e.r(37842),E=e.r(71794),T=e.r(24400),b=e.r(48248),v=e.r(69681),A=e.r(2785),C=e.r(74673),S=e.r(63694),w=e.r(11200),I=e.r(14399),O=e.r(83953),R=e.r(68614),N=e.r(91938),P=e.r(43507),k=e.r(19919),D=e.r(35477),M=e.r(92331),L=e.r(36934),U=e.r(71665),x=e.r(29575),F=e.r(16446),B=e.r(71242),q=e.r(47578),H=e.r(94505);t.exports={parse:s,valid:l,clean:c,inc:u,diff:d,major:h,minor:f,patch:p,prerelease:m,compare:g,rcompare:y,compareLoose:_,compareBuild:E,sort:T,rsort:b,gt:v,lt:A,eq:C,neq:S,gte:w,lte:I,cmp:O,coerce:R,Comparator:N,Range:P,satisfies:k,toComparators:D,maxSatisfying:M,minSatisfying:L,minVersion:U,validRange:x,outside:F,gtr:B,ltr:q,intersects:H,simplifyRange:e.r(66281),subset:e.r(99249),SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},38577,(e,t,r)=>{t.exports=e.r(90650).satisfies(process.version,">=15.7.0")},80088,(e,t,r)=>{t.exports=e.r(90650).satisfies(process.version,">=16.9.0")},8707,(e,t,r)=>{let n=e.r(38577),i=e.r(80088),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},a={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};t.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let s=o[r];if(!s)throw Error(`Unknown key type "${r}".`);if(!s.includes(e))throw Error(`"alg" parameter for "${r}" key type must be one of: ${s.join(", ")}.`);if(n)switch(r){case"ec":let l=t.asymmetricKeyDetails.namedCurve,c=a[e];if(l!==c)throw Error(`"alg" parameter "${e}" requires curve "${c}".`);break;case"rsa-pss":if(i){let r=parseInt(e.slice(-3),10),{hashAlgorithm:n,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(n!==`sha${r}`||i!==n)throw Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>r>>3)throw Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},62831,(e,t,r)=>{t.exports=e.r(90650).satisfies(process.version,"^6.12.0 || >=8.0.0")},51639,(e,t,r)=>{let n=e.r(81107),i=e.r(54377),o=e.r(47892),a=e.r(9785),s=e.r(73936),l=e.r(8707),c=e.r(62831),u=e.r(7679),{KeyObject:d,createSecretKey:h,createPublicKey:f}=e.r(54799),p=["RS256","RS384","RS512"],m=["ES256","ES384","ES512"],g=["RS256","RS384","RS512"],y=["HS256","HS384","HS512"];c&&(p.splice(p.length,0,"PS256","PS384","PS512"),g.splice(g.length,0,"PS256","PS384","PS512")),t.exports=function(e,t,r,c){let _,E,T;if("function"!=typeof r||c||(c=r,r={}),r||(r={}),r=Object.assign({},r),_=c||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return _(new n("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return _(new n("nonce must be a non-empty string"));if(void 0!==r.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof r.allowInvalidAsymmetricKeyTypes)return _(new n("allowInvalidAsymmetricKeyTypes must be a boolean"));let b=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return _(new n("jwt must be provided"));if("string"!=typeof e)return _(new n("jwt must be a string"));let v=e.split(".");if(3!==v.length)return _(new n("jwt malformed"));try{E=a(e,{complete:!0})}catch(e){return _(e)}if(!E)return _(new n("invalid token"));let A=E.header;if("function"==typeof t){if(!c)return _(new n("verify must be called asynchronous if secret or public key is provided as a callback"));T=t}else T=function(e,r){return r(null,t)};return T(A,function(t,a){let c;if(t)return _(new n("error in secret or public key callback: "+t.message));let T=""!==v[2].trim();if(!T&&a)return _(new n("jwt signature is required"));if(T&&!a)return _(new n("secret or public key must be provided"));if(!T&&!r.algorithms)return _(new n('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=a&&!(a instanceof d))try{a=f(a)}catch(e){try{a=h("string"==typeof a?Buffer.from(a):a)}catch(e){return _(new n("secretOrPublicKey is not valid key material"))}}if(r.algorithms||("secret"===a.type?r.algorithms=y:["rsa","rsa-pss"].includes(a.asymmetricKeyType)?r.algorithms=g:"ec"===a.asymmetricKeyType?r.algorithms=m:r.algorithms=p),-1===r.algorithms.indexOf(E.header.alg))return _(new n("invalid algorithm"));if(A.alg.startsWith("HS")&&"secret"!==a.type)return _(new n(`secretOrPublicKey must be a symmetric key when using ${A.alg}`));if(/^(?:RS|PS|ES)/.test(A.alg)&&"public"!==a.type)return _(new n(`secretOrPublicKey must be an asymmetric key when using ${A.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{l(A.alg,a)}catch(e){return _(e)}try{c=u.verify(e,E.header.alg,a)}catch(e){return _(e)}if(!c)return _(new n("invalid signature"));let C=E.payload;if(void 0!==C.nbf&&!r.ignoreNotBefore){if("number"!=typeof C.nbf)return _(new n("invalid nbf value"));if(C.nbf>b+(r.clockTolerance||0))return _(new i("jwt not active",new Date(1e3*C.nbf)))}if(void 0!==C.exp&&!r.ignoreExpiration){if("number"!=typeof C.exp)return _(new n("invalid exp value"));if(b>=C.exp+(r.clockTolerance||0))return _(new o("jwt expired",new Date(1e3*C.exp)))}if(r.audience){let e=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(C.aud)?C.aud:[C.aud]).some(function(t){return e.some(function(e){return e instanceof RegExp?e.test(t):e===t})}))return _(new n("jwt audience invalid. expected: "+e.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&C.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(C.iss)))return _(new n("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&C.sub!==r.subject)return _(new n("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&C.jti!==r.jwtid)return _(new n("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&C.nonce!==r.nonce)return _(new n("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof C.iat)return _(new n("iat required when maxAge is specified"));let e=s(r.maxAge,C.iat);if(void 0===e)return _(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(b>=e+(r.clockTolerance||0))return _(new o("maxAge exceeded",new Date(1e3*e)))}return!0===r.complete?_(null,{header:A,payload:C,signature:E.signature}):_(null,C)})}},45913,(e,t,r)=>{var n,i,o=1/0,a=0/0,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=/^(?:0|[1-9]\d*)$/,h=parseInt;function f(e){return e!=e}var p=Object.prototype,m=p.hasOwnProperty,g=p.toString,y=p.propertyIsEnumerable,_=(n=Object.keys,i=Object,function(e){return n(i(e))}),E=Math.max,T=Array.isArray;function b(e){var t,r,n;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&"[object Function]"!=(n=v(r=e)?g.call(r):"")&&"[object GeneratorFunction]"!=n}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){return!!e&&"object"==typeof e}t.exports=function(e,t,r,n){e=b(e)?e:function(e){return e?function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(b(e)?function(e,t){var r,n,i,o,a=T(e)||A(n=r=e)&&b(n)&&m.call(r,"callee")&&(!y.call(r,"callee")||"[object Arguments]"==g.call(r))?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],s=a.length,l=!!s;for(var c in e){m.call(e,c)&&!(l&&("length"==c||(i=c,(o=null==(o=s)?0x1fffffffffffff:o)&&("number"==typeof i||d.test(i))&&i>-1&&i%1==0&&i<o)))&&a.push(c)}return a}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||p))return _(e);var t,r,n=[];for(var i in Object(e))m.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e),function(t){return e[t]}):[]}(e),r=r&&!n?(S=(C=(i=r)?(i=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||A(t)&&"[object Symbol]"==g.call(t))return a;if(v(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=v(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||u.test(e)?h(e.slice(2),n?2:8):l.test(e)?a:+e}(i))===o||i===-o?(i<0?-1:1)*17976931348623157e292:i==i?i:0:0===i?i:0)%1,C==C?S?C-S:C:0):0;var i,C,S,w,I=e.length;return r<0&&(r=E(I+r,0)),"string"==typeof(w=e)||!T(w)&&A(w)&&"[object String]"==g.call(w)?r<=I&&e.indexOf(t,r)>-1:!!I&&function(e,t,r){if(t!=t){for(var n,i=e.length,o=r+-1;n?o--:++o<i;)if(f(e[o],o,e))return o;return -1}for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return -1}(e,t,r)>-1}},47032,(e,t,r)=>{var n=Object.prototype.toString;t.exports=function(e){var t;return!0===e||!1===e||!!(t=e)&&"object"==typeof t&&"[object Boolean]"==n.call(e)}},45054,(e,t,r)=>{var n=1/0,i=0/0,o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u=Object.prototype.toString;function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=function(e){var t,r,h;return"number"==typeof e&&e==(h=(r=(t=e)?(t=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==u.call(t))return i;if(d(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=d(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?i:+e}(t))===n||t===-n?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0)%1,r==r?h?r-h:r:0)}},74668,(e,t,r)=>{var n=Object.prototype.toString;t.exports=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"==n.call(e)}},47102,(e,t,r)=>{var n,i,o=Object.prototype,a=Function.prototype.toString,s=o.hasOwnProperty,l=a.call(Object),c=o.toString,u=(n=Object.getPrototypeOf,i=Object,function(e){return n(i(e))});t.exports=function(e){if(!(e&&"object"==typeof e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=u(e);if(null===t)return!0;var r=s.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&a.call(r)==l}},2701,(e,t,r)=>{var n=Object.prototype.toString,i=Array.isArray;t.exports=function(e){var t;return"string"==typeof e||!i(e)&&!!(t=e)&&"object"==typeof t&&"[object String]"==n.call(e)}},35958,(e,t,r)=>{var n=1/0,i=0/0,o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u=Object.prototype.toString;function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=function(e){var t,r,h,f,p=2,m=e;if("function"!=typeof m)throw TypeError("Expected a function");return h=(r=(t=p)?(t=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==u.call(t))return i;if(d(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=d(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?i:+e}(t))===n||t===-n?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0)%1,p=r==r?h?r-h:r:0,function(){return--p>0&&(f=m.apply(this,arguments)),p<=1&&(m=void 0),f}}},69253,(e,t,r)=>{let n=e.r(73936),i=e.r(62831),o=e.r(8707),a=e.r(7679),s=e.r(45913),l=e.r(47032),c=e.r(45054),u=e.r(74668),d=e.r(47102),h=e.r(2701),f=e.r(35958),{KeyObject:p,createSecretKey:m,createPrivateKey:g}=e.r(54799),y=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&y.splice(3,0,"PS256","PS384","PS512");let _={expiresIn:{isValid:function(e){return c(e)||h(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return c(e)||h(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return h(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,y),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:l,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:l,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:l,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:l,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},E={iat:{isValid:u,message:'"iat" should be a number of seconds'},exp:{isValid:u,message:'"exp" should be a number of seconds'},nbf:{isValid:u,message:'"nbf" should be a number of seconds'}};function T(e,t,r,n){if(!d(r))throw Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=e[i];if(!o){if(!t)throw Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw Error(o.message)})}let b={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},v=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];t.exports=function(e,t,r,i){var s,l;"function"==typeof r?(i=r,r={}):r=r||{};let c="object"==typeof e&&!Buffer.isBuffer(e),u=Object.assign({alg:r.algorithm||"HS256",typ:c?"JWT":void 0,kid:r.keyid},r.header);function d(e){if(i)return i(e);throw e}if(!t&&"none"!==r.algorithm)return d(Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof p))try{t=g(t)}catch(e){try{t=m("string"==typeof t?Buffer.from(t):t)}catch(e){return d(Error("secretOrPrivateKey is not valid key material"))}}if(u.alg.startsWith("HS")&&"secret"!==t.type)return d(Error(`secretOrPrivateKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)){if("private"!==t.type)return d(Error(`secretOrPrivateKey must be an asymmetric key when using ${u.alg}`));if(!r.allowInsecureKeySizes&&!u.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return d(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${u.alg}`))}if(void 0===e)return d(Error("payload is required"));if(c){try{s=e,T(E,!0,s,"payload")}catch(e){return d(e)}r.mutatePayload||(e=Object.assign({},e))}else{let t=v.filter(function(e){return void 0!==r[e]});if(t.length>0)return d(Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==r.expiresIn)return d(Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==r.notBefore)return d(Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{l=r,T(_,!1,l,"options")}catch(e){return d(e)}if(!r.allowInvalidAsymmetricKeyTypes)try{o(u.alg,t)}catch(e){return d(e)}let h=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:c&&(e.iat=h),void 0!==r.notBefore){try{e.nbf=n(r.notBefore,h)}catch(e){return d(e)}if(void 0===e.nbf)return d(Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==r.expiresIn&&"object"==typeof e){try{e.exp=n(r.expiresIn,h)}catch(e){return d(e)}if(void 0===e.exp)return d(Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(b).forEach(function(t){let n=b[t];if(void 0!==r[t]){if(void 0!==e[n])return d(Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'));e[n]=r[t]}});let y=r.encoding||"utf8";if("function"==typeof i)i=i&&f(i),a.createSign({header:u,privateKey:t,payload:e,encoding:y}).once("error",i).once("done",function(e){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(u.alg)&&e.length<256)return i(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${u.alg}`));i(null,e)});else{let n=a.sign({header:u,payload:e,secret:t,encoding:y});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(u.alg)&&n.length<256)throw Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${u.alg}`);return n}}},71523,(e,t,r)=>{t.exports={decode:e.r(9785),verify:e.r(51639),sign:e.r(69253),JsonWebTokenError:e.r(81107),NotBeforeError:e.r(54377),TokenExpiredError:e.r(47892)}},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},3362,(e,t,r)=>{"use strict";var n=e.r(21517),i=e.r(24836),o=e.r(30657),a=e.r(54799),s=e.r(50247),l=e.r(71523),c=e.r(22734),u=e.r(14747);class d{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,realm:n.realm,local_account_id:n.localAccountId,username:n.username,authority_type:n.authorityType,name:n.name,client_info:n.clientInfo,last_modification_time:n.lastModificationTime,last_modification_app:n.lastModificationApp,tenantProfiles:n.tenantProfiles?.map(e=>JSON.stringify(e))}}),t}static serializeIdTokens(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm}}),t}static serializeAccessTokens(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm,target:n.target,cached_at:n.cachedAt,expires_on:n.expiresOn,extended_expires_on:n.extendedExpiresOn,refresh_on:n.refreshOn,key_id:n.keyId,token_type:n.tokenType,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash}}),t}static serializeRefreshTokens(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,family_id:n.familyId,target:n.target,realm:n.realm}}),t}static serializeAppMetadata(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={client_id:n.clientId,environment:n.environment,family_id:n.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}let h={SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],INVALID_INSTANCE:"invalid_instance"},f={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},p=[h.OPENID_SCOPE,h.PROFILE_SCOPE,h.OFFLINE_ACCESS_SCOPE],m=[...p,h.EMAIL_SCOPE],g={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},y={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},_={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},E={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},T={S256:"S256"},b={CODE:"code",IDTOKEN_TOKEN:"id_token token"},v={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},A={AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},C={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},S={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},w={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},I="appmetadata",O={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},R={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},N={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},P={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},k={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},D={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},M={username:"username",password:"password"},L={FAILED_AUTO_DETECTION:"1",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},U={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},x={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},F={BASE64:"base64",HEX:"hex",UTF8:"utf-8"},B="unexpected_error",q="post_request_failed";var H=Object.freeze({__proto__:null,postRequestFailed:q,unexpectedError:B});let j={[B]:"Unexpected error in authentication.",[q]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},Y={unexpectedError:{code:B,desc:j[B]},postRequestFailed:{code:q,desc:j[q]}};class $ extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,$.prototype),this.errorCode=e||h.EMPTY_STRING,this.errorMessage=t||h.EMPTY_STRING,this.subError=r||h.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}let V="client_info_decoding_error",z="client_info_empty_error",G="token_parsing_error",W="null_or_empty_token",K="endpoints_resolution_error",Q="network_error",X="openid_config_error",Z="hash_not_deserialized",J="invalid_state",ee="state_mismatch",et="state_not_found",er="nonce_mismatch",en="auth_time_not_found",ei="max_age_transpired",eo="multiple_matching_tokens",ea="multiple_matching_accounts",es="multiple_matching_appMetadata",el="request_cannot_be_made",ec="cannot_remove_empty_scope",eu="cannot_append_scopeset",ed="empty_input_scopeset",eh="device_code_polling_cancelled",ef="device_code_expired",ep="device_code_unknown_error",em="no_account_in_silent_request",eg="invalid_cache_record",ey="invalid_cache_environment",e_="no_account_found",eE="no_crypto_object",eT="unexpected_credential_type",eb="invalid_assertion",ev="invalid_client_credential",eA="token_refresh_required",eC="user_timeout_reached",eS="token_claims_cnf_required_for_signedjwt",ew="authorization_code_missing_from_server_response",eI="binding_key_not_removed",eO="end_session_endpoint_not_supported",eR="key_id_missing",eN="no_network_connectivity",eP="user_canceled",ek="missing_tenant_id_error",eD="method_not_implemented",eM="nested_app_auth_bridge_disabled";var eL=Object.freeze({__proto__:null,authTimeNotFound:en,authorizationCodeMissingFromServerResponse:ew,bindingKeyNotRemoved:eI,cannotAppendScopeSet:eu,cannotRemoveEmptyScope:ec,clientInfoDecodingError:V,clientInfoEmptyError:z,deviceCodeExpired:ef,deviceCodePollingCancelled:eh,deviceCodeUnknownError:ep,emptyInputScopeSet:ed,endSessionEndpointNotSupported:eO,endpointResolutionError:K,hashNotDeserialized:Z,invalidAssertion:eb,invalidCacheEnvironment:ey,invalidCacheRecord:eg,invalidClientCredential:ev,invalidState:J,keyIdMissing:eR,maxAgeTranspired:ei,methodNotImplemented:eD,missingTenantIdError:ek,multipleMatchingAccounts:ea,multipleMatchingAppMetadata:es,multipleMatchingTokens:eo,nestedAppAuthBridgeDisabled:eM,networkError:Q,noAccountFound:e_,noAccountInSilentRequest:em,noCryptoObject:eE,noNetworkConnectivity:eN,nonceMismatch:er,nullOrEmptyToken:W,openIdConfigError:X,requestCannotBeMade:el,stateMismatch:ee,stateNotFound:et,tokenClaimsCnfRequiredForSignedJwt:eS,tokenParsingError:G,tokenRefreshRequired:eA,unexpectedCredentialType:eT,userCanceled:eP,userTimeoutReached:eC});let eU={[V]:"The client info could not be parsed/decoded correctly",[z]:"The client info was empty",[G]:"Token cannot be parsed",[W]:"The token is null or empty",[K]:"Endpoints cannot be resolved",[Q]:"Network request failed",[X]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Z]:"The hash parameters could not be deserialized",[J]:"State was not the expected format",[ee]:"State mismatch error",[et]:"State not found",[er]:"Nonce mismatch error",[en]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ei]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[eo]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ea]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[es]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[el]:"Token request cannot be made without authorization code or refresh token.",[ec]:"Cannot remove null or empty scope from ScopeSet",[eu]:"Cannot append ScopeSet",[ed]:"Empty input ScopeSet cannot be processed",[eh]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[ef]:"Device code is expired.",[ep]:"Device code stopped polling for unknown reasons.",[em]:"Please pass an account object, silent flow is not supported without account information",[eg]:"Cache record object was null or undefined.",[ey]:"Invalid environment when attempting to create cache entry",[e_]:"No account found in cache for given key.",[eE]:"No crypto object detected.",[eT]:"Unexpected credential type.",[eb]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[ev]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[eA]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[eC]:"User defined timeout for device code polling reached",[eS]:"Cannot generate a POP jwt if the token_claims are not populated",[ew]:"Server response does not contain an authorization code to proceed",[eI]:"Could not remove the credential's binding key from storage.",[eO]:"The provided authority does not support logout",[eR]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[eN]:"No network connectivity. Check your internet connection.",[eP]:"User cancelled the flow.",[ek]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[eD]:"This method has not been implemented",[eM]:"The nested app auth bridge is disabled"},ex={clientInfoDecodingError:{code:V,desc:eU[V]},clientInfoEmptyError:{code:z,desc:eU[z]},tokenParsingError:{code:G,desc:eU[G]},nullOrEmptyToken:{code:W,desc:eU[W]},endpointResolutionError:{code:K,desc:eU[K]},networkError:{code:Q,desc:eU[Q]},unableToGetOpenidConfigError:{code:X,desc:eU[X]},hashNotDeserialized:{code:Z,desc:eU[Z]},invalidStateError:{code:J,desc:eU[J]},stateMismatchError:{code:ee,desc:eU[ee]},stateNotFoundError:{code:et,desc:eU[et]},nonceMismatchError:{code:er,desc:eU[er]},authTimeNotFoundError:{code:en,desc:eU[en]},maxAgeTranspired:{code:ei,desc:eU[ei]},multipleMatchingTokens:{code:eo,desc:eU[eo]},multipleMatchingAccounts:{code:ea,desc:eU[ea]},multipleMatchingAppMetadata:{code:es,desc:eU[es]},tokenRequestCannotBeMade:{code:el,desc:eU[el]},removeEmptyScopeError:{code:ec,desc:eU[ec]},appendScopeSetError:{code:eu,desc:eU[eu]},emptyInputScopeSetError:{code:ed,desc:eU[ed]},DeviceCodePollingCancelled:{code:eh,desc:eU[eh]},DeviceCodeExpired:{code:ef,desc:eU[ef]},DeviceCodeUnknownError:{code:ep,desc:eU[ep]},NoAccountInSilentRequest:{code:em,desc:eU[em]},invalidCacheRecord:{code:eg,desc:eU[eg]},invalidCacheEnvironment:{code:ey,desc:eU[ey]},noAccountFound:{code:e_,desc:eU[e_]},noCryptoObj:{code:eE,desc:eU[eE]},unexpectedCredentialType:{code:eT,desc:eU[eT]},invalidAssertion:{code:eb,desc:eU[eb]},invalidClientCredential:{code:ev,desc:eU[ev]},tokenRefreshRequired:{code:eA,desc:eU[eA]},userTimeoutReached:{code:eC,desc:eU[eC]},tokenClaimsRequired:{code:eS,desc:eU[eS]},noAuthorizationCodeFromServer:{code:ew,desc:eU[ew]},bindingKeyNotRemovedError:{code:eI,desc:eU[eI]},logoutNotSupported:{code:eO,desc:eU[eO]},keyIdMissing:{code:eR,desc:eU[eR]},noNetworkConnectivity:{code:eN,desc:eU[eN]},userCanceledError:{code:eP,desc:eU[eP]},missingTenantIdError:{code:ek,desc:eU[ek]},nestedAppAuthBridgeDisabled:{code:eM,desc:eU[eM]}};class eF extends ${constructor(e,t){super(e,t?`${eU[e]}: ${t}`:eU[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,eF.prototype)}}function eB(e,t){return new eF(e,t)}let eq={createNewGuid:()=>{throw eB(eD)},base64Decode:()=>{throw eB(eD)},base64Encode:()=>{throw eB(eD)},base64UrlEncode:()=>{throw eB(eD)},encodeKid:()=>{throw eB(eD)},async getPublicKeyThumbprint(){throw eB(eD)},async removeTokenBindingKey(){throw eB(eD)},async clearKeystore(){throw eB(eD)},async signJwt(){throw eB(eD)},async hashString(){throw eB(eD)}};r.LogLevel=void 0,function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(r.LogLevel||(r.LogLevel={}));class eH{constructor(e,t,n){this.level=r.LogLevel.Info;let i=e||eH.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:r.LogLevel.Info,this.correlationId=i.correlationId||h.EMPTY_STRING,this.packageName=t||h.EMPTY_STRING,this.packageVersion=n||h.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:r.LogLevel.Info}}clone(e,t,r){return new eH({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let n=new Date().toUTCString(),i=`[${n}] : [${t.correlationId||this.correlationId||""}]`,o=`${i} : ${this.packageName}@${this.packageVersion} : ${r.LogLevel[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:r.LogLevel.Error,containsPii:!1,correlationId:t||h.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Error,containsPii:!0,correlationId:t||h.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:r.LogLevel.Warning,containsPii:!1,correlationId:t||h.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Warning,containsPii:!0,correlationId:t||h.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:r.LogLevel.Info,containsPii:!1,correlationId:t||h.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Info,containsPii:!0,correlationId:t||h.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:r.LogLevel.Verbose,containsPii:!1,correlationId:t||h.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Verbose,containsPii:!0,correlationId:t||h.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:r.LogLevel.Trace,containsPii:!1,correlationId:t||h.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:r.LogLevel.Trace,containsPii:!0,correlationId:t||h.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}let ej="@azure/msal-common",eY="15.12.0",e$={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},eV="redirect_uri_empty",ez="claims_request_parsing_error",eG="authority_uri_insecure",eW="url_parse_error",eK="empty_url_error",eQ="empty_input_scopes_error",eX="invalid_claims",eZ="token_request_empty",eJ="logout_request_empty",e0="invalid_code_challenge_method",e1="pkce_params_missing",e2="invalid_cloud_discovery_metadata",e5="invalid_authority_metadata",e8="untrusted_authority",e6="missing_ssh_jwk",e4="missing_ssh_kid",e3="missing_nonce_authentication_header",e9="invalid_authentication_header",e7="cannot_set_OIDCOptions",te="cannot_allow_platform_broker",tt="authority_mismatch",tr="invalid_request_method_for_EAR",tn="invalid_authorize_post_body_parameters";var ti=Object.freeze({__proto__:null,authorityMismatch:tt,authorityUriInsecure:eG,cannotAllowPlatformBroker:te,cannotSetOIDCOptions:e7,claimsRequestParsingError:ez,emptyInputScopesError:eQ,invalidAuthenticationHeader:e9,invalidAuthorityMetadata:e5,invalidAuthorizePostBodyParameters:tn,invalidClaims:eX,invalidCloudDiscoveryMetadata:e2,invalidCodeChallengeMethod:e0,invalidRequestMethodForEAR:tr,logoutRequestEmpty:eJ,missingNonceAuthenticationHeader:e3,missingSshJwk:e6,missingSshKid:e4,pkceParamsMissing:e1,redirectUriEmpty:eV,tokenRequestEmpty:eZ,untrustedAuthority:e8,urlEmptyError:eK,urlParseError:eW});let to={[eV]:"A redirect URI is required for all calls, and none has been set.",[ez]:"Could not parse the given claims request object.",[eG]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[eW]:"URL could not be parsed into appropriate segments.",[eK]:"URL was empty or null.",[eQ]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[eX]:"Given claims parameter must be a stringified JSON object.",[eZ]:"Token request was empty and not found in cache.",[eJ]:"The logout request was null or undefined.",[e0]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[e1]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[e2]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[e5]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[e8]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[e6]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[e4]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[e3]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[e9]:"Invalid authentication header provided",[e7]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[te]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[tt]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[tn]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[tr]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},ta={redirectUriNotSet:{code:eV,desc:to[eV]},claimsRequestParsingError:{code:ez,desc:to[ez]},authorityUriInsecure:{code:eG,desc:to[eG]},urlParseError:{code:eW,desc:to[eW]},urlEmptyError:{code:eK,desc:to[eK]},emptyScopesError:{code:eQ,desc:to[eQ]},invalidClaimsRequest:{code:eX,desc:to[eX]},tokenRequestEmptyError:{code:eZ,desc:to[eZ]},logoutRequestEmptyError:{code:eJ,desc:to[eJ]},invalidCodeChallengeMethod:{code:e0,desc:to[e0]},invalidCodeChallengeParams:{code:e1,desc:to[e1]},invalidCloudDiscoveryMetadata:{code:e2,desc:to[e2]},invalidAuthorityMetadata:{code:e5,desc:to[e5]},untrustedAuthority:{code:e8,desc:to[e8]},missingSshJwk:{code:e6,desc:to[e6]},missingSshKid:{code:e4,desc:to[e4]},missingNonceAuthenticationHeader:{code:e3,desc:to[e3]},invalidAuthenticationHeader:{code:e9,desc:to[e9]},cannotSetOIDCOptions:{code:e7,desc:to[e7]},cannotAllowPlatformBroker:{code:te,desc:to[te]},authorityMismatch:{code:tt,desc:to[tt]},invalidAuthorizePostBodyParameters:{code:tn,desc:to[tn]},invalidRequestMethodForEAR:{code:tr,desc:to[tr]}};class ts extends ${constructor(e){super(e,to[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ts.prototype)}}function tl(e){return new ts(e)}class tc{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),n=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach(e=>{if(e.trim()){let[r,i]=e.split(/=(.+)/g,2);r&&i&&(t[n(r)]=n(i))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class tu{constructor(e){let t=e?tc.trimArrayEntries([...e]):[],r=t?tc.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw tl(eQ);this.scopes=new Set,r.forEach(e=>this.scopes.add(e))}static fromString(e){return new tu((e||h.EMPTY_STRING).split(" "))}static createSearchScopes(e){let t=new tu(e&&e.length>0?e:[...p]);return t.containsOnlyOIDCScopes()?t.removeScope(h.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){let t=new tu(this.printScopesLowerCase().split(" "));return!!e&&t.scopes.has(e.toLowerCase())}containsScopeSet(e){return!!e&&!(e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let e=0;return m.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(e){throw eB(eu)}}removeScope(e){if(!e)throw eB(ec);this.scopes.delete(e.trim())}removeOIDCScopes(){m.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw eB(ed);let t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw eB(ed);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):h.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function td(e,t){return!!e&&!!t&&e===t.split(".")[1]}function th(e,t,r,n){if(!n)return{tenantId:r,localAccountId:t,username:"",isHomeTenant:td(r,e)};{let{oid:t,sub:r,tid:i,name:o,tfp:a,acr:s,preferred_username:l,upn:c,login_hint:u}=n,d=i||a||s||"";return{tenantId:d,localAccountId:t||r||"",name:o,username:l||c||"",loginHint:u,isHomeTenant:td(d,e)}}}function tf(e,t,r,n){let i=e;if(t){let{isHomeTenant:r,...n}=t;i={...e,...n}}if(r){let{isHomeTenant:t,...o}=th(e.homeAccountId,e.localAccountId,e.tenantId,r);i={...i,...o,idTokenClaims:r,idToken:n}}return i}function tp(e,t){let r=function(e){if(!e)throw eB(W);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw eB(G);return t[2]}(e);try{let e=t(r);return JSON.parse(e)}catch(e){throw eB(G)}}function tm(e,t){if(0===t||Date.now()-3e5>e+t)throw eB(ei)}function tg(e){if(!e||0>e.indexOf("="))return null;try{let t=e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e,r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch(e){throw eB(Z)}return null}function ty(e,t=!0,r){let n=[];return e.forEach((e,i)=>{!t&&r&&i in r?n.push(`${i}=${e}`):n.push(`${i}=${encodeURIComponent(e)}`)}),n.join("&")}class t_{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw tl(eK);e.includes("#")||(this._urlString=t_.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return tc.endsWith(t,"?")?t=t.slice(0,-1):tc.endsWith(t,"?/")&&(t=t.slice(0,-2)),tc.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw tl(eW)}if(!e.HostNameAndPort||!e.PathSegments)throw tl(eW);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw tl(eG)}static appendQueryString(e,t){return t?0>e.indexOf("?")?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return t_.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&0!==r.length&&(r[0]===y.COMMON||r[0]===y.ORGANIZATIONS)&&(r[0]=e),t_.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw tl(eW);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},n=r.AbsolutePath.split("/");return r.PathSegments=n=n.filter(e=>e&&e.length>0),r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw tl(eW);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===h.FORWARD_SLASH){let r=new t_(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t_(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!tg(e)}}let tE={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},tT=tE.endpointMetadata,tb=tE.instanceDiscoveryMetadata,tv=new Set;function tA(e,t,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),e&&t){let i=tC(t,e);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function tC(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(n.aliases.includes(t))return n}return null}tb.metadata.forEach(e=>{e.aliases.forEach(e=>{tv.add(e)})});let tS="cache_quota_exceeded",tw="cache_error_unknown",tI={[tS]:"Exceeded cache storage capacity.",[tw]:"Unexpected error occurred when using cache storage."};class tO extends ${constructor(e,t){let r=t||(tI[e]?tI[e]:tI[tw]);super(`${e}: ${r}`),Object.setPrototypeOf(this,tO.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}class tR{constructor(e,t,r,n,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(ej,eY),this.staticAuthorityOptions=i,this.performanceClient=n}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(e=>!e))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let r=this.getAllAccounts(e,t);return r.length>1?r.sort(e=>e.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,n,i){let o;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let a=this.getIdToken(e,n,t,r.tenantId);return a&&(o=tp(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,i))?null:tf(e,r,o,a?.secret)}getTenantProfilesFromAccountEntity(e,t,r,n){let i=e.getAccountInfo(),o=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let e=o.get(r);if(!e)return[];o=new Map([[r,e]])}let s=[];return o.forEach(e=>{let r=this.getTenantedAccountInfoByFilter(i,a,e,t,n);r&&s.push(r)}),s}tenantProfileMatchesFilter(e,t){return(!t.localAccountId||!!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&(!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return(!t||(!t.localAccountId||!!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))&&(!t.loginHint||!!this.matchLoginHintFromTokenClaims(e,t.loginHint))&&(!t.username||!!this.matchUsername(e.preferred_username,t.username))&&(!t.name||!!this.matchName(e,t.name))&&(!t.sid||!!this.matchSid(e,t.sid)))&&!0}async saveCacheRecord(e,t,r){if(!e)throw eB(eg);try{e.account&&await this.setAccount(e.account,t),e.idToken&&r?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&r?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&r?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(e){if(this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof $)throw e;throw e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new tO(tS):new tO(e.name,e.message):new tO(tw)}}async saveAccessToken(e,t){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),i=tu.fromString(e.target);n.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,r,!1))return;let n=this.getAccessTokenCredential(e,t);n&&this.credentialMatchesFilter(n,r)&&tu.fromString(n.target).intersectingScopeSets(i)&&this.removeAccessToken(e,t)}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),n=[];return r.forEach(r=>{let i=this.getAccount(r,t);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;let o={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,o));a&&0===a.length||n.push(i)}),n}credentialMatchesFilter(e,t){return(!t.clientId||!!this.matchClientId(e,t.clientId))&&(!t.userAssertionHash||!!this.matchUserAssertionHash(e,t.userAssertionHash))&&("string"!=typeof t.homeAccountId||!!this.matchHomeAccountId(e,t.homeAccountId))&&(!t.environment||!!this.matchEnvironment(e,t.environment))&&(!t.realm||!!this.matchRealm(e,t.realm))&&(!t.credentialType||!!this.matchCredentialType(e,t.credentialType))&&(!t.familyId||!!this.matchFamilyId(e,t.familyId))&&(!t.target||!!this.matchTarget(e,t.target))&&(!t.requestedClaimsHash&&!e.requestedClaimsHash||e.requestedClaimsHash===t.requestedClaimsHash)&&(e.credentialType!==w.ACCESS_TOKEN_WITH_AUTH_SCHEME||(!t.tokenType||!!this.matchTokenType(e,t.tokenType))&&(t.tokenType!==P.SSH||!t.keyId||!!this.matchKeyId(e,t.keyId)))&&!0}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;let n=this.getAppMetadata(t);n&&(!e.environment||this.matchEnvironment(n,e.environment))&&(!e.clientId||this.matchClientId(n,e.clientId))&&(r[t]=n)}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;let n=this.getAuthorityMetadata(t);n&&-1!==n.aliases.indexOf(e)&&(r=n)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let r=this.getTokenKeys(),n=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);r.idToken.filter(n).forEach(e=>{this.removeIdToken(e,t)}),r.accessToken.filter(n).forEach(e=>{this.removeAccessToken(e,t)}),r.refreshToken.filter(n).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==w.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==P.POP)return;let n=r.keyId;n&&this.cryptoImpl.removeTokenBindingKey(n).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${n}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:w.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(o,t,r),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let r=a;if(!n){let t=new Map;a.forEach((r,n)=>{r.realm===e.tenantId&&t.set(n,r)});let n=t.size;if(n<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===n)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;r=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),r.forEach((e,r)=>{this.removeIdToken(r,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let n=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return n.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,{clientId:this.clientId,...e}))return;let n=this.getIdTokenCredential(r,t);n&&this.credentialMatchesFilter(n,e)&&i.set(r,n)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return(!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,n){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let o=tu.createSearchScopes(t.scopes),a=t.authenticationScheme||P.BEARER,s=a.toLowerCase()!==P.BEARER.toLowerCase()?w.ACCESS_TOKEN_WITH_AUTH_SCHEME:w.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:n||e.tenantId,target:o,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=r&&r.accessToken||this.getTokenKeys().accessToken,u=[];c.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){let t=this.getAccessTokenCredential(e,i);t&&this.credentialMatchesFilter(t,l)&&u.push(t)}});let d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),u.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),i)}),this.performanceClient.addFields({multiMatchedAT:u.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),u[0])}accessTokenKeyMatchesFilter(e,t,r){let n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===n.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){let e=t.target.asArray();for(let t=0;t<e.length;t++)if(r&&!n.includes(e[t].toLowerCase()))return!1;else if(!r&&n.includes(e[t].toLowerCase()))break}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),n=[];return r.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;let i=this.getAccessTokenCredential(r,t);i&&this.credentialMatchesFilter(i,e)&&n.push(i)}),n}getRefreshToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:w.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},a=n&&n.refreshToken||this.getTokenKeys().refreshToken,s=[];a.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,o)){let t=this.getRefreshTokenCredential(e,r);t&&this.credentialMatchesFilter(t,o)&&s.push(t)}});let l=s.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&i&&r&&i.addFields({multiMatchedRT:l},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),s[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return(!t.familyId||-1!==r.indexOf(t.familyId.toLowerCase()))&&(!!t.familyId||!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map(e=>r[e]),i=n.length;if(i<1)return null;if(i>1)throw eB(es);return n[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&"1"===t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&"string"==typeof e&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let r=function(e,t){let r,n=e.canonicalAuthority;if(n){let i=new t_(n).getUrlComponents().HostNameAndPort;r=tA(i,e.cloudDiscoveryMetadata?.metadata,R.CONFIG,t)||tA(i,tb.metadata,R.HARDCODED_VALUES,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return(e.credentialType===w.ACCESS_TOKEN||e.credentialType===w.ACCESS_TOKEN_WITH_AUTH_SCHEME)&&!!e.target&&tu.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return -1!==e.indexOf(I)}isAuthorityMetadata(e){return -1!==e.indexOf(O.CACHE_KEY)}generateAuthorityMetadataCacheKey(e){return`${O.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}}class tN extends tR{async setAccount(){throw eB(eD)}getAccount(){throw eB(eD)}async setIdTokenCredential(){throw eB(eD)}getIdTokenCredential(){throw eB(eD)}async setAccessTokenCredential(){throw eB(eD)}getAccessTokenCredential(){throw eB(eD)}async setRefreshTokenCredential(){throw eB(eD)}getRefreshTokenCredential(){throw eB(eD)}setAppMetadata(){throw eB(eD)}getAppMetadata(){throw eB(eD)}setServerTelemetry(){throw eB(eD)}getServerTelemetry(){throw eB(eD)}setAuthorityMetadata(){throw eB(eD)}getAuthorityMetadata(){throw eB(eD)}getAuthorityMetadataKeys(){throw eB(eD)}setThrottlingCache(){throw eB(eD)}getThrottlingCache(){throw eB(eD)}removeItem(){throw eB(eD)}getKeys(){throw eB(eD)}getAccountKeys(){throw eB(eD)}getTokenKeys(){throw eB(eD)}generateCredentialKey(){throw eB(eD)}generateAccountKey(){throw eB(eD)}}let tP={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"},tk={NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken"},tD={InProgress:1};class tM{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class tL{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:tD.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new tM}}startPerformanceMeasurement(){return new tM}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}let tU={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},tx={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:r.LogLevel.Info,correlationId:h.EMPTY_STRING},tF={claimsBasedCachingEnabled:!1},tB={async sendGetRequestAsync(){throw eB(eD)},async sendPostRequestAsync(){throw eB(eD)}},tq={sku:h.SKU,version:eY,cpu:h.EMPTY_STRING,os:h.EMPTY_STRING},tH={clientSecret:h.EMPTY_STRING,clientAssertion:void 0},tj={azureCloudInstance:e$.None,tenant:`${h.DEFAULT_COMMON_TENANT}`},tY={application:{appName:"",appVersion:""}};function t$(e){return e.authOptions.authority.options.protocolMode===tP.OIDC}let tV={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};function tz(e,t){if(!e)throw eB(z);try{let r=t(e);return JSON.parse(r)}catch(e){throw eB(V)}}function tG(e){if(!e)throw eB(V);let t=e.split(S.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?h.EMPTY_STRING:t[1]}}let tW="client_id",tK="redirect_uri",tQ="token_type",tX="req_cnf",tZ="return_spa_code",tJ="x-client-xtra-sku",t0="brk_client_id",t1="brk_redirect_uri",t2="instance_aware";function t5(e,t,r){if(!t)return;let n=e.get(tW);n&&e.has(t0)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:e.get(tK)},t)}function t8(e,t){e.set("response_type",t)}function t6(e,t,r=!0,n=p){!r||n.includes("openid")||t.includes("openid")||n.push("openid");let i=new tu(r?[...t||[],...n]:t||[]);e.set("scope",i.printScopes())}function t4(e,t){e.set(tW,t)}function t3(e,t){e.set("login_hint",t)}function t9(e,t){e.set(g.CCS_HEADER,`UPN:${t}`)}function t7(e,t){e.set(g.CCS_HEADER,`Oid:${t.uid}@${t.utid}`)}function re(e,t){e.set("sid",t)}function rt(e,t,r){let n=function(e,t){let r;if(e)try{r=JSON.parse(e)}catch(e){throw tl(eX)}else r={};return t&&t.length>0&&(r.hasOwnProperty(_.ACCESS_TOKEN)||(r[_.ACCESS_TOKEN]={}),r[_.ACCESS_TOKEN][_.XMS_CC]={values:t}),JSON.stringify(r)}(t,r);try{JSON.parse(n)}catch(e){throw tl(eX)}e.set("claims",n)}function rr(e,t){e.set("client-request-id",t)}function rn(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function ri(e,t){t?.appName&&e.set("x-app-name",t.appName),t?.appVersion&&e.set("x-app-ver",t.appVersion)}function ro(e,t){t&&e.set("state",t)}function ra(e,t){e.set("client_secret",t)}function rs(e,t){t&&e.set("client_assertion",t)}function rl(e,t){t&&e.set("client_assertion_type",t)}function rc(e,t){e.set("grant_type",t)}function ru(e){e.set("client_info","1")}function rd(e){e.has(t2)||e.set(t2,"true")}function rh(e,t){Object.entries(t).forEach(([t,r])=>{!e.has(t)&&r&&e.set(t,r)})}function rf(e,t){t&&(e.set(tQ,P.POP),e.set(tX,t))}function rp(e,t){t&&(e.set(tQ,P.SSH),e.set(tX,t))}function rm(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function rg(e){e.set("x-ms-lib-capability",k.X_MS_LIB_CAPABILITY_VALUE)}function ry(e,t,r){e.has(t0)||e.set(t0,t),e.has(t1)||e.set(t1,r)}let r_={Default:0,Adfs:1,Dsts:2,Ciam:3},rE=(e,t,r,n,i)=>(...o)=>{r.trace(`Executing function ${t}`);let a=n?.startMeasurement(t,i);return i&&n?.incrementFields({[t+"CallCount"]:1},i),n?.setPreQueueTime(t,i),e(...o).then(e=>(r.trace(`Returning result from ${t}`),a?.end({success:!0}),e)).catch(e=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw a?.end({success:!1},e),e})};class rT{constructor(e,t,r,n){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=n}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(tk.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=L.ENVIRONMENT_VARIABLE;else{let e=rT.IMDS_OPTIONS;try{let n=await rE(this.getRegionFromIMDS.bind(this),tk.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(h.IMDS_VERSION,e);if(n.status===f.SUCCESS&&(r=n.body,t.region_source=L.IMDS),n.status===f.BAD_REQUEST){let n=await rE(this.getCurrentVersion.bind(this),tk.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=L.FAILED_AUTO_DETECTION,null;let i=await rE(this.getRegionFromIMDS.bind(this),tk.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(n,e);i.status===f.SUCCESS&&(r=i.body,t.region_source=L.IMDS)}}catch(e){return t.region_source=L.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=L.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(tk.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${h.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,h.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(tk.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let t=await this.networkInterface.sendGetRequestAsync(`${h.IMDS_ENDPOINT}?format=json`,e);if(t.status===f.BAD_REQUEST&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0)return t.body["newest-versions"][0];return null}catch(e){return null}}}function rb(){return Math.round(new Date().getTime()/1e3)}function rv(e){return e?new Date(1e3*Number(e)):new Date}function rA(e,t){let r=Number(e)||0;return rb()+t>r}function rC(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function rS(e){return!!e&&rC(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===w.ACCESS_TOKEN||e.credentialType===w.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function rw(e){return!!e&&rC(e)&&e.hasOwnProperty("realm")&&e.credentialType===w.ID_TOKEN}function rI(e){return!!e&&rC(e)&&e.credentialType===w.REFRESH_TOKEN}function rO(e,t){return!!t&&0===e.indexOf(I)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")}function rR(){return rb()+O.REFRESH_TIME_SECONDS}function rN(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function rP(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function rk(e){return e.expiresAt<=rb()}rT.IMDS_OPTIONS={headers:{Metadata:"true"}};class rD{constructor(e,t,r,n,i,o,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=o,this.managedIdentity=s||!1,this.regionDiscovery=new rT(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(h.CIAM_AUTH_URL))return r_.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case h.ADFS:return r_.Adfs;case h.DSTS:return r_.Dsts}return r_.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new t_(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw eB(K)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw eB(K)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw eB(K)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw eB(eO);return this.replacePath(this.metadata.end_session_endpoint)}throw eB(K)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw eB(K)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw eB(K)}canReplaceTenant(e){return 1===e.PathSegments.length&&!rD.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===r_.Default&&this.protocolMode!==tP.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,r=new t_(this.metadata.canonical_authority).getUrlComponents(),n=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,i)=>{let o=n[i];if(0===i&&this.canReplaceTenant(r)){let e=new t_(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===r_.Adfs||this.protocolMode===tP.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(tk.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=await rE(this.updateCloudDiscoveryMetadata.bind(this),tk.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=await rE(this.updateEndpointMetadata.bind(this),tk.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:rR(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==R.CACHE&&r?.source!==R.CACHE&&(e.expiresAt=rR(),e.canonical_authority=this.canonicalAuthority);let n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(tk.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===R.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(rN(e,await rE(this.updateMetadataWithRegionalInformation.bind(this),tk.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let r=await rE(this.getEndpointMetadataFromNetwork.bind(this),tk.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await rE(this.updateMetadataWithRegionalInformation.bind(this),tk.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),rN(e,r,!0),R.NETWORK;throw eB(X,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),rN(e,t,!1),{source:R.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let t=this.getEndpointMetadataFromHardcodedValues();if(t)return rN(e,t,!1),{source:R.HARDCODED_VALUES,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=rk(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:R.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new t_(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw tl(e5)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(tk.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${e}`);try{var t;let r=await this.networkInterface.sendGetRequestAsync(e,{});if((t=r.body).hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri"))return r.body;return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in tT?tT[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(tk.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==h.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=U.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,rD.replaceWithRegionalInformation(e,t);let r=await rE(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),tk.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=U.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,rD.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=U.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(tk.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=await rE(this.getCloudDiscoveryMetadataFromNetwork.bind(this),tk.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return rP(e,r,!0),R.NETWORK;throw tl(e8)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||h.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||h.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||h.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),rP(e,t,!1),R.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{var r;let t=(r=this.hostnameAndPort,tC(tb.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),rP(e,t,!1),R.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=rk(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),R.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===r_.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),rD.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=tC(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),tl(e2)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),rD.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(tk.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${h.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t=null;try{var r,n;let i,o,a=await this.networkInterface.sendGetRequestAsync(e,{});if((r=a.body).hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata"))o=(i=a.body).metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else{if(!((n=a.body).hasOwnProperty("error")&&n.hasOwnProperty("error_description")))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${a.status}`),(i=a.body).error===h.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),t=tC(o,this.hostnameAndPort)}catch(e){return e instanceof $?this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${e.errorCode}
Error Description: ${e.errorMessage}`):this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${e.name}
Error Description: ${e.message}`),null}return t||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),t=rD.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),t}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&t_.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==e$.None){let e=t.tenant?t.tenant:h.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${e}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return h.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw eB(K)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return tv.has(e)}static isPublicCloudAuthority(e){return h.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let n=new t_(e);n.validateAsUri();let i=n.getUrlComponents(),o=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(o=`${t}.${h.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=t_.constructAuthorityUriFromObject({...n.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r={...e};return r.authorization_endpoint=rD.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=rD.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=rD.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,r=new t_(e).getUrlComponents();if(0===r.PathSegments.length&&r.HostNameAndPort.endsWith(h.CIAM_AUTH_URL)){let e=r.HostNameAndPort.split(".")[0];t=`${t}${e}${h.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}function rM(e){return e.endsWith(h.FORWARD_SLASH)?e:`${e}${h.FORWARD_SLASH}`}async function rL(e,t,r,n,i,o,a){a?.addQueueMeasurement(tk.AuthorityFactoryCreateDiscoveredInstance,o);let s=rD.transformCIAMAuthority(rM(e)),l=new rD(s,t,r,n,i,o,a);try{return await rE(l.resolveEndpointsAsync.bind(l),tk.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch(e){throw eB(K)}}rD.reservedTenantDomains=new Set(["{tenant}","{tenantid}",y.COMMON,y.CONSUMERS,y.ORGANIZATIONS]);class rU extends ${constructor(e,t,r,n,i){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=i,Object.setPrototypeOf(this,rU.prototype)}}function rx(e,t,r){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:r,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}class rF{static generateThrottlingStorageKey(e){return`${k.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let n=rF.generateThrottlingStorageKey(t),i=e.getThrottlingCache(n);if(i){if(i.throttleTime<Date.now())return void e.removeItem(n,r);throw new rU(i.errorCodes?.join(" ")||h.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,n){if(rF.checkResponseStatus(r)||rF.checkResponseForRetryAfter(r)){let i={throttleTime:rF.calculateThrottleTime(parseInt(r.headers[g.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(rF.generateThrottlingStorageKey(t),i,n)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(g.RETRY_AFTER)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){let t=Date.now()/1e3;return Math.floor(1e3*Math.min(t+((e<=0?0:e)||k.DEFAULT_THROTTLE_TIME_SECONDS),t+k.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(e,t,r,n){let i=rx(t,r,n),o=this.generateThrottlingStorageKey(i);e.removeItem(o,r.correlationId)}}class rB extends ${constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,rB.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}class rq{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:s,libraryInfo:l,telemetry:c,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){let f={...tx,...r};return{authOptions:{clientCapabilities:[],azureCloudOptions:tj,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...e},systemOptions:{...tU,...t},loggerOptions:f,cacheOptions:{...tF,...n},storageInterface:i||new tN(e.clientId,eq,new eH(f),new tL),networkInterface:o||tB,cryptoInterface:a||eq,clientCredentials:s||tH,libraryInfo:{...tq,...l},telemetry:{...tY,...c},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new eH(this.config.loggerOptions,ej,eY),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[g.CONTENT_TYPE]=h.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case tV.HOME_ACCOUNT_ID:try{let r=tG(e.credential);t[g.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case tV.UPN:t[g.CCS_HEADER]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,r,n,i,o){o&&this.performanceClient?.addQueueMeasurement(o,i);let a=await this.sendPostRequest(n,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,n){let i;rF.preProcess(this.cacheManager,e,n);try{let e=(i=await rE(this.networkClient.sendPostRequestAsync.bind(this.networkClient),tk.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,n)(t,r)).headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:e[g.X_MS_HTTP_VERSION]||"",requestId:e[g.X_MS_REQUEST_ID]||""},n)}catch(e){if(e instanceof rB){let t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[g.X_MS_HTTP_VERSION]||"",requestId:t[g.X_MS_REQUEST_ID]||"",contentTypeHeader:t[g.CONTENT_TYPE]||void 0,contentLengthHeader:t[g.CONTENT_LENGTH]||void 0,httpStatus:e.httpStatus},n),e.error}if(e instanceof $)throw e;throw eB(Q)}return rF.postProcess(this.cacheManager,e,i,n),i}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(tk.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,n=await rL(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=n}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&ry(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&rh(t,e.tokenQueryParameters),rr(t,e.correlationId),t5(t,e.correlationId,this.performanceClient),ty(t)}}function rH(e){return e&&(e.tid||e.tfp||e.acr)||null}class rj{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){let n,i=new rj;t.authorityType===r_.Adfs?i.authorityType=C.ADFS_ACCOUNT_TYPE:t.protocolMode===tP.OIDC?i.authorityType=C.GENERIC_ACCOUNT_TYPE:i.authorityType=C.MSSTS_ACCOUNT_TYPE,e.clientInfo&&r&&(n=tz(e.clientInfo,r)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||t&&t.getPreferredCache();if(!o)throw eB(ey);i.environment=o,i.realm=n?.utid||rH(e.idTokenClaims)||"",i.localAccountId=n?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||s||"",i.loginHint=e.idTokenClaims?.login_hint,i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let t=th(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[t]}return i}static createFromAccountInfo(e,t,r){let n=new rj;return n.authorityType=e.authorityType||C.GENERIC_ACCOUNT_TYPE,n.homeAccountId=e.homeAccountId,n.localAccountId=e.localAccountId,n.nativeAccountId=e.nativeAccountId,n.realm=e.tenantId,n.environment=e.environment,n.username=e.username,n.name=e.name,n.loginHint=e.loginHint,n.cloudGraphHostName=t,n.msGraphHost=r,n.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),n}static generateHomeAccountId(e,t,r,n,i){if(t!==r_.Adfs&&t!==r_.Dsts){if(e)try{let t=tz(e,n.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let n=!0;if(r){let r=e.idTokenClaims||{},i=t.idTokenClaims||{};n=r.iat===i.iat&&r.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n}}let rY="no_tokens_found",r$="native_account_unavailable",rV="refresh_token_expired",rz="ux_not_allowed",rG="interaction_required",rW="consent_required",rK="login_required",rQ="bad_token";var rX=Object.freeze({__proto__:null,badToken:rQ,consentRequired:rW,interactionRequired:rG,loginRequired:rK,nativeAccountUnavailable:r$,noTokensFound:rY,refreshTokenExpired:rV,uxNotAllowed:rz});let rZ=[rG,rW,rK,rQ,rz],rJ=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],r0={[rY]:"No refresh token found in the cache. Please sign-in.",[r$]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[rV]:"Refresh token has expired.",[rQ]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[rz]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},r1={noTokensFoundError:{code:rY,desc:r0[rY]},native_account_unavailable:{code:r$,desc:r0[r$]},bad_token:{code:rQ,desc:r0[rQ]}};class r2 extends ${constructor(e,t,r,n,i,o,a,s){super(e,t,r),Object.setPrototypeOf(this,r2.prototype),this.timestamp=n||h.EMPTY_STRING,this.traceId=i||h.EMPTY_STRING,this.correlationId=o||h.EMPTY_STRING,this.claims=a||h.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function r5(e){return new r2(e,r0[e])}class r8{static setRequestState(e,t,r){let n=r8.generateLibraryState(e,r);return t?`${n}${h.RESOURCE_DELIM}${t}`:n}static generateLibraryState(e,t){if(!e)throw eB(eE);let r={id:e.createNewGuid()};t&&(r.meta=t);let n=JSON.stringify(r);return e.base64Encode(n)}static parseRequestState(e,t){if(!e)throw eB(eE);if(!t)throw eB(J);try{let r=t.split(h.RESOURCE_DELIM),n=r[0],i=r.length>1?r.slice(1).join(h.RESOURCE_DELIM):h.EMPTY_STRING,o=e.base64Decode(n),a=JSON.parse(o);return{userRequestState:i||h.EMPTY_STRING,libraryState:a}}catch(e){throw eB(J)}}}let r6={SW:"sw"};class r4{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(tk.PopTokenGenerateCnf,e.correlationId);let r=await rE(this.generateKid.bind(this),tk.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),n=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:n}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(tk.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:r6.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,n){let{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:a,shrNonce:s,shrOptions:l}=r,c=o?new t_(o):void 0,u=c?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:rb(),m:i?.toUpperCase(),u:u?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...n},t,l,r.correlationId)}}class r3{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class r9{constructor(e,t,r,n,i,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||h.NOT_AVAILABLE} - Timestamp: ${e.timestamp||h.NOT_AVAILABLE} - Description: ${e.error_description||h.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||h.NOT_AVAILABLE} - Trace ID: ${e.trace_id||h.NOT_AVAILABLE}`,n=e.error_codes?.length?e.error_codes[0]:void 0,i=new rU(e.error,r,e.suberror,n,e.status);if(t&&e.status&&e.status>=f.SERVER_ERROR_RANGE_START&&e.status<=f.SERVER_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);if(t&&e.status&&e.status>=f.CLIENT_ERROR_RANGE_START&&e.status<=f.CLIENT_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);if(function(e,t,r){let n=!!e&&rZ.indexOf(e)>-1,i=!!r&&rJ.indexOf(r)>-1,o=!!t&&rZ.some(e=>t.indexOf(e)>-1);return n||o||i}(e.error,e.error_description,e.suberror))throw new r2(e.error,e.error_description,e.suberror,e.timestamp||h.EMPTY_STRING,e.trace_id||h.EMPTY_STRING,e.correlation_id||h.EMPTY_STRING,e.claims||h.EMPTY_STRING,n);throw i}}async handleServerTokenResponse(e,t,r,n,i,o,a,s,l){let c,u,d;if(this.performanceClient?.addQueueMeasurement(tk.HandleServerTokenResponse,e.correlation_id),e.id_token){if(c=tp(e.id_token||h.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&c.nonce!==i.nonce)throw eB(er);if(n.maxAge||0===n.maxAge){let e=c.auth_time;if(!e)throw eB(en);tm(e,n.maxAge)}}this.homeAccountIdentifier=rj.generateHomeAccountId(e.client_info||h.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,c),i&&i.state&&(u=r8.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||n.sshKid||void 0;let f=this.generateCacheRecord(e,t,r,n,c,o,i);try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),d=new r3(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(d)),a&&!s&&f.account){let e=this.cacheStorage.generateAccountKey(f.account.getAccountInfo());if(!this.cacheStorage.getAccount(e,n.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await r9.generateAuthenticationResult(this.cryptoObj,t,f,!1,n,c,u,void 0,l)}await this.cacheStorage.saveCacheRecord(f,n.correlationId,n.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&d&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(d))}return r9.generateAuthenticationResult(this.cryptoObj,t,f,!1,n,c,u,e,l)}generateCacheRecord(e,t,r,n,i,o,a){let s,l,c=t.getPreferredCache();if(!c)throw eB(ey);let u=rH(i);if(e.id_token&&i){var d,h,f,p;d=this.homeAccountIdentifier,h=e.id_token,f=this.clientId,p=u||"",s={credentialType:w.ID_TOKEN,homeAccountId:d,environment:c,clientId:f,secret:h,realm:p,lastUpdatedAt:Date.now().toString()},l=function(e,t,r,n,i,o,a,s,l,c,u,d){d?.verbose("setCachedAccount called");let h=e.getAccountKeys().find(e=>e.startsWith(r)),f=null;h&&(f=e.getAccount(h,i));let p=f||rj.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:u},t,n),m=p.tenantProfiles||[],g=l||p.realm;if(g&&!m.find(e=>e.tenantId===g)){let e=th(r,p.localAccountId,g,o);m.push(e)}return p.tenantProfiles=m,p}(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,n.correlationId,i,e.client_info,c,u,a,void 0,this.logger)}let m=null;if(e.access_token){let i=e.scope?tu.fromString(e.scope):new tu(n.scopes||[]),a=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,s=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,l=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,d=r+a;m=function(e,t,r,n,i,o,a,s,l,c,u,d,h,f,p){let m={homeAccountId:e,credentialType:w.ACCESS_TOKEN,secret:r,cachedAt:rb().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:n,realm:i,target:o,tokenType:u||P.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(m.userAssertionHash=d),c&&(m.refreshOn=c.toString()),f&&(m.requestedClaims=f,m.requestedClaimsHash=p),m.tokenType?.toLowerCase()!==P.BEARER.toLowerCase())switch(m.credentialType=w.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case P.POP:let g=tp(r,l);if(!g?.cnf?.kid)throw eB(eS);m.keyId=g.cnf.kid;break;case P.SSH:m.keyId=h}return m}(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||t.tenant||"",i.printScopes(),d,d+s,this.cryptoObj.base64Decode,l&&l>0?r+l:void 0,e.token_type,o,e.key_id,n.claims,n.requestedClaimsHash)}let g=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),g=function(e,t,r,n,i,o,a){let s={credentialType:w.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return o&&(s.userAssertionHash=o),i&&(s.familyId=i),a&&(s.expiresOn=a.toString()),s}(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,t)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:c,familyId:e.foci}),{account:l,idToken:s,accessToken:m,refreshToken:g,appMetadata:y}}static async generateAuthenticationResult(e,t,r,n,i,o,a,s,l){let c,u,d=h.EMPTY_STRING,f=[],p=null,m=h.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==P.POP||i.popKid)d=r.accessToken.secret;else{let t=new r4(e),{secret:n,keyId:o}=r.accessToken;if(!o)throw eB(eR);d=await t.signPopToken(n,o,i)}f=tu.fromString(r.accessToken.target).asArray(),p=rv(r.accessToken.expiresOn),c=rv(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(u=rv(r.accessToken.refreshOn))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");let g=o?.oid||o?.sub||"",y=o?.tid||"";s?.spa_accountid&&r.account&&(r.account.nativeAccountId=s?.spa_accountid);let _=r.account?tf(r.account.getAccountInfo(),void 0,o,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:g,tenantId:y,scopes:f,account:_,idToken:r?.idToken?.secret||"",idTokenClaims:o||{},accessToken:d,fromCache:n,expiresOn:p,extExpiresOn:c,refreshOn:u,correlationId:i.correlationId,requestId:l||h.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||h.EMPTY_STRING,state:a?a.userRequestState:h.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||h.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||h.EMPTY_STRING,code:s?.spa_code,fromNativeBroker:!1}}}async function r7(e,t,r){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:r})}class ne extends rq{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(tk.AuthClientAcquireToken,e.correlationId),!e.code)throw eB(el);let r=rb(),n=await rE(this.executeTokenRequest.bind(this),tk.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=n.headers?.[g.X_MS_REQUEST_ID],o=new r9(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(n.body),rE(o.handleServerTokenResponse.bind(o),tk.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,t,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw tl(eJ);let t=this.createLogoutUrlQueryString(e);return t_.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){let r;this.performanceClient?.addQueueMeasurement(tk.AuthClientExecuteTokenRequest,t.correlationId);let n=this.createTokenQueryParameters(t),i=t_.appendQueryString(e.tokenEndpoint,n),o=await rE(this.createTokenRequestBody.bind(this),tk.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);if(t.clientInfo)try{let e=tz(t.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${e.uid}${S.CLIENT_INFO_SEPARATOR}${e.utid}`,type:tV.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}let a=this.createTokenRequestHeaders(r||t.ccsCredential),s=rx(this.config.authOptions.clientId,t);return rE(this.executePostToTokenEndpoint.bind(this),tk.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(i,o,a,s,t.correlationId,tk.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var t,r,n;let i;this.performanceClient?.addQueueMeasurement(tk.AuthClientCreateTokenRequestBody,e.correlationId);let o=new Map;if(t4(o,e.embeddedClientId||e.tokenBodyParameters?.[tW]||this.config.authOptions.clientId),this.includeRedirectUri)t=e.redirectUri,o.set(tK,t);else if(!e.redirectUri)throw tl(eV);if(t6(o,e.scopes,!0,this.oidcDefaultScopes),r=e.code,o.set("code",r),rn(o,this.config.libraryInfo),ri(o,this.config.telemetry.application),rg(o),this.serverTelemetryManager&&!t$(this.config)&&rm(o,this.serverTelemetryManager),e.codeVerifier&&(n=e.codeVerifier,o.set("code_verifier",n)),this.config.clientCredentials.clientSecret&&ra(o,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let t=this.config.clientCredentials.clientAssertion;rs(o,await r7(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rl(o,t.assertionType)}if(rc(o,A.AUTHORIZATION_CODE_GRANT),ru(o),e.authenticationScheme===P.POP){let t=new r4(this.cryptoUtils,this.performanceClient);rf(o,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await rE(t.generateCnf.bind(t),tk.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===P.SSH)if(e.sshJwk)rp(o,e.sshJwk);else throw tl(e6);if((!tc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rt(o,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{let t=tz(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${t.uid}${S.CLIENT_INFO_SEPARATOR}${t.utid}`,type:tV.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case tV.HOME_ACCOUNT_ID:try{let e=tG(i.credential);t7(o,e)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case tV.UPN:t9(o,i.credential)}return e.embeddedClientId&&ry(o,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&rh(o,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[tZ]||rh(o,{[tZ]:"1"}),t5(o,e.correlationId,this.performanceClient),ty(o)}createLogoutUrlQueryString(e){var t,r,n;let i=new Map;return e.postLogoutRedirectUri&&(t=e.postLogoutRedirectUri,i.set("post_logout_redirect_uri",t)),e.correlationId&&rr(i,e.correlationId),e.idTokenHint&&(r=e.idTokenHint,i.set("id_token_hint",r)),e.state&&ro(i,e.state),e.logoutHint&&(n=e.logoutHint,i.set("logout_hint",n)),e.extraQueryParameters&&rh(i,e.extraQueryParameters),this.config.authOptions.instanceAware&&rd(i),ty(i,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}class nt extends rq{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(tk.RefreshTokenClientAcquireToken,e.correlationId);let t=rb(),r=await rE(this.executeTokenRequest.bind(this),tk.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),n=r.headers?.[g.X_MS_REQUEST_ID],i=new r9(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),rE(i.handleServerTokenResponse.bind(i),tk.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,n)}async acquireTokenByRefreshToken(e){if(!e)throw tl(eZ);if(this.performanceClient?.addQueueMeasurement(tk.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw eB(em);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await rE(this.acquireTokenWithCachedRefreshToken.bind(this),tk.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let e=r instanceof r2&&r.errorCode===rY,t=r instanceof rU&&r.errorCode===D.INVALID_GRANT_ERROR&&r.subError===D.CLIENT_MISMATCH_ERROR;if(e||t);else throw r}return rE(this.acquireTokenWithCachedRefreshToken.bind(this),tk.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){let r,n,i,o,a;this.performanceClient?.addQueueMeasurement(tk.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let s=(r=this.cacheManager.getRefreshToken.bind(this.cacheManager),n=tk.CacheManagerGetRefreshToken,i=this.logger,o=this.performanceClient,a=e.correlationId,(...e)=>{i.trace(`Executing function ${n}`);let t=o?.startMeasurement(n,a);a&&o?.incrementFields({[n+"CallCount"]:1},a);try{let o=r(...e);return t?.end({success:!0}),i.trace(`Returning result from ${n}`),o}catch(e){i.trace(`Error occurred in ${n}`);try{i.trace(JSON.stringify(e))}catch(e){i.trace("Unable to print error message.")}throw t?.end({success:!1},e),e}})(e.account,t,e.correlationId,void 0,this.performanceClient);if(!s)throw r5(rY);if(s.expiresOn&&rA(s.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(s.expiresOn)},e.correlationId),r5(rV);let l={...e,refreshToken:s.secret,authenticationScheme:e.authenticationScheme||P.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:tV.HOME_ACCOUNT_ID}};try{return await rE(this.acquireToken.bind(this),tk.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(l)}catch(t){if(t instanceof r2&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(s.expiresOn)},e.correlationId),t.subError===rQ)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let t=this.cacheManager.generateCredentialKey(s);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw t}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(tk.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),n=t_.appendQueryString(t.tokenEndpoint,r),i=await rE(this.createTokenRequestBody.bind(this),tk.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=rx(this.config.authOptions.clientId,e);return rE(this.executePostToTokenEndpoint.bind(this),tk.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(n,i,o,a,e.correlationId,tk.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var t,r;this.performanceClient?.addQueueMeasurement(tk.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let n=new Map;if(t4(n,e.embeddedClientId||e.tokenBodyParameters?.[tW]||this.config.authOptions.clientId),e.redirectUri&&(t=e.redirectUri,n.set(tK,t)),t6(n,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),rc(n,A.REFRESH_TOKEN_GRANT),ru(n),rn(n,this.config.libraryInfo),ri(n,this.config.telemetry.application),rg(n),this.serverTelemetryManager&&!t$(this.config)&&rm(n,this.serverTelemetryManager),r=e.refreshToken,n.set("refresh_token",r),this.config.clientCredentials.clientSecret&&ra(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let t=this.config.clientCredentials.clientAssertion;rs(n,await r7(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rl(n,t.assertionType)}if(e.authenticationScheme===P.POP){let t=new r4(this.cryptoUtils,this.performanceClient);rf(n,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await rE(t.generateCnf.bind(t),tk.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===P.SSH)if(e.sshJwk)rp(n,e.sshJwk);else throw tl(e6);if((!tc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rt(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case tV.HOME_ACCOUNT_ID:try{let t=tG(e.ccsCredential.credential);t7(n,t)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case tV.UPN:t9(n,e.ccsCredential.credential)}return e.embeddedClientId&&ry(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&rh(n,e.tokenBodyParameters),t5(n,e.correlationId,this.performanceClient),ty(n)}}class nr extends rq{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(tk.SilentFlowClientAcquireCachedToken,e.correlationId);let t=x.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!tc.isEmptyObj(e.claims))throw this.setCacheOutcome(x.FORCE_REFRESH_OR_CLAIMS,e.correlationId),eB(eA);if(!e.account)throw eB(em);let r=e.account.tenantId||function(e){let t=new t_(e).getUrlComponents(),r=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case y.COMMON:case y.ORGANIZATIONS:case y.CONSUMERS:return;default:return r}}(e.authority),n=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,n,r);if(i)if(Number(i.cachedAt)>rb()||rA(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(x.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),eB(eA);else i.refreshOn&&rA(i.refreshOn,0)&&(t=x.PROACTIVELY_REFRESHED);else throw this.setCacheOutcome(x.NO_CACHED_ACCESS_TOKEN,e.correlationId),eB(eA);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,n,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await rE(this.generateResultFromCacheRecord.bind(this),tk.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==x.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let r;if(this.performanceClient?.addQueueMeasurement(tk.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(r=tp(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){let e=r?.auth_time;if(!e)throw eB(en);tm(e,t.maxAge)}return r9.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class nn{constructor(e,t){this.cacheOutcome=x.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||h.EMPTY_STRING,this.wrapperVer=e.wrapperVer||h.EMPTY_STRING,this.telemetryCacheKey=N.CACHE_KEY+S.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${N.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let n=t.join(N.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(N.VALUE_SEPARATOR);return[N.SCHEMA_VERSION,i,n].join(N.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=nn.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(N.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(N.VALUE_SEPARATOR),i=e.errors.length,o=t<i?N.OVERFLOW_TRUE:N.OVERFLOW_FALSE,a=[i,o].join(N.VALUE_SEPARATOR);return[N.SCHEMA_VERSION,e.cacheHits,r,n,a].join(N.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=N.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof $?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(N.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){let e=this.getLastRequests(),t=nn.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,n=0,i=e.errors.length;for(t=0;t<i;t++){let i=e.failedRequests[2*t]||h.EMPTY_STRING,o=e.failedRequests[2*t+1]||h.EMPTY_STRING,a=e.errors[t]||h.EMPTY_STRING;if((n+=i.toString().length+o.toString().length+a.length+3)<N.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||h.EMPTY_STRING),e.push(this.regionSource||h.EMPTY_STRING),e.push(this.regionOutcome||h.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){let{skus:t,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=e,a=new Map([[0,[r,n]],[2,[i,o]]]),s=[];if(t?.length){if((s=t.split(",")).length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){let{skuArr:t,index:r,skuName:n,skuVersion:i}=e;r>=t.length||(t[r]=[n,i].join("|"))}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}}class ni{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,realm:n.realm,localAccountId:n.local_account_id,username:n.username,authorityType:n.authority_type,name:n.name,clientInfo:n.client_info,lastModificationTime:n.last_modification_time,lastModificationApp:n.last_modification_app,tenantProfiles:n.tenantProfiles?.map(e=>JSON.parse(e)),lastUpdatedAt:Date.now().toString()},o=new rj;tR.toObject(o,i),t[r]=o}),t}static deserializeIdTokens(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeAccessTokens(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm,target:n.target,cachedAt:n.cached_at,expiresOn:n.expires_on,extendedExpiresOn:n.extended_expires_on,refreshOn:n.refresh_on,keyId:n.key_id,tokenType:n.token_type,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeRefreshTokens(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,familyId:n.family_id,target:n.target,realm:n.realm,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeAppMetadata(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r];t[r]={clientId:n.client_id,environment:n.environment,familyId:n.family_id}}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}var no=Object.freeze({__proto__:null,Deserializer:ni,Serializer:d});let na="https://login.microsoftonline.com/managed_identity/",ns={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},nl={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},nc={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},nu={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},nd={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},nh={GET:"get",POST:"post"},nf={SUCCESS_RANGE_START:f.SUCCESS_RANGE_START,SUCCESS_RANGE_END:f.SUCCESS_RANGE_END,SERVER_ERROR:f.SERVER_ERROR},np={SHA256:"sha256"},nm={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},ng={KEY_SEPARATOR:"-"},ny={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},n_={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},nE={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},nT={INTERVAL_MS:100,TIMEOUT_MS:5e3};class nb{static getNetworkResponse(e,t,r){return{headers:e,body:t,status:r}}static urlToHttpOptions(e){let t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}}class nv{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t,r){return this.proxyUrl?nA(e,this.proxyUrl,nh.GET,t,this.customAgentOptions,r):nC(e,nh.GET,t,this.customAgentOptions,r)}async sendPostRequestAsync(e,t){return this.proxyUrl?nA(e,this.proxyUrl,nh.POST,t,this.customAgentOptions):nC(e,nh.POST,t,this.customAgentOptions)}}let nA=(e,t,r,i,o,a)=>{let s=new URL(e),l=new URL(t),c=i?.headers||{},u={host:l.hostname,port:l.port,method:"CONNECT",path:s.hostname,headers:c};o&&Object.keys(o).length&&(u.agent=new n.Agent(o));let d="";if(r===nh.POST){let e=i?.body||"";d=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${e.length}\r
\r
${e}`}else a&&(u.timeout=a);let h=`${r.toUpperCase()} ${s.href} HTTP/1.1\r
Host: ${s.host}\r
Connection: close\r
`+d+"\r\n";return new Promise((e,t)=>{let r=n.request(u);a&&r.on("timeout",()=>{r.destroy(),t(Error("Request time out"))}),r.end(),r.on("connect",(n,i)=>{let o=n?.statusCode||nf.SERVER_ERROR;(o<nf.SUCCESS_RANGE_START||o>nf.SUCCESS_RANGE_END)&&(r.destroy(),i.destroy(),t(Error(`Error connecting to proxy. Http status code: ${n.statusCode}. Http status message: ${n?.statusMessage||"Unknown"}`))),i.write(h);let a=[];i.on("data",e=>{a.push(e)}),i.on("end",()=>{let t=Buffer.concat([...a]).toString().split("\r\n"),n=parseInt(t[0].split(" ")[1]),i=t[0].split(" ").slice(2).join(" "),o=t[t.length-1],s=t.slice(1,t.length-2),l=new Map;s.forEach(e=>{let t=e.split(new RegExp(/:\s(.*)/s)),r=t[0],n=t[1];try{let e=JSON.parse(n);e&&"object"==typeof e&&(n=e)}catch(e){}l.set(r,n)});let c=Object.fromEntries(l),u=nb.getNetworkResponse(c,nS(n,i,c,o),n);(n<f.SUCCESS_RANGE_START||n>f.SUCCESS_RANGE_END)&&u.body.error!==ny.AUTHORIZATION_PENDING&&r.destroy(),e(u)}),i.on("error",e=>{r.destroy(),i.destroy(),t(Error(e.toString()))})}),r.on("error",e=>{r.destroy(),t(Error(e.toString()))})})},nC=(e,t,r,o,a)=>{let s=t===nh.POST,l=r?.body||"",c=new URL(e),u={method:t,headers:r?.headers||{},...nb.urlToHttpOptions(c)};return o&&Object.keys(o).length&&(u.agent=new i.Agent(o)),s?u.headers={...u.headers,"Content-Length":l.length}:a&&(u.timeout=a),new Promise((e,t)=>{let r;r="http:"===u.protocol?n.request(u):i.request(u),s&&r.write(l),a&&r.on("timeout",()=>{r.destroy(),t(Error("Request time out"))}),r.end(),r.on("response",t=>{let n=t.headers,i=t.statusCode,o=t.statusMessage,a=[];t.on("data",e=>{a.push(e)}),t.on("end",()=>{let t=Buffer.concat([...a]).toString(),s=nb.getNetworkResponse(n,nS(i,o,n,t),i);(i<f.SUCCESS_RANGE_START||i>f.SUCCESS_RANGE_END)&&s.body.error!==ny.AUTHORIZATION_PENDING&&r.destroy(),e(s)})}),r.on("error",e=>{r.destroy(),t(Error(e.toString()))})})},nS=(e,t,r,n)=>{let i;try{i=JSON.parse(n)}catch(a){let n,o;e>=f.CLIENT_ERROR_RANGE_START&&e<=f.CLIENT_ERROR_RANGE_END?(n="client_error",o="A client"):e>=f.SERVER_ERROR_RANGE_START&&e<=f.SERVER_ERROR_RANGE_END?(n="server_error",o="A server"):(n="unknown_error",o="An unknown"),i={error:n,error_description:`${o} error occured.
Http status code: ${e}
Http status message: ${t||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},nw="invalid_file_extension",nI="invalid_file_path",nO="invalid_managed_identity_id_type",nR="invalid_secret",nN="platform_not_supported",nP="unable_to_create_azure_arc",nk="unable_to_create_cloud_shell",nD="unable_to_create_source",nM="unable_to_read_secret_file",nL="www_authenticate_header_missing",nU="www_authenticate_header_unsupported_format",nx={[nc.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[nc.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[nc.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[nc.MSI_ENDPOINT]:"msi_endpoint_url_malformed"},nF={[nw]:"The file path in the WWW-Authenticate header does not contain a .key file.",[nI]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[nO]:"More than one ManagedIdentityIdType was provided.",[nR]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[nN]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",missing_client_id:"A ManagedIdentityId id was not provided.",[nx.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${nc.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[nx.IDENTITY_ENDPOINT]:`The Managed Identity's '${nc.IDENTITY_ENDPOINT}' environment variable is malformed.`,[nx.IMDS_ENDPOINT]:`The Managed Identity's '${nc.IMDS_ENDPOINT}' environment variable is malformed.`,[nx.MSI_ENDPOINT]:`The Managed Identity's '${nc.MSI_ENDPOINT}' environment variable is malformed.`,network_unavailable:"Authentication unavailable. The request to the managed identity endpoint timed out.",[nP]:"Azure Arc Managed Identities can only be system assigned.",[nk]:"Cloud Shell Managed Identities can only be system assigned.",[nD]:"Unable to create a Managed Identity source based on environment variables.",[nM]:"Unable to read the secret file.",user_assigned_not_available_at_runtime:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[nL]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[nU]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class nB extends ${constructor(e){super(e,nF[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,nB.prototype)}}function nq(e){return new nB(e)}class nH{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let t=e?.userAssignedClientId,r=e?.userAssignedResourceId,n=e?.userAssignedObjectId;if(t){if(r||n)throw nq(nO);this.id=t,this.idType=nd.USER_ASSIGNED_CLIENT_ID}else if(r){if(t||n)throw nq(nO);this.id=r,this.idType=nd.USER_ASSIGNED_RESOURCE_ID}else if(n){if(t||r)throw nq(nO);this.id=n,this.idType=nd.USER_ASSIGNED_OBJECT_ID}else this.id="system_assigned_managed_identity",this.idType=nd.SYSTEM_ASSIGNED}}let nj={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."},redirectUriNotSupported:{code:"redirect_uri_not_supported",desc:"RedirectUri is not supported in this scenario. Please remove redirectUri from the request."}};class nY extends ${constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new nY(nj.invalidLoopbackAddressType.code,`${nj.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new nY(nj.unableToLoadRedirectUri.code,`${nj.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new nY(nj.noAuthCodeInResponse.code,`${nj.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new nY(nj.noLoopbackServerExists.code,`${nj.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new nY(nj.loopbackServerAlreadyExists.code,`${nj.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new nY(nj.loopbackServerTimeout.code,`${nj.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new nY(nj.stateNotFoundError.code,nj.stateNotFoundError.desc)}static createThumbprintMissingError(){return new nY(nj.thumbprintMissing.code,nj.thumbprintMissing.desc)}static createRedirectUriNotSupportedError(){return new nY(nj.redirectUriNotSupported.code,nj.redirectUriNotSupported.desc)}}let n$={clientId:h.EMPTY_STRING,authority:h.DEFAULT_AUTHORITY,clientSecret:h.EMPTY_STRING,clientAssertion:h.EMPTY_STRING,clientCertificate:{thumbprint:h.EMPTY_STRING,thumbprintSha256:h.EMPTY_STRING,privateKey:h.EMPTY_STRING,x5c:h.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:h.EMPTY_STRING,authorityMetadata:h.EMPTY_STRING,clientCapabilities:[],protocolMode:tP.AAD,azureCloudOptions:{azureCloudInstance:e$.None,tenant:h.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},nV={claimsBasedCachingEnabled:!1},nz={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:r.LogLevel.Info},nG={loggerOptions:nz,networkClient:new nv,proxyUrl:h.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},nW={application:{appName:h.EMPTY_STRING,appVersion:h.EMPTY_STRING}};class nK{generateGuid(){return o.v4()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class nQ{static base64Encode(e,t){return Buffer.from(e,t).toString(F.BASE64)}static base64EncodeUrl(e,t){return nQ.base64Encode(e,t).replace(/=/g,h.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,F.BASE64).toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return nQ.base64Decode(t)}}class nX{sha256(e){return a.createHash(np.SHA256).update(e).digest()}}class nZ{constructor(){this.hashUtils=new nX}async generatePkceCodes(){let e=this.generateCodeVerifier(),t=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:t}}generateCodeVerifier(){let e=[],t=256-256%nm.CV_CHARSET.length;for(;e.length<=32;){let r=a.randomBytes(1)[0];if(r>=t)continue;let n=r%nm.CV_CHARSET.length;e.push(nm.CV_CHARSET[n])}let r=e.join(h.EMPTY_STRING);return nQ.base64EncodeUrl(r)}generateCodeChallengeFromVerifier(e){return nQ.base64EncodeUrl(this.hashUtils.sha256(e).toString(F.BASE64),F.BASE64)}}class nJ{constructor(){this.pkceGenerator=new nZ,this.guidGenerator=new nK,this.hashUtils=new nX}base64UrlEncode(){throw Error("Method not implemented.")}encodeKid(){throw Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return nQ.base64Encode(e)}base64Decode(e){return nQ.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw Error("Method not implemented.")}removeTokenBindingKey(){throw Error("Method not implemented.")}clearKeystore(){throw Error("Method not implemented.")}signJwt(){throw Error("Method not implemented.")}async hashString(e){return nQ.base64EncodeUrl(this.hashUtils.sha256(e).toString(F.BASE64),F.BASE64)}}class n0 extends tR{constructor(e,t,r,n){super(t,r,e,new s.StubPerformanceClient,n),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let r in e){let n=e[r];if("object"==typeof n)if(n instanceof rj)t.accounts[r]=n;else if(rw(n))t.idTokens[r]=n;else if(rS(n))t.accessTokens[r]=n;else if(rI(n))t.refreshTokens[r]=n;else{if(!rO(r,n))continue;t.appMetadata[r]=n}}return t}inMemoryCacheToCache(e){let t=this.getCache();return{...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata}}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);let r=this.getCache();r[e]=t,this.setCache(r)}generateCredentialKey(e){let t=e.credentialType===w.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==P.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(ng.KEY_SEPARATOR).toLowerCase()}generateAccountKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment,t||e.tenantId||""].join(ng.KEY_SEPARATOR).toLowerCase()}getAccountKeys(){return Object.keys(this.getInMemoryCache().accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new rj,this.getItem(e)):null}async setAccount(e){let t=this.generateAccountKey(e.getAccountInfo());this.setItem(t,e)}getIdTokenCredential(e){let t=this.getItem(e);return rw(t)?t:null}async setIdTokenCredential(e){let t=this.generateCredentialKey(e);this.setItem(t,e)}getAccessTokenCredential(e){let t=this.getItem(e);return rS(t)?t:null}async setAccessTokenCredential(e){let t=this.generateCredentialKey(e);this.setItem(t,e)}getRefreshTokenCredential(e){let t=this.getItem(e);return rI(t)?t:null}async setRefreshTokenCredential(e){let t=this.generateCredentialKey(e);this.setItem(t,e)}getAppMetadata(e){let t=this.getItem(e);return rO(e,t)?t:null}setAppMetadata(e){let t=function({environment:e,clientId:t}){return[I,e,t].join(S.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(t,e)}getServerTelemetry(e){let t=this.getItem(e);return t&&function(e,t){let r=0===e.indexOf(N.CACHE_KEY),n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n}(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){let t=this.getItem(e);return t&&t&&0===e.indexOf(O.CACHE_KEY)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){let t,r,n=this.getItem(e);return n&&(t=!1,e&&(t=0===e.indexOf(k.THROTTLING_PREFIX)),r=!0,n&&(r=n.hasOwnProperty("throttleTime")),t&&r)?n:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1,r=this.getCache();return r[e]&&(delete r[e],t=!0),t&&(this.setCache(r),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){return this.logger.trace("Retrieving all cache keys"),[...Object.keys(this.getCache())]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(e=>{this.removeItem(e)}),this.emitChange()}static generateInMemoryCache(e){return ni.deserializeAllCache(ni.deserializeJSONBlob(e))}static generateJsonCache(e){return d.serializeAllCache(e)}updateCredentialCacheKey(e,t){let r=this.generateCredentialKey(t);if(e!==r){let n=this.getItem(e);if(n)return this.removeItem(e),this.setItem(r,n),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}let n1={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}};class n2{constructor(e,t,r){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),r&&(this.persistence=r),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=d.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let e=ni.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(e)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=n0.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new nJ().createNewGuid()){let t;this.logger.trace("getAllAccounts called");try{return this.persistence&&(t=new r3(this,!1),await this.persistence.beforeCacheAccess(t)),this.storage.getAllAccounts({},e)}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}async getAccountByHomeId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.localAccountId===e)[0]||null}async removeAccount(e,t){let r;this.logger.trace("removeAccount called");try{this.persistence&&(r=new r3(this,!0),await this.persistence.beforeCacheAccess(r)),this.storage.removeAccount(e,t||new nK().generateGuid())}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async overwriteCache(){if(!this.persistence)return void this.logger.info("No persistence layer specified, cache cannot be overwritten");this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new r3(this,!1);await this.persistence.beforeCacheAccess(e);let t=this.getCacheSnapshot();this.storage.setCache(t),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");let r=this.mergeRemovals(e,t);return this.mergeUpdates(r,t)}mergeUpdates(e,t){return Object.keys(t).forEach(r=>{let n=t[r];if(e.hasOwnProperty(r)){let t=null!==n,i="object"==typeof n,o=!Array.isArray(n),a=void 0!==e[r]&&null!==e[r];t&&i&&o&&a?this.mergeUpdates(e[r],n):e[r]=n}else null!==n&&(e[r]=n)}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");let r=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,n=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:r,AccessToken:n,RefreshToken:i,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,t){let r={...e};return Object.keys(e).forEach(e=>{t&&t.hasOwnProperty(e)||delete r[e]}),r}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...n1.Account,...e.Account},IdToken:{...n1.IdToken,...e.IdToken},AccessToken:{...n1.AccessToken,...e.AccessToken},RefreshToken:{...n1.RefreshToken,...e.RefreshToken},AppMetadata:{...n1.AppMetadata,...e.AppMetadata}}}}class n5{static fromAssertion(e){let t=new n5;return t.jwt=e,t}static fromCertificate(e,t,r){let n=new n5;return n.privateKey=t,n.thumbprint=e,n.useSha256=!1,r&&(n.publicCertificate=this.parseCertificate(r)),n}static fromCertificateWithSha256Thumbprint(e,t,r){let n=new n5;return n.privateKey=t,n.thumbprint=e,n.useSha256=!0,r&&(n.publicCertificate=this.parseCertificate(r)),n}getJwt(e,t,r){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&r===this.jwtAudience?this.jwt:this.createJwt(e,t,r);if(this.jwt)return this.jwt;throw eB(eb)}createJwt(e,t,r){this.issuer=t,this.jwtAudience=r;let n=rb();this.expirationTime=n+600;let i={alg:this.useSha256?nE.PSS_256:nE.RSA_256};Object.assign(i,{[this.useSha256?nE.X5T_256:nE.X5T]:nQ.base64EncodeUrl(this.thumbprint,F.HEX)}),this.publicCertificate&&Object.assign(i,{[nE.X5C]:this.publicCertificate});let o={[nE.AUDIENCE]:this.jwtAudience,[nE.EXPIRATION_TIME]:this.expirationTime,[nE.ISSUER]:this.issuer,[nE.SUBJECT]:this.issuer,[nE.NOT_BEFORE]:n,[nE.JWT_ID]:e.createNewGuid()};return this.jwt=l.sign(o,this.privateKey,{header:i}),this.jwt}isExpired(){return this.expirationTime<rb()}static parseCertificate(e){let t,r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[];for(;null!==(t=r.exec(e));)n.push(t[1].replace(/\r*\n/g,h.EMPTY_STRING));return n}}let n8="@azure/msal-node",n6="3.7.4";class n4 extends rq{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let t=rb(),r=await this.executeTokenRequest(this.authority,e),n=new r9(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return n.validateTokenResponse(r.body),n.handleServerTokenResponse(r.body,this.authority,t,e)}async executeTokenRequest(e,t){let r=this.createTokenQueryParameters(t),n=t_.appendQueryString(e.tokenEndpoint,r),i=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:tV.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(n,i,o,a,t.correlationId)}async createTokenRequestBody(e){var t,r;let n=new Map;t4(n,this.config.authOptions.clientId),t=e.username,n.set(M.username,t),r=e.password,n.set(M.password,r),t6(n,e.scopes),t8(n,b.IDTOKEN_TOKEN),rc(n,A.RESOURCE_OWNER_PASSWORD_GRANT),ru(n),rn(n,this.config.libraryInfo),ri(n,this.config.telemetry.application),rg(n),this.serverTelemetryManager&&rm(n,this.serverTelemetryManager),rr(n,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&ra(n,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(rs(n,await r7(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rl(n,i.assertionType)),(!tc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rt(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&t9(n,e.username),ty(n)}}class n3{constructor(e){this.config=function({auth:e,broker:t,cache:r,system:n,telemetry:i}){let o={...nG,networkClient:new nv(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||nz,disableInternalRetries:n?.disableInternalRetries||!1};if(e.clientCertificate&&!e.clientCertificate.thumbprint&&!e.clientCertificate.thumbprintSha256)throw nY.createStateNotFoundError();return{auth:{...n$,...e},broker:{...t},cache:{...nV,...r},system:{...o,...n},telemetry:{...nW,...i}}}(e),this.cryptoProvider=new nJ,this.logger=new eH(this.config.system.loggerOptions,n8,n6),this.storage=new n0(this.logger,this.config.auth.clientId,this.cryptoProvider,function(e){let t,r=e.cloudDiscoveryMetadata;if(r)try{t=JSON.parse(r)}catch(e){throw tl(e2)}return{canonicalAuthority:e.authority?rM(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:t}}(this.config.auth)),this.tokenCache=new n2(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||v.QUERY,authenticationScheme:P.BEARER,state:e.state||"",nonce:e.nonce||""},r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions);return function(e,t,r,n){let i=function(e,t,r,n){var i,o,a,s,l,c,u;let d=t.correlationId,h=new Map;if(t4(h,t.embeddedClientId||t.extraQueryParameters?.[tW]||e.clientId),t6(h,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),i=t.redirectUri,h.set(tK,i),rr(h,d),o=t.responseMode,h.set("response_mode",o||v.QUERY),ru(h),t.prompt&&(a=t.prompt,h.set("prompt",a)),t.domainHint&&(s=t.domainHint,h.set("domain_hint",s)),t.prompt!==E.SELECT_ACCOUNT)if(t.sid&&t.prompt===E.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),re(h,t.sid);else if(t.account){let e=(c=t.account,c.idTokenClaims?.sid||null),n=(u=t.account).loginHint||u.idTokenClaims?.login_hint||null;if(n&&t.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),n=null),n){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),t3(h,n);try{let e=tG(t.account.homeAccountId);t7(h,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===E.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),re(h,e);try{let e=tG(t.account.homeAccountId);t7(h,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),t3(h,t.loginHint),t9(h,t.loginHint);else if(t.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),t3(h,t.account.username);try{let e=tG(t.account.homeAccountId);t7(h,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),t3(h,t.loginHint),t9(h,t.loginHint));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&(l=t.nonce,h.set("nonce",l)),t.state&&ro(h,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&rt(h,t.claims,e.clientCapabilities),t.embeddedClientId&&ry(h,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(t2)||rd(h),h}({...e.auth,authority:t,redirectUri:r.redirectUri||""},r,n);return rn(i,{sku:ny.MSAL_SKU,version:n6,cpu:process.arch||"",os:process.platform||""}),e.auth.protocolMode!==tP.OIDC&&ri(i,e.telemetry.application),t8(i,b.CODE),r.codeChallenge&&r.codeChallengeMethod&&function(e,t,r){if(t&&r)e.set("code_challenge",t),e.set("code_challenge_method",r);else throw tl(e1)}(i,r.codeChallenge,r.codeChallengeMethod),rh(i,r.extraQueryParameters||{}),function(e,t,r,n){let i=ty(t,r,n);return t_.appendQueryString(e.authorizationEndpoint,i)}(t,i,e.auth.encodeExtraQueryParams,r.extraQueryParameters)}(this.config,r,t,this.logger)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:P.BEARER},n=this.initializeServerTelemetryManager(n_.acquireTokenByCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri,n),a=new ne(o);return this.logger.verbose("Auth code client created",r.correlationId),await a.acquireToken(r,t)}catch(e){throw e instanceof $&&e.setCorrelationId(r.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),authenticationScheme:P.BEARER},r=this.initializeServerTelemetryManager(n_.acquireTokenByRefreshToken,t.correlationId);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,t.redirectUri||"",r),o=new nt(i);return this.logger.verbose("Refresh token client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof $&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenSilent(e){let t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},r=this.initializeServerTelemetryManager(n_.acquireTokenSilent,t.correlationId,t.forceRefresh);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,t.redirectUri||"",r),o=new nr(i);this.logger.verbose("Silent flow client created",t.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(t,o,i)}catch(e){if(e instanceof eF&&e.errorCode===eA)return new nt(i).acquireTokenByRefreshToken(t);throw e}}catch(e){throw e instanceof $&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireCachedTokenSilent(e,t,r){let[n,i]=await t.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...p]});if(i===x.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let t=new nt(r);try{await t.acquireTokenByRefreshToken(e)}catch{}}return n}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)},r=this.initializeServerTelemetryManager(n_.acquireTokenByUsernamePassword,t.correlationId);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,"",r),o=new n4(i);return this.logger.verbose("Username password client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof $&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw nY.createStateNotFoundError();if(e!==t)throw eB(ee)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,r,n){return this.logger.verbose("buildOauthClientConfiguration called",t),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,t),n?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:r},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:ny.MSAL_SKU,version:n6,cpu:process.arch||h.EMPTY_STRING,os:process.platform||h.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=n5.fromAssertion(await r7(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:ny.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===P.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=P.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!tc.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...p],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,r){return new nn({clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:r||!1},this.storage)}async createAuthority(e,t,r,n){this.logger.verbose("createAuthority called",t);let i=rD.generateAuthority(e,n||this.config.auth.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:r,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return rL(i,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}}class n9{async listenForAuthCode(e,t){if(this.server)throw nY.createLoopbackServerAlreadyExistsError();return new Promise((r,i)=>{this.server=n.createServer((n,o)=>{let a=n.url;if(a){if(a===h.FORWARD_SLASH)return void o.end(e||"Auth code was successfully acquired. You can close this window now.")}else{o.end(t||"Error occurred loading redirectUrl"),i(nY.createUnableToLoadRedirectUrlError());return}let s=this.getRedirectUri(),l=tg(new URL(a,s).search)||{};l.code&&(o.writeHead(f.REDIRECT,{location:s}),o.end()),l.error&&o.end(t||`Error occurred: ${l.error}`),r(l)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw nY.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||"string"==typeof e||!e.port)throw this.closeServer(),nY.createInvalidLoopbackAddressTypeError();let t=e&&e.port;return`${ny.HTTP_PROTOCOL}${ny.LOCALHOST}:${t}`}closeServer(){this.server&&(this.server.close(),"function"==typeof this.server.closeAllConnections&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}class n7 extends rq{constructor(e){super(e)}async acquireToken(e){let t=await this.getDeviceCode(e);e.deviceCodeCallback(t);let r=rb(),n=await this.acquireTokenWithDeviceCode(e,t),i=new r9(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n),i.handleServerTokenResponse(n,this.authority,r,e)}async getDeviceCode(e){let t=this.createExtraQueryParameters(e),r=t_.appendQueryString(this.authority.deviceCodeEndpoint,t),n=this.createQueryString(e),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(r,n,i,o,e.correlationId)}createExtraQueryParameters(e){let t=new Map;return e.extraQueryParameters&&rh(t,e.extraQueryParameters),ty(t)}async executePostRequestToDeviceCodeEndpoint(e,t,r,n,i){let{body:{user_code:o,device_code:a,verification_uri:s,expires_in:l,interval:c,message:u}}=await this.sendPostRequest(n,e,{body:t,headers:r},i);return{userCode:o,deviceCode:a,verificationUri:s,expiresIn:l,interval:c,message:u}}createQueryString(e){let t=new Map;return t6(t,e.scopes),t4(t,this.config.authOptions.clientId),e.extraQueryParameters&&rh(t,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rt(t,e.claims,this.config.authOptions.clientCapabilities),ty(t)}continuePolling(e,t,r){if(r)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),eB(eh);if(t&&t<e&&rb()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),eB(eC);if(rb()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),eB(ef);return!0}async acquireTokenWithDeviceCode(e,t){let r=this.createTokenQueryParameters(e),n=t_.appendQueryString(this.authority.tokenEndpoint,r),i=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),a=e.timeout?rb()+e.timeout:void 0,s=rb()+t.expiresIn,l=1e3*t.interval;for(;this.continuePolling(s,a,e.cancel);){let t={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},r=await this.executePostToTokenEndpoint(n,i,o,t,e.correlationId);if(!r.body||!r.body.error)return this.logger.verbose("Authorization completed successfully. Polling stopped."),r.body;if(r.body.error===h.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await function(e,t){return new Promise(t=>setTimeout(()=>t(void 0),e))}(l);else{var c;throw this.logger.info("Unexpected error in polling from the server"),new $(q,(c=r.body.error)?`${j[q]} ${c}`:j[q])}}throw this.logger.error("Polling stopped for unknown reasons."),eB(ep)}createTokenRequestBody(e,t){var r;let n=new Map;return t6(n,e.scopes),t4(n,this.config.authOptions.clientId),rc(n,A.DEVICE_CODE_GRANT),r=t.deviceCode,n.set("device_code",r),rr(n,e.correlationId||this.config.cryptoInterface.createNewGuid()),ru(n),rn(n,this.config.libraryInfo),ri(n,this.config.telemetry.application),rg(n),this.serverTelemetryManager&&rm(n,this.serverTelemetryManager),(!tc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rt(n,e.claims,this.config.authOptions.clientCapabilities),ty(n)}}class ie extends rq{constructor(e,t){super(e),this.appTokenProvider=t}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[t,r]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return t?(r===x.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),t):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,t,r,n,i,o){let a,s=x.NOT_APPLICABLE;t.serializableCache&&t.persistencePlugin&&(a=new r3(t.serializableCache,!1),await t.persistencePlugin.beforeCacheAccess(a));let l=this.readAccessTokenFromCache(n,t.managedIdentityId?.id||t.authOptions.clientId,new tu(e.scopes||[]),i,e.correlationId);return(t.serializableCache&&t.persistencePlugin&&a&&await t.persistencePlugin.afterCacheAccess(a),l)?rA(l.expiresOn,t.systemOptions?.tokenRenewalOffsetSeconds||300)?(o?.setCacheOutcome(x.CACHED_ACCESS_TOKEN_EXPIRED),[null,x.CACHED_ACCESS_TOKEN_EXPIRED]):(l.refreshOn&&rA(l.refreshOn.toString(),0)&&(s=x.PROACTIVELY_REFRESHED,o?.setCacheOutcome(x.PROACTIVELY_REFRESHED)),[await r9.generateAuthenticationResult(r,n,{account:null,idToken:null,accessToken:l,refreshToken:null,appMetadata:null},!0,e),s]):(o?.setCacheOutcome(x.NO_CACHED_ACCESS_TOKEN),[null,x.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,t,r,n,i){let o={homeAccountId:h.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:w.ACCESS_TOKEN,clientId:t,realm:e.tenant,target:tu.createSearchScopes(r.asArray())},a=n.getAccessTokensByFilter(o,i);if(a.length<1)return null;if(a.length>1)throw eB(eo);return a[0]}async executeTokenRequest(e,t,r){let n,i;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let t={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};i=rb();let r=await this.appTokenProvider(t);n={access_token:r.accessToken,expires_in:r.expiresInSeconds,refresh_in:r.refreshInSeconds,token_type:P.BEARER}}else{let r=this.createTokenQueryParameters(e),o=t_.appendQueryString(t.tokenEndpoint,r),a=await this.createTokenRequestBody(e),s=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+t.tokenEndpoint),i=rb();let c=await this.executePostToTokenEndpoint(o,a,s,l,e.correlationId);(n=c.body).status=c.status}let o=new r9(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n,r),await o.handleServerTokenResponse(n,this.authority,i,e)}async createTokenRequestBody(e){let t=new Map;t4(t,this.config.authOptions.clientId),t6(t,e.scopes,!1),rc(t,A.CLIENT_CREDENTIALS_GRANT),rn(t,this.config.libraryInfo),ri(t,this.config.telemetry.application),rg(t),this.serverTelemetryManager&&rm(t,this.serverTelemetryManager),rr(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&ra(t,this.config.clientCredentials.clientSecret);let r=e.clientAssertion||this.config.clientCredentials.clientAssertion;return r&&(rs(t,await r7(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rl(t,r.assertionType)),(!tc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rt(t,e.claims,this.config.authOptions.clientCapabilities),ty(t)}}class it extends rq{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new tu(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch(t){return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let t,r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(rA(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(x.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),eB(eA)}else throw this.serverTelemetryManager?.setCacheOutcome(x.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),eB(eA);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i=null;if(n){let r=(t=tp(n.secret,nQ.base64Decode)).oid||t.sub,o={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:h.EMPTY_STRING,localAccountId:r||h.EMPTY_STRING};i=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(o),e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),r9.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:i,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,t)}readIdTokenFromCacheForOBO(e,t){let r={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:w.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},n=this.cacheManager.getIdTokensByFilter(r,t);return Object.values(n).length<1?null:Object.values(n)[0]}readAccessTokenFromCacheForOBO(e,t){let r=t.authenticationScheme||P.BEARER,n={credentialType:r.toLowerCase()!==P.BEARER.toLowerCase()?w.ACCESS_TOKEN_WITH_AUTH_SCHEME:w.ACCESS_TOKEN,clientId:e,target:tu.createSearchScopes(this.scopeSet.asArray()),tokenType:r,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},i=this.cacheManager.getAccessTokensByFilter(n,t.correlationId),o=i.length;if(o<1)return null;if(o>1)throw eB(eo);return i[0]}async executeTokenRequest(e,t,r){let n=this.createTokenQueryParameters(e),i=t_.appendQueryString(t.tokenEndpoint,n),o=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),s={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},l=rb(),c=await this.executePostToTokenEndpoint(i,o,a,s,e.correlationId),u=new r9(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return u.validateTokenResponse(c.body),await u.handleServerTokenResponse(c.body,this.authority,l,e,void 0,r)}async createTokenRequestBody(e){var t;let r=new Map;t4(r,this.config.authOptions.clientId),t6(r,e.scopes),rc(r,A.JWT_BEARER),ru(r),rn(r,this.config.libraryInfo),ri(r,this.config.telemetry.application),rg(r),this.serverTelemetryManager&&rm(r,this.serverTelemetryManager),rr(r,e.correlationId||this.config.cryptoInterface.createNewGuid()),r.set("requested_token_use","on_behalf_of"),t=e.oboAssertion,r.set("assertion",t),this.config.clientCredentials.clientSecret&&ra(r,this.config.clientCredentials.clientSecret);let n=this.config.clientCredentials.clientAssertion;return n&&(rs(r,await r7(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rl(r,n.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rt(r,e.claims,this.config.authOptions.clientCapabilities),ty(r)}}class ir{constructor(e,t,r){this.httpClientNoRetries=e,this.retryPolicy=t,this.logger=r}async sendNetworkRequestAsyncHelper(e,t,r){return e===nh.GET?this.httpClientNoRetries.sendGetRequestAsync(t,r):this.httpClientNoRetries.sendPostRequestAsync(t,r)}async sendNetworkRequestAsync(e,t,r){let n=await this.sendNetworkRequestAsyncHelper(e,t,r);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let i=0;for(;await this.retryPolicy.pauseForRetry(n.status,i,this.logger,n.headers[g.RETRY_AFTER]);)n=await this.sendNetworkRequestAsyncHelper(e,t,r),i++;return n}async sendGetRequestAsync(e,t){return this.sendNetworkRequestAsync(nh.GET,e,t)}async sendPostRequestAsync(e,t){return this.sendNetworkRequestAsync(nh.POST,e,t)}}let ii={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"};class io{constructor(e,t,r,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n,this.disableInternalRetries=i}async getServerTokenResponseAsync(e,t,r,n){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,r;return e.body.expires_on&&(function(e){if("string"!=typeof e)return!1;let t=new Date(e);return!isNaN(t.getTime())&&t.toISOString()===e}(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),(r=e.body.expires_on-rb())>7200&&(t=r/2)),{status:e.status,access_token:e.body.access_token,expires_in:r,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:"string"==typeof e.body.error?e.body.error:e.body.error?.code,error_description:e.body.message||("string"==typeof e.body.error?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,r,n){let i,o=this.createRequest(e.resource,t);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[nl.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let t=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${t}`),o.queryParameters[nl.XMS_CC]=t}let a=o.headers;a[g.CONTENT_TYPE]=h.URL_FORM_CONTENT_TYPE;let s={headers:a};Object.keys(o.bodyParameters).length&&(s.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new ir(this.networkClient,o.retryPolicy,this.logger),c=rb();try{i=o.httpMethod===nh.POST?await l.sendPostRequestAsync(o.computeUri(),s):await l.sendGetRequestAsync(o.computeUri(),s)}catch(e){if(e instanceof $)throw e;throw eB(Q)}let u=new r9(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),d=await this.getServerTokenResponseAsync(i,l,o,s);return u.validateTokenResponse(d,n),u.handleServerTokenResponse(d,r,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,t,r){switch(e){case nd.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${r?"2017+":"2019+"}] Adding user assigned client id to the request.`),r?ii.MANAGED_IDENTITY_CLIENT_ID_2017:ii.MANAGED_IDENTITY_CLIENT_ID;case nd.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),t?ii.MANAGED_IDENTITY_RESOURCE_ID_IMDS:ii.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case nd.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),ii.MANAGED_IDENTITY_OBJECT_ID;default:throw nq(nO)}}}io.getValidatedEnvVariableUrlString=(e,t,r,n)=>{try{return new t_(t).urlString}catch(t){throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${e}' environment variable is malformed.`),nq(nx[e])}};class ia{calculateDelay(e,t){if(!e)return t;let r=Math.round(1e3*parseFloat(e));return isNaN(r)&&(r=new Date(e).valueOf()-new Date().valueOf()),Math.max(t,r)}}let is=[s.HttpStatus.NOT_FOUND,s.HttpStatus.REQUEST_TIMEOUT,s.HttpStatus.TOO_MANY_REQUESTS,s.HttpStatus.SERVER_ERROR,s.HttpStatus.SERVICE_UNAVAILABLE,s.HttpStatus.GATEWAY_TIMEOUT];class il{constructor(){this.linearRetryStrategy=new ia}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return 1e3}async pauseForRetry(e,t,r,n){if(is.includes(e)&&t<3){let e=this.linearRetryStrategy.calculateDelay(n,il.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return r.verbose(`Retrying request in ${e}ms (retry attempt: ${t+1})`),await new Promise(t=>setTimeout(t,e)),!0}return!1}}class ic{constructor(e,t,r){this.httpMethod=e,this._baseEndpoint=t,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=r||new il}computeUri(){let e=new Map;this.queryParameters&&rh(e,this.queryParameters);let t=ty(e);return t_.appendQueryString(this._baseEndpoint,t)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&rh(e,this.bodyParameters),ty(e)}}class iu extends io{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.identityEndpoint=o,this.identityHeader=a}static getEnvironmentVariables(){return[process.env[nc.IDENTITY_ENDPOINT],process.env[nc.IDENTITY_HEADER]]}static tryCreate(e,t,r,n,i){let[o,a]=iu.getEnvironmentVariables();if(!o||!a)return e.info(`[Managed Identity] ${nu.APP_SERVICE} managed identity is unavailable because one or both of the '${nc.IDENTITY_HEADER}' and '${nc.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let s=iu.getValidatedEnvVariableUrlString(nc.IDENTITY_ENDPOINT,o,nu.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${nu.APP_SERVICE} managed identity. Endpoint URI: ${s}. Creating ${nu.APP_SERVICE} managed identity.`),new iu(e,t,r,n,i,o,a)}createRequest(e,t){let r=new ic(nh.GET,this.identityEndpoint);return r.headers[ns.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,r.queryParameters[nl.API_VERSION]="2019-08-01",r.queryParameters[nl.RESOURCE]=e,t.idType!==nd.SYSTEM_ASSIGNED&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}let id="http://127.0.0.1:40342/metadata/identity/oauth2/token",ih="N/A: himds executable exists",ip={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},im={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class ig extends io{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.identityEndpoint=o}static getEnvironmentVariables(){let e=process.env[nc.IDENTITY_ENDPOINT],t=process.env[nc.IMDS_ENDPOINT];if(!e||!t){let r=im[process.platform];try{c.accessSync(r,c.constants.F_OK|c.constants.R_OK),e=id,t=ih}catch(e){}}return[e,t]}static tryCreate(e,t,r,n,i,o){let[a,s]=ig.getEnvironmentVariables();if(!a||!s)return e.info(`[Managed Identity] ${nu.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${nc.IDENTITY_ENDPOINT}' and '${nc.IMDS_ENDPOINT}' are not defined. ${nu.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(s===ih)e.info(`[Managed Identity] ${nu.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${nu.AZURE_ARC} endpoint: ${id}. Creating ${nu.AZURE_ARC} managed identity.`);else{let t=ig.getValidatedEnvVariableUrlString(nc.IDENTITY_ENDPOINT,a,nu.AZURE_ARC,e);t.endsWith("/")&&t.slice(0,-1),ig.getValidatedEnvVariableUrlString(nc.IMDS_ENDPOINT,s,nu.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${nu.AZURE_ARC} managed identity. Endpoint URI: ${t}. Creating ${nu.AZURE_ARC} managed identity.`)}if(o.idType!==nd.SYSTEM_ASSIGNED)throw nq(nP);return new ig(e,t,r,n,i,a)}createRequest(e){let t=new ic(nh.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return t.headers[ns.METADATA_HEADER_NAME]="true",t.queryParameters[nl.API_VERSION]="2019-11-01",t.queryParameters[nl.RESOURCE]=e,t}async getServerTokenResponseAsync(e,t,r,n){let i;if(e.status===f.UNAUTHORIZED){let o,a,s=e.headers["www-authenticate"];if(!s)throw nq(nL);if(!s.includes("Basic realm="))throw nq(nU);let l=s.split("Basic realm=")[1];if(!ip.hasOwnProperty(process.platform))throw nq(nN);let d=ip[process.platform],h=u.basename(l);if(!h.endsWith(".key"))throw nq(nw);if(d+h!==l)throw nq(nI);try{o=await c.statSync(l).size}catch(e){throw nq(nM)}if(o>4096)throw nq(nR);try{a=c.readFileSync(l,F.UTF8)}catch(e){throw nq(nM)}let f=`Basic ${a}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),r.headers[ns.AUTHORIZATION_HEADER_NAME]=f;try{i=await t.sendGetRequestAsync(r.computeUri(),n)}catch(e){if(e instanceof $)throw e;throw eB(Q)}}return this.getServerTokenResponse(i||e)}}class iy extends io{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.msiEndpoint=o}static getEnvironmentVariables(){return[process.env[nc.MSI_ENDPOINT]]}static tryCreate(e,t,r,n,i,o){let[a]=iy.getEnvironmentVariables();if(!a)return e.info(`[Managed Identity] ${nu.CLOUD_SHELL} managed identity is unavailable because the '${nc.MSI_ENDPOINT} environment variable is not defined.`),null;let s=iy.getValidatedEnvVariableUrlString(nc.MSI_ENDPOINT,a,nu.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${nu.CLOUD_SHELL} managed identity. Endpoint URI: ${s}. Creating ${nu.CLOUD_SHELL} managed identity.`),o.idType!==nd.SYSTEM_ASSIGNED)throw nq(nk);return new iy(e,t,r,n,i,a)}createRequest(e){let t=new ic(nh.POST,this.msiEndpoint);return t.headers[ns.METADATA_HEADER_NAME]="true",t.bodyParameters[nl.RESOURCE]=e,t}}class i_{constructor(e,t,r){this.minExponentialBackoff=e,this.maxExponentialBackoff=t,this.exponentialDeltaBackoff=r}calculateDelay(e){return 0===e?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}}let iE=[s.HttpStatus.NOT_FOUND,s.HttpStatus.REQUEST_TIMEOUT,s.HttpStatus.GONE,s.HttpStatus.TOO_MANY_REQUESTS];class iT{constructor(){this.exponentialRetryStrategy=new i_(iT.MIN_EXPONENTIAL_BACKOFF_MS,iT.MAX_EXPONENTIAL_BACKOFF_MS,iT.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return 1e3}static get MAX_EXPONENTIAL_BACKOFF_MS(){return 4e3}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return 2e3}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return 1e4}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,t,r){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===s.HttpStatus.GONE?7:3),(iE.includes(e)||e>=s.HttpStatus.SERVER_ERROR_RANGE_START&&e<=s.HttpStatus.SERVER_ERROR_RANGE_END&&t<this.maxRetries)&&t<this.maxRetries){let n=e===s.HttpStatus.GONE?iT.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(t);return r.verbose(`Retrying request in ${n}ms (retry attempt: ${t+1})`),await new Promise(e=>setTimeout(e,n)),!0}return!1}}let ib="/metadata/identity/oauth2/token",iv=`http://169.254.169.254${ib}`;class iA extends io{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.identityEndpoint=o}static tryCreate(e,t,r,n,i){let o;return process.env[nc.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${nc.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${nu.IMDS} returned endpoint: ${process.env[nc.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),o=iA.getValidatedEnvVariableUrlString(nc.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[nc.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${ib}`,nu.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${nc.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${nu.IMDS}, using the default endpoint.`),o=iv),new iA(e,t,r,n,i,o)}createRequest(e,t){let r=new ic(nh.GET,this.identityEndpoint);return r.headers[ns.METADATA_HEADER_NAME]="true",r.queryParameters[nl.API_VERSION]="2018-02-01",r.queryParameters[nl.RESOURCE]=e,t.idType!==nd.SYSTEM_ASSIGNED&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!0)]=t.id),r.retryPolicy=new iT,r}}class iC extends io{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.identityEndpoint=o,this.identityHeader=a}static getEnvironmentVariables(){let e=process.env[nc.IDENTITY_ENDPOINT];return[e,process.env[nc.IDENTITY_HEADER],process.env[nc.IDENTITY_SERVER_THUMBPRINT]]}static tryCreate(e,t,r,n,i,o){let[a,s,l]=iC.getEnvironmentVariables();if(!a||!s||!l)return e.info(`[Managed Identity] ${nu.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${nc.IDENTITY_HEADER}', '${nc.IDENTITY_ENDPOINT}' or '${nc.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let c=iC.getValidatedEnvVariableUrlString(nc.IDENTITY_ENDPOINT,a,nu.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${nu.SERVICE_FABRIC} managed identity. Endpoint URI: ${c}. Creating ${nu.SERVICE_FABRIC} managed identity.`),o.idType!==nd.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${nu.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new iC(e,t,r,n,i,a,s)}createRequest(e,t){let r=new ic(nh.GET,this.identityEndpoint);return r.headers[ns.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,r.queryParameters[nl.API_VERSION]="2019-07-01-preview",r.queryParameters[nl.RESOURCE]=e,t.idType!==nd.SYSTEM_ASSIGNED&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}let iS=`Only client id is supported for user-assigned managed identity in ${nu.MACHINE_LEARNING}.`;class iw extends io{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.msiEndpoint=o,this.secret=a}static getEnvironmentVariables(){return[process.env[nc.MSI_ENDPOINT],process.env[nc.MSI_SECRET]]}static tryCreate(e,t,r,n,i){let[o,a]=iw.getEnvironmentVariables();if(!o||!a)return e.info(`[Managed Identity] ${nu.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${nc.MSI_ENDPOINT}' and '${nc.MSI_SECRET}' environment variables are not defined.`),null;let s=iw.getValidatedEnvVariableUrlString(nc.MSI_ENDPOINT,o,nu.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${nu.MACHINE_LEARNING} managed identity. Endpoint URI: ${s}. Creating ${nu.MACHINE_LEARNING} managed identity.`),new iw(e,t,r,n,i,o,a)}createRequest(e,t){let r=new ic(nh.GET,this.msiEndpoint);if(r.headers[ns.METADATA_HEADER_NAME]="true",r.headers[ns.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,r.queryParameters[nl.API_VERSION]="2017-09-01",r.queryParameters[nl.RESOURCE]=e,t.idType===nd.SYSTEM_ASSIGNED)r.queryParameters[ii.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[nc.DEFAULT_IDENTITY_CLIENT_ID];else if(t.idType===nd.USER_ASSIGNED_CLIENT_ID)r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!1,!0)]=t.id;else throw Error(iS);return r}}class iI{constructor(e,t,r,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n,this.disableInternalRetries=i}async sendManagedIdentityTokenRequest(e,t,r,n){return iI.identitySource||(iI.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,t)),iI.identitySource.acquireTokenWithManagedIdentity(e,t,r,n)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(e=>void 0!==e)}getManagedIdentitySource(){return iI.sourceName=this.allEnvironmentVariablesAreDefined(iC.getEnvironmentVariables())?nu.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(iu.getEnvironmentVariables())?nu.APP_SERVICE:this.allEnvironmentVariablesAreDefined(iw.getEnvironmentVariables())?nu.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(iy.getEnvironmentVariables())?nu.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(ig.getEnvironmentVariables())?nu.AZURE_ARC:nu.DEFAULT_TO_IMDS,iI.sourceName}selectManagedIdentitySource(e,t,r,n,i,o){let a=iC.tryCreate(e,t,r,n,i,o)||iu.tryCreate(e,t,r,n,i)||iw.tryCreate(e,t,r,n,i)||iy.tryCreate(e,t,r,n,i,o)||ig.tryCreate(e,t,r,n,i,o)||iA.tryCreate(e,t,r,n,i);if(!a)throw nq(nD);return a}}let iO=[nu.SERVICE_FABRIC];class iR{constructor(e){this.config=function({clientCapabilities:e,managedIdentityIdParams:t,system:r}){let n=new nH(t);return{clientCapabilities:e||[],managedIdentityId:n,system:{loggerOptions:r?.loggerOptions||nz,networkClient:r?.networkClient?r.networkClient:new nv(r?.proxyUrl,r?.customAgentOptions)},disableInternalRetries:r?.disableInternalRetries||!1}}(e||{}),this.logger=new eH(this.config.system.loggerOptions,n8,n6);let t={canonicalAuthority:h.DEFAULT_AUTHORITY};iR.nodeStorage||(iR.nodeStorage=new n0(this.logger,this.config.managedIdentityId.id,eq,t)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new nJ;let r={protocolMode:tP.AAD,knownAuthorities:[na],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new rD(na,this.networkClient,iR.nodeStorage,r,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new ie({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new iI(this.logger,iR.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new nX}async acquireToken(e){if(!e.resource)throw tl(eK);let t={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(t.forceRefresh)return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority);let[r,n]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(t,this.config,this.cryptoProvider,this.fakeAuthority,iR.nodeStorage);if(t.claims){let e=this.managedIdentityClient.getManagedIdentitySource();return r&&iO.includes(e)&&(t.revokedTokenSha256Hash=this.hashUtils.sha256(r.accessToken).toString(F.HEX)),this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}return r?(n===x.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority,!0)),r):this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,t,r,n){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,t,r,n)}getManagedIdentitySource(){return iI.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}r.AuthError=$,r.AuthErrorCodes=H,r.AuthErrorMessage=Y,r.AzureCloudInstance=e$,r.ClientApplication=n3,r.ClientAssertion=n5,r.ClientAuthError=eF,r.ClientAuthErrorCodes=eL,r.ClientAuthErrorMessage=ex,r.ClientConfigurationError=ts,r.ClientConfigurationErrorCodes=ti,r.ClientConfigurationErrorMessage=ta,r.ClientCredentialClient=ie,r.ConfidentialClientApplication=class extends n3{constructor(e){super(e);let t=!!this.config.auth.clientSecret,r=!!this.config.auth.clientAssertion,n=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(this.appTokenProvider)return;if(t&&r||r&&n||t&&n)throw eB(ev);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(n)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?n5.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):n5.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw eB(ev);this.appTokenProvider=void 0}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){let t,r;this.logger.info("acquireTokenByClientCredential called",e.correlationId),e.clientAssertion&&(t={assertion:await r7(e.clientAssertion,this.config.auth.clientId),assertionType:ny.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(e=>!p.includes(e))},o={...e,...i,clientAssertion:t},a=new t_(o.authority).getUrlComponents().PathSegments[0];if(Object.values(y).includes(a))throw eB(ek);let s=process.env.MSAL_FORCE_REGION;"DisableMsalForceRegion"!==o.azureRegion&&(r=!o.azureRegion&&s?s:o.azureRegion);let l={azureRegion:r,environmentRegion:process.env.REGION_NAME},c=this.initializeServerTelemetryManager(n_.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let t=await this.createAuthority(o.authority,o.correlationId,l,e.azureCloudOptions),r=await this.buildOauthClientConfiguration(t,o.correlationId,"",c),n=new ie(r,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await n.acquireToken(o)}catch(e){throw e instanceof $&&e.setCorrelationId(o.correlationId),c.cacheFailedRequest(e),e}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)};try{let r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),n=await this.buildOauthClientConfiguration(r,t.correlationId,"",void 0),i=new it(n);return this.logger.verbose("On behalf of client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof $&&e.setCorrelationId(t.correlationId),e}}},r.CryptoProvider=nJ,r.DeviceCodeClient=n7,r.DistributedCachePlugin=class{constructor(e,t){this.client=e,this.partitionManager=t}async beforeCacheAccess(e){let t=await this.partitionManager.getKey(),r=await this.client.get(t);e.tokenCache.deserialize(r)}async afterCacheAccess(e){if(e.cacheHasChanged){let t,r=Object.values(e.tokenCache.getKVStore()).filter(e=>rj.isAccountEntity(e));if(r.length>0){let e=r[0];t=await this.partitionManager.extractKey(e)}else t=await this.partitionManager.getKey();await this.client.set(t,e.tokenCache.serialize())}}},r.InteractionRequiredAuthError=r2,r.InteractionRequiredAuthErrorCodes=rX,r.InteractionRequiredAuthErrorMessage=r1,r.Logger=eH,r.ManagedIdentityApplication=iR,r.ManagedIdentitySourceNames=nu,r.OnBehalfOfClient=it,r.PromptValue=E,r.ProtocolMode=tP,r.PublicClientApplication=class extends n3{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=nn.makeExtraSkuString({libraryName:ny.MSAL_SKU,libraryVersion:n6})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let t=Object.assign(e,await this.initializeBaseRequest(e)),r=this.initializeServerTelemetryManager(n_.acquireTokenByDeviceCode,t.correlationId);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,"",r),o=new n7(i);return this.logger.verbose("Device code client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof $&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenInteractive(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);let{openBrowser:r,successTemplate:n,errorTemplate:i,windowHandle:o,loopbackClient:a,...s}=e;if(this.nativeBrokerPlugin){let r={...s,clientId:this.config.auth.clientId,scopes:e.scopes||p,redirectUri:e.redirectUri||"",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...s.extraQueryParameters,...s.tokenQueryParameters,[tJ]:this.skus},accountId:s.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(r,o)}if(e.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw nY.createRedirectUriNotSupportedError();e.redirectUri=""}let{verifier:l,challenge:c}=await this.cryptoProvider.generatePkceCodes(),u=a||new n9,d={},f=null;try{let o=u.listenForAuthCode(n,i).then(e=>{d=e}).catch(e=>{f=e}),a=await this.waitForRedirectUri(u),m={...s,correlationId:t,scopes:e.scopes||p,redirectUri:a,responseMode:v.QUERY,codeChallenge:c,codeChallengeMethod:T.S256},g=await this.getAuthCodeUrl(m);if(await r(g),await o,f)throw f;if(d.error)throw new rU(d.error,d.error_description,d.suberror);if(!d.code)throw nY.createNoAuthCodeInResponseError();let y=d.client_info,_={code:d.code,codeVerifier:l,clientInfo:y||h.EMPTY_STRING,...m};return await this.acquireTokenByCode(_)}finally{u.closeServer()}}async acquireTokenSilent(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){let r={...e,clientId:this.config.auth.clientId,scopes:e.scopes||p,redirectUri:e.redirectUri||"",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[tJ]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(r)}if(e.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw nY.createRedirectUriNotSupportedError();e.redirectUri=""}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((t,r)=>{let n=0,i=setInterval(()=>{if(nT.TIMEOUT_MS/nT.INTERVAL_MS<n){clearInterval(i),r(nY.createLoopbackServerTimeoutError());return}try{let r=e.getRedirectUri();clearInterval(i),t(r);return}catch(e){if(e instanceof $&&e.errorCode===nj.noLoopbackServerExists.code)return void n++;clearInterval(i),r(e);return}},nT.INTERVAL_MS)})}},r.ResponseMode=v,r.ServerError=rU,r.TokenCache=n2,r.TokenCacheContext=r3,r.UsernamePasswordClient=n4,r.internals=no,r.version=n6},8084,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.msalCommon=void 0,r.msalCommon=e.r(41716).__importStar(e.r(3362))},33572,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultLoggerCallback=void 0,r.ensureValidMsalToken=function(e,t,r){let i=t=>(c.getToken.info(t),new n.AuthenticationRequiredError({scopes:Array.isArray(e)?e:[e],getTokenOptions:r,message:t}));if(!t)throw i("No response");if(!t.expiresOn)throw i('Response had no "expiresOn" property.');if(!t.accessToken)throw i('Response had no "accessToken" property.')},r.getAuthorityHost=function(e){let t=e?.authorityHost;return!t&&a.isNodeLike&&(t=process.env.AZURE_AUTHORITY_HOST),t??o.DefaultAuthorityHost},r.getAuthority=function(e,t){return(t||(t=o.DefaultAuthorityHost),RegExp(`${e}/?$`).test(t))?t:t.endsWith("/")?t+e:`${t}/${e}`},r.getKnownAuthorities=function(e,t,r){return"adfs"===e&&t||r?[t]:[]},r.getMSALLogLevel=function(e){switch(e){case"error":return l.msalCommon.LogLevel.Error;case"info":default:return l.msalCommon.LogLevel.Info;case"verbose":return l.msalCommon.LogLevel.Verbose;case"warning":return l.msalCommon.LogLevel.Warning}},r.randomUUID=function(){return(0,a.randomUUID)()},r.handleMsalError=function(e,t,r){if("AuthError"===t.name||"ClientAuthError"===t.name||"BrowserAuthError"===t.name)switch(t.errorCode){case"endpoints_resolution_error":return c.info((0,i.formatError)(e,t.message)),new n.CredentialUnavailableError(t.message);case"device_code_polling_cancelled":return new s.AbortError("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":c.info((0,i.formatError)(e,`Authentication returned errorCode ${t.errorCode}`));break;default:c.info((0,i.formatError)(e,`Failed to acquire token: ${t.message}`))}return"ClientConfigurationError"===t.name||"BrowserConfigurationAuthError"===t.name||"AbortError"===t.name||"AuthenticationError"===t.name?t:"NativeAuthError"===t.name?(c.info((0,i.formatError)(e,`Error from the native broker: ${t.message} with status code: ${t.statusCode}`)),t):new n.AuthenticationRequiredError({scopes:e,getTokenOptions:r,message:t.message})},r.publicToMsal=function(e){return{localAccountId:e.homeAccountId,environment:e.authority,username:e.username,homeAccountId:e.homeAccountId,tenantId:e.tenantId}},r.msalToPublic=function(e,t){return{authority:t.environment??o.DefaultAuthority,homeAccountId:t.homeAccountId,tenantId:t.tenantId||o.DefaultTenantId,username:t.username,clientId:e,version:"1.0"}},r.serializeAuthenticationRecord=function(e){return JSON.stringify(e)},r.deserializeAuthenticationRecord=function(e){let t=JSON.parse(e);if(t.version&&"1.0"!==t.version)throw Error("Unsupported AuthenticationRecord version");return t};let n=e.r(12304),i=e.r(8317),o=e.r(59766),a=e.r(96555),s=e.r(61446),l=e.r(8084),c=(0,i.credentialLogger)("IdentityUtils");r.defaultLoggerCallback=(e,t=a.isNode?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case l.msalCommon.LogLevel.Error:e.info(`MSAL ${t} V2 error: ${n}`);return;case l.msalCommon.LogLevel.Info:e.info(`MSAL ${t} V2 info message: ${n}`);return;case l.msalCommon.LogLevel.Verbose:e.info(`MSAL ${t} V2 verbose message: ${n}`);return;case l.msalCommon.LogLevel.Warning:e.info(`MSAL ${t} V2 warning: ${n}`);return}}},99649,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeString=function(e){return Buffer.from(e).toString("base64")},r.encodeByteArray=function(e){return(e instanceof Buffer?e:Buffer.from(e.buffer)).toString("base64")},r.decodeString=function(e){return Buffer.from(e,"base64")},r.decodeStringToString=function(e){return Buffer.from(e,"base64").toString()}},60416,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.XML_CHARKEY=r.XML_ATTRKEY=void 0,r.XML_ATTRKEY="$",r.XML_CHARKEY="_"},23962,(e,t,r)=>{"use strict";function n(e,t){return"Composite"!==t&&"Dictionary"!==t&&("string"==typeof e||"number"==typeof e||"boolean"==typeof e||t?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||null==e)}Object.defineProperty(r,"__esModule",{value:!0}),r.isPrimitiveBody=n,r.isDuration=function(e){return i.test(e)},r.isValidUuid=function(e){return o.test(e)},r.flattenResponse=function(e,t){let r=e.parsedHeaders;if("HEAD"===e.request.method)return{...r,body:e.parsedBody};let i=t&&t.bodyMapper,o=!!i?.nullable,a=i?.type.name;if("Stream"===a)return{...r,blobBody:e.blobBody,readableStreamBody:e.readableStreamBody};let s="Composite"===a&&i.type.modelProperties||{},l=Object.keys(s).some(e=>""===s[e].serializedName);if("Sequence"===a||l){let t=e.parsedBody??[];for(let r of Object.keys(s))s[r].serializedName&&(t[r]=e.parsedBody?.[r]);if(r)for(let e of Object.keys(r))t[e]=r[e];return!o||e.parsedBody||r||0!==Object.getOwnPropertyNames(s).length?t:null}var c={body:e.parsedBody,headers:r,hasNullableType:o,shouldWrapBody:n(e.parsedBody,a)};let u={...c.headers,...c.body};return c.hasNullableType&&0===Object.getOwnPropertyNames(u).length?c.shouldWrapBody?{body:null}:null:c.shouldWrapBody?{...c.headers,body:c.body}:u};let i=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,o=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i},53973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MapperTypeNames=void 0,r.createSerializer=function(e={},t=!1){return new a(e,t)};let n=e.r(41716).__importStar(e.r(99649)),i=e.r(60416),o=e.r(23962);class a{modelMappers;isXML;constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,r){let n=(e,n)=>{throw Error(`"${r}" with value "${t}" should satisfy the constraint "${e}": ${n}.`)};if(e.constraints&&null!=t){let{ExclusiveMaximum:r,ExclusiveMinimum:i,InclusiveMaximum:o,InclusiveMinimum:a,MaxItems:s,MaxLength:l,MinItems:c,MinLength:u,MultipleOf:d,Pattern:h,UniqueItems:f}=e.constraints;if(void 0!==r&&t>=r&&n("ExclusiveMaximum",r),void 0!==i&&t<=i&&n("ExclusiveMinimum",i),void 0!==o&&t>o&&n("InclusiveMaximum",o),void 0!==a&&t<a&&n("InclusiveMinimum",a),void 0!==s&&t.length>s&&n("MaxItems",s),void 0!==l&&t.length>l&&n("MaxLength",l),void 0!==c&&t.length<c&&n("MinItems",c),void 0!==u&&t.length<u&&n("MinLength",u),void 0!==d&&t%d!=0&&n("MultipleOf",d),h){let e="string"==typeof h?new RegExp(h):h;("string"!=typeof t||null===t.match(e))&&n("Pattern",h)}f&&t.some((e,t,r)=>r.indexOf(e)!==t)&&n("UniqueItems",f)}}serialize(e,t,r,a={xml:{}}){let f={xml:{rootName:a.xml.rootName??"",includeRoot:a.xml.includeRoot??!1,xmlCharKey:a.xml.xmlCharKey??i.XML_CHARKEY}},p={},m=e.type.name;r||(r=e.serializedName),null!==m.match(/^Sequence$/i)&&(p=[]),e.isConstant&&(t=e.defaultValue);let{required:g,nullable:y}=e;if(g&&y&&void 0===t)throw Error(`${r} cannot be undefined.`);if(g&&!y&&null==t)throw Error(`${r} cannot be null or undefined.`);if(!g&&!1===y&&null===t)throw Error(`${r} cannot be null.`);return null==t||null!==m.match(/^any$/i)?p=t:null!==m.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?p=function(e,t,r){if(null!=r){if(null!==e.match(/^Number$/i)){if("number"!=typeof r)throw Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!=typeof r.valueOf())throw Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if(!("string"==typeof r.valueOf()&&(0,o.isValidUuid)(r)))throw Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!=typeof r)throw Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){let e=typeof r;if("string"!==e&&"function"!=typeof r.pipe&&"function"!=typeof r.tee&&!(r instanceof ArrayBuffer)&&!ArrayBuffer.isView(r)&&!(("function"==typeof Blob||"object"==typeof Blob)&&r instanceof Blob)&&"function"!==e)throw Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return r}(m,r,t):null!==m.match(/^Enum$/i)?p=function(e,t,r){if(!t)throw Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some(e=>"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r))throw Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}(r,e.type.allowedValues,t):null!==m.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?p=function(e,t,r){if(null!=t){if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=function(e){if(e)return"string"==typeof e.valueOf()&&(e=new Date(e)),Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)&&!(0,o.isDuration)(t))throw Error(`${r} must be a string in ISO 8601 format. Instead was "${t}".`)}return t}(m,t,r):null!==m.match(/^ByteArray$/i)?p=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw Error(`${e} must be of type Uint8Array.`);t=n.encodeByteArray(t)}return t}(r,t):null!==m.match(/^Base64Url$/i)?p=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw Error(`${e} must be of type Uint8Array.`);t=function(e){if(e){if(!(e instanceof Uint8Array))throw Error("Please provide an input of type Uint8Array for converting to Base64Url.");return(function(e,t){let r=e.length;for(;r-1>=0&&"="===e[r-1];)--r;return e.substr(0,r)})(n.encodeByteArray(e),0).replace(/\+/g,"-").replace(/\//g,"_")}}(t)}return t}(r,t):null!==m.match(/^Sequence$/i)?p=function(e,t,r,n,o,a){if(!Array.isArray(r))throw Error(`${n} must be of type Array.`);let s=t.type.element;if(!s||"object"!=typeof s)throw Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);"Composite"===s.type.name&&s.type.className&&(s=e.modelMappers[s.type.className]??s);let l=[];for(let t=0;t<r.length;t++){let c=e.serialize(s,r[t],n,a);if(o&&s.xmlNamespace){let e=s.xmlNamespacePrefix?`xmlns:${s.xmlNamespacePrefix}`:"xmlns";"Composite"===s.type.name?l[t]={...c}:(l[t]={},l[t][a.xml.xmlCharKey]=c),l[t][i.XML_ATTRKEY]={[e]:s.xmlNamespace}}else l[t]=c}return l}(this,e,t,r,!!this.isXML,f):null!==m.match(/^Dictionary$/i)?p=function(e,t,r,n,o,a){if("object"!=typeof r)throw Error(`${n} must be of type object.`);let s=t.type.value;if(!s||"object"!=typeof s)throw Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let l={};for(let t of Object.keys(r)){let i=e.serialize(s,r[t],n,a);l[t]=u(s,i,o,a)}if(o&&t.xmlNamespace){let e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";return l[i.XML_ATTRKEY]={[e]:t.xmlNamespace},l}return l}(this,e,t,r,!!this.isXML,f):null!==m.match(/^Composite$/i)&&(p=function(e,t,r,n,o,a){if(h(e,t)&&(t=d(e,t,r,"clientName")),null!=r){let d={},f=c(e,t,n);for(let l of Object.keys(f)){let c,p=f[l];if(p.readOnly)continue;let m=d;if(e.isXML)c=p.xmlIsWrapped?p.xmlName:p.xmlElementName||p.xmlName;else{let e=s(p.serializedName);for(let t of(c=e.pop(),e))null==m[t]&&(void 0!==r[l]&&null!==r[l]||void 0!==p.defaultValue)&&(m[t]={}),m=m[t]}if(null!=m){if(o&&t.xmlNamespace){let e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";m[i.XML_ATTRKEY]={...m[i.XML_ATTRKEY],[e]:t.xmlNamespace}}let s=""!==p.serializedName?n+"."+p.serializedName:n,d=r[l],f=h(e,t);f&&f.clientName===l&&null==d&&(d=t.serializedName);let g=e.serialize(p,d,s,a);if(void 0!==g&&null!=c){let e=u(p,g,o,a);o&&p.xmlIsAttribute?(m[i.XML_ATTRKEY]=m[i.XML_ATTRKEY]||{},m[i.XML_ATTRKEY][c]=g):o&&p.xmlIsWrapped?m[c]={[p.xmlElementName]:e}:m[c]=e}}}let p=function(e,t,r){let n=t.type.additionalProperties;if(!n&&t.type.className){let n=l(e,t,r);return n?.type.additionalProperties}return n}(e,t,n);if(p){let t=Object.keys(f);for(let i in r)t.every(e=>e!==i)&&(d[i]=e.serialize(p,r[i],n+'["'+i+'"]',a))}return d}return r}(this,e,t,r,!!this.isXML,f)),p}deserialize(e,t,r,o={xml:{}}){let a,l={xml:{rootName:o.xml.rootName??"",includeRoot:o.xml.includeRoot??!1,xmlCharKey:o.xml.xmlCharKey??i.XML_CHARKEY},ignoreUnknownProperties:o.ignoreUnknownProperties??!1};if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let u=e.type.name;if(r||(r=e.serializedName),null!==u.match(/^Composite$/i))a=function(e,t,r,n,o){let a=o.xml.xmlCharKey??i.XML_CHARKEY;h(e,t)&&(t=d(e,t,r,"serializedName"));let l=c(e,t,n),u={},f=[];for(let c of Object.keys(l)){let d=l[c],h=s(l[c].serializedName);f.push(h[0]);let{serializedName:p,xmlName:m,xmlElementName:g}=d,y=n;""!==p&&void 0!==p&&(y=n+"."+p);let _=d.headerCollectionPrefix;if(_){let t={};for(let n of Object.keys(r))n.startsWith(_)&&(t[n.substring(_.length)]=e.deserialize(d.type.value,r[n],y,o)),f.push(n);u[c]=t}else if(e.isXML)if(d.xmlIsAttribute&&r[i.XML_ATTRKEY])u[c]=e.deserialize(d,r[i.XML_ATTRKEY][m],y,o);else if(d.xmlIsMsText)void 0!==r[a]?u[c]=r[a]:"string"==typeof r&&(u[c]=r);else{let t=g||m||p;if(d.xmlIsWrapped){let t=r[m],n=t?.[g]??[];u[c]=e.deserialize(d,n,y,o),f.push(m)}else{let n=r[t];u[c]=e.deserialize(d,n,y,o),f.push(t)}}else{let n,i,a=r,s=0;for(let e of h){if(!a)break;s++,a=a[e]}null===a&&s<h.length&&(a=void 0),n=a;let f=t.type.polymorphicDiscriminator;if(f&&c===f.clientName&&null==n&&(n=t.serializedName),Array.isArray(r[c])&&""===l[c].serializedName){n=r[c];let t=e.deserialize(d,n,y,o);for(let[e,r]of Object.entries(u))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=r);u=t}else(void 0!==n||void 0!==d.defaultValue)&&(i=e.deserialize(d,n,y,o),u[c]=i)}}let p=t.type.additionalProperties;if(p){let t=e=>{for(let t in l)if(s(l[t].serializedName)[0]===e)return!1;return!0};for(let i in r)t(i)&&(u[i]=e.deserialize(p,r[i],n+'["'+i+'"]',o))}else if(r&&!o.ignoreUnknownProperties)for(let e of Object.keys(r))void 0!==u[e]||f.includes(e)||[i.XML_ATTRKEY,o.xml.xmlCharKey].includes(e)||(u[e]=r[e]);return u}(this,e,t,r,l);else{if(this.isXML){let e=l.xml.xmlCharKey;void 0!==t[i.XML_ATTRKEY]&&void 0!==t[e]&&(t=t[e])}null!==u.match(/^Number$/i)?isNaN(a=parseFloat(t))&&(a=t):null!==u.match(/^Boolean$/i)?a="true"===t||"false"!==t&&t:null!==u.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?a=t:null!==u.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?a=new Date(t):null!==u.match(/^UnixTime$/i)?a=function(e){if(e)return new Date(1e3*e)}(t):null!==u.match(/^ByteArray$/i)?a=n.decodeString(t):null!==u.match(/^Base64Url$/i)?a=function(e){if(e){if(e&&"string"!=typeof e.valueOf())throw Error("Please provide an input of type string for converting to Uint8Array");return e=e.replace(/-/g,"+").replace(/_/g,"/"),n.decodeString(e)}}(t):null!==u.match(/^Sequence$/i)?a=function(e,t,r,n,i){let o=t.type.element;if(!o||"object"!=typeof o)throw Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(r){Array.isArray(r)||(r=[r]),"Composite"===o.type.name&&o.type.className&&(o=e.modelMappers[o.type.className]??o);let t=[];for(let a=0;a<r.length;a++)t[a]=e.deserialize(o,r[a],`${n}[${a}]`,i);return t}return r}(this,e,t,r,l):null!==u.match(/^Dictionary$/i)&&(a=function(e,t,r,n,i){let o=t.type.value;if(!o||"object"!=typeof o)throw Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(r){let t={};for(let a of Object.keys(r))t[a]=e.deserialize(o,r[a],n,i);return t}return r}(this,e,t,r,l))}return e.isConstant&&(a=e.defaultValue),a}}function s(e){let t=[],r="";if(e)for(let n of e.split("."))"\\"===n.charAt(n.length-1)?r+=n.substr(0,n.length-1)+".":(r+=n,t.push(r),r="");return t}function l(e,t,r){let n=t.type.className;if(!n)throw Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[n]}function c(e,t,r){let n=t.type.modelProperties;if(!n){let i=l(e,t,r);if(!i)throw Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(!(n=i?.type.modelProperties))throw Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${t.type.className}" for object "${r}".`)}return n}function u(e,t,r,n){if(!r||!e.xmlNamespace)return t;let o={[e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns"]:e.xmlNamespace};if(["Composite"].includes(e.type.name))if(t[i.XML_ATTRKEY])return t;else{let e={...t};return e[i.XML_ATTRKEY]=o,e}let a={};return a[n.xml.xmlCharKey]=t,a[i.XML_ATTRKEY]=o,a}function d(e,t,r,n){let i=h(e,t);if(i){let o=i[n];if(o){"serializedName"===n&&(o=o.replace(/\\/gi,""));let i=r[o],a=t.type.uberParent??t.type.className;if("string"==typeof i&&a){let r=function(e,t,r){let n=[r];for(;n.length;){let r=n.shift(),i=t===r?t:r+"."+t;if(Object.prototype.hasOwnProperty.call(e,i))return e[i];for(let[t,i]of Object.entries(e))t.startsWith(r+".")&&i.type.uberParent===r&&i.type.className&&n.push(i.type.className)}}(e.modelMappers.discriminators,i,a);r&&(t=r)}}}return t}function h(e,t){return t.type.polymorphicDiscriminator||f(e,t.type.uberParent)||f(e,t.type.className)}function f(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}r.MapperTypeNames={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"}},29976,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.state=void 0,r.state={operationRequestMap:new WeakMap}},94150,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getOperationArgumentValueFromParameter=function e(t,r,n){let o,a=r.parameterPath,s=r.mapper;if("string"==typeof a&&(a=[a]),Array.isArray(a)){if(a.length>0)if(s.isConstant)o=s.defaultValue;else{let e=i(t,a);!e.propertyFound&&n&&(e=i(n,a));let r=!1;e.propertyFound||(r=s.required||"options"===a[0]&&2===a.length),o=r?s.defaultValue:e.propertyValue}}else for(let r in s.required&&(o={}),a){let i=s.type.modelProperties[r],l=e(t,{parameterPath:a[r],mapper:i},n);void 0!==l&&(o||(o={}),o[r]=l)}return o},r.getOperationRequestInfo=function e(t){if(o in t)return e(t[o]);let r=n.state.operationRequestMap.get(t);return r||(r={},n.state.operationRequestMap.set(t,r)),r};let n=e.r(29976);function i(e,t){let r={propertyFound:!1},n=0;for(;n<t.length;++n){let r=t[n];if(e&&r in e)e=e[r];else break}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}let o=Symbol.for("@azure/core-client original request")},15779,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializationPolicyName=void 0,r.deserializationPolicy=function(e={}){let t=e.expectedContentTypes?.json??s,i=e.expectedContentTypes?.xml??l,o=e.parseXML,a=e.serializerOptions,u={xml:{rootName:a?.xml.rootName??"",includeRoot:a?.xml.includeRoot??!1,xmlCharKey:a?.xml.xmlCharKey??n.XML_CHARKEY}};return{name:r.deserializationPolicyName,sendRequest:async(e,r)=>c(t,i,await r(e),u,o)}};let n=e.r(60416),i=e.r(38709),o=e.r(53973),a=e.r(94150),s=["application/json","text/json"],l=["application/xml","application/atom+xml"];async function c(e,t,r,n,s){let l=await u(e,t,r,n,s);if(!function(e){let t=e.request,r=(0,a.getOperationRequestInfo)(t),n=r?.shouldDeserialize;return void 0===n||("boolean"==typeof n?n:n(e))}(l))return l;let c=(0,a.getOperationRequestInfo)(l.request),d=c?.operationSpec;if(!d||!d.responses)return l;let h=function(e){let t,r=e.request,n=(0,a.getOperationRequestInfo)(r),i=n?.operationSpec;return i&&(t=n?.operationResponseGetter?n?.operationResponseGetter(i,e):i.responses[e.status]),t}(l),{error:f,shouldReturnResponse:p}=function(e,t,r,n){let a=200<=e.status&&e.status<300;if(!function(e){let t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?!!r:a){if(!r)return{error:null,shouldReturnResponse:!1};else if(!r.isError)return{error:null,shouldReturnResponse:!1}}let s=r??t.responses.default,l=e.request.streamResponseStatusCodes?.has(e.status)?`Unexpected status code: ${e.status}`:e.bodyAsText,c=new i.RestError(l,{statusCode:e.status,request:e.request,response:e});if(!s&&!(e.parsedBody?.error?.code&&e.parsedBody?.error?.message))throw c;let u=s?.bodyMapper,d=s?.headersMapper;try{if(e.parsedBody){let r,i=e.parsedBody;if(u){let e=i;if(t.isXML&&u.type.name===o.MapperTypeNames.Sequence){e=[];let t=u.xmlElementName;"object"==typeof i&&t&&(e=i[t])}r=t.serializer.deserialize(u,e,"error.response.parsedBody",n)}let a=i.error||r||i;c.code=a.code,a.message&&(c.message=a.message),u&&(c.response.parsedBody=r)}e.headers&&d&&(c.response.parsedHeaders=t.serializer.deserialize(d,e.headers.toJSON(),"operationRes.parsedHeaders"))}catch(t){c.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:c,shouldReturnResponse:!1}}(l,d,h,n);if(f)throw f;if(p)return l;if(h){if(h.bodyMapper){let e=l.parsedBody;d.isXML&&h.bodyMapper.type.name===o.MapperTypeNames.Sequence&&(e="object"==typeof e?e[h.bodyMapper.xmlElementName]:[]);try{l.parsedBody=d.serializer.deserialize(h.bodyMapper,e,"operationRes.parsedBody",n)}catch(e){throw new i.RestError(`Error ${e} occurred in deserializing the responseBody - ${l.bodyAsText}`,{statusCode:l.status,request:l.request,response:l})}}else"HEAD"===d.httpMethod&&(l.parsedBody=r.status>=200&&r.status<300);h.headersMapper&&(l.parsedHeaders=d.serializer.deserialize(h.headersMapper,l.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return l}async function u(e,t,r,n,o){if(!r.request.streamResponseStatusCodes?.has(r.status)&&r.bodyAsText){let a=r.bodyAsText,s=r.headers.get("Content-Type")||"",l=s?s.split(";").map(e=>e.toLowerCase()):[];try{if(0===l.length||l.some(t=>-1!==e.indexOf(t)))r.parsedBody=JSON.parse(a);else if(l.some(e=>-1!==t.indexOf(e))){if(!o)throw Error("Parsing XML not supported.");r.parsedBody=await o(a,n.xml)}}catch(n){let e=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,t=n.code||i.RestError.PARSE_ERROR;throw new i.RestError(e,{code:t,statusCode:r.status,request:r.request,response:r})}}return r}r.deserializationPolicyName="deserializationPolicy"},21504,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStreamingResponseStatusCodes=function(e){let t=new Set;for(let r in e.responses){let i=e.responses[r];i.bodyMapper&&i.bodyMapper.type.name===n.MapperTypeNames.Stream&&t.add(Number(r))}return t},r.getPathStringFromParameter=function(e){let{parameterPath:t,mapper:r}=e;return"string"==typeof t?t:Array.isArray(t)?t.join("."):r.serializedName};let n=e.r(53973)},9823,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializationPolicyName=void 0,r.serializationPolicy=function(e={}){let t=e.stringifyXML;return{name:r.serializationPolicyName,async sendRequest(e,r){let n=(0,i.getOperationRequestInfo)(e),o=n?.operationSpec,a=n?.operationArguments;return o&&a&&(s(e,a,o),l(e,a,o,t)),r(e)}}},r.serializeHeaders=s,r.serializeRequestBody=l;let n=e.r(60416),i=e.r(94150),o=e.r(53973),a=e.r(21504);function s(e,t,r){if(r.headerParameters)for(let n of r.headerParameters){let o=(0,i.getOperationArgumentValueFromParameter)(t,n);if(null!=o||n.mapper.required){o=r.serializer.serialize(n.mapper,o,(0,a.getPathStringFromParameter)(n));let t=n.mapper.headerCollectionPrefix;if(t)for(let r of Object.keys(o))e.headers.set(t+r,o[r]);else e.headers.set(n.mapper.serializedName||(0,a.getPathStringFromParameter)(n),o)}}let n=t.options?.requestOptions?.customHeaders;if(n)for(let t of Object.keys(n))e.headers.set(t,n[t])}function l(e,t,r,s=function(){throw Error("XML serialization unsupported!")}){let c=t.options?.serializerOptions,u={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??n.XML_CHARKEY}},d=u.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){e.body=(0,i.getOperationArgumentValueFromParameter)(t,r.requestBody);let l=r.requestBody.mapper,{required:c,serializedName:h,xmlName:f,xmlElementName:p,xmlNamespace:m,xmlNamespacePrefix:g,nullable:y}=l,_=l.type.name;try{if(void 0!==e.body&&null!==e.body||y&&null===e.body||c){let t=(0,a.getPathStringFromParameter)(r.requestBody);e.body=r.serializer.serialize(l,e.body,t,u);let i=_===o.MapperTypeNames.Stream;if(r.isXML){let t=g?`xmlns:${g}`:"xmlns",r=function(e,t,r,i,o){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){let r={};return r[o.xml.xmlCharKey]=i,r[n.XML_ATTRKEY]={[t]:e},r}return i}(m,t,_,e.body,u);_===o.MapperTypeNames.Sequence?e.body=s(function(e,t,r,i){if(Array.isArray(e)||(e=[e]),!r||!i)return{[t]:e};let o={[t]:e};return o[n.XML_ATTRKEY]={[r]:i},o}(r,p||f||h,t,m),{rootName:f||h,xmlCharKey:d}):i||(e.body=s(r,{rootName:f||h,xmlCharKey:d}))}else{if(_===o.MapperTypeNames.String&&(r.contentType?.match("text/plain")||"text"===r.mediaType))return;i||(e.body=JSON.stringify(e.body))}}}catch(e){throw Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(h,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0)for(let n of(e.formData={},r.formDataParameters)){let o=(0,i.getOperationArgumentValueFromParameter)(t,n);if(null!=o){let t=n.mapper.serializedName||(0,a.getPathStringFromParameter)(n);e.formData[t]=r.serializer.serialize(n.mapper,o,(0,a.getPathStringFromParameter)(n),u)}}}r.serializationPolicyName="serializationPolicy"},46756,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createClientPipeline=function(e={}){let t=(0,i.createPipelineFromOptions)(e??{});return e.credentialOptions&&t.addPolicy((0,i.bearerTokenAuthenticationPolicy)({credential:e.credentialOptions.credential,scopes:e.credentialOptions.credentialScopes})),t.addPolicy((0,o.serializationPolicy)(e.serializationOptions),{phase:"Serialize"}),t.addPolicy((0,n.deserializationPolicy)(e.deserializationOptions),{phase:"Deserialize"}),t};let n=e.r(15779),i=e.r(38709),o=e.r(9823)},56314,(e,t,r)=>{"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),r.getCachedDefaultHttpClient=function(){return n||(n=(0,i.createDefaultHttpClient)()),n};let i=e.r(38709)},10360,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRequestUrl=function(e,t,r,l){let c=function(e,t,r){let o=new Map;if(e.urlParameters?.length)for(let a of e.urlParameters){let s=(0,n.getOperationArgumentValueFromParameter)(t,a,r),l=(0,i.getPathStringFromParameter)(a);s=e.serializer.serialize(a.mapper,s,l),a.skipEncoding||(s=encodeURIComponent(s)),o.set(`{${a.mapper.serializedName||l}}`,s)}return o}(t,r,l),u=!1,d=a(e,c);if(t.path){let e=a(t.path,c);"/{nextLink}"===t.path&&e.startsWith("/")&&(e=e.substring(1)),e.includes("://")?(d=e,u=!0):d=function(e,t){if(!t)return e;let r=new URL(e),n=r.pathname;n.endsWith("/")||(n=`${n}/`),t.startsWith("/")&&(t=t.substring(1));let i=t.indexOf("?");if(-1!==i){let e=t.substring(0,i),o=t.substring(i+1);n+=e,o&&(r.search=r.search?`${r.search}&${o}`:o)}else n+=t;return r.pathname=n,r.toString()}(d,e)}let{queryParams:h,sequenceParams:f}=function(e,t,r){let a=new Map,s=new Set;if(e.queryParameters?.length)for(let l of e.queryParameters){"Sequence"===l.mapper.type.name&&l.mapper.serializedName&&s.add(l.mapper.serializedName);let c=(0,n.getOperationArgumentValueFromParameter)(t,l,r);if(null!=c||l.mapper.required){c=e.serializer.serialize(l.mapper,c,(0,i.getPathStringFromParameter)(l));let t=l.collectionFormat?o[l.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(e=>null==e?"":e)),"Multi"===l.collectionFormat&&0===c.length)continue;Array.isArray(c)&&("SSV"===l.collectionFormat||"TSV"===l.collectionFormat)&&(c=c.join(t)),l.skipEncoding||(c=Array.isArray(c)?c.map(e=>encodeURIComponent(e)):encodeURIComponent(c)),Array.isArray(c)&&("CSV"===l.collectionFormat||"Pipes"===l.collectionFormat)&&(c=c.join(t)),a.set(l.mapper.serializedName||(0,i.getPathStringFromParameter)(l),c)}}return{queryParams:a,sequenceParams:s}}(t,r,l);return s(d,h,f,u)},r.appendQueryParams=s;let n=e.r(94150),i=e.r(21504),o={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function a(e,t){let r=e;for(let[e,n]of t)r=r.split(e).join(n);return r}function s(e,t,r,n=!1){if(0===t.size)return e;let i=new URL(e),o=function(e){let t=new Map;if(!e||"?"!==e[0])return t;for(let r of(e=e.slice(1)).split("&")){let[e,n]=r.split("=",2),i=t.get(e);i?Array.isArray(i)?i.push(n):t.set(e,[i,n]):t.set(e,n)}return t}(i.search);for(let[e,i]of t){let t=o.get(e);if(Array.isArray(t))if(Array.isArray(i)){t.push(...i);let r=new Set(t);o.set(e,Array.from(r))}else t.push(i);else t?(Array.isArray(i)?i.unshift(t):r.has(e)&&o.set(e,[t,i]),n||o.set(e,i)):o.set(e,i)}let a=[];for(let[e,t]of o)if("string"==typeof t)a.push(`${e}=${t}`);else if(Array.isArray(t))for(let r of t)a.push(`${e}=${r}`);else a.push(`${e}=${t}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}},62561,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logger=void 0,r.logger=(0,e.r(9491).createClientLogger)("core-client")},58701,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ServiceClient=void 0;let n=e.r(38709),i=e.r(46756),o=e.r(23962),a=e.r(56314),s=e.r(94150),l=e.r(10360),c=e.r(21504),u=e.r(62561);r.ServiceClient=class{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(e={}){if(this._requestContentType=e.requestContentType,this._endpoint=e.endpoint??e.baseUri,e.baseUri&&u.logger.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(0,a.getCachedDefaultHttpClient)(),this.pipeline=e.pipeline||function(e){let t=function(e){if(e.credentialScopes)return e.credentialScopes;if(e.endpoint)return`${e.endpoint}/.default`;if(e.baseUri)return`${e.baseUri}/.default`;if(e.credential&&!e.credentialScopes)throw Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(e),r=e.credential&&t?{credentialScopes:t,credential:e.credential}:void 0;return(0,i.createClientPipeline)({...e,credentialOptions:r})}(e),e.additionalPolicies?.length)for(let{policy:t,position:r}of e.additionalPolicies){let e="perRetry"===r?"Sign":void 0;this.pipeline.addPolicy(t,{afterPhase:e})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){let r=t.baseUrl||this._endpoint;if(!r)throw Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=(0,l.getRequestUrl)(r,t,e,this),a=(0,n.createPipelineRequest)({url:i});a.method=t.httpMethod;let u=(0,s.getOperationRequestInfo)(a);u.operationSpec=t,u.operationArguments=e;let d=t.contentType||this._requestContentType;d&&t.requestBody&&a.headers.set("Content-Type",d);let h=e.options;if(h){let e=h.requestOptions;e&&(e.timeout&&(a.timeout=e.timeout),e.onUploadProgress&&(a.onUploadProgress=e.onUploadProgress),e.onDownloadProgress&&(a.onDownloadProgress=e.onDownloadProgress),void 0!==e.shouldDeserialize&&(u.shouldDeserialize=e.shouldDeserialize),e.allowInsecureConnection&&(a.allowInsecureConnection=!0)),h.abortSignal&&(a.abortSignal=h.abortSignal),h.tracingOptions&&(a.tracingOptions=h.tracingOptions)}this._allowInsecureConnection&&(a.allowInsecureConnection=!0),void 0===a.streamResponseStatusCodes&&(a.streamResponseStatusCodes=(0,c.getStreamingResponseStatusCodes)(t));try{let e=await this.sendRequest(a),r=(0,o.flattenResponse)(e,t.responses[e.status]);return h?.onResponse&&h.onResponse(e,r),r}catch(e){if("object"==typeof e&&e?.response){let r=e.response,n=(0,o.flattenResponse)(r,t.responses[e.statusCode]||t.responses.default);e.details=n,h?.onResponse&&h.onResponse(r,n,e)}throw e}}}},10537,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseCAEChallenge=o,r.authorizeRequestOnClaimChallenge=a;let n=e.r(62561),i=e.r(99649);function o(e){return`, ${e.trim()}`.split(", Bearer ").filter(e=>e).map(e=>`${e.trim()}, `.split('", ').filter(e=>e).map(e=>(([e,t])=>({[e]:t}))(e.trim().split('="'))).reduce((e,t)=>({...e,...t}),{}))}async function a(e){let{scopes:t,response:r}=e,a=e.logger||n.logger,s=r.headers.get("WWW-Authenticate");if(!s)return a.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let l=(o(s)||[]).find(e=>e.claims);if(!l)return a.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let c=await e.getAccessToken(l.scope?[l.scope]:t,{claims:(0,i.decodeStringToString)(l.claims)});return!!c&&(e.request.headers.set("Authorization",`${c.tokenType??"Bearer"} ${c.token}`),!0)}},29542,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.authorizeRequestOnTenantChallenge=void 0;let n={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};r.authorizeRequestOnTenantChallenge=async e=>{let t=function(e){return{abortSignal:e.abortSignal,requestOptions:{timeout:e.timeout},tracingOptions:e.tracingOptions}}(e.request),r=function(e){let t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t}(e.response);if(r){let i=function(e){let t=e.slice(7);return`${t.trim()} `.split(" ").filter(e=>e).map(e=>(([e,t])=>({[e]:t}))(e.trim().split("="))).reduce((e,t)=>({...e,...t}),{})}(r),o=function(e,t){if(!t.resource_id)return e.scopes;let r=new URL(t.resource_id);r.pathname=n.DefaultScope;let i=r.toString();return"https://disk.azure.com/.default"===i&&(i="https://disk.azure.com//.default"),[i]}(e,i),a=function(e){let t=new URL(e.authorization_uri).pathname.split("/")[1];if(t&&/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(t))return t}(i);if(!a)return!1;let s=await e.getAccessToken(o,{...t,tenantId:a});return!!s&&(e.request.headers.set(n.HeaderConstants.AUTHORIZATION,`${s.tokenType??"Bearer"} ${s.token}`),!0)}return!1}},34415,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.authorizeRequestOnTenantChallenge=r.authorizeRequestOnClaimChallenge=r.serializationPolicyName=r.serializationPolicy=r.deserializationPolicyName=r.deserializationPolicy=r.XML_CHARKEY=r.XML_ATTRKEY=r.createClientPipeline=r.ServiceClient=r.MapperTypeNames=r.createSerializer=void 0;var n=e.r(53973);Object.defineProperty(r,"createSerializer",{enumerable:!0,get:function(){return n.createSerializer}}),Object.defineProperty(r,"MapperTypeNames",{enumerable:!0,get:function(){return n.MapperTypeNames}});var i=e.r(58701);Object.defineProperty(r,"ServiceClient",{enumerable:!0,get:function(){return i.ServiceClient}});var o=e.r(46756);Object.defineProperty(r,"createClientPipeline",{enumerable:!0,get:function(){return o.createClientPipeline}});var a=e.r(60416);Object.defineProperty(r,"XML_ATTRKEY",{enumerable:!0,get:function(){return a.XML_ATTRKEY}}),Object.defineProperty(r,"XML_CHARKEY",{enumerable:!0,get:function(){return a.XML_CHARKEY}});var s=e.r(15779);Object.defineProperty(r,"deserializationPolicy",{enumerable:!0,get:function(){return s.deserializationPolicy}}),Object.defineProperty(r,"deserializationPolicyName",{enumerable:!0,get:function(){return s.deserializationPolicyName}});var l=e.r(9823);Object.defineProperty(r,"serializationPolicy",{enumerable:!0,get:function(){return l.serializationPolicy}}),Object.defineProperty(r,"serializationPolicyName",{enumerable:!0,get:function(){return l.serializationPolicyName}});var c=e.r(10537);Object.defineProperty(r,"authorizeRequestOnClaimChallenge",{enumerable:!0,get:function(){return c.authorizeRequestOnClaimChallenge}});var u=e.r(29542);Object.defineProperty(r,"authorizeRequestOnTenantChallenge",{enumerable:!0,get:function(){return u.authorizeRequestOnTenantChallenge}})},28635,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIdentityTokenEndpointSuffix=function(e){return"adfs"===e?"oauth2/token":"oauth2/v2.0/token"}},30820,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serviceFabricErrorMessage=void 0,r.mapScopesToResource=function(e){let t="";if(Array.isArray(e)){if(1!==e.length)return;t=e[0]}else"string"==typeof e&&(t=e);return t.endsWith(n)?t.substr(0,t.lastIndexOf(n)):t},r.parseExpirationTimestamp=function(e){if("number"==typeof e.expires_on)return 1e3*e.expires_on;if("string"==typeof e.expires_on){let t=+e.expires_on;if(!isNaN(t))return 1e3*t;let r=Date.parse(e.expires_on);if(!isNaN(r))return r}if("number"==typeof e.expires_in)return Date.now()+1e3*e.expires_in;throw Error(`Failed to parse token expiration from body. expires_in="${e.expires_in}", expires_on="${e.expires_on}"`)},r.parseRefreshTimestamp=function(e){if(e.refresh_on){if("number"==typeof e.refresh_on)return 1e3*e.refresh_on;if("string"==typeof e.refresh_on){let t=+e.refresh_on;if(!isNaN(t))return 1e3*t;let r=Date.parse(e.refresh_on);if(!isNaN(r))return r}throw Error(`Failed to parse refresh_on from body. refresh_on="${e.refresh_on}"`)}};let n="/.default";r.serviceFabricErrorMessage="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information"},48855,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IdentityClient=void 0,r.getIdentityClientAuthorityHost=f;let n=e.r(34415),i=e.r(96555),o=e.r(38709),a=e.r(12304),s=e.r(28635),l=e.r(59766),c=e.r(52951),u=e.r(8317),d=e.r(30820),h="noCorrelationId";function f(e){let t=e?.authorityHost;return i.isNode&&(t=t??process.env.AZURE_AUTHORITY_HOST),t??l.DefaultAuthorityHost}class p extends n.ServiceClient{authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(e){let t=`azsdk-js-identity/${l.SDK_VERSION}`,r=e?.userAgentOptions?.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${t}`:`${t}`,n=f(e);if(!n.startsWith("https:"))throw Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...e,userAgentOptions:{userAgentPrefix:r},baseUri:n}),this.authorityHost=n,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=e?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...e},e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){u.logger.info(`IdentityClient: sending token request to [${e.url}]`);let t=await this.sendRequest(e);if(t.bodyAsText&&(200===t.status||201===t.status)){let r=JSON.parse(t.bodyAsText);if(!r.access_token)return null;this.logIdentifiers(t);let n={accessToken:{token:r.access_token,expiresOnTimestamp:(0,d.parseExpirationTimestamp)(r),refreshAfterTimestamp:(0,d.parseRefreshTimestamp)(r),tokenType:"Bearer"},refreshToken:r.refresh_token};return u.logger.info(`IdentityClient: [${e.url}] token acquired, expires on ${n.accessToken.expiresOnTimestamp}`),n}{let e=new a.AuthenticationError(t.status,t.bodyAsText);throw u.logger.warning(`IdentityClient: authentication error. HTTP status: ${t.status}, ${e.errorResponse.errorDescription}`),e}}async refreshAccessToken(e,t,r,n,i,l={}){if(void 0===n)return null;u.logger.info(`IdentityClient: refreshing access token with client ID: ${t}, scopes: ${r} started`);let d={grant_type:"refresh_token",client_id:t,refresh_token:n,scope:r};void 0!==i&&(d.client_secret=i);let h=new URLSearchParams(d);return c.tracingClient.withSpan("IdentityClient.refreshAccessToken",l,async r=>{try{let n=(0,s.getIdentityTokenEndpointSuffix)(e),i=(0,o.createPipelineRequest)({url:`${this.authorityHost}/${e}/${n}`,method:"POST",body:h.toString(),abortSignal:l.abortSignal,headers:(0,o.createHttpHeaders)({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:r.tracingOptions}),a=await this.sendTokenRequest(i);return u.logger.info(`IdentityClient: refreshed token for client ID: ${t}`),a}catch(e){if(e.name===a.AuthenticationErrorName&&"interaction_required"===e.errorResponse.error)return u.logger.info(`IdentityClient: interaction required for client ID: ${t}`),null;throw u.logger.warning(`IdentityClient: failed refreshing token for client ID: ${t}: ${e}`),e}})}generateAbortSignal(e){let t=new AbortController,r=this.abortControllers.get(e)||[];r.push(t),this.abortControllers.set(e,r);let n=t.signal.onabort;return t.signal.onabort=(...r)=>{this.abortControllers.set(e,void 0),n&&n.apply(t.signal,r)},t.signal}abortRequests(e){let t=e||h,r=[...this.abortControllers.get(t)||[],...this.abortControllers.get(h)||[]];if(r.length){for(let e of r)e.abort();this.abortControllers.set(t,void 0)}}getCorrelationId(e){let t=e?.body?.split("&").map(e=>e.split("=")).find(([e])=>"client-request-id"===e);return t&&t.length&&t[1]||h}async sendGetRequestAsync(e,t){let r=(0,o.createPipelineRequest)({url:e,method:"GET",body:t?.body,allowInsecureConnection:this.allowInsecureConnection,headers:(0,o.createHttpHeaders)(t?.headers),abortSignal:this.generateAbortSignal(h)}),n=await this.sendRequest(r);return this.logIdentifiers(n),{body:n.bodyAsText?JSON.parse(n.bodyAsText):void 0,headers:n.headers.toJSON(),status:n.status}}async sendPostRequestAsync(e,t){let r=(0,o.createPipelineRequest)({url:e,method:"POST",body:t?.body,headers:(0,o.createHttpHeaders)(t?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(t))}),n=await this.sendRequest(r);return this.logIdentifiers(n),{body:n.bodyAsText?JSON.parse(n.bodyAsText):void 0,headers:n.headers.toJSON(),status:n.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(this.allowLoggingAccountIdentifiers&&e.bodyAsText)try{let t=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!t)return;let r=t.split(".")[1],{appid:n,upn:i,tid:o,oid:a}=JSON.parse(Buffer.from(r,"base64").toString("utf8"));u.logger.info(`[Authenticated account] Client ID: ${n}. Tenant ID: ${o}. User Principal Name: ${i||"No User Principal Name available"}. Object ID (user): ${a}`)}catch(e){u.logger.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",e.message)}}}r.IdentityClient=p},86650,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.RegionalAuthority=void 0,r.calculateRegionalAuthority=function(e){let t=e;return(void 0===t&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(t=process.env.AZURE_REGIONAL_AUTHORITY_NAME),t===n.AutoDiscoverRegion)?"AUTO_DISCOVER":t},function(e){e.AutoDiscoverRegion="AutoDiscoverRegion",e.USWest="westus",e.USWest2="westus2",e.USCentral="centralus",e.USEast="eastus",e.USEast2="eastus2",e.USNorthCentral="northcentralus",e.USSouthCentral="southcentralus",e.USWestCentral="westcentralus",e.CanadaCentral="canadacentral",e.CanadaEast="canadaeast",e.BrazilSouth="brazilsouth",e.EuropeNorth="northeurope",e.EuropeWest="westeurope",e.UKSouth="uksouth",e.UKWest="ukwest",e.FranceCentral="francecentral",e.FranceSouth="francesouth",e.SwitzerlandNorth="switzerlandnorth",e.SwitzerlandWest="switzerlandwest",e.GermanyNorth="germanynorth",e.GermanyWestCentral="germanywestcentral",e.NorwayWest="norwaywest",e.NorwayEast="norwayeast",e.AsiaEast="eastasia",e.AsiaSouthEast="southeastasia",e.JapanEast="japaneast",e.JapanWest="japanwest",e.AustraliaEast="australiaeast",e.AustraliaSouthEast="australiasoutheast",e.AustraliaCentral="australiacentral",e.AustraliaCentral2="australiacentral2",e.IndiaCentral="centralindia",e.IndiaSouth="southindia",e.IndiaWest="westindia",e.KoreaSouth="koreasouth",e.KoreaCentral="koreacentral",e.UAECentral="uaecentral",e.UAENorth="uaenorth",e.SouthAfricaNorth="southafricanorth",e.SouthAfricaWest="southafricawest",e.ChinaNorth="chinanorth",e.ChinaEast="chinaeast",e.ChinaNorth2="chinanorth2",e.ChinaEast2="chinaeast2",e.GermanyCentral="germanycentral",e.GermanyNorthEast="germanynortheast",e.GovernmentUSVirginia="usgovvirginia",e.GovernmentUSIowa="usgoviowa",e.GovernmentUSArizona="usgovarizona",e.GovernmentUSTexas="usgovtexas",e.GovernmentUSDodEast="usdodeast",e.GovernmentUSDodCentral="usdodcentral"}(n||(r.RegionalAuthority=n={}))},12935,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processMultiTenantRequest=function(e,t,r=[],i){let o;if(o=process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||"adfs"===e?e:t?.tenantId??e,e&&o!==e&&!r.includes("*")&&!r.some(e=>0===e.localeCompare(o))){let e=`The current credential is not configured to acquire tokens for tenant ${o}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`;throw i?.info(e),new n.CredentialUnavailableError(e)}return o};let n=e.r(12304)},3655,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processMultiTenantRequest=void 0,r.checkTenantId=a,r.resolveTenantId=function(e,t,r){return t?(a(e,t),t):(r||(r=n.DeveloperSignOnClientId),r!==n.DeveloperSignOnClientId)?"common":"organizations"},r.resolveAdditionallyAllowedTenantIds=function(e){return e&&0!==e.length?e.includes("*")?n.ALL_TENANTS:e:[]};let n=e.r(59766),i=e.r(8317);var o=e.r(12935);function a(e,t){if(!t.match(/^[0-9a-zA-Z-.]+$/)){let t=Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw e.info((0,i.formatError)("",t)),t}}Object.defineProperty(r,"processMultiTenantRequest",{enumerable:!0,get:function(){return o.processMultiTenantRequest}})},29519,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateMsalConfiguration=f,r.createMsalClient=function(t,r,l={}){let u={msalConfig:f(t,r,l),cachedAccount:l.authenticationRecord?(0,a.publicToMsal)(l.authenticationRecord):null,pluginConfiguration:o.msalPlugins.generatePluginConfiguration(l),logger:l.logger??h},d=new Map;async function p(e={}){let t=e.enableCae?"CAE":"default",r=d.get(t);if(r)return u.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),r;u.logger.getToken.info(`Creating new PublicClientApplication with CAE ${e.enableCae?"enabled":"disabled"}.`);let i=e.enableCae?u.pluginConfiguration.cache.cachePluginCae:u.pluginConfiguration.cache.cachePlugin;return u.msalConfig.auth.clientCapabilities=e.enableCae?["cp1"]:void 0,r=new n.PublicClientApplication({...u.msalConfig,broker:{nativeBrokerPlugin:u.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await i}}),d.set(t,r),r}let m=new Map;async function g(e={}){let t=e.enableCae?"CAE":"default",r=m.get(t);if(r)return u.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),r;u.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${e.enableCae?"enabled":"disabled"}.`);let i=e.enableCae?u.pluginConfiguration.cache.cachePluginCae:u.pluginConfiguration.cache.cachePlugin;return u.msalConfig.auth.clientCapabilities=e.enableCae?["cp1"]:void 0,r=new n.ConfidentialClientApplication({...u.msalConfig,broker:{nativeBrokerPlugin:u.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await i}}),m.set(t,r),r}async function y(e,t,r={}){if(null===u.cachedAccount)throw u.logger.getToken.info("No cached account found in local state."),new s.AuthenticationRequiredError({scopes:t});r.claims&&(u.cachedClaims=r.claims);let n={account:u.cachedAccount,scopes:t,claims:u.cachedClaims};u.pluginConfiguration.broker.isEnabled&&(n.tokenQueryParameters||={},u.pluginConfiguration.broker.enableMsaPassthrough&&(n.tokenQueryParameters.msal_request_type="consumer_passthrough")),r.proofOfPossessionOptions&&(n.shrNonce=r.proofOfPossessionOptions.nonce,n.authenticationScheme="pop",n.resourceRequestMethod=r.proofOfPossessionOptions.resourceRequestMethod,n.resourceRequestUri=r.proofOfPossessionOptions.resourceRequestUrl),u.logger.getToken.info("Attempting to acquire token silently");try{return await e.acquireTokenSilent(n)}catch(e){throw(0,a.handleMsalError)(t,e,r)}}function _(e){return e?.tenantId?(0,a.getAuthority)(e.tenantId,(0,a.getAuthorityHost)(l)):u.msalConfig.auth.authority}async function E(e,t,r,n){let o=null;try{o=await y(e,t,r)}catch(e){if("AuthenticationRequiredError"!==e.name)throw e;if(r.disableAutomaticAuthentication)throw new s.AuthenticationRequiredError({scopes:t,getTokenOptions:r,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(null===o)try{o=await n()}catch(e){throw(0,a.handleMsalError)(t,e,r)}return(0,a.ensureValidMsalToken)(t,o,r),u.cachedAccount=o?.account??null,u.logger.getToken.info((0,i.formatSuccess)(t)),{token:o.accessToken,expiresOnTimestamp:o.expiresOn.getTime(),refreshAfterTimestamp:o.refreshOn?.getTime(),tokenType:o.tokenType}}function T(t,r){return{openBrowser:async t=>{let r=await e.A(95942);await r.default(t,{newInstance:!0})},scopes:t,authority:_(r),claims:r?.claims,loginHint:r?.loginHint,errorTemplate:r?.browserCustomizationOptions?.errorMessage,successTemplate:r?.browserCustomizationOptions?.successMessage,prompt:r?.loginHint?"login":"select_account"}}async function b(e,t,r={}){h.verbose("Authentication will resume through the broker");let n=await p(r),i=T(e,r);u.pluginConfiguration.broker.parentWindowHandle?i.windowHandle=Buffer.from(u.pluginConfiguration.broker.parentWindowHandle):h.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),u.pluginConfiguration.broker.enableMsaPassthrough&&((i.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),t?(i.prompt="none",h.verbose("Attempting broker authentication using the default broker account")):h.verbose("Attempting broker authentication without the default broker account"),r.proofOfPossessionOptions&&(i.shrNonce=r.proofOfPossessionOptions.nonce,i.authenticationScheme="pop",i.resourceRequestMethod=r.proofOfPossessionOptions.resourceRequestMethod,i.resourceRequestUri=r.proofOfPossessionOptions.resourceRequestUrl);try{return await n.acquireTokenInteractive(i)}catch(n){if(h.verbose(`Failed to authenticate through the broker: ${n.message}`),r.disableAutomaticAuthentication)throw new s.AuthenticationRequiredError({scopes:e,getTokenOptions:r,message:"Cannot silently authenticate with default broker account."});if(t)return b(e,!1,r);throw n}}return{getActiveAccount:function(){if(u.cachedAccount)return(0,a.msalToPublic)(t,u.cachedAccount)},getBrokeredToken:async function(e,t,r={}){h.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${t}`);let n=await b(e,t,r);return(0,a.ensureValidMsalToken)(e,n,r),u.cachedAccount=n?.account??null,u.logger.getToken.info((0,i.formatSuccess)(e)),{token:n.accessToken,expiresOnTimestamp:n.expiresOn.getTime(),refreshAfterTimestamp:n.refreshOn?.getTime(),tokenType:n.tokenType}},getTokenByClientSecret:async function e(t,r,n={}){u.logger.getToken.info("Attempting to acquire token using client secret"),u.msalConfig.auth.clientSecret=r;let o=await g(n);try{let e=await o.acquireTokenByClientCredential({scopes:t,authority:_(n),azureRegion:(0,c.calculateRegionalAuthority)(),claims:n?.claims});return(0,a.ensureValidMsalToken)(t,e,n),u.logger.getToken.info((0,i.formatSuccess)(t)),{token:e.accessToken,expiresOnTimestamp:e.expiresOn.getTime(),refreshAfterTimestamp:e.refreshOn?.getTime(),tokenType:e.tokenType}}catch(e){throw(0,a.handleMsalError)(t,e,n)}},getTokenByClientAssertion:async function e(t,r,n={}){u.logger.getToken.info("Attempting to acquire token using client assertion"),u.msalConfig.auth.clientAssertion=r;let o=await g(n);try{let e=await o.acquireTokenByClientCredential({scopes:t,authority:_(n),azureRegion:(0,c.calculateRegionalAuthority)(),claims:n?.claims,clientAssertion:r});return(0,a.ensureValidMsalToken)(t,e,n),u.logger.getToken.info((0,i.formatSuccess)(t)),{token:e.accessToken,expiresOnTimestamp:e.expiresOn.getTime(),refreshAfterTimestamp:e.refreshOn?.getTime(),tokenType:e.tokenType}}catch(e){throw(0,a.handleMsalError)(t,e,n)}},getTokenByClientCertificate:async function e(t,r,n={}){u.logger.getToken.info("Attempting to acquire token using client certificate"),u.msalConfig.auth.clientCertificate=r;let o=await g(n);try{let e=await o.acquireTokenByClientCredential({scopes:t,authority:_(n),azureRegion:(0,c.calculateRegionalAuthority)(),claims:n?.claims});return(0,a.ensureValidMsalToken)(t,e,n),u.logger.getToken.info((0,i.formatSuccess)(t)),{token:e.accessToken,expiresOnTimestamp:e.expiresOn.getTime(),refreshAfterTimestamp:e.refreshOn?.getTime(),tokenType:e.tokenType}}catch(e){throw(0,a.handleMsalError)(t,e,n)}},getTokenByDeviceCode:async function e(t,r,n={}){u.logger.getToken.info("Attempting to acquire token using device code");let i=await p(n);return E(i,t,n,()=>{let e={scopes:t,cancel:n?.abortSignal?.aborted??!1,deviceCodeCallback:r,authority:_(n),claims:n?.claims},o=i.acquireTokenByDeviceCode(e);return n.abortSignal&&n.abortSignal.addEventListener("abort",()=>{e.cancel=!0}),o})},getTokenByUsernamePassword:async function e(t,r,n,i={}){u.logger.getToken.info("Attempting to acquire token using username and password");let o=await p(i);return E(o,t,i,()=>{let e={scopes:t,username:r,password:n,authority:_(i),claims:i?.claims};return o.acquireTokenByUsernamePassword(e)})},getTokenByAuthorizationCode:async function(e,t,r,n,i={}){let o;return u.logger.getToken.info("Attempting to acquire token using authorization code"),n?(u.msalConfig.auth.clientSecret=n,o=await g(i)):o=await p(i),E(o,e,i,()=>o.acquireTokenByCode({scopes:e,redirectUri:t,code:r,authority:_(i),claims:i?.claims}))},getTokenOnBehalfOf:async function(e,t,r,n={}){h.getToken.info("Attempting to acquire token on behalf of another user"),"string"==typeof r?(h.getToken.info("Using client secret for on behalf of flow"),u.msalConfig.auth.clientSecret=r):"function"==typeof r?(h.getToken.info("Using client assertion callback for on behalf of flow"),u.msalConfig.auth.clientAssertion=r):(h.getToken.info("Using client certificate for on behalf of flow"),u.msalConfig.auth.clientCertificate=r);let o=await g(n);try{let r=await o.acquireTokenOnBehalfOf({scopes:e,authority:_(n),claims:n.claims,oboAssertion:t});return(0,a.ensureValidMsalToken)(e,r,n),h.getToken.info((0,i.formatSuccess)(e)),{token:r.accessToken,expiresOnTimestamp:r.expiresOn.getTime(),refreshAfterTimestamp:r.refreshOn?.getTime(),tokenType:r.tokenType}}catch(t){throw(0,a.handleMsalError)(e,t,n)}},getTokenByInteractiveRequest:async function(e,t={}){h.getToken.info("Attempting to acquire token interactively");let r=await p(t);return E(r,e,t,async()=>{let n=T(e,t);return u.pluginConfiguration.broker.isEnabled?b(e,u.pluginConfiguration.broker.useDefaultBrokerAccount??!1,t):(t.proofOfPossessionOptions&&(n.shrNonce=t.proofOfPossessionOptions.nonce,n.authenticationScheme="pop",n.resourceRequestMethod=t.proofOfPossessionOptions.resourceRequestMethod,n.resourceRequestUri=t.proofOfPossessionOptions.resourceRequestUrl),r.acquireTokenInteractive(n))})}}};let n=e.r(41716).__importStar(e.r(3362)),i=e.r(8317),o=e.r(56695),a=e.r(33572),s=e.r(12304),l=e.r(48855),c=e.r(86650),u=e.r(9491),d=e.r(3655),h=(0,i.credentialLogger)("MsalClient");function f(e,t,r={}){let n=(0,d.resolveTenantId)(r.logger??h,t,e),i=(0,a.getAuthority)(n,(0,a.getAuthorityHost)(r)),o=new l.IdentityClient({...r.tokenCredentialOptions,authorityHost:i,loggingOptions:r.loggingOptions});return{auth:{clientId:e,authority:i,knownAuthorities:(0,a.getKnownAuthorities)(n,i,r.disableInstanceDiscovery)},system:{networkClient:o,loggerOptions:{loggerCallback:(0,a.defaultLoggerCallback)(r.logger??h),logLevel:(0,a.getMSALLogLevel)((0,u.getLogLevel)()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging}}}}},93108,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClientCertificateCredential=void 0,r.parseCertificate=d;let n=e.r(29519),i=e.r(66680),o=e.r(3655),a=e.r(8317),s=e.r(12714),l=e.r(52951),c="ClientCertificateCredential",u=(0,a.credentialLogger)(c);async function d(e,t){let r,n=e.certificate,o=e.certificatePath,a=n||await (0,s.readFile)(o,"utf8"),l=t?a:void 0,c=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,u=[];do(r=c.exec(a))&&u.push(r[3]);while(r)if(0===u.length)throw Error("The file at the specified path does not contain a PEM-encoded certificate.");let d=(0,i.createHash)("sha1").update(Buffer.from(u[0],"base64")).digest("hex").toUpperCase();return{certificateContents:a,thumbprintSha256:(0,i.createHash)("sha256").update(Buffer.from(u[0],"base64")).digest("hex").toUpperCase(),thumbprint:d,x5c:l}}r.ClientCertificateCredential=class{tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(e,t,r,i={}){if(!e||!t)throw Error(`${c}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=(0,o.resolveAdditionallyAllowedTenantIds)(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration={..."string"==typeof r?{certificatePath:r}:r};let a=this.certificateConfiguration.certificate,s=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(a||s))throw Error(`${c}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(a&&s)throw Error(`${c}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=(0,n.createMsalClient)(t,e,{...i,logger:u,tokenCredentialOptions:i})}async getToken(e,t={}){return l.tracingClient.withSpan(`${c}.getToken`,t,async t=>{t.tenantId=(0,o.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds,u);let r=Array.isArray(e)?e:[e],n=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(r,n,t)})}async buildClientCertificate(){let e,t=await d(this.certificateConfiguration,this.sendCertificateChain??!1);return e=void 0!==this.certificateConfiguration.certificatePassword?(0,i.createPrivateKey)({key:t.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():t.certificateContents,{thumbprint:t.thumbprint,thumbprintSha256:t.thumbprintSha256,privateKey:e,x5c:t.x5c}}}},35797,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ensureScopes=function(e){return Array.isArray(e)?e:[e]},r.ensureValidScopeForDevTimeCreds=function(e,t){if(!e.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=Error("Invalid scope was specified by the user or calling client");throw t.getToken.info((0,n.formatError)(e,r)),r}},r.getScopeResource=function(e){return e.replace(/\/.default$/,"")};let n=e.r(8317)},80038,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClientSecretCredential=void 0;let n=e.r(29519),i=e.r(3655),o=e.r(12304),a=e.r(8317),s=e.r(35797),l=e.r(52951),c=(0,a.credentialLogger)("ClientSecretCredential");r.ClientSecretCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(e,t,r,a={}){if(!e)throw new o.CredentialUnavailableError("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!t)throw new o.CredentialUnavailableError("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new o.CredentialUnavailableError("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=r,this.tenantId=e,this.additionallyAllowedTenantIds=(0,i.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants),this.msalClient=(0,n.createMsalClient)(t,e,{...a,logger:c,tokenCredentialOptions:a})}async getToken(e,t={}){return l.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=(0,i.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds,c);let r=(0,s.ensureScopes)(e);return this.msalClient.getTokenByClientSecret(r,this.clientSecret,t)})}}},43471,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UsernamePasswordCredential=void 0;let n=e.r(29519),i=e.r(3655),o=e.r(12304),a=e.r(8317),s=e.r(35797),l=e.r(52951),c=(0,a.credentialLogger)("UsernamePasswordCredential");r.UsernamePasswordCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(e,t,r,a,s={}){if(!e)throw new o.CredentialUnavailableError("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!t)throw new o.CredentialUnavailableError("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new o.CredentialUnavailableError("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!a)throw new o.CredentialUnavailableError("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=(0,i.resolveAdditionallyAllowedTenantIds)(s?.additionallyAllowedTenants),this.username=r,this.password=a,this.msalClient=(0,n.createMsalClient)(t,this.tenantId,{...s,tokenCredentialOptions:s??{}})}async getToken(e,t={}){return l.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=(0,i.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds,c);let r=(0,s.ensureScopes)(e);return this.msalClient.getTokenByUsernamePassword(r,this.username,this.password,t)})}}},18927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EnvironmentCredential=r.AllSupportedEnvironmentVariables=void 0,r.getSendCertificateChain=h;let n=e.r(12304),i=e.r(8317),o=e.r(93108),a=e.r(80038),s=e.r(43471),l=e.r(3655),c=e.r(52951);r.AllSupportedEnvironmentVariables=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];let u="EnvironmentCredential",d=(0,i.credentialLogger)(u);function h(){let e=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),t="true"===e||"1"===e;return d.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${t}`),t}r.EnvironmentCredential=class{_credential=void 0;constructor(e){let t=(0,i.processEnvVars)(r.AllSupportedEnvironmentVariables).assigned.join(", ");d.info(`Found the following environment variables: ${t}`);let n=process.env.AZURE_TENANT_ID,c=process.env.AZURE_CLIENT_ID,u=process.env.AZURE_CLIENT_SECRET,f=(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";"),p=h(),m={...e,additionallyAllowedTenantIds:f,sendCertificateChain:p};if(n&&(0,l.checkTenantId)(d,n),n&&c&&u){d.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${c} and clientSecret: [REDACTED]`),this._credential=new a.ClientSecretCredential(n,c,u,m);return}let g=process.env.AZURE_CLIENT_CERTIFICATE_PATH,y=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&c&&g){d.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${c} and certificatePath: ${g}`),this._credential=new o.ClientCertificateCredential(n,c,{certificatePath:g,certificatePassword:y},m);return}let _=process.env.AZURE_USERNAME,E=process.env.AZURE_PASSWORD;n&&c&&_&&E&&(d.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${c} and username: ${_}`),d.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new s.UsernamePasswordCredential(n,c,_,E,m))}async getToken(e,t={}){return c.tracingClient.withSpan(`${u}.getToken`,t,async t=>{if(this._credential)try{let r=await this._credential.getToken(e,t);return d.getToken.info((0,i.formatSuccess)(e)),r}catch(r){let t=new n.AuthenticationError(400,{error:`${u} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:r.message.toString().split("More details:").join("")});throw d.getToken.info((0,i.formatError)(e,t)),t}throw new n.CredentialUnavailableError(`${u} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}}},83909,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.imdsRetryPolicy=function(e){return(0,n.retryPolicy)([{name:"imdsRetryPolicy",retry:({retryCount:t,response:r})=>{if(r?.status!==404&&r?.status!==410)return{skipStrategy:!0};let n=r?.status===410?Math.max(3e3,e.startDelayInMs):e.startDelayInMs;return(0,i.calculateRetryDelay)(t,{retryDelayInMs:n,maxRetryDelayInMs:64e3})}}],{maxRetries:e.maxRetries})};let n=e.r(38709),i=e.r(96555)},66113,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.imdsMsi=void 0;let n=e.r(38709),i=e.r(96555),o=e.r(8317),a=e.r(30820),s=e.r(52951),l="ManagedIdentityCredential - IMDS",c=(0,o.credentialLogger)(l);r.imdsMsi={name:"imdsMsi",async isAvailable(e){let{scopes:t,identityClient:r,getTokenOptions:o}=e,u=(0,a.mapScopesToResource)(t);if(!u)return c.info(`${l}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw Error("Missing IdentityClient");let d=function(e){if(!(0,a.mapScopesToResource)(e))throw Error(`${l}: Multiple scopes are not supported.`);let t=new URL("/metadata/identity/oauth2/token",process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??"http://169.254.169.254");return{url:`${t}`,method:"GET",headers:(0,n.createHttpHeaders)({Accept:"application/json"})}}(u);return s.tracingClient.withSpan("ManagedIdentityCredential-pingImdsEndpoint",o??{},async e=>{let t;d.tracingOptions=e.tracingOptions;let o=(0,n.createPipelineRequest)(d);o.timeout=e.requestOptions?.timeout||1e3,o.allowInsecureConnection=!0;try{c.info(`${l}: Pinging the Azure IMDS endpoint`),t=await r.sendRequest(o)}catch(e){return(0,i.isError)(e)&&c.verbose(`${l}: Caught error ${e.name}: ${e.message}`),c.info(`${l}: The Azure IMDS endpoint is unavailable`),!1}return 403===t.status&&t.bodyAsText?.includes("unreachable")?(c.info(`${l}: The Azure IMDS endpoint is unavailable`),c.info(`${l}: ${t.bodyAsText}`),!1):(c.info(`${l}: The Azure IMDS endpoint is available`),!0)})}}},90532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClientAssertionCredential=void 0;let n=e.r(29519),i=e.r(3655),o=e.r(12304),a=e.r(8317),s=e.r(52951),l=(0,a.credentialLogger)("ClientAssertionCredential");r.ClientAssertionCredential=class{msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(e,t,r,a={}){if(!e)throw new o.CredentialUnavailableError("ClientAssertionCredential: tenantId is a required parameter.");if(!t)throw new o.CredentialUnavailableError("ClientAssertionCredential: clientId is a required parameter.");if(!r)throw new o.CredentialUnavailableError("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=(0,i.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants),this.options=a,this.getAssertion=r,this.msalClient=(0,n.createMsalClient)(t,e,{...a,logger:l,tokenCredentialOptions:this.options})}async getToken(e,t={}){return s.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=(0,i.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds,l);let r=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(r,this.getAssertion,t)})}}},43442,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WorkloadIdentityCredential=r.SupportedWorkloadEnvironmentVariables=void 0;let n=e.r(8317),i=e.r(90532),o=e.r(12304),a=e.r(3655),s=e.r(12714),l="WorkloadIdentityCredential";r.SupportedWorkloadEnvironmentVariables=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"];let c=(0,n.credentialLogger)(l);r.WorkloadIdentityCredential=class{client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(e){let t=(0,n.processEnvVars)(r.SupportedWorkloadEnvironmentVariables).assigned.join(", ");c.info(`Found the following environment variables: ${t}`);let s=e??{},u=s.tenantId||process.env.AZURE_TENANT_ID,d=s.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=s.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,u&&(0,a.checkTenantId)(c,u),!d)throw new o.CredentialUnavailableError(`${l}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!u)throw new o.CredentialUnavailableError(`${l}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new o.CredentialUnavailableError(`${l}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);c.info(`Invoking ClientAssertionCredential with tenant ID: ${u}, clientId: ${s.clientId} and federated token path: [REDACTED]`),this.client=new i.ClientAssertionCredential(u,d,this.readFileContents.bind(this),e)}async getToken(e,t){if(!this.client){let e=`${l}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw c.info(e),new o.CredentialUnavailableError(e)}return c.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,t)}async readFileContents(){if(void 0!==this.cacheDate&&Date.now()-this.cacheDate>=3e5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new o.CredentialUnavailableError(`${l}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let e=(await (0,s.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(e)this.azureFederatedTokenFileContent=e,this.cacheDate=Date.now();else throw new o.CredentialUnavailableError(`${l}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}}},74941,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tokenExchangeMsi=void 0;let n=e.r(43442),i=e.r(8317),o="ManagedIdentityCredential - Token Exchange",a=(0,i.credentialLogger)(o);r.tokenExchangeMsi={name:"tokenExchangeMsi",async isAvailable(e){let t=process.env,r=!!((e||t.AZURE_CLIENT_ID)&&t.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||a.info(`${o}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(e,t={}){let{scopes:r,clientId:i}=e;return new n.WorkloadIdentityCredential({clientId:i,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...{},disableInstanceDiscovery:!0}).getToken(r,t)}}},82535,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ManagedIdentityCredential=void 0;let n=e.r(9491),i=e.r(3362),o=e.r(48855),a=e.r(12304),s=e.r(33572),l=e.r(83909),c=e.r(8317),u=e.r(52951),d=e.r(66113),h=e.r(74941),f=e.r(30820),p=(0,c.credentialLogger)("ManagedIdentityCredential");r.ManagedIdentityCredential=class{managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;constructor(e,t){let r;"string"==typeof e?(this.clientId=e,r=t??{}):(this.clientId=e?.clientId,r=e??{}),this.resourceId=r?.resourceId,this.objectId=r?.objectId;let c=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(e=>e.value);if(c.length>1)throw Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);r.allowInsecureConnection=!0,r.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=r.retryOptions.maxRetries),this.identityClient=new o.IdentityClient({...r,additionalPolicies:[{policy:(0,l.imdsRetryPolicy)(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new i.ManagedIdentityApplication({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:(0,s.getMSALLogLevel)((0,n.getLogLevel)()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:(0,s.defaultLoggerCallback)(p)}}}),this.isAvailableIdentityClient=new o.IdentityClient({...r,retryOptions:{maxRetries:0}});let u=this.managedIdentityApp.getManagedIdentitySource();if("CloudShell"===u&&(this.clientId||this.resourceId||this.objectId))throw p.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new a.CredentialUnavailableError("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if("ServiceFabric"===u&&(this.clientId||this.resourceId||this.objectId))throw p.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new a.CredentialUnavailableError(`ManagedIdentityCredential: ${f.serviceFabricErrorMessage}`);if(p.info(`Using ${u} managed identity.`),1===c.length){let{key:e,value:t}=c[0];p.info(`${u} with ${e}: ${t}`)}}async getToken(e,t={}){p.getToken.info("Using the MSAL provider for Managed Identity.");let r=(0,f.mapScopesToResource)(e);if(!r)throw new a.CredentialUnavailableError(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return u.tracingClient.withSpan("ManagedIdentityCredential.getToken",t,async()=>{try{let n=await h.tokenExchangeMsi.isAvailable(this.clientId),i=this.managedIdentityApp.getManagedIdentitySource();if(p.getToken.info(`MSAL Identity source: ${i}`),n){p.getToken.info("Using the token exchange managed identity.");let t=await h.tokenExchangeMsi.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(null===t)throw new a.CredentialUnavailableError("Attempted to use the token exchange managed identity, but received a null response.");return t}if(("DefaultToImds"===i||"Imds"===i)&&(p.getToken.info("Using the IMDS endpoint to probe for availability."),!await d.imdsMsi.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:t,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new a.CredentialUnavailableError("Attempted to use the IMDS endpoint, but it is not available.");p.getToken.info("Calling into MSAL for managed identity token.");let o=await this.managedIdentityApp.acquireToken({resource:r});return this.ensureValidMsalToken(e,o,t),p.getToken.info((0,c.formatSuccess)(e)),{expiresOnTimestamp:o.expiresOn.getTime(),token:o.accessToken,refreshAfterTimestamp:o.refreshOn?.getTime(),tokenType:"Bearer"}}catch(t){var n;if(p.getToken.error((0,c.formatError)(e,t)),"AuthenticationRequiredError"===t.name)throw t;if("network_error"===(n=t).errorCode||"ENETUNREACH"===n.code||"EHOSTUNREACH"===n.code||(403===n.statusCode||403===n.code)&&n.message.includes("unreachable"))throw new a.CredentialUnavailableError(`ManagedIdentityCredential: Network unreachable. Message: ${t.message}`,{cause:t});throw new a.CredentialUnavailableError(`ManagedIdentityCredential: Authentication failed. Message ${t.message}`,{cause:t})}})}ensureValidMsalToken(e,t,r){let n=t=>(p.getToken.info(t),new a.AuthenticationRequiredError({scopes:Array.isArray(e)?e:[e],getTokenOptions:r,message:t}));if(!t)throw n("No response.");if(!t.expiresOn)throw n('Response had no "expiresOn" property.');if(!t.accessToken)throw n('Response had no "accessToken" property.')}}},33405,(e,t,r)=>{t.exports=e.x("child_process",()=>require("child_process"))},55026,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzureDeveloperCliCredential=r.developerCliCredentialInternals=r.azureDeveloperCliPublicErrorMessages=void 0;let n=e.r(41716),i=e.r(8317),o=e.r(12304),a=n.__importDefault(e.r(33405)),s=e.r(3655),l=e.r(52951),c=e.r(35797),u=(0,i.credentialLogger)("AzureDeveloperCliCredential");r.azureDeveloperCliPublicErrorMessages={notInstalled:"Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.",login:"Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.",unknown:"Unknown error while trying to retrieve the access token",claim:"This credential doesn't support claims challenges. To authenticate with the required claims, please run the following command:"},r.developerCliCredentialInternals={getSafeWorkingDir:()=>"/bin",async getAzdAccessToken(e,t,n,i){let o=[];t&&(o=["--tenant-id",t]);let s=[];return i&&(s=["--claims",btoa(i)]),new Promise((t,i)=>{try{let i=["auth","token","--output","json","--no-prompt",...e.reduce((e,t)=>e.concat("--scope",t),[]),...o,...s],l=["azd",...i].join(" ");a.default.exec(l,{cwd:r.developerCliCredentialInternals.getSafeWorkingDir(),timeout:n},(e,r,n)=>{t({stdout:r,stderr:n,error:e})})}catch(e){i(e)}})}},r.AzureDeveloperCliCredential=class{tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&((0,s.checkTenantId)(u,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=(0,s.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,t={}){let n,a=(0,s.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds);return a&&(0,s.checkTenantId)(u,a),n="string"==typeof e?[e]:e,u.getToken.info(`Using the scopes ${e}`),l.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async()=>{try{n.forEach(e=>{(0,c.ensureValidScopeForDevTimeCreds)(e,u)});let s=await r.developerCliCredentialInternals.getAzdAccessToken(n,a,this.timeout,t.claims),l=s.stderr?.match("must use multi-factor authentication")||s.stderr?.match("reauthentication required"),d=s.stderr?.match("not logged in, run `azd login` to login")||s.stderr?.match("not logged in, run `azd auth login` to login");if(s.stderr?.match("azd:(.*)not found")||s.stderr?.startsWith("'azd' is not recognized")||s.error&&"ENOENT"===s.error.code){let t=new o.CredentialUnavailableError(r.azureDeveloperCliPublicErrorMessages.notInstalled);throw u.getToken.info((0,i.formatError)(e,t)),t}if(d){let t=new o.CredentialUnavailableError(r.azureDeveloperCliPublicErrorMessages.login);throw u.getToken.info((0,i.formatError)(e,t)),t}if(l){let t=n.reduce((e,t)=>e.concat("--scope",t),[]).join(" "),a=`azd auth login ${t}`,s=new o.CredentialUnavailableError(`${r.azureDeveloperCliPublicErrorMessages.claim} ${a}`);throw u.getToken.info((0,i.formatError)(e,s)),s}try{let t=JSON.parse(s.stdout);return u.getToken.info((0,i.formatSuccess)(e)),{token:t.token,expiresOnTimestamp:new Date(t.expiresOn).getTime(),tokenType:"Bearer"}}catch(e){if(s.stderr)throw new o.CredentialUnavailableError(s.stderr);throw e}}catch(n){let t="CredentialUnavailableError"===n.name?n:new o.CredentialUnavailableError(n.message||r.azureDeveloperCliPublicErrorMessages.unknown);throw u.getToken.info((0,i.formatError)(e,t)),t}})}}},6086,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkSubscription=function(e,t){if(!t.match(/^[0-9a-zA-Z-._ ]+$/)){let r=Error(`Subscription '${t}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw e.info((0,n.formatError)("",r)),r}};let n=e.r(8317)},92686,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzureCliCredential=r.cliCredentialInternals=r.azureCliPublicErrorMessages=void 0;let n=e.r(41716),i=e.r(3655),o=e.r(8317),a=e.r(35797),s=e.r(12304),l=n.__importDefault(e.r(33405)),c=e.r(52951),u=e.r(6086),d=(0,o.credentialLogger)("AzureCliCredential");r.azureCliPublicErrorMessages={claim:"This credential doesn't support claims challenges. To authenticate with the required claims, please run the following command:",notInstalled:"Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.",login:"Please run 'az login' from a command prompt to authenticate before using this credential.",unknown:"Unknown error while trying to retrieve the access token",unexpectedResponse:'Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got:'},r.cliCredentialInternals={getSafeWorkingDir:()=>"/bin",async getAzureCliAccessToken(e,t,n,i){let o=[],a=[];return t&&(o=["--tenant",t]),n&&(a=["--subscription",`"${n}"`]),new Promise((t,n)=>{try{let n=["account","get-access-token","--output","json","--resource",e,...o,...a],s=["az",...n].join(" ");l.default.exec(s,{cwd:r.cliCredentialInternals.getSafeWorkingDir(),timeout:i},(e,r,n)=>{t({stdout:r,stderr:n,error:e})})}catch(e){n(e)}})}},r.AzureCliCredential=class{tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(e){e?.tenantId&&((0,i.checkTenantId)(d,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&((0,u.checkSubscription)(d,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=(0,i.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,t={}){let n="string"==typeof e?e:e[0],l=t.claims;if(l&&l.trim()){let e=btoa(l),i=`az login --claims-challenge ${e} --scope ${n}`,a=t.tenantId;a&&(i+=` --tenant ${a}`);let c=new s.CredentialUnavailableError(`${r.azureCliPublicErrorMessages.claim} ${i}`);throw d.getToken.info((0,o.formatError)(n,c)),c}let h=(0,i.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds);return h&&(0,i.checkTenantId)(d,h),this.subscription&&(0,u.checkSubscription)(d,this.subscription),d.getToken.info(`Using the scope ${n}`),c.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async()=>{try{(0,a.ensureValidScopeForDevTimeCreds)(n,d);let t=(0,a.getScopeResource)(n),i=await r.cliCredentialInternals.getAzureCliAccessToken(t,h,this.subscription,this.timeout),l=i.stderr?.match("(.*)az login --scope(.*)"),c=i.stderr?.match("(.*)az login(.*)")&&!l;if(i.stderr?.match("az:(.*)not found")||i.stderr?.startsWith("'az' is not recognized")){let t=new s.CredentialUnavailableError(r.azureCliPublicErrorMessages.notInstalled);throw d.getToken.info((0,o.formatError)(e,t)),t}if(c){let t=new s.CredentialUnavailableError(r.azureCliPublicErrorMessages.login);throw d.getToken.info((0,o.formatError)(e,t)),t}try{let t=i.stdout,r=this.parseRawResponse(t);return d.getToken.info((0,o.formatSuccess)(e)),r}catch(e){if(i.stderr)throw new s.CredentialUnavailableError(i.stderr);throw e}}catch(n){let t="CredentialUnavailableError"===n.name?n:new s.CredentialUnavailableError(n.message||r.azureCliPublicErrorMessages.unknown);throw d.getToken.info((0,o.formatError)(e,t)),t}})}parseRawResponse(e){let t=JSON.parse(e),n=t.accessToken,i=1e3*Number.parseInt(t.expires_on,10);if(!isNaN(i))return d.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(isNaN(i=new Date(t.expiresOn).getTime()))throw new s.CredentialUnavailableError(`${r.azureCliPublicErrorMessages.unexpectedResponse} "${t.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}}},29420,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processUtils=void 0;let n=e.r(41716).__importDefault(e.r(74533));r.processUtils={execFile:(e,t,r)=>new Promise((i,o)=>{n.default.execFile(e,t,r,(e,t,r)=>{Buffer.isBuffer(t)&&(t=t.toString("utf8")),Buffer.isBuffer(r)&&(r=r.toString("utf8")),r||e?o(r?Error(r):e):i(t)})})}},52739,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzurePowerShellCredential=r.commandStack=r.powerShellPublicErrorMessages=r.powerShellErrors=void 0,r.formatCommand=function(e){return e},r.parseJsonToken=d;let n=e.r(3655),i=e.r(8317),o=e.r(35797),a=e.r(12304),s=e.r(29420),l=e.r(52951),c=(0,i.credentialLogger)("AzurePowerShellCredential");async function u(e,t){let r=[];for(let n of e){let[e,...i]=n,o=await s.processUtils.execFile(e,i,{encoding:"utf8",timeout:t});r.push(o)}return r}async function d(e){let t=e.match(/{[^{}]*}/g),r=e;if(t)try{for(let e of t)try{let t=JSON.parse(e);if(t?.Token)return(r=r.replace(e,""))&&c.getToken.warning(r),t}catch(e){continue}}catch(t){throw Error(`Unable to parse the output of PowerShell. Received output: ${e}`)}throw Error(`No access token found in the output. Received output: ${e}`)}process.platform,r.powerShellErrors={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},r.powerShellPublicErrorMessages={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:"The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: \"Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force\".",claim:"This credential doesn't support claims challenges. To authenticate with the required claims, please run the following command:",troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},r.commandStack=["pwsh"],r.AzurePowerShellCredential=class{tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&((0,n.checkTenantId)(c,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=(0,n.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,t,n){for(let i of[...r.commandStack]){try{await u([[i,"/?"]],n)}catch(e){r.commandStack.shift();continue}return d((await u([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${t??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0])}throw Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,t={}){return l.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async()=>{let s="string"==typeof e?e:e[0],l=t.claims;if(l&&l.trim()){let e=btoa(l),n=`Connect-AzAccount -ClaimsChallenge ${e}`,o=t.tenantId;o&&(n+=` -Tenant ${o}`);let u=new a.CredentialUnavailableError(`${r.powerShellPublicErrorMessages.claim} ${n}`);throw c.getToken.info((0,i.formatError)(s,u)),u}let u=(0,n.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds);u&&(0,n.checkTenantId)(c,u);try{(0,o.ensureValidScopeForDevTimeCreds)(s,c),c.getToken.info(`Using the scope ${s}`);let t=(0,o.getScopeResource)(s),r=await this.getAzurePowerShellAccessToken(t,u,this.timeout);return c.getToken.info((0,i.formatSuccess)(e)),{token:r.Token,expiresOnTimestamp:new Date(r.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(t){if(t.message.match(r.powerShellErrors.installed)){let e=new a.CredentialUnavailableError(r.powerShellPublicErrorMessages.installed);throw c.getToken.info((0,i.formatError)(s,e)),e}if(t.message.match(`(.*)${r.powerShellErrors.login}(.*)`)){let e=new a.CredentialUnavailableError(r.powerShellPublicErrorMessages.login);throw c.getToken.info((0,i.formatError)(s,e)),e}let e=new a.CredentialUnavailableError(`${t}. ${r.powerShellPublicErrorMessages.troubleshoot}`);throw c.getToken.info((0,i.formatError)(s,e)),e}})}}},41149,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VisualStudioCodeCredential=void 0;let n=e.r(8317),i=e.r(3655),o=e.r(12304),a=e.r(3655),s=e.r(29519),l=e.r(35797),c=e.r(56695),u=e.r(33572),d=e.r(12714),h=(0,n.credentialLogger)("VisualStudioCodeCredential"),f={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};r.VisualStudioCodeCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(e){this.options=e||{},e&&e.tenantId?((0,a.checkTenantId)(h,e.tenantId),this.tenantId=e.tenantId):this.tenantId="common",this.additionallyAllowedTenantIds=(0,i.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants),function(e){let t=f[e];if(t)throw new o.CredentialUnavailableError(t)}(this.tenantId)}async prepare(e){let t=(0,i.processMultiTenantRequest)(this.tenantId,this.options,this.additionallyAllowedTenantIds,h)||this.tenantId;if(!(0,c.hasVSCodePlugin)()||!c.vsCodeAuthRecordPath)throw new o.CredentialUnavailableError("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let r=await this.loadAuthRecord(c.vsCodeAuthRecordPath,e);this.msalClient=(0,s.createMsalClient)("aebc6443-996d-45c2-90f0-388ff96faa56",t,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:r})}preparePromise;prepareOnce(e){return this.preparePromise||(this.preparePromise=this.prepare(e)),this.preparePromise}async getToken(e,t){let r=(0,l.ensureScopes)(e);if(await this.prepareOnce(r),!this.msalClient)throw new o.CredentialUnavailableError("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(r,{...t,disableAutomaticAuthentication:!0})}async loadAuthRecord(e,t){try{let t=await (0,d.readFile)(e,{encoding:"utf8"});return(0,u.deserializeAuthenticationRecord)(t)}catch(e){throw h.getToken.info((0,n.formatError)(t,e)),new o.CredentialUnavailableError("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}}},46002,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BrokerCredential=void 0;let n=e.r(3655),i=e.r(8317),o=e.r(35797),a=e.r(52951),s=e.r(29519),l=e.r(59766),c=e.r(12304),u=(0,i.credentialLogger)("BrokerCredential");r.BrokerCredential=class{brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(e){this.brokerTenantId=(0,n.resolveTenantId)(u,e.tenantId),this.brokerAdditionallyAllowedTenantIds=(0,n.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants);let t={...e,tokenCredentialOptions:e,logger:u,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=(0,s.createMsalClient)(l.DeveloperSignOnClientId,this.brokerTenantId,t)}async getToken(e,t={}){return a.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=(0,n.processMultiTenantRequest)(this.brokerTenantId,t,this.brokerAdditionallyAllowedTenantIds,u);let r=(0,o.ensureScopes)(e);try{return this.brokerMsalClient.getBrokeredToken(r,!0,{...t,disableAutomaticAuthentication:!0})}catch(e){throw u.getToken.info((0,i.formatError)(r,e)),new c.CredentialUnavailableError("Failed to acquire token using broker authentication",{cause:e})}})}}},54541,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultBrokerCredential=function(e={}){return new u.BrokerCredential(e)},r.createDefaultVisualStudioCodeCredential=function(e={}){return new c.VisualStudioCodeCredential(e)},r.createDefaultManagedIdentityCredential=function(e={}){e.retryOptions??={maxRetries:5,retryDelayInMs:800};let t=e?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=e?.workloadIdentityClientId??t,n=e?.managedIdentityResourceId,o=process.env.AZURE_FEDERATED_TOKEN_FILE,a=e?.tenantId??process.env.AZURE_TENANT_ID;if(n){let t={...e,resourceId:n};return new i.ManagedIdentityCredential(t)}if(o&&r){let t={...e,tenantId:a};return new i.ManagedIdentityCredential(r,t)}if(t){let r={...e,clientId:t};return new i.ManagedIdentityCredential(r)}return new i.ManagedIdentityCredential(e)},r.createDefaultWorkloadIdentityCredential=function(e){let t=e?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=e?.workloadIdentityClientId??t,n=process.env.AZURE_FEDERATED_TOKEN_FILE,i=e?.tenantId??process.env.AZURE_TENANT_ID;if(n&&r){let t={...e,tenantId:i,clientId:r,tokenFilePath:n};return new o.WorkloadIdentityCredential(t)}if(i){let t={...e,tenantId:i};return new o.WorkloadIdentityCredential(t)}return new o.WorkloadIdentityCredential(e)},r.createDefaultAzureDeveloperCliCredential=function(e={}){return new a.AzureDeveloperCliCredential(e)},r.createDefaultAzureCliCredential=function(e={}){return new s.AzureCliCredential(e)},r.createDefaultAzurePowershellCredential=function(e={}){return new l.AzurePowerShellCredential(e)},r.createDefaultEnvironmentCredential=function(e={}){return new n.EnvironmentCredential(e)};let n=e.r(18927),i=e.r(82535),o=e.r(43442),a=e.r(55026),s=e.r(92686),l=e.r(52739),c=e.r(41149),u=e.r(46002)},20361,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultAzureCredential=r.UnavailableDefaultCredential=void 0;let n=e.r(82733),i=e.r(8317),o=e.r(54541),a=(0,i.credentialLogger)("DefaultAzureCredential");class s{credentialUnavailableErrorMessage;credentialName;constructor(e,t){this.credentialName=e,this.credentialUnavailableErrorMessage=t}getToken(){return a.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}}r.UnavailableDefaultCredential=s;class l extends n.ChainedTokenCredential{constructor(e){!function(e){if(e?.requiredEnvVars){let t=(Array.isArray(e.requiredEnvVars)?e.requiredEnvVars:[e.requiredEnvVars]).filter(e=>!process.env[e]);if(t.length>0){let e=`Required environment ${1===t.length?"variable":"variables"} '${t.join(", ")}' for DefaultAzureCredential ${1===t.length?"is":"are"} not set or empty.`;throw a.warning(e),Error(e)}}}(e);let t=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,r=[o.createDefaultVisualStudioCodeCredential,o.createDefaultAzureCliCredential,o.createDefaultAzurePowershellCredential,o.createDefaultAzureDeveloperCliCredential,o.createDefaultBrokerCredential],n=[o.createDefaultEnvironmentCredential,o.createDefaultWorkloadIdentityCredential,o.createDefaultManagedIdentityCredential],i=[];if(t)switch(t){case"dev":i=r;break;case"prod":i=n;break;case"environmentcredential":i=[o.createDefaultEnvironmentCredential];break;case"workloadidentitycredential":i=[o.createDefaultWorkloadIdentityCredential];break;case"managedidentitycredential":i=[o.createDefaultManagedIdentityCredential];break;case"visualstudiocodecredential":i=[o.createDefaultVisualStudioCodeCredential];break;case"azureclicredential":i=[o.createDefaultAzureCliCredential];break;case"azurepowershellcredential":i=[o.createDefaultAzurePowershellCredential];break;case"azuredeveloperclicredential":i=[o.createDefaultAzureDeveloperCliCredential];break;default:{let e=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential.`;throw a.warning(e),Error(e)}}else i=[...n,...r];super(...i.map(t=>{try{return t(e)}catch(e){return a.warning(`Skipped ${t.name} because of an error creating the credential: ${e}`),new s(t.name,e.message)}}))}}r.DefaultAzureCredential=l},59027,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InteractiveBrowserCredential=void 0;let n=e.r(3655),i=e.r(8317),o=e.r(35797),a=e.r(52951),s=e.r(29519),l=e.r(59766),c=(0,i.credentialLogger)("InteractiveBrowserCredential");r.InteractiveBrowserCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;disableAutomaticAuthentication;browserCustomizationOptions;loginHint;constructor(e){this.tenantId=(0,n.resolveTenantId)(c,e.tenantId,e.clientId),this.additionallyAllowedTenantIds=(0,n.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants);let t={...e,tokenCredentialOptions:e,logger:c};if(this.browserCustomizationOptions=e.browserCustomizationOptions,this.loginHint=e.loginHint,e?.brokerOptions?.enabled)if(e?.brokerOptions?.parentWindowHandle)t.brokerOptions={enabled:!0,parentWindowHandle:e.brokerOptions.parentWindowHandle,legacyEnableMsaPassthrough:e.brokerOptions?.legacyEnableMsaPassthrough,useDefaultBrokerAccount:e.brokerOptions?.useDefaultBrokerAccount};else throw Error("In order to do WAM authentication, `parentWindowHandle` under `brokerOptions` is a required parameter");this.msalClient=(0,s.createMsalClient)(e.clientId??l.DeveloperSignOnClientId,this.tenantId,t),this.disableAutomaticAuthentication=e?.disableAutomaticAuthentication}async getToken(e,t={}){return a.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=(0,n.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds,c);let r=(0,o.ensureScopes)(e);return this.msalClient.getTokenByInteractiveRequest(r,{...t,disableAutomaticAuthentication:this.disableAutomaticAuthentication,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint})})}async authenticate(e,t={}){return a.tracingClient.withSpan(`${this.constructor.name}.authenticate`,t,async t=>{let r=(0,o.ensureScopes)(e);return await this.msalClient.getTokenByInteractiveRequest(r,{...t,disableAutomaticAuthentication:!1,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint}),this.msalClient.getActiveAccount()})}}},96658,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DeviceCodeCredential=void 0,r.defaultDeviceCodePromptCallback=u;let n=e.r(3655),i=e.r(8317),o=e.r(35797),a=e.r(52951),s=e.r(29519),l=e.r(59766),c=(0,i.credentialLogger)("DeviceCodeCredential");function u(e){console.log(e.message)}r.DeviceCodeCredential=class{tenantId;additionallyAllowedTenantIds;disableAutomaticAuthentication;msalClient;userPromptCallback;constructor(e){this.tenantId=e?.tenantId,this.additionallyAllowedTenantIds=(0,n.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants);let t=e?.clientId??l.DeveloperSignOnClientId,r=(0,n.resolveTenantId)(c,e?.tenantId,t);this.userPromptCallback=e?.userPromptCallback??u,this.msalClient=(0,s.createMsalClient)(t,r,{...e,logger:c,tokenCredentialOptions:e||{}}),this.disableAutomaticAuthentication=e?.disableAutomaticAuthentication}async getToken(e,t={}){return a.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=(0,n.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds,c);let r=(0,o.ensureScopes)(e);return this.msalClient.getTokenByDeviceCode(r,this.userPromptCallback,{...t,disableAutomaticAuthentication:this.disableAutomaticAuthentication})})}async authenticate(e,t={}){return a.tracingClient.withSpan(`${this.constructor.name}.authenticate`,t,async t=>{let r=Array.isArray(e)?e:[e];return await this.msalClient.getTokenByDeviceCode(r,this.userPromptCallback,{...t,disableAutomaticAuthentication:!1}),this.msalClient.getActiveAccount()})}}},9083,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzurePipelinesCredential=void 0,r.handleOidcResponse=d;let n=e.r(12304),i=e.r(38709),o=e.r(90532),a=e.r(48855),s=e.r(3655),l=e.r(8317),c="AzurePipelinesCredential",u=(0,l.credentialLogger)(c);function d(e){let t=e.bodyAsText;if(!t)throw u.error(`${c}: Authentication Failed. Received null token from OIDC request. Response status- ${e.status}. Complete response - ${JSON.stringify(e)}`),new n.AuthenticationError(e.status,{error:`${c}: Authentication Failed. Received null token from OIDC request.`,error_description:`${JSON.stringify(e)}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`});try{let r=JSON.parse(t);if(r?.oidcToken)return r.oidcToken;{let r=`${c}: Authentication Failed. oidcToken field not detected in the response.`,i="";throw 200!==e.status&&(i=`Response body = ${t}. Response Headers ["x-vss-e2eid"] = ${e.headers.get("x-vss-e2eid")} and ["x-msedge-ref"] = ${e.headers.get("x-msedge-ref")}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`),u.error(r),u.error(i),new n.AuthenticationError(e.status,{error:r,error_description:i})}}catch(i){let r=`${c}: Authentication Failed. oidcToken field not detected in the response.`;throw u.error(`Response from service = ${t}, Response Headers ["x-vss-e2eid"] = ${e.headers.get("x-vss-e2eid")} 
      and ["x-msedge-ref"] = ${e.headers.get("x-msedge-ref")}, error message = ${i.message}`),u.error(r),new n.AuthenticationError(e.status,{error:r,error_description:`Response = ${t}. Response headers ["x-vss-e2eid"] = ${e.headers.get("x-vss-e2eid")} and ["x-msedge-ref"] =  ${e.headers.get("x-msedge-ref")}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`})}}r.AzurePipelinesCredential=class{clientAssertionCredential;identityClient;constructor(e,t,r,i,l={}){if(!t)throw new n.CredentialUnavailableError(`${c}: is unavailable. clientId is a required parameter.`);if(!e)throw new n.CredentialUnavailableError(`${c}: is unavailable. tenantId is a required parameter.`);if(!r)throw new n.CredentialUnavailableError(`${c}: is unavailable. serviceConnectionId is a required parameter.`);if(!i)throw new n.CredentialUnavailableError(`${c}: is unavailable. systemAccessToken is a required parameter.`);if(l.loggingOptions={...l?.loggingOptions,additionalAllowedHeaderNames:[...l.loggingOptions?.additionalAllowedHeaderNames??[],"x-vss-e2eid","x-msedge-ref"]},this.identityClient=new a.IdentityClient(l),(0,s.checkTenantId)(u,e),u.info(`Invoking AzurePipelinesCredential with tenant ID: ${e}, client ID: ${t}, and service connection ID: ${r}`),!process.env.SYSTEM_OIDCREQUESTURI)throw new n.CredentialUnavailableError(`${c}: is unavailable. Ensure that you're running this task in an Azure Pipeline, so that following missing system variable(s) can be defined- "SYSTEM_OIDCREQUESTURI"`);let d=`${process.env.SYSTEM_OIDCREQUESTURI}?api-version=7.1&serviceConnectionId=${r}`;u.info(`Invoking ClientAssertionCredential with tenant ID: ${e}, client ID: ${t} and service connection ID: ${r}`),this.clientAssertionCredential=new o.ClientAssertionCredential(e,t,this.requestOidcToken.bind(this,d,i),l)}async getToken(e,t){if(!this.clientAssertionCredential){let e=`${c}: is unavailable. To use Federation Identity in Azure Pipelines, the following parameters are required - 
      tenantId,
      clientId,
      serviceConnectionId,
      systemAccessToken,
      "SYSTEM_OIDCREQUESTURI".      
      See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`;throw u.error(e),new n.CredentialUnavailableError(e)}return u.info("Invoking getToken() of Client Assertion Credential"),this.clientAssertionCredential.getToken(e,t)}async requestOidcToken(e,t){u.info("Requesting OIDC token from Azure Pipelines..."),u.info(e);let r=(0,i.createPipelineRequest)({url:e,method:"POST",headers:(0,i.createHttpHeaders)({"Content-Type":"application/json",Authorization:`Bearer ${t}`,"X-TFS-FedAuthRedirect":"Suppress"})});return d(await this.identityClient.sendRequest(r))}}},11667,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AuthorizationCodeCredential=void 0;let n=e.r(3655),i=e.r(3655),o=e.r(8317),a=e.r(35797),s=e.r(52951),l=e.r(29519),c=(0,o.credentialLogger)("AuthorizationCodeCredential");r.AuthorizationCodeCredential=class{msalClient;disableAutomaticAuthentication;authorizationCode;redirectUri;tenantId;additionallyAllowedTenantIds;clientSecret;constructor(e,t,r,o,a,s){(0,i.checkTenantId)(c,e),this.clientSecret=r,"string"==typeof a?(this.authorizationCode=o,this.redirectUri=a):(this.authorizationCode=r,this.redirectUri=o,this.clientSecret=void 0,s=a),this.tenantId=e,this.additionallyAllowedTenantIds=(0,n.resolveAdditionallyAllowedTenantIds)(s?.additionallyAllowedTenants),this.msalClient=(0,l.createMsalClient)(t,e,{...s,logger:c,tokenCredentialOptions:s??{}})}async getToken(e,t={}){return s.tracingClient.withSpan(`${this.constructor.name}.getToken`,t,async t=>{let r=(0,n.processMultiTenantRequest)(this.tenantId,t,this.additionallyAllowedTenantIds);t.tenantId=r;let i=(0,a.ensureScopes)(e);return this.msalClient.getTokenByAuthorizationCode(i,this.redirectUri,this.authorizationCode,this.clientSecret,{...t,disableAutomaticAuthentication:this.disableAutomaticAuthentication})})}}},23490,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OnBehalfOfCredential=void 0;let n=e.r(29519),i=e.r(8317),o=e.r(3655),a=e.r(12304),s=e.r(66680),l=e.r(35797),c=e.r(12714),u=e.r(52951),d="OnBehalfOfCredential",h=(0,i.credentialLogger)(d);r.OnBehalfOfCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;sendCertificateChain;certificatePath;clientSecret;userAssertionToken;clientAssertion;constructor(e){let{clientSecret:t}=e,{certificatePath:r,sendCertificateChain:i}=e,{getAssertion:s}=e,{tenantId:l,clientId:c,userAssertionToken:u,additionallyAllowedTenants:f}=e;if(!l)throw new a.CredentialUnavailableError(`${d}: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!c)throw new a.CredentialUnavailableError(`${d}: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!t&&!r&&!s)throw new a.CredentialUnavailableError(`${d}: You must provide one of clientSecret, certificatePath, or a getAssertion callback but none were provided. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!u)throw new a.CredentialUnavailableError(`${d}: userAssertionToken is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.certificatePath=r,this.clientSecret=t,this.userAssertionToken=u,this.sendCertificateChain=i,this.clientAssertion=s,this.tenantId=l,this.additionallyAllowedTenantIds=(0,o.resolveAdditionallyAllowedTenantIds)(f),this.msalClient=(0,n.createMsalClient)(c,this.tenantId,{...e,logger:h,tokenCredentialOptions:e})}async getToken(e,t={}){return u.tracingClient.withSpan(`${d}.getToken`,t,async r=>{r.tenantId=(0,o.processMultiTenantRequest)(this.tenantId,r,this.additionallyAllowedTenantIds,h);let n=(0,l.ensureScopes)(e);if(this.certificatePath){let e=await this.buildClientCertificate(this.certificatePath);return this.msalClient.getTokenOnBehalfOf(n,this.userAssertionToken,e,r)}if(this.clientSecret)return this.msalClient.getTokenOnBehalfOf(n,this.userAssertionToken,this.clientSecret,t);if(this.clientAssertion)return this.msalClient.getTokenOnBehalfOf(n,this.userAssertionToken,this.clientAssertion,t);throw Error("Expected either clientSecret or certificatePath or clientAssertion to be defined.")})}async buildClientCertificate(e){try{let t=await this.parseCertificate({certificatePath:e},this.sendCertificateChain);return{thumbprint:t.thumbprint,thumbprintSha256:t.thumbprintSha256,privateKey:t.certificateContents,x5c:t.x5c}}catch(e){throw h.info((0,i.formatError)("",e)),e}}async parseCertificate(e,t){let r,n=e.certificatePath,i=await (0,c.readFile)(n,"utf8"),o=t?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,l=[];do(r=a.exec(i))&&l.push(r[3]);while(r)if(0===l.length)throw Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,s.createHash)("sha1").update(Buffer.from(l[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:(0,s.createHash)("sha256").update(Buffer.from(l[0],"base64")).digest("hex").toUpperCase(),thumbprint:u,x5c:o}}}},68297,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBearerTokenProvider=r.AzureAuthorityHosts=r.logger=r.WorkloadIdentityCredential=r.OnBehalfOfCredential=r.VisualStudioCodeCredential=r.UsernamePasswordCredential=r.AzurePowerShellCredential=r.AuthorizationCodeCredential=r.AzurePipelinesCredential=r.DeviceCodeCredential=r.ManagedIdentityCredential=r.InteractiveBrowserCredential=r.AzureDeveloperCliCredential=r.AzureCliCredential=r.ClientAssertionCredential=r.ClientCertificateCredential=r.EnvironmentCredential=r.DefaultAzureCredential=r.ClientSecretCredential=r.ChainedTokenCredential=r.deserializeAuthenticationRecord=r.serializeAuthenticationRecord=r.AuthenticationRequiredError=r.CredentialUnavailableErrorName=r.CredentialUnavailableError=r.AggregateAuthenticationErrorName=r.AuthenticationErrorName=r.AggregateAuthenticationError=r.AuthenticationError=void 0,r.getDefaultAzureCredential=function(){return new n.DefaultAzureCredential},e.r(41716).__exportStar(e.r(89006),r);let n=e.r(20361);var i=e.r(12304);Object.defineProperty(r,"AuthenticationError",{enumerable:!0,get:function(){return i.AuthenticationError}}),Object.defineProperty(r,"AggregateAuthenticationError",{enumerable:!0,get:function(){return i.AggregateAuthenticationError}}),Object.defineProperty(r,"AuthenticationErrorName",{enumerable:!0,get:function(){return i.AuthenticationErrorName}}),Object.defineProperty(r,"AggregateAuthenticationErrorName",{enumerable:!0,get:function(){return i.AggregateAuthenticationErrorName}}),Object.defineProperty(r,"CredentialUnavailableError",{enumerable:!0,get:function(){return i.CredentialUnavailableError}}),Object.defineProperty(r,"CredentialUnavailableErrorName",{enumerable:!0,get:function(){return i.CredentialUnavailableErrorName}}),Object.defineProperty(r,"AuthenticationRequiredError",{enumerable:!0,get:function(){return i.AuthenticationRequiredError}});var o=e.r(33572);Object.defineProperty(r,"serializeAuthenticationRecord",{enumerable:!0,get:function(){return o.serializeAuthenticationRecord}}),Object.defineProperty(r,"deserializeAuthenticationRecord",{enumerable:!0,get:function(){return o.deserializeAuthenticationRecord}});var a=e.r(82733);Object.defineProperty(r,"ChainedTokenCredential",{enumerable:!0,get:function(){return a.ChainedTokenCredential}});var s=e.r(80038);Object.defineProperty(r,"ClientSecretCredential",{enumerable:!0,get:function(){return s.ClientSecretCredential}});var l=e.r(20361);Object.defineProperty(r,"DefaultAzureCredential",{enumerable:!0,get:function(){return l.DefaultAzureCredential}});var c=e.r(18927);Object.defineProperty(r,"EnvironmentCredential",{enumerable:!0,get:function(){return c.EnvironmentCredential}});var u=e.r(93108);Object.defineProperty(r,"ClientCertificateCredential",{enumerable:!0,get:function(){return u.ClientCertificateCredential}});var d=e.r(90532);Object.defineProperty(r,"ClientAssertionCredential",{enumerable:!0,get:function(){return d.ClientAssertionCredential}});var h=e.r(92686);Object.defineProperty(r,"AzureCliCredential",{enumerable:!0,get:function(){return h.AzureCliCredential}});var f=e.r(55026);Object.defineProperty(r,"AzureDeveloperCliCredential",{enumerable:!0,get:function(){return f.AzureDeveloperCliCredential}});var p=e.r(59027);Object.defineProperty(r,"InteractiveBrowserCredential",{enumerable:!0,get:function(){return p.InteractiveBrowserCredential}});var m=e.r(82535);Object.defineProperty(r,"ManagedIdentityCredential",{enumerable:!0,get:function(){return m.ManagedIdentityCredential}});var g=e.r(96658);Object.defineProperty(r,"DeviceCodeCredential",{enumerable:!0,get:function(){return g.DeviceCodeCredential}});var y=e.r(9083);Object.defineProperty(r,"AzurePipelinesCredential",{enumerable:!0,get:function(){return y.AzurePipelinesCredential}});var _=e.r(11667);Object.defineProperty(r,"AuthorizationCodeCredential",{enumerable:!0,get:function(){return _.AuthorizationCodeCredential}});var E=e.r(52739);Object.defineProperty(r,"AzurePowerShellCredential",{enumerable:!0,get:function(){return E.AzurePowerShellCredential}});var T=e.r(43471);Object.defineProperty(r,"UsernamePasswordCredential",{enumerable:!0,get:function(){return T.UsernamePasswordCredential}});var b=e.r(41149);Object.defineProperty(r,"VisualStudioCodeCredential",{enumerable:!0,get:function(){return b.VisualStudioCodeCredential}});var v=e.r(23490);Object.defineProperty(r,"OnBehalfOfCredential",{enumerable:!0,get:function(){return v.OnBehalfOfCredential}});var A=e.r(43442);Object.defineProperty(r,"WorkloadIdentityCredential",{enumerable:!0,get:function(){return A.WorkloadIdentityCredential}});var C=e.r(8317);Object.defineProperty(r,"logger",{enumerable:!0,get:function(){return C.logger}});var S=e.r(59766);Object.defineProperty(r,"AzureAuthorityHosts",{enumerable:!0,get:function(){return S.AzureAuthorityHosts}});var w=e.r(15273);Object.defineProperty(r,"getBearerTokenProvider",{enumerable:!0,get:function(){return w.getBearerTokenProvider}})},81237,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzureKeyCredential=void 0,r.AzureKeyCredential=class{_key;get key(){return this._key}constructor(e){if(!e)throw Error("key must be a non-empty string");this._key=e}update(e){this._key=e}}},40017,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isKeyCredential=function(e){return(0,n.isObjectWithProperties)(e,["key"])&&"string"==typeof e.key};let n=e.r(96555)},45347,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzureNamedKeyCredential=void 0,r.isNamedKeyCredential=function(e){return(0,n.isObjectWithProperties)(e,["name","key"])&&"string"==typeof e.key&&"string"==typeof e.name};let n=e.r(96555);r.AzureNamedKeyCredential=class{_key;_name;get key(){return this._key}get name(){return this._name}constructor(e,t){if(!e||!t)throw TypeError("name and key must be non-empty strings");this._name=e,this._key=t}update(e,t){if(!e||!t)throw TypeError("newName and newKey must be non-empty strings");this._name=e,this._key=t}}},55134,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AzureSASCredential=void 0,r.isSASCredential=function(e){return(0,n.isObjectWithProperties)(e,["signature"])&&"string"==typeof e.signature};let n=e.r(96555);r.AzureSASCredential=class{_signature;get signature(){return this._signature}constructor(e){if(!e)throw Error("shared access signature must be a non-empty string");this._signature=e}update(e){if(!e)throw Error("shared access signature must be a non-empty string");this._signature=e}}},44866,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isBearerToken=function(e){return!e.tokenType||"Bearer"===e.tokenType},r.isPopToken=function(e){return"pop"===e.tokenType},r.isTokenCredential=function(e){return e&&"function"==typeof e.getToken&&(void 0===e.signRequest||e.getToken.length>0)}},57926,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTokenCredential=r.isSASCredential=r.AzureSASCredential=r.isNamedKeyCredential=r.AzureNamedKeyCredential=r.isKeyCredential=r.AzureKeyCredential=void 0;var n=e.r(81237);Object.defineProperty(r,"AzureKeyCredential",{enumerable:!0,get:function(){return n.AzureKeyCredential}});var i=e.r(40017);Object.defineProperty(r,"isKeyCredential",{enumerable:!0,get:function(){return i.isKeyCredential}});var o=e.r(45347);Object.defineProperty(r,"AzureNamedKeyCredential",{enumerable:!0,get:function(){return o.AzureNamedKeyCredential}}),Object.defineProperty(r,"isNamedKeyCredential",{enumerable:!0,get:function(){return o.isNamedKeyCredential}});var a=e.r(55134);Object.defineProperty(r,"AzureSASCredential",{enumerable:!0,get:function(){return a.AzureSASCredential}}),Object.defineProperty(r,"isSASCredential",{enumerable:!0,get:function(){return a.isSASCredential}});var s=e.r(44866);Object.defineProperty(r,"isTokenCredential",{enumerable:!0,get:function(){return s.isTokenCredential}})},75823,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(27699),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(e.r(24361));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class a extends n.EventEmitter{constructor({data:e=!1,payload:t=!1,packet:r=!1,token:n=!1}={}){super(),this.options={data:e,payload:t,packet:r,token:n},this.indent="  "}packet(e,t){this.haveListeners()&&this.options.packet&&(this.log(""),this.log(e),this.log(t.headerToString(this.indent)))}data(e){this.haveListeners()&&this.options.data&&this.log(e.dataToString(this.indent))}payload(e){this.haveListeners()&&this.options.payload&&this.log(e())}token(e){this.haveListeners()&&this.options.token&&this.log(i.inspect(e,{showHidden:!1,depth:5,colors:!0}))}haveListeners(){return this.listeners("debug").length>0}log(e){this.emit("debug",e)}}r.default=a,t.exports=a},42012,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=class extends Error{constructor(){super("The operation was aborted"),this.code="ABORT_ERR",this.name="AbortError"}}},23862,(e,t,r)=>{t.exports=e.x("dgram",()=>require("dgram"))},20423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sendInParallel=l,r.sendMessage=c;var n=s(e.r(23862)),i=s(e.r(4446)),o=s(e.r(57764)),a=s(e.r(42012));function s(e){return e&&e.__esModule?e:{default:e}}async function l(e,t,r,i){if(i.aborted)throw new a.default;return await new Promise((o,s)=>{let l=[],c=0,u=t=>{++c===e.length&&(i.removeEventListener("abort",h),f(),s(t))},d=e=>{i.removeEventListener("abort",h),f(),o(e)},h=()=>{f(),s(new a.default)},f=()=>{for(let e of l)e.removeListener("error",u),e.removeListener("message",d),e.close()};i.addEventListener("abort",h,{once:!0});for(let i=0;i<e.length;i++){let o=6===e[i].family?"udp6":"udp4",a=n.default.createSocket(o);l.push(a),a.on("error",u),a.on("message",d),a.send(r,0,r.length,t,e[i].address)}})}async function c(e,t,r,n,s){let c;if(n.aborted)throw new a.default;return c=i.default.isIP(e)?[{address:e,family:i.default.isIPv6(e)?6:4}]:await new Promise((t,i)=>{let s=()=>{i(new a.default)},l=o.default.domainToASCII(e);r(""===l?e:l,{all:!0},(e,r)=>{n.removeEventListener("abort",s),e?i(e):t(r)})}),await l(c,t,s,n)}},26997,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=class extends Error{constructor(){super("The operation was aborted due to timeout"),this.code="TIMEOUT_ERR",this.name="TimeoutError"}}},7116,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=i;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(26997));async function i(e,t,r){let i=new AbortController,o=()=>{i.abort()},a=setTimeout(o,e);r?.addEventListener("abort",o,{once:!0});try{return await t(i.signal)}catch(e){if(e instanceof Error&&"AbortError"===e.name&&!(r&&r.aborted))throw new n.default;throw e}finally{r?.removeEventListener("abort",o),clearTimeout(a)}}},74242,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.instanceLookup=l,r.parseBrowserResponse=c;var n=s(e.r(79594)),i=s(e.r(42012)),o=e.r(20423),a=e.r(7116);function s(e){return e&&e.__esModule?e:{default:e}}async function l(e){let t,r=e.server;if("string"!=typeof r)throw TypeError('Invalid arguments: "server" must be a string');let s=e.instanceName;if("string"!=typeof s)throw TypeError('Invalid arguments: "instanceName" must be a string');let l=void 0===e.timeout?2e3:e.timeout;if("number"!=typeof l)throw TypeError('Invalid arguments: "timeout" must be a number');let u=void 0===e.retries?3:e.retries;if("number"!=typeof u)throw TypeError('Invalid arguments: "retries" must be a number');if(void 0!==e.lookup&&"function"!=typeof e.lookup)throw TypeError('Invalid arguments: "lookup" must be a function');let d=e.lookup??n.default.lookup;if(void 0!==e.port&&"number"!=typeof e.port)throw TypeError('Invalid arguments: "port" must be a number');let h=e.port??1434,f=e.signal;if(f.aborted)throw new i.default;for(let r=0;r<=u;r++)try{t=await (0,a.withTimeout)(l,async t=>{let r=Buffer.from([2]);return await (0,o.sendMessage)(e.server,h,d,t,r)},f)}catch(e){if(!f.aborted&&e instanceof Error&&"TimeoutError"===e.name)continue;throw e}if(!t)throw Error("Failed to get response from SQL Server Browser on "+r);let p=c(t.toString("ascii",3),s);if(!p)throw Error("Port for "+s+" not found in "+e.server);return p}function c(e,t){let r,n=e.split(";;");for(let e=0,i=n.length;e<i;e++){let i=n[e].split(";");for(let e=0,n=i.length;e<n;e+=2){let n=i[e],o=i[e+1];if("tcp"===n&&r)return parseInt(o,10);"InstanceName"===n&&(r=o.toUpperCase()===t.toUpperCase())}}}},73476,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TransientErrorLookup=void 0,r.TransientErrorLookup=class{isTransientError(e){return -1!==[4060,10928,10929,40197,40501,40613].indexOf(e)}}},31071,(e,t,r)=>{!function(){"use strict";var e=/[^T]/,t=/[^v]/,n=/[diefg]/,i=/[bcdiefguxX]/,o=/[j]/,a=/^[^\x25]+/,s=/^\x25{2}/,l=/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,c=/^([a-z_][a-z_\d]*)/i,u=/^\.([a-z_][a-z_\d]*)/i,d=/^\[(\d+)\]/,h=/^[+-]/;function f(r){return function(r,a){var s,l,c,u,d,p,m,g,y,_=1,E=r.length,T="";for(l=0;l<E;l++)if("string"==typeof r[l])T+=r[l];else if("object"==typeof r[l]){if((u=r[l]).keys)for(c=0,s=a[_];c<u.keys.length;c++){if(void 0==s)throw Error(f('[sprintf] Cannot access property "%s" of undefined value "%s"',u.keys[c],u.keys[c-1]));s=s[u.keys[c]]}else s=u.param_no?a[u.param_no]:a[_++];if(e.test(u.type)&&t.test(u.type)&&s instanceof Function&&(s=s()),i.test(u.type)&&"number"!=typeof s&&isNaN(s))throw TypeError(f("[sprintf] expecting number but found %T",s));switch(n.test(u.type)&&(g=s>=0),u.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,u.width?parseInt(u.width):0);break;case"e":s=u.precision?parseFloat(s).toExponential(u.precision):parseFloat(s).toExponential();break;case"f":s=u.precision?parseFloat(s).toFixed(u.precision):parseFloat(s);break;case"g":s=u.precision?String(Number(s.toPrecision(u.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=u.precision?s.substring(0,u.precision):s;break;case"t":s=String(!!s),s=u.precision?s.substring(0,u.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=u.precision?s.substring(0,u.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=u.precision?s.substring(0,u.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase()}o.test(u.type)?T+=s:(n.test(u.type)&&(!g||u.sign)?(y=g?"+":"-",s=s.toString().replace(h,"")):y="",p=u.pad_char?"0"===u.pad_char?"0":u.pad_char.charAt(1):" ",m=u.width-(y+s).length,d=u.width&&m>0?p.repeat(m):"",T+=u.align?y+s+d:"0"===p?y+d+s:d+y+s)}return T}(function(e){if(p[e])return p[e];for(var t,r=e,n=[],i=0;r;){if(null!==(t=a.exec(r)))n.push(t[0]);else if(null!==(t=s.exec(r)))n.push("%");else if(null!==(t=l.exec(r))){if(t[2]){i|=1;var o=[],h=t[2],f=[];if(null!==(f=c.exec(h)))for(o.push(f[1]);""!==(h=h.substring(f[0].length));)if(null!==(f=u.exec(h)))o.push(f[1]);else if(null!==(f=d.exec(h)))o.push(f[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");t[2]=o}else i|=2;if(3===i)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");r=r.substring(t[0].length)}return p[e]=n}(r),arguments)}var p=Object.create(null);r.sprintf=f,r.vsprintf=function(e,t){return f.apply(null,[e].concat(t||[]))}}()},33755,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TYPE=r.Packet=r.OFFSET=r.HEADER_LENGTH=void 0,r.isPacketComplete=function(e){return!(e.length<i)&&e.length>=e.readUInt16BE(l.Length)},r.packetLength=function(e){return e.readUInt16BE(l.Length)};var n=e.r(31071);let i=r.HEADER_LENGTH=8,o=r.TYPE={SQL_BATCH:1,RPC_REQUEST:3,TABULAR_RESULT:4,ATTENTION:6,BULK_LOAD:7,TRANSACTION_MANAGER:14,LOGIN7:16,NTLMAUTH_PKT:17,PRELOGIN:18,FEDAUTH_TOKEN:8},a={};for(let e in o)a[o[e]]=e;let s={NORMAL:0,EOM:1,IGNORE:2,RESETCONNECTION:8,RESETCONNECTIONSKIPTRAN:16},l=r.OFFSET={Type:0,Status:1,Length:2,SPID:4,PacketID:6,Window:7};r.Packet=class{constructor(e){e instanceof Buffer?this.buffer=e:(this.buffer=Buffer.alloc(i,0),this.buffer.writeUInt8(e,l.Type),this.buffer.writeUInt8(s.NORMAL,l.Status),this.buffer.writeUInt16BE(0,l.SPID),this.buffer.writeUInt8(1,l.PacketID),this.buffer.writeUInt8(0,l.Window),this.setLength())}setLength(){this.buffer.writeUInt16BE(this.buffer.length,l.Length)}length(){return this.buffer.readUInt16BE(l.Length)}resetConnection(e){let t=this.buffer.readUInt8(l.Status);e?t|=s.RESETCONNECTION:t&=255-s.RESETCONNECTION,this.buffer.writeUInt8(t,l.Status)}last(e){let t=this.buffer.readUInt8(l.Status);return arguments.length>0&&(e?t|=s.EOM:t&=255-s.EOM,this.buffer.writeUInt8(t,l.Status)),this.isLast()}ignore(e){let t=this.buffer.readUInt8(l.Status);e?t|=s.IGNORE:t&=255-s.IGNORE,this.buffer.writeUInt8(t,l.Status)}isLast(){return!!(this.buffer.readUInt8(l.Status)&s.EOM)}packetId(e){return e&&this.buffer.writeUInt8(e%256,l.PacketID),this.buffer.readUInt8(l.PacketID)}addData(e){return this.buffer=Buffer.concat([this.buffer,e]),this.setLength(),this}data(){return this.buffer.slice(i)}type(){return this.buffer.readUInt8(l.Type)}statusAsString(){let e=this.buffer.readUInt8(l.Status),t=[];for(let r in s)e&s[r]?t.push(r):t.push(void 0);return t.join(" ").trim()}headerToString(e=""){return e+(0,n.sprintf)("type:0x%02X(%s), status:0x%02X(%s), length:0x%04X, spid:0x%04X, packetId:0x%02X, window:0x%02X",this.buffer.readUInt8(l.Type),a[this.buffer.readUInt8(l.Type)],this.buffer.readUInt8(l.Status),this.statusAsString(),this.buffer.readUInt16BE(l.Length),this.buffer.readUInt16BE(l.SPID),this.buffer.readUInt8(l.PacketID),this.buffer.readUInt8(l.Window))}dataToString(e=""){let t=this.data(),r="",i="";for(let o=0;o<t.length;o++)o%32==0&&(r+=e,r+=(0,n.sprintf)("%04X  ",o)),t[o]<32||t[o]>126?(i+=".",(o+1)%8==0&&(o+1)%32!=0&&(i+=" ")):i+=String.fromCharCode(t[o]),null!=t[o]&&(r+=(0,n.sprintf)("%02X",t[o])),(o+1)%4==0&&(o+1)%32!=0&&(r+=" "),(o+1)%32==0&&(r+="  "+i,i="",o<t.length-1&&(r+="\n"));return i.length&&(r+="  "+i),r}toString(e=""){return this.headerToString(e)+"\n"+this.dataToString(e+e)}payloadString(){return""}}},9278,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(31071),i=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564));let o={VERSION:0,ENCRYPTION:1,INSTOPT:2,THREADID:3,MARS:4,FEDAUTHREQUIRED:6,TERMINATOR:255},a={OFF:0,ON:1,NOT_SUP:2,REQ:3},s={};for(let e in a)s[a[e]]=e;let l={OFF:0,ON:1},c={};for(let e in l)c[l[e]]=e;class u{constructor(e={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}){e instanceof Buffer?(this.data=e,this.options={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}):(this.options=e,this.createOptions()),this.extractOptions()}createOptions(){let e=[this.createVersionOption(),this.createEncryptionOption(),this.createInstanceOption(),this.createThreadIdOption(),this.createMarsOption(),this.createFedAuthOption()],t=0;for(let r=0,n=e.length;r<n;r++)t+=5+e[r].data.length;t++,this.data=Buffer.alloc(t,0);let r=0,n=5*e.length+1;for(let t=0,i=e.length;t<i;t++){let i=e[t];this.data.writeUInt8(i.token,r+0),this.data.writeUInt16BE(n,r+1),this.data.writeUInt16BE(i.data.length,r+3),r+=5,i.data.copy(this.data,n),n+=i.data.length}this.data.writeUInt8(o.TERMINATOR,r)}createVersionOption(){let e=new i.default(20);return e.writeUInt8(this.options.version.major),e.writeUInt8(this.options.version.minor),e.writeUInt16BE(this.options.version.build),e.writeUInt16BE(this.options.version.subbuild),{token:o.VERSION,data:e.data}}createEncryptionOption(){let e=new i.default(20);return this.options.encrypt?e.writeUInt8(a.ON):e.writeUInt8(a.NOT_SUP),{token:o.ENCRYPTION,data:e.data}}createInstanceOption(){let e=new i.default(20);return e.writeUInt8(0),{token:o.INSTOPT,data:e.data}}createThreadIdOption(){let e=new i.default(20);return e.writeUInt32BE(0),{token:o.THREADID,data:e.data}}createMarsOption(){let e=new i.default(20);return e.writeUInt8(l.OFF),{token:o.MARS,data:e.data}}createFedAuthOption(){let e=new i.default(20);return e.writeUInt8(1),{token:o.FEDAUTHREQUIRED,data:e.data}}extractOptions(){let e=0;for(;this.data[e]!==o.TERMINATOR;){let t=this.data.readUInt16BE(e+1),r=this.data.readUInt16BE(e+3);switch(this.data[e]){case o.VERSION:this.extractVersion(t);break;case o.ENCRYPTION:this.extractEncryption(t);break;case o.INSTOPT:this.extractInstance(t);break;case o.THREADID:r>0&&this.extractThreadId(t);break;case o.MARS:this.extractMars(t);break;case o.FEDAUTHREQUIRED:this.extractFedAuth(t)}e+=5,t+=r}}extractVersion(e){this.version={major:this.data.readUInt8(e+0),minor:this.data.readUInt8(e+1),build:this.data.readUInt16BE(e+2),subbuild:this.data.readUInt16BE(e+4)}}extractEncryption(e){this.encryption=this.data.readUInt8(e),this.encryptionString=s[this.encryption]}extractInstance(e){this.instance=this.data.readUInt8(e)}extractThreadId(e){this.threadId=this.data.readUInt32BE(e)}extractMars(e){this.mars=this.data.readUInt8(e),this.marsString=c[this.mars]}extractFedAuth(e){this.fedAuthRequired=this.data.readUInt8(e)}toString(e=""){return e+"PreLogin - "+(0,n.sprintf)("version:%d.%d.%d.%d, encryption:0x%02X(%s), instopt:0x%02X, threadId:0x%08X, mars:0x%02X(%s)",this.version.major,this.version.minor,this.version.build,this.version.subbuild,this.encryption?this.encryption:0,this.encryptionString?this.encryptionString:"",this.instance?this.instance:0,this.threadId?this.threadId:0,this.mars?this.mars:0,this.marsString?this.marsString:"")}}r.default=u,t.exports=u},88014,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.versionsByValue=r.versions=void 0;let n=r.versions={"7_1":0x71000001,"7_2":0x72090002,"7_3_A":0x730a0003,"7_3_B":0x730b0003,"7_4":0x74000004,"8_0":0x8000000},i=r.versionsByValue={};for(let e in n)i[n[e]]=e},49614,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(31071),i=e.r(88014);let o={ENDIAN_LITTLE:0,CHARSET_ASCII:0,FLOAT_IEEE_754:0,BCP_DUMPLOAD_OFF:16,USE_DB_OFF:32,INIT_DB_WARN:0,INIT_DB_FATAL:64,SET_LANG_WARN_ON:128},a={INIT_LANG_WARN:0,ODBC_OFF:0,USER_NORMAL:0,INTEGRATED_SECURITY_OFF:0,INTEGRATED_SECURITY_ON:128},s={SQL_DFLT:0,OLEDB_OFF:0,READ_WRITE_INTENT:0,READ_ONLY_INTENT:32},l={CHANGE_PASSWORD_NO:0,UNKNOWN_COLLATION_HANDLING:8,EXTENSION_USED:16},c={FEATURE_ID:2,LIBRARY_SECURITYTOKEN:1,LIBRARY_ADAL:2,FEDAUTH_YES_ECHO:1,FEDAUTH_NO_ECHO:0,ADAL_WORKFLOW_USER_PASS:1};class u{constructor({tdsVersion:e,packetSize:t,clientProgVer:r,clientPid:n,connectionId:i,clientTimeZone:o,clientLcid:a}){this.tdsVersion=e,this.packetSize=t,this.clientProgVer=r,this.clientPid=n,this.connectionId=i,this.clientTimeZone=o,this.clientLcid=a,this.readOnlyIntent=!1,this.initDbFatal=!1,this.fedAuth=void 0,this.userName=void 0,this.password=void 0,this.serverName=void 0,this.appName=void 0,this.hostname=void 0,this.libraryName=void 0,this.language=void 0,this.database=void 0,this.clientId=void 0,this.sspi=void 0,this.attachDbFile=void 0,this.changePassword=void 0}toBuffer(){let e=Buffer.alloc(94),t=[e],r=0,n=e.length;if(r=e.writeUInt32LE(0,r),r=e.writeUInt32LE(this.tdsVersion,r),r=e.writeUInt32LE(this.packetSize,r),r=e.writeUInt32LE(this.clientProgVer,r),r=e.writeUInt32LE(this.clientPid,r),r=e.writeUInt32LE(this.connectionId,r),r=e.writeUInt8(this.buildOptionFlags1(),r),r=e.writeUInt8(this.buildOptionFlags2(),r),r=e.writeUInt8(this.buildTypeFlags(),r),r=e.writeUInt8(this.buildOptionFlags3(),r),r=e.writeInt32LE(this.clientTimeZone,r),r=e.writeUInt32LE(this.clientLcid,r),r=e.writeUInt16LE(n,r),this.hostname){let i=Buffer.from(this.hostname,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(n,r);if(r=e.writeUInt16LE(n,r),this.userName){let i=Buffer.from(this.userName,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);if(r=e.writeUInt16LE(n,r),this.password){let i=Buffer.from(this.password,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(this.scramblePassword(i))}else r=e.writeUInt16LE(0,r);if(r=e.writeUInt16LE(n,r),this.appName){let i=Buffer.from(this.appName,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);if(r=e.writeUInt16LE(n,r),this.serverName){let i=Buffer.from(this.serverName,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);r=e.writeUInt16LE(n,r);let i=this.buildFeatureExt();r=e.writeUInt16LE(4,r);let o=Buffer.alloc(4);if(o.writeUInt32LE(n+=4,0),n+=i.length,t.push(o,i),r=e.writeUInt16LE(n,r),this.libraryName){let i=Buffer.from(this.libraryName,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);if(r=e.writeUInt16LE(n,r),this.language){let i=Buffer.from(this.language,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);if(r=e.writeUInt16LE(n,r),this.database){let i=Buffer.from(this.database,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);if(this.clientId&&this.clientId.copy(e,r,0,6),r+=6,r=e.writeUInt16LE(n,r),this.sspi?(r=this.sspi.length>65535?e.writeUInt16LE(65535,r):e.writeUInt16LE(this.sspi.length,r),t.push(this.sspi)):r=e.writeUInt16LE(0,r),r=e.writeUInt16LE(n,r),this.attachDbFile){let i=Buffer.from(this.attachDbFile,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);if(r=e.writeUInt16LE(n,r),this.changePassword){let i=Buffer.from(this.changePassword,"ucs2");r=e.writeUInt16LE(i.length/2,r),n+=i.length,t.push(i)}else r=e.writeUInt16LE(0,r);this.sspi&&this.sspi.length>65535?e.writeUInt32LE(this.sspi.length,r):e.writeUInt32LE(0,r);let a=Buffer.concat(t);return a.writeUInt32LE(a.length,0),a}buildOptionFlags1(){let e=o.ENDIAN_LITTLE|o.CHARSET_ASCII|o.FLOAT_IEEE_754|o.BCP_DUMPLOAD_OFF|o.USE_DB_OFF|o.SET_LANG_WARN_ON;return this.initDbFatal?e|=o.INIT_DB_FATAL:e|=o.INIT_DB_WARN,e}buildFeatureExt(){let e=[],t=this.fedAuth;if(t)switch(t.type){case"ADAL":let r=Buffer.alloc(7);r.writeUInt8(c.FEATURE_ID,0),r.writeUInt32LE(2,1),r.writeUInt8(c.LIBRARY_ADAL<<1|(t.echo?c.FEDAUTH_YES_ECHO:c.FEDAUTH_NO_ECHO),5),r.writeUInt8("integrated"===t.workflow?2:c.ADAL_WORKFLOW_USER_PASS,6),e.push(r);break;case"SECURITYTOKEN":let n=Buffer.from(t.fedAuthToken,"ucs2"),o=Buffer.alloc(10),a=0;a=o.writeUInt8(c.FEATURE_ID,a),a=o.writeUInt32LE(n.length+4+1,a),a=o.writeUInt8(c.LIBRARY_SECURITYTOKEN<<1|(t.echo?c.FEDAUTH_YES_ECHO:c.FEDAUTH_NO_ECHO),a),o.writeInt32LE(n.length,a),e.push(o),e.push(n)}if(this.tdsVersion>=i.versions["7_4"]){let t=Buffer.alloc(6);t.writeUInt8(10,0),t.writeUInt32LE(1,1),t.writeUInt8(1,5),e.push(t)}return e.push(Buffer.from([255])),Buffer.concat(e)}buildOptionFlags2(){let e=a.INIT_LANG_WARN|a.ODBC_OFF|a.USER_NORMAL;return this.sspi?e|=a.INTEGRATED_SECURITY_ON:e|=a.INTEGRATED_SECURITY_OFF,e}buildTypeFlags(){let e=s.SQL_DFLT|s.OLEDB_OFF;return this.readOnlyIntent?e|=s.READ_ONLY_INTENT:e|=s.READ_WRITE_INTENT,e}buildOptionFlags3(){return l.CHANGE_PASSWORD_NO|l.UNKNOWN_COLLATION_HANDLING|l.EXTENSION_USED}scramblePassword(e){for(let t=0,r=e.length;t<r;t++){let r=e[t];r=((15&r)<<4|r>>4)^165,e[t]=r}return e}toString(e=""){return e+"Login7 - "+(0,n.sprintf)("TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X",this.tdsVersion,this.packetSize,this.clientProgVer,this.clientPid,this.connectionId)+"\n"+e+"         "+(0,n.sprintf)("Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X",this.buildOptionFlags1(),this.buildOptionFlags2(),this.buildTypeFlags(),this.buildOptionFlags3(),this.clientTimeZone,this.clientLcid)+"\n"+e+"         "+(0,n.sprintf)("Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'",this.hostname,this.userName,this.password,this.appName,this.serverName,this.libraryName)+"\n"+e+"         "+(0,n.sprintf)("Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'",this.language,this.database,this.sspi,this.attachDbFile,this.changePassword)}}r.default=u,t.exports=u},8888,(e,t,r)=>{!function(){"use strict";var r={},n=!r.JS_MD4_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;n&&(r=e.g);var i,o=!r.JS_MD4_NO_COMMON_JS&&t.exports,a="function"==typeof define&&define.amd,s=!r.JS_MD4_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),c=[128,32768,8388608,-0x80000000],u=[0,8,16,24],d=["hex","array","digest","buffer","arrayBuffer"],h=[];if(s){var f=new ArrayBuffer(68);i=new Uint8Array(f),h=new Uint32Array(f)}var p=function(e){return function(t){return new g(!0).update(t)[e]()}},m=function(t){var r=e.r(54799),n=e.r(874).Buffer;return function(e){if("string"==typeof e)return r.createHash("md4").update(e,"utf8").digest("hex");if(s&&e instanceof ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return t(e);return r.createHash("md4").update(new n(e)).digest("hex")}};function g(e){if(e)h[0]=h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0,this.blocks=h,this.buffer8=i;else if(s){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}g.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&s&&e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var r,n,i=0,o=e.length||0,a=this.blocks,l=this.buffer8;i<o;){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)if(s)for(n=this.start;i<o&&n<64;++i)l[n++]=e[i];else for(n=this.start;i<o&&n<64;++i)a[n>>2]|=e[i]<<u[3&n++];else if(s)for(n=this.start;i<o&&n<64;++i)(r=e.charCodeAt(i))<128?l[n++]=r:(r<2048?l[n++]=192|r>>6:(r<55296||r>=57344?l[n++]=224|r>>12:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),l[n++]=240|r>>18,l[n++]=128|r>>12&63),l[n++]=128|r>>6&63),l[n++]=128|63&r);else for(n=this.start;i<o&&n<64;++i)(r=e.charCodeAt(i))<128?a[n>>2]|=r<<u[3&n++]:(r<2048?a[n>>2]|=(192|r>>6)<<u[3&n++]:(r<55296||r>=57344?a[n>>2]|=(224|r>>12)<<u[3&n++]:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),a[n>>2]|=(240|r>>18)<<u[3&n++],a[n>>2]|=(128|r>>12&63)<<u[3&n++]),a[n>>2]|=(128|r>>6&63)<<u[3&n++]),a[n>>2]|=(128|63&r)<<u[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this}},g.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=c[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,this.hash()}},g.prototype.hash=function(){var e,t,r,n,i,o,a,s,l=this.blocks;this.first?t=(t=((r=(r=((n=(n=(0xefcdab89&(e=(e=l[0]-1)<<3|e>>>29)|0x98badcfe&~e)+l[1]+0x10325476)<<7|n>>>25)&e|0xefcdab89&~n)+l[2]-0x67452302)<<11|r>>>21)&n|~r&e)+l[3]-0x10325477)<<19|t>>>13:(e=this.h0,t=this.h1,e+=(t&(r=this.h2)|~t&(n=this.h3))+l[0],n+=((e=e<<3|e>>>29)&t|~e&r)+l[1],r+=((n=n<<7|n>>>25)&e|~n&t)+l[2],t+=((r=r<<11|r>>>21)&n|~r&e)+l[3],t=t<<19|t>>>13),e+=(t&r|~t&n)+l[4],n+=((e=e<<3|e>>>29)&t|~e&r)+l[5],r+=((n=n<<7|n>>>25)&e|~n&t)+l[6],t+=((r=r<<11|r>>>21)&n|~r&e)+l[7],e+=((t=t<<19|t>>>13)&r|~t&n)+l[8],n+=((e=e<<3|e>>>29)&t|~e&r)+l[9],r+=((n=n<<7|n>>>25)&e|~n&t)+l[10],t+=((r=r<<11|r>>>21)&n|~r&e)+l[11],e+=((t=t<<19|t>>>13)&r|~t&n)+l[12],n+=((e=e<<3|e>>>29)&t|~e&r)+l[13],r+=((n=n<<7|n>>>25)&e|~n&t)+l[14],t+=((r=r<<11|r>>>21)&n|~r&e)+l[15],e+=((o=(t=t<<19|t>>>13)&r)|t&n|r&n)+l[0]+0x5a827999,n+=((i=(e=e<<3|e>>>29)&t)|e&r|o)+l[4]+0x5a827999,r+=((s=(n=n<<5|n>>>27)&e)|n&t|i)+l[8]+0x5a827999,t+=((a=(r=r<<9|r>>>23)&n)|r&e|s)+l[12]+0x5a827999,e+=((o=(t=t<<13|t>>>19)&r)|t&n|a)+l[1]+0x5a827999,n+=((i=(e=e<<3|e>>>29)&t)|e&r|o)+l[5]+0x5a827999,r+=((s=(n=n<<5|n>>>27)&e)|n&t|i)+l[9]+0x5a827999,t+=((a=(r=r<<9|r>>>23)&n)|r&e|s)+l[13]+0x5a827999,e+=((o=(t=t<<13|t>>>19)&r)|t&n|a)+l[2]+0x5a827999,n+=((i=(e=e<<3|e>>>29)&t)|e&r|o)+l[6]+0x5a827999,r+=((s=(n=n<<5|n>>>27)&e)|n&t|i)+l[10]+0x5a827999,t+=((a=(r=r<<9|r>>>23)&n)|r&e|s)+l[14]+0x5a827999,e+=((o=(t=t<<13|t>>>19)&r)|t&n|a)+l[3]+0x5a827999,n+=((i=(e=e<<3|e>>>29)&t)|e&r|o)+l[7]+0x5a827999,r+=((s=(n=n<<5|n>>>27)&e)|n&t|i)+l[11]+0x5a827999,t+=((r=r<<9|r>>>23)&n|r&e|s)+l[15]+0x5a827999,e+=((o=(t=t<<13|t>>>19)^r)^n)+l[0]+0x6ed9eba1,n+=(o^(e=e<<3|e>>>29))+l[8]+0x6ed9eba1,r+=((s=(n=n<<9|n>>>23)^e)^t)+l[4]+0x6ed9eba1,t+=(s^(r=r<<11|r>>>21))+l[12]+0x6ed9eba1,e+=((o=(t=t<<15|t>>>17)^r)^n)+l[2]+0x6ed9eba1,n+=(o^(e=e<<3|e>>>29))+l[10]+0x6ed9eba1,r+=((s=(n=n<<9|n>>>23)^e)^t)+l[6]+0x6ed9eba1,t+=(s^(r=r<<11|r>>>21))+l[14]+0x6ed9eba1,e+=((o=(t=t<<15|t>>>17)^r)^n)+l[1]+0x6ed9eba1,n+=(o^(e=e<<3|e>>>29))+l[9]+0x6ed9eba1,r+=((s=(n=n<<9|n>>>23)^e)^t)+l[5]+0x6ed9eba1,t+=(s^(r=r<<11|r>>>21))+l[13]+0x6ed9eba1,e+=((o=(t=t<<15|t>>>17)^r)^n)+l[3]+0x6ed9eba1,n+=(o^(e=e<<3|e>>>29))+l[11]+0x6ed9eba1,r+=((s=(n=n<<9|n>>>23)^e)^t)+l[7]+0x6ed9eba1,t+=(s^(r=r<<11|r>>>21))+l[15]+0x6ed9eba1,t=t<<15|t>>>17,this.first?(this.h0=e+0x67452301|0,this.h1=t-0x10325477|0,this.h2=r-0x67452302|0,this.h3=n+0x10325476|0,this.first=!1):(this.h0=this.h0+e|0,this.h1=this.h1+t|0,this.h2=this.h2+r|0,this.h3=this.h3+n|0)},g.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3;return l[e>>4&15]+l[15&e]+l[e>>12&15]+l[e>>8&15]+l[e>>20&15]+l[e>>16&15]+l[e>>28&15]+l[e>>24&15]+l[t>>4&15]+l[15&t]+l[t>>12&15]+l[t>>8&15]+l[t>>20&15]+l[t>>16&15]+l[t>>28&15]+l[t>>24&15]+l[r>>4&15]+l[15&r]+l[r>>12&15]+l[r>>8&15]+l[r>>20&15]+l[r>>16&15]+l[r>>28&15]+l[r>>24&15]+l[n>>4&15]+l[15&n]+l[n>>12&15]+l[n>>8&15]+l[n>>20&15]+l[n>>16&15]+l[n>>28&15]+l[n>>24&15]},g.prototype.toString=g.prototype.hex,g.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255]},g.prototype.array=g.prototype.digest,g.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},g.prototype.buffer=g.prototype.arrayBuffer;var y=function(){var e=p("hex");n&&(e=m(e)),e.create=function(){return new g},e.update=function(t){return e.create().update(t)};for(var t=0;t<d.length;++t){var r=d[t];e[r]=p(r)}return e}();if(o)t.exports=y;else r.md4=y,a&&(e.r,void 0!==y&&e.v(y))}()},88022,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e.r(2564)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(e.r(54799)),o=s(e.r(8888));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}class l{constructor(e){this.data=this.createResponse(e)}toString(e=""){return e+"NTLM Auth"}createResponse(e){let t=this.createClientNonce(),r=e.domain,i=e.userName,o=e.password,a=e.ntlmpacket,s=a.target,l=a.nonce,c=64+2*r.length+2*i.length+24+16+8+8+8+4+s.length+4,u=new n.default(c);u.position=0,u.writeString("NTLMSSP\0","utf8"),u.writeUInt32LE(3);let d=64+2*r.length,h=d+2*i.length;u.writeUInt16LE(24),u.writeUInt16LE(24),u.writeUInt32LE(h),u.writeUInt16LE(16),u.writeUInt16LE(16),u.writeUInt32LE(h+24),u.writeUInt16LE(2*r.length),u.writeUInt16LE(2*r.length),u.writeUInt32LE(64),u.writeUInt16LE(2*i.length),u.writeUInt16LE(2*i.length),u.writeUInt32LE(d),u.writeUInt16LE(0),u.writeUInt16LE(0),u.writeUInt32LE(64),u.writeUInt16LE(0),u.writeUInt16LE(0),u.writeUInt32LE(64),u.writeUInt16LE(33281),u.writeUInt16LE(8),u.writeString(r,"ucs2"),u.writeString(i,"ucs2");let f=this.lmv2Response(r,i,o,l,t);u.copyFrom(f);let p=new Date().getTime(),m=this.ntlmv2Response(r,i,o,l,s,t,p);u.copyFrom(m),u.writeUInt32LE(257),u.writeUInt32LE(0);let g=this.createTimestamp(p);return u.copyFrom(g),u.copyFrom(t),u.writeUInt32LE(0),u.copyFrom(s),u.writeUInt32LE(0),u.data}createClientNonce(){let e=Buffer.alloc(8,0),t=0;for(;t<8;)e.writeUInt8(Math.ceil(255*Math.random()),t),t++;return e}ntlmv2Response(e,t,r,n,i,o,a){let s=this.createTimestamp(a),l=this.ntv2Hash(e,t,r),c=40+i.length,u=Buffer.alloc(c,0);return n.copy(u,0,0,8),u.writeUInt32LE(257,8),u.writeUInt32LE(0,12),s.copy(u,16,0,8),o.copy(u,24,0,8),u.writeUInt32LE(0,32),i.copy(u,36,0,i.length),u.writeUInt32LE(0,36+i.length),this.hmacMD5(u,l)}createTimestamp(e){let t=(BigInt(e)+BigInt(0x2b6109100))*BigInt(1e7),r=Number(t&BigInt(0xffffffff)),n=Number(t>>BigInt(32)&BigInt(0xffffffff)),i=Buffer.alloc(8);return i.writeUInt32LE(r,0),i.writeUInt32LE(n,4),i}lmv2Response(e,t,r,n,i){let o=this.ntv2Hash(e,t,r),a=Buffer.alloc(n.length+i.length,0);n.copy(a),i.copy(a,n.length,0,i.length);let s=this.hmacMD5(a,o),l=Buffer.alloc(s.length+i.length,0);return s.copy(l),i.copy(l,s.length,0,i.length),l}ntv2Hash(e,t,r){let n=this.ntHash(r),i=Buffer.from(t.toUpperCase()+e.toUpperCase(),"ucs2");return this.hmacMD5(i,n)}ntHash(e){let t=Buffer.from(e,"ucs2");return Buffer.from(o.default.arrayBuffer(t))}hmacMD5(e,t){return i.createHmac("MD5",t).update(e).digest()}}r.default=l,t.exports=l},18134,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RequestError=r.InputError=r.ConnectionError=void 0,r.ConnectionError=class extends Error{constructor(e,t,r){super(e,r),this.code=t}},r.RequestError=class extends Error{constructor(e,t,r){super(e,r),this.code=t}};class n extends TypeError{}r.InputError=n},18925,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SQLServerStatementColumnEncryptionSetting=r.SQLServerEncryptionType=r.DescribeParameterEncryptionResultSet2=r.DescribeParameterEncryptionResultSet1=void 0,r.SQLServerEncryptionType=function(e){return e[e.Deterministic=1]="Deterministic",e[e.Randomized=2]="Randomized",e[e.PlainText=0]="PlainText",e}({}),r.DescribeParameterEncryptionResultSet1=function(e){return e[e.KeyOrdinal=0]="KeyOrdinal",e[e.DbId=1]="DbId",e[e.KeyId=2]="KeyId",e[e.KeyVersion=3]="KeyVersion",e[e.KeyMdVersion=4]="KeyMdVersion",e[e.EncryptedKey=5]="EncryptedKey",e[e.ProviderName=6]="ProviderName",e[e.KeyPath=7]="KeyPath",e[e.KeyEncryptionAlgorithm=8]="KeyEncryptionAlgorithm",e}({}),r.DescribeParameterEncryptionResultSet2=function(e){return e[e.ParameterOrdinal=0]="ParameterOrdinal",e[e.ParameterName=1]="ParameterName",e[e.ColumnEncryptionAlgorithm=2]="ColumnEncryptionAlgorithm",e[e.ColumnEncrytionType=3]="ColumnEncrytionType",e[e.ColumnEncryptionKeyOrdinal=4]="ColumnEncryptionKeyOrdinal",e[e.NormalizationRuleVersion=5]="NormalizationRuleVersion",e}({}),r.SQLServerStatementColumnEncryptionSetting=function(e){return e[e.UseConnectionSetting=0]="UseConnectionSetting",e[e.Enabled=1]="Enabled",e[e.ResultSetOnly=2]="ResultSetOnly",e[e.Disabled=3]="Disabled",e}({})},48779,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(27699),i=e.r(18134),o=e.r(18925);class a extends n.EventEmitter{on(e,t){return super.on(e,t)}emit(e,...t){return super.emit(e,...t)}constructor(e,t,r){super(),this.sqlTextOrProcedure=e,this.parameters=[],this.parametersByName={},this.preparing=!1,this.handle=void 0,this.canceled=!1,this.paused=!1,this.error=void 0,this.connection=void 0,this.timeout=void 0,this.userCallback=t,this.statementColumnEncryptionSetting=r&&r.statementColumnEncryptionSetting||o.SQLServerStatementColumnEncryptionSetting.UseConnectionSetting,this.cryptoMetadataLoaded=!1,this.callback=function(e,t,r){this.preparing?(this.preparing=!1,e?this.emit("error",e):this.emit("prepared")):(this.userCallback(e,t,r),this.emit("requestCompleted"))}}addParameter(e,t,r,n){let{output:i=!1,length:o,precision:a,scale:s}=n??{},l={type:t,name:e,value:r,output:i,length:o,precision:a,scale:s};this.parameters.push(l),this.parametersByName[e]=l}addOutputParameter(e,t,r,n){this.addParameter(e,t,r,{...n,output:!0})}makeParamsParameter(e){let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r];t.length>0&&(t+=", "),t+="@"+n.name+" ",t+=n.type.declaration(n),n.output&&(t+=" OUTPUT")}return t}validateParameters(e){for(let t=0,r=this.parameters.length;t<r;t++){let r=this.parameters[t];try{r.value=r.type.validate(r.value,e)}catch(e){throw new i.RequestError("Validation failed for parameter '"+r.name+"'. "+e.message,"EPARAM",{cause:e})}}}pause(){this.paused||(this.emit("pause"),this.paused=!0)}resume(){this.paused&&(this.paused=!1,this.emit("resume"))}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}setTimeout(e){this.timeout=e}}r.default=a,t.exports=a},76849,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.writeToTrackingBuffer=function(e,t,r){e.writeUInt32LE(0),e.writeUInt32LE(i),e.writeUInt16LE(n.TXN_DESCRIPTOR),e.writeBuffer(t),e.writeUInt32LE(r);let o=e.data;return o.writeUInt32LE(o.length,0),e};let n={TXN_DESCRIPTOR:2},i=18},14568,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564)),i=e.r(76849),o=e.r(18134);let a={BY_REF_VALUE:1};class s{constructor(e,t,r,n,i){this.procedure=e,this.parameters=t,this.options=n,this.txnDescriptor=r,this.collation=i}[Symbol.iterator](){return this.generateData()}*generateData(){let e=new n.default(500);this.options.tdsVersion>="7_2"&&(0,i.writeToTrackingBuffer)(e,this.txnDescriptor,1),"string"==typeof this.procedure?e.writeUsVarchar(this.procedure):(e.writeUShort(65535),e.writeUShort(this.procedure)),e.writeUInt16LE(0),yield e.data;let t=this.parameters.length;for(let e=0;e<t;e++)yield*this.generateParameterData(this.parameters[e])}toString(e=""){return e+"RPC Request - "+this.procedure}*generateParameterData(e){let t=new n.default(3+Buffer.byteLength(e.name,"ucs-2")+1);e.name?t.writeBVarchar("@"+e.name):t.writeBVarchar("");let r=0;e.output&&(r|=a.BY_REF_VALUE),t.writeUInt8(r),yield t.data;let i={value:e.value},s=e.type;(48&s.id)==32&&(e.length?i.length=e.length:s.resolveLength&&(i.length=s.resolveLength(e))),e.precision?i.precision=e.precision:s.resolvePrecision&&(i.precision=s.resolvePrecision(e)),e.scale?i.scale=e.scale:s.resolveScale&&(i.scale=s.resolveScale(e)),this.collation&&(i.collation=this.collation),yield s.generateTypeInfo(i,this.options),yield s.generateParameterLength(i,this.options);try{yield*s.generateParameterData(i,this.options)}catch(t){throw new o.InputError(`Input parameter '${e.name}' could not be validated`,{cause:t})}}}r.default=s,t.exports=s},18886,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564)),i=e.r(76849);class o{constructor(e,t,r){this.sqlText=e,this.txnDescriptor=t,this.options=r}*[Symbol.iterator](){if(this.options.tdsVersion>="7_2"){let e=new n.default(18,"ucs2");(0,i.writeToTrackingBuffer)(e,this.txnDescriptor,1),yield e.data}yield Buffer.from(this.sqlText,"ucs2")}toString(e=""){return e+"SQL Batch - "+this.sqlText}}r.default=o,t.exports=o},86889,(e,t,r)=>{"use strict";let n=e.r(88947).Duplex,i=Symbol("Callback"),o=Symbol("Other");class a extends n{constructor(e){super(e),this[i]=null,this[o]=null}_read(){let e=this[i];e&&(this[i]=null,e())}_write(e,t,r){this[o][i]=r,this[o].push(e)}_final(e){this[o].on("end",e),this[o].push(null)}}t.exports=class{constructor(e){this.socket1=new a(e),this.socket2=new a(e),this.socket1[o]=this.socket2,this.socket2[o]=this.socket1}}},56317,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(88947);class i extends n.PassThrough{constructor({type:e,resetConnection:t=!1}){super(),this.type=e,this.resetConnection=t,this.ignore=!1}}r.default=i,t.exports=i},30615,(e,t,r)=>{t.exports=e.g.process},6810,(e,t,r)=>{"use strict";t.exports={AggregateError:class extends Error{constructor(e){if(!Array.isArray(e))throw TypeError(`Expected input to be an Array, got ${typeof e}`);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}
`;super(t),this.name="AggregateError",this.errors=e}},ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},74433,(e,t,r)=>{"use strict";let{ArrayIsArray:n,ObjectSetPrototypeOf:i}=e.r(6810),{EventEmitter:o}=e.r(27699);function a(e){o.call(this,e)}function s(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(a.prototype,o.prototype),i(a,o),a.prototype.pipe=function(e,t){let r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",c));let a=!1;function l(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return s(r,"error",u),s(e,"error",u),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e},t.exports={Stream:a,prependListener:s}},25060,(e,t,r)=>{"use strict";t.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){let n=t.shift();if("f"===r)return n.toFixed(6);if("j"===r)return JSON.stringify(n);if("s"!==r||"object"!=typeof n)return n.toString();{let e=n.constructor!==Object?n.constructor.name:"";return`${e} {}`.trim()}}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;else if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":if(isNaN(e))return"NaN";if(Object.is(e,-0))return String(e);return e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},37646,(e,t,r)=>{"use strict";let{format:n,inspect:i}=e.r(25060),{AggregateError:o}=e.r(6810),a=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],c=/^([A-Z][a-z0-9]*)+$/,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function h(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,r){r||(r=Error);class i extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return d(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let i=(t.match(/%[dfijoOs]/g)||[]).length;return(d(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),0===r.length)?t:n(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[s]=!0,u[e]=i}function p(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(e,t,r)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";let o=[],a=[],s=[];for(let e of t)d("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?o.push(e.toLowerCase()):c.test(e)?a.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(a.length>0){let e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(a.length>0||s.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{let e=a.pop();n+=`an instance of ${a.join(", ")}, or ${e}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let e=s.pop();n+=`one of ${s.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var u;if(null!=(u=r.constructor)&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{let e=i(r,{depth:-1});n+=`. Received ${e}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n},TypeError),f("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=i(t);n.length>128&&(n=n.slice(0,128)+"...");let o=e.includes(".")?"property":"argument";return`The ${o} '${e}' ${r}. Received ${n}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;let i=null!=r&&null!=(n=r.constructor)&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError),f("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");let r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(e,t,r)=>{let n;if(d(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>0x100000000)n=h(String(r));else if("bigint"==typeof r){n=String(r);let e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(n=h(n)),n+="n"}else n=i(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:class extends Error{constructor(e="The operation was aborted",t){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}},aggregateTwoErrors:p(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new a([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:p,codes:u}},89857,(e,t,r)=>{"use strict";let{SymbolAsyncIterator:n,SymbolIterator:i,SymbolFor:o}=e.r(6810),a=o("nodejs.stream.destroyed"),s=o("nodejs.stream.errored"),l=o("nodejs.stream.readable"),c=o("nodejs.stream.writable"),u=o("nodejs.stream.disturbed"),d=o("nodejs.webstream.isClosedPromise");function h(e,t=!1){var r;return!!(e&&"function"==typeof e.pipe&&"function"==typeof e.on&&(!t||"function"==typeof e.pause&&"function"==typeof e.resume)&&(!e._writableState||(null==(r=e._readableState)?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function f(e){var t;return!!(e&&"function"==typeof e.write&&"function"==typeof e.on&&(!e._readableState||(null==(t=e._writableState)?void 0:t.writable)!==!1))}function p(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function m(e){return!!(e&&!p(e)&&"function"==typeof e.pipeThrough&&"function"==typeof e.getReader&&"function"==typeof e.cancel)}function g(e){return!!(e&&!p(e)&&"function"==typeof e.getWriter&&"function"==typeof e.abort)}function y(e){return!!(e&&!p(e)&&"object"==typeof e.readable&&"object"==typeof e.writable)}function _(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[a]||null!=n&&n.destroyed)}function E(e){if(!f(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function T(e,t){if(!h(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function b(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!_(e)&&h(e)&&e.readable&&!T(e)}function v(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!_(e)&&f(e)&&e.writable&&!E(e)}function A(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function C(e){return"boolean"==typeof e._sent100&&A(e)}t.exports={isDestroyed:_,kIsDestroyed:a,isDisturbed:function(e){var t;return!!(e&&(null!=(t=e[u])?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,n,i,o,a,l,c,u,d;return!!(e&&(null!=(t=null!=(r=null!=(n=null!=(i=null!=(o=null!=(a=e[s])?a:e.readableErrored)?o:e.writableErrored)?i:null==(l=e._readableState)?void 0:l.errorEmitted)?n:null==(c=e._writableState)?void 0:c.errorEmitted)?r:null==(u=e._readableState)?void 0:u.errored)?t:null==(d=e._writableState)?void 0:d.errored))},kIsErrored:s,isReadable:b,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:o("nodejs.webstream.controllerErrorFunction"),kIsWritable:c,isClosed:function(e){if(!p(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&A(e)?e._closed:null},isDuplexNodeStream:function(e){return!!(e&&"function"==typeof e.pipe&&e._readableState&&"function"==typeof e.on&&"function"==typeof e.write)},isFinished:function(e,t){return p(e)?!!_(e)||!((null==t?void 0:t.readable)!==!1&&b(e)||(null==t?void 0:t.writable)!==!1&&v(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[n]:!1===t?"function"==typeof e[i]:"function"==typeof e[n]||"function"==typeof e[i])},isReadableNodeStream:h,isReadableStream:m,isReadableEnded:function(e){if(!h(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!!t&&!t.errored&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:T,isReadableErrored:function(e){var t,r;return p(e)?e.readableErrored?e.readableErrored:null!=(t=null==(r=e._readableState)?void 0:r.errored)?t:null:null},isNodeStream:p,isWebStream:function(e){return m(e)||g(e)||y(e)},isWritable:v,isWritableNodeStream:f,isWritableStream:g,isWritableEnded:E,isWritableFinished:function(e,t){if(!f(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return p(e)?e.writableErrored?e.writableErrored:null!=(t=null==(r=e._writableState)?void 0:r.errored)?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&(null==(t=e.req)?void 0:t.upgradeOrConnect)===void 0},isServerResponse:C,willEmitClose:function(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!n&&C(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}},40951,(e,t,r)=>{"use strict";let n=e.f({process:{id:()=>30615,module:()=>e.r(30615)},"process/":{id:()=>30615,module:()=>e.r(30615)}})("process/"),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:a}=e.r(37646),{Symbol:s}=e.r(6810),{kIsDestroyed:l,isDestroyed:c,isFinished:u,isServerRequest:d}=e.r(89857),h=s("kDestroy"),f=s("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function m(e,t,r){let i=!1;function o(t){if(i)return;i=!0;let o=e._readableState,a=e._writableState;p(t,a,o),a&&(a.closed=!0),o&&(o.closed=!0),"function"==typeof r&&r(t),t?n.nextTick(g,e,t):n.nextTick(y,e)}try{e._destroy(t||null,o)}catch(e){o(e)}}function g(e,t){_(e,t),y(e)}function y(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function _(e,t){let r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function E(e,t,r){let i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(_,e,t):_(e,t))}function T(e){let t=!1;function r(r){if(t)return void E(e,null!=r?r:new o);t=!0;let i=e._readableState,a=e._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(h,r):r?E(e,r,!0):n.nextTick(b,e)}try{e._construct(e=>{n.nextTick(r,e)})}catch(e){n.nextTick(r,e)}}function b(e){e.emit(f)}function v(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function A(e){e.emit("close")}function C(e,t){e.emit("error",t),n.nextTick(A,e)}t.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(f,t),e.listenerCount(f)>1||n.nextTick(T,e)},destroyer:function(e,t){!(!e||c(e))&&(t||u(e)||(t=new a),d(e)?(e.socket=null,e.destroy(t)):v(e)?e.abort():v(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?n.nextTick(C,e,t):n.nextTick(A,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){let r=this._readableState,n=this._writableState,o=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?"function"==typeof t&&t():(p(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?m(this,e,t):this.once(h,function(r){m(this,i(r,e),t)})),this},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:E}},63771,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=new WeakMap,i=new WeakMap;function o(e){let t=n.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function a(e){if(null!=e.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault())}function s(e,t){n.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(t);for(let e=0;e<r.length;++e){let t=r[e];t in this||Object.defineProperty(this,t,l(t))}}function l(e){return{get(){return o(this).event[e]},set(t){o(this).event[e]=t},configurable:!0,enumerable:!0}}function c(e,t){o(e).passiveListener=t}s.prototype={get type(){return o(this).event.type},get target(){return o(this).eventTarget},get currentTarget(){return o(this).currentTarget},composedPath(){let e=o(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return o(this).eventPhase},stopPropagation(){let e=o(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){let e=o(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return!!o(this).event.bubbles},get cancelable(){return!!o(this).event.cancelable},preventDefault(){a(o(this))},get defaultPrevented(){return o(this).canceled},get composed(){return!!o(this).event.composed},get timeStamp(){return o(this).timeStamp},get srcElement(){return o(this).eventTarget},get cancelBubble(){return o(this).stopped},set cancelBubble(value){if(!value)return;let e=o(this);e.stopped=!0,"boolean"==typeof e.event.cancelBubble&&(e.event.cancelBubble=!0)},get returnValue(){return!o(this).canceled},set returnValue(value){value||a(o(this))},initEvent(){}},Object.defineProperty(s.prototype,"constructor",{value:s,configurable:!0,writable:!0});let u=new WeakMap;function d(e){return null!==e&&"object"==typeof e}function h(e){let t=u.get(e);if(null==t)throw TypeError("'this' is expected an EventTarget object, but got another value.");return t}function f(e,t){Object.defineProperty(e,`on${t}`,{get(){let e=h(this).get(t);for(;null!=e;){if(3===e.listenerType)return e.listener;e=e.next}return null},set(e){"function"==typeof e||d(e)||(e=null);let r=h(this),n=null,i=r.get(t);for(;null!=i;)3===i.listenerType?null!==n?n.next=i.next:null!==i.next?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(null!==e){let i={listener:e,listenerType:3,passive:!1,once:!1,next:null};null===n?r.set(t,i):n.next=i}},configurable:!0,enumerable:!0})}function p(e){function t(){m.call(this)}t.prototype=Object.create(m.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)f(t.prototype,e[r]);return t}function m(){if(this instanceof m)return void u.set(this,new Map);if(1==arguments.length&&Array.isArray(arguments[0]))return p(arguments[0]);if(arguments.length>0){let e=Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return p(e)}throw TypeError("Cannot call a class as a function")}m.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!d(t))throw TypeError("'listener' should be a function or an object.");let n=h(this),i=d(r),o=(i?r.capture:r)?1:2,a={listener:t,listenerType:o,passive:i&&!!r.passive,once:i&&!!r.once,next:null},s=n.get(e);if(void 0===s)return void n.set(e,a);let l=null;for(;null!=s;){if(s.listener===t&&s.listenerType===o)return;l=s,s=s.next}l.next=a},removeEventListener(e,t,r){if(null==t)return;let n=h(this),i=(d(r)?r.capture:r)?1:2,o=null,a=n.get(e);for(;null!=a;){if(a.listener===t&&a.listenerType===i)return void(null!==o?o.next=a.next:null!==a.next?n.set(e,a.next):n.delete(e));o=a,a=a.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw TypeError('"event.type" should be a string.');let t=h(this),r=e.type,n=t.get(r);if(null==n)return!0;let a=new(function e(t){if(null==t||t===Object.prototype)return s;let r=i.get(t);return null==r&&(r=function(e,t){let r=Object.keys(t);if(0===r.length)return e;function n(t,r){e.call(this,t,r)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let a=r[i];if(!(a in e.prototype)){let e="function"==typeof Object.getOwnPropertyDescriptor(t,a).value;Object.defineProperty(n.prototype,a,e?function(e){return{value(){let t=o(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}(a):l(a))}}return n}(e(Object.getPrototypeOf(t)),t),i.set(t,r)),r}(Object.getPrototypeOf(e)))(this,e),u=null;for(;null!=n;){if(n.once?null!==u?u.next=n.next:null!==n.next?t.set(r,n.next):t.delete(r):u=n,c(a,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,a)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(a);if(o(a).immediateStopped)break;n=n.next}return c(a,null),o(a).eventPhase=0,o(a).currentTarget=null,!a.defaultPrevented}},Object.defineProperty(m.prototype,"constructor",{value:m,configurable:!0,writable:!0}),r.defineEventAttribute=f,r.EventTarget=m,r.default=m,t.exports=m,t.exports.EventTarget=t.exports.default=m,t.exports.defineEventAttribute=f},61776,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e.r(63771);class AbortSignal extends n.EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=i.get(this);if("boolean"!=typeof e)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}}n.defineEventAttribute(AbortSignal.prototype,"abort");let i=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class o{constructor(){a.set(this,function(){let e=Object.create(AbortSignal.prototype);return n.EventTarget.call(e),i.set(e,!1),e}())}get signal(){return s(this)}abort(){var e;e=s(this),!1===i.get(e)&&(i.set(e,!0),e.dispatchEvent({type:"abort"}))}}let a=new WeakMap;function s(e){let t=a.get(e);if(null==t)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===e?"null":typeof e}`);return t}Object.defineProperties(o.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(o.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),r.AbortController=o,r.AbortSignal=AbortSignal,r.default=o,t.exports=o,t.exports.AbortController=t.exports.default=o,t.exports.AbortSignal=AbortSignal},66415,(e,t,r)=>{"use strict";let n=e.r(874),{format:i,inspect:o}=e.r(25060),{codes:{ERR_INVALID_ARG_TYPE:a}}=e.r(37646),{kResistStopPropagation:s,AggregateError:l,SymbolDispose:c}=e.r(6810),AbortSignal=globalThis.AbortSignal||e.r(61776).AbortSignal,u=globalThis.AbortController||e.r(61776).AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||n.Blob,f=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new a(t,"AbortSignal",e)};t.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...n)=>e?r(e):t(...n))}),debuglog:()=>function(){},format:i,inspect:o,types:{isAsyncFunction:e=>e instanceof d,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:void 0!==h?function(e){return e instanceof h}:function(e){return!1},deprecate:(e,t)=>e,addAbortListener:e.r(27699).addAbortListener||function(e,t){let r;if(void 0===e)throw new a("signal","AbortSignal",e);f(e,"signal");if("function"!=typeof t)throw new a("listener","Function",t);return e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[s]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[c](){var e;null==(e=r)||e()}}},AbortSignalAny:AbortSignal.any||function(e){if(1===e.length)return e[0];let t=new u,r=()=>t.abort();return e.forEach(e=>{f(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},52285,(e,t,r)=>{"use strict";let{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=e.r(6810),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:_,ERR_INVALID_ARG_TYPE:E,ERR_INVALID_ARG_VALUE:T,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:v}}=e.r(37646),{normalizeEncoding:A}=e.r(66415),{isAsyncFunction:C,isArrayBufferView:S}=e.r(66415).types,w={},I=/^[0-7]+$/,O=y((e,t,r=u,n=c)=>{if("number"!=typeof e)throw new E(t,"number",e);if(!s(e))throw new b(t,"an integer",e);if(e<r||e>n)throw new b(t,`>= ${r} && <= ${n}`,e)}),R=y((e,t,r=-0x80000000,n=0x7fffffff)=>{if("number"!=typeof e)throw new E(t,"number",e);if(!s(e))throw new b(t,"an integer",e);if(e<r||e>n)throw new b(t,`>= ${r} && <= ${n}`,e)}),N=y((e,t,r=!1)=>{if("number"!=typeof e)throw new E(t,"number",e);if(!s(e))throw new b(t,"an integer",e);let n=+!!r;if(e<n||e>0xffffffff)throw new b(t,`>= ${n} && <= 4294967295`,e)});function P(e,t){if("string"!=typeof e)throw new E(t,"string",e)}let k=y((e,t,r)=>{if(!i(r,e))throw new T(t,e,"must be one of: "+o(a(r,e=>"string"==typeof e?`'${e}'`:p(e)),", "))});function D(e,t){if("boolean"!=typeof e)throw new E(t,"boolean",e)}function M(e,t,r){return null!=e&&h(e,t)?e[t]:r}let L=y((e,t,r=null)=>{let i=M(r,"allowArray",!1),o=M(r,"allowFunction",!1);if(!M(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new E(t,"Object",e)}),U=y((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new E(t,"a dictionary",e)}),x=y((e,t,r=0)=>{if(!n(e))throw new E(t,"Array",e);if(e.length<r)throw new T(t,e,`must be longer than ${r}`)}),F=y((e,t="buffer")=>{if(!S(e))throw new E(t,["Buffer","TypedArray","DataView"],e)}),B=y((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new E(t,"AbortSignal",e)}),q=y((e,t)=>{if("function"!=typeof e)throw new E(t,"Function",e)}),H=y((e,t)=>{if("function"!=typeof e||C(e))throw new E(t,"Function",e)}),j=y((e,t)=>{if(void 0!==e)throw new E(t,"undefined",e)}),Y=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function $(e,t){if(void 0===e||!f(Y,e))throw new T(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===f(I,e))throw new T(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return N(e,t),e},validateArray:x,validateStringArray:function(e,t){x(e,t);for(let r=0;r<e.length;r++)P(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){x(e,t);for(let r=0;r<e.length;r++)D(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){x(e,t);for(let r=0;r<e.length;r++){let n=e[r],i=`${t}[${r}]`;if(null==n)throw new E(i,"AbortSignal",n);B(n,i)}},validateBoolean:D,validateBuffer:F,validateDictionary:U,validateEncoding:function(e,t){let r=A(t),n=e.length;if("hex"===r&&n%2!=0)throw new T("encoding",t,`is invalid for data of length ${n}`)},validateFunction:q,validateInt32:R,validateInteger:O,validateNumber:function(e,t,r,n){if("number"!=typeof e)throw new E(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&l(e))throw new b(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:L,validateOneOf:k,validatePlainFunction:H,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!=e>>>0||e>65535||0===e&&!r)throw new _(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(P(e,t),void 0===w[e]){if(void 0!==w[m(e)])throw new v(e+" (signals must use all capital letters)");throw new v(e)}},validateString:P,validateUint32:N,validateUndefined:j,validateUnion:function(e,t,r){if(!i(r,e))throw new E(t,`('${o(r,"|")}')`,e)},validateAbortSignal:B,validateLinkHeaderValue:function(e){if("string"==typeof e)return $(e,"hints"),e;if(n(e)){let t=e.length,r="";if(0===t)return r;for(let n=0;n<t;n++){let i=e[n];$(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new T("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},37279,(e,t,r)=>{"use strict";let n,i=e.f({process:{id:()=>30615,module:()=>e.r(30615)},"process/":{id:()=>30615,module:()=>e.r(30615)}})("process/"),{AbortError:o,codes:a}=e.r(37646),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:l}=a,{kEmptyObject:c,once:u}=e.r(66415),{validateAbortSignal:d,validateFunction:h,validateObject:f,validateBoolean:p}=e.r(52285),{Promise:m,PromisePrototypeThen:g,SymbolDispose:y}=e.r(6810),{isClosed:_,isReadable:E,isReadableNodeStream:T,isReadableStream:b,isReadableFinished:v,isReadableErrored:A,isWritable:C,isWritableNodeStream:S,isWritableStream:w,isWritableFinished:I,isWritableErrored:O,isNodeStream:R,willEmitClose:N,kIsClosedPromise:P}=e.r(89857),k=()=>{};function D(t,r,a){var p,m;if(2==arguments.length?(a=r,r=c):null==r?r=c:f(r,"options"),h(a,"callback"),d(r.signal,"options.signal"),a=u(a),b(t)||w(t))return function(t,r,a){let s=!1,l=k;if(r.signal)if(l=()=>{s=!0,a.call(t,new o(void 0,{cause:r.signal.reason}))},r.signal.aborted)i.nextTick(l);else{let i=(n=n||e.r(66415).addAbortListener)(r.signal,l),o=a;a=u((...e)=>{i[y](),o.apply(t,e)})}let c=(...e)=>{s||i.nextTick(()=>a.apply(t,e))};return g(t[P].promise,c,c),k}(t,r,a);if(!R(t))throw new s("stream",["ReadableStream","WritableStream","Stream"],t);let D=null!=(p=r.readable)?p:T(t),M=null!=(m=r.writable)?m:S(t),L=t._writableState,U=t._readableState,x=()=>{t.writable||q()},F=N(t)&&T(t)===D&&S(t)===M,B=I(t,!1),q=()=>{B=!0,t.destroyed&&(F=!1),F&&(!t.readable||D)||(!D||H)&&a.call(t)},H=v(t,!1),j=()=>{H=!0,t.destroyed&&(F=!1),F&&(!t.writable||M)||(!M||B)&&a.call(t)},Y=e=>{a.call(t,e)},$=_(t),V=()=>{$=!0;let e=O(t)||A(t);return e&&"boolean"!=typeof e?a.call(t,e):D&&!H&&T(t,!0)&&!v(t,!1)||M&&!B&&!I(t,!1)?a.call(t,new l):void a.call(t)},z=()=>{$=!0;let e=O(t)||A(t);if(e&&"boolean"!=typeof e)return a.call(t,e);a.call(t)},G=()=>{t.req.on("finish",q)};t.setHeader&&"function"==typeof t.abort?(t.on("complete",q),F||t.on("abort",V),t.req?G():t.on("request",G)):M&&!L&&(t.on("end",x),t.on("close",x)),F||"boolean"!=typeof t.aborted||t.on("aborted",V),t.on("end",j),t.on("finish",q),!1!==r.error&&t.on("error",Y),t.on("close",V),$?i.nextTick(V):null!=L&&L.errorEmitted||null!=U&&U.errorEmitted?F||i.nextTick(z):!D&&(!F||E(t))&&(B||!1===C(t))||!M&&(!F||C(t))&&(H||!1===E(t))?i.nextTick(z):U&&t.req&&t.aborted&&i.nextTick(z);let W=()=>{a=k,t.removeListener("aborted",V),t.removeListener("complete",q),t.removeListener("abort",V),t.removeListener("request",G),t.req&&t.req.removeListener("finish",q),t.removeListener("end",x),t.removeListener("close",x),t.removeListener("finish",q),t.removeListener("end",j),t.removeListener("error",Y),t.removeListener("close",V)};if(r.signal&&!$){let s=()=>{let e=a;W(),e.call(t,new o(void 0,{cause:r.signal.reason}))};if(r.signal.aborted)i.nextTick(s);else{let i=(n=n||e.r(66415).addAbortListener)(r.signal,s),o=a;a=u((...e)=>{i[y](),o.apply(t,e)})}}return W}t.exports=D,t.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=c),null!=(r=t)&&r.cleanup&&(p(t.cleanup,"cleanup"),n=t.cleanup),new m((r,i)=>{let o=D(e,t,e=>{n&&o(),e?i(e):r()})})}},59833,(e,t,r)=>{"use strict";let n,{SymbolDispose:i}=e.r(6810),{AbortError:o,codes:a}=e.r(37646),{isNodeStream:s,isWebStream:l,kControllerErrorFunction:c}=e.r(89857),u=e.r(37279),{ERR_INVALID_ARG_TYPE:d}=a;t.exports.addAbortSignal=function(e,r){if("object"!=typeof e||!("aborted"in e))throw new d("signal","AbortSignal",e);if(!s(r)&&!l(r))throw new d("stream",["ReadableStream","WritableStream","Stream"],r);return t.exports.addAbortSignalNoValidate(e,r)},t.exports.addAbortSignalNoValidate=function(t,r){if("object"!=typeof t||!("aborted"in t))return r;let a=s(r)?()=>{r.destroy(new o(void 0,{cause:t.reason}))}:()=>{r[c](new o(void 0,{cause:t.reason}))};return t.aborted?a():u(r,(n=n||e.r(66415).addAbortListener)(t,a)[i]),r}},29248,(e,t,r)=>{"use strict";let{MathFloor:n,NumberIsInteger:i}=e.r(6810),{validateInteger:o}=e.r(52285),{ERR_INVALID_ARG_VALUE:a}=e.r(37646).codes,s=16384,l=16;function c(e){return e?l:s}t.exports={getHighWaterMark:function(e,t,r,o){let s=null!=t.highWaterMark?t.highWaterMark:o?t[r]:null;if(null!=s){if(!i(s)||s<0)throw new a(o?`options.${r}`:"options.highWaterMark",s);return n(s)}return c(e.objectMode)},getDefaultHighWaterMark:c,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?l=t:s=t}}},43661,(e,t,r)=>{"use strict";let{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:a}=e.r(6810),{Buffer:s}=e.r(874),{inspect:l}=e.r(66415);t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return s.alloc(0);let t=s.allocUnsafe(e>>>0),r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{let o=r.data;if(e>o.length)t+=o,e-=o.length;else{e===o.length?(t+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(o,0,e),this.head=r,r.data=n(o,e));break}++i}while(null!==(r=r.next))return this.length-=i,t}_getBuffer(e){let t=s.allocUnsafe(e),r=e,n=this.head,i=0;do{let s=n.data;if(e>s.length)o(t,s,r-e),e-=s.length;else{e===s.length?(o(t,s,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new a(s.buffer,s.byteOffset,e),r-e),this.head=n,n.data=s.slice(e));break}++i}while(null!==(n=n.next))return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},60235,(e,t,r)=>{"use strict";var n=e.r(96265).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:this.write=h,this.end=f;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}(this,e,0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}r.StringDecoder=o,o.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=a(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=a(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},77055,(e,t,r)=>{"use strict";let n=e.f({process:{id:()=>30615,module:()=>e.r(30615)},"process/":{id:()=>30615,module:()=>e.r(30615)}})("process/"),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:a}=e.r(6810),{Buffer:s}=e.r(874),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:c}=e.r(37646).codes;t.exports=function(e,t,r){let u,d;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,u=t[o]();else if(t&&t[a])d=!1,u=t[a]();else throw new l("iterable",["Iterable"],t);let h=new e({objectMode:!0,highWaterMark:1,...r}),f=!1;async function p(e){let t=null!=e,r="function"==typeof u.throw;if(t&&r){let{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){let{value:e}=await u.return();await e}}async function m(){for(;;){try{let{value:e,done:t}=d?await u.next():u.next();if(t)h.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new c;if(h.push(t))continue;f=!1}}catch(e){h.destroy(e)}break}}return h._read=function(){f||(f=!0,m())},h._destroy=function(e,t){i(p(e),()=>n.nextTick(t,e),r=>n.nextTick(t,r||e))},h}},59668,(e,t,r)=>{"use strict";let n,i=e.f({process:{id:()=>30615,module:()=>e.r(30615)},"process/":{id:()=>30615,module:()=>e.r(30615)}})("process/"),{ArrayPrototypeIndexOf:o,NumberIsInteger:a,NumberIsNaN:s,NumberParseInt:l,ObjectDefineProperties:c,ObjectKeys:u,ObjectSetPrototypeOf:d,Promise:h,SafeSet:f,SymbolAsyncDispose:p,SymbolAsyncIterator:m,Symbol:g}=e.r(6810);t.exports=Y,Y.ReadableState=j;let{EventEmitter:y}=e.r(27699),{Stream:_,prependListener:E}=e.r(74433),{Buffer:T}=e.r(874),{addAbortSignal:b}=e.r(59833),v=e.r(37279),A=e.r(66415).debuglog("stream",e=>{A=e}),C=e.r(43661),S=e.r(40951),{getHighWaterMark:w,getDefaultHighWaterMark:I}=e.r(29248),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:P,ERR_STREAM_PUSH_AFTER_EOF:k,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:M}=e.r(37646),{validateObject:L}=e.r(52285),U=g("kPaused"),{StringDecoder:x}=e.f({string_decoder:{id:()=>60235,module:()=>e.r(60235)},"string_decoder/":{id:()=>60235,module:()=>e.r(60235)}})("string_decoder/"),F=e.r(77055);d(Y.prototype,_.prototype),d(Y,_);let B=()=>{},{errorOrDestroy:q}=S;function H(e){return{enumerable:!1,get(){return(this.state&e)!=0},set(t){t?this.state|=e:this.state&=~e}}}function j(t,r,n){"boolean"!=typeof n&&(n=r instanceof e.r(41828)),this.state=6192,t&&t.objectMode&&(this.state|=1),n&&t&&t.readableObjectMode&&(this.state|=1),this.highWaterMark=t?w(this,t,"readableHighWaterMark",n):I(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[U]=null,t&&!1===t.emitClose&&(this.state&=-2049),t&&!1===t.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new x(t.encoding),this.encoding=t.encoding)}function Y(t){if(!(this instanceof Y))return new Y(t);let r=this instanceof e.r(41828);this._readableState=new j(t,this,r),t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&!r&&b(t.signal,this)),_.call(this,t),S.construct(this,()=>{this._readableState.needReadable&&K(this,this._readableState)})}function $(e,t,r,n){let i;A("readableAddChunk",t);let o=e._readableState;if((1&o.state)==0&&("string"==typeof t?(r=r||o.defaultEncoding,o.encoding!==r&&(n&&o.encoding?t=T.from(t,r).toString(o.encoding):(t=T.from(t,r),r=""))):t instanceof T?r="":_._isUint8Array(t)?(t=_._uint8ArrayToBuffer(t),r=""):null!=t&&(i=new R("chunk",["string","Buffer","Uint8Array"],t))),i)q(e,i);else if(null===t)o.state&=-9,function(e,t){if(A("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?G(e):(t.needReadable=!1,t.emittedReadable=!0,W(e))}}(e,o);else if((1&o.state)!=0||t&&t.length>0)if(n)if((4&o.state)!=0)q(e,new D);else{if(o.destroyed||o.errored)return!1;V(e,o,t,!0)}else if(o.ended)q(e,new k);else{if(o.destroyed||o.errored)return!1;o.state&=-9,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?V(e,o,t,!1):K(e,o)):V(e,o,t,!1)}else n||(o.state&=-9,K(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function V(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?((65536&t.state)!=0?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),(64&t.state)!=0&&G(e)),K(e,t)}function z(e,t){return e<=0||0===t.length&&t.ended?0:(1&t.state)!=0?1:s(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function G(e){let t=e._readableState;A("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(A("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(W,e))}function W(e){let t=e._readableState;A("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ee(e)}function K(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,i.nextTick(Q,e,t))}function Q(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(A("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function X(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[U]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function Z(e){A("readable nexttick read 0"),e.read(0)}function J(e,t){A("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ee(e),t.flowing&&!t.reading&&e.read(0)}function ee(e){let t=e._readableState;for(A("flow",t.flowing);t.flowing&&null!==e.read(););}function et(e,t){"function"!=typeof e.read&&(e=Y.wrap(e,{objectMode:!0}));let r=er(e,t);return r.stream=e,r}async function*er(e,t){let r,n=B;function i(t){this===e?(n(),n=B):n=t}e.on("readable",i);let o=v(e,{writable:!1},e=>{r=e?O(r,e):null,n(),n=B});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else if(r)throw r;else{if(null===r)return;await new h(i)}}}catch(e){throw r=O(r,e)}finally{(r||(null==t?void 0:t.destroyOnReturn)!==!1)&&(void 0===r||e._readableState.autoDestroy)?S.destroyer(e,null):(e.off("readable",i),o())}}function en(e,t){let r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function ei(e){let t=e._readableState;A("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(eo,t,e))}function eo(e,t){if(A("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length){if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)i.nextTick(ea,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}}function ea(e){!e.writable||e.writableEnded||e.destroyed||e.end()}function es(){return void 0===n&&(n={}),n}c(j.prototype,{objectMode:H(1),ended:H(2),endEmitted:H(4),reading:H(8),constructed:H(16),sync:H(32),needReadable:H(64),emittedReadable:H(128),readableListening:H(256),resumeScheduled:H(512),errorEmitted:H(1024),emitClose:H(2048),autoDestroy:H(4096),destroyed:H(8192),closed:H(16384),closeEmitted:H(32768),multiAwaitDrain:H(65536),readingMore:H(131072),dataEmitted:H(262144)}),Y.prototype.destroy=S.destroy,Y.prototype._undestroy=S.undestroy,Y.prototype._destroy=function(e,t){t(e)},Y.prototype[y.captureRejectionSymbol]=function(e){this.destroy(e)},Y.prototype[p]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new M,this.destroy(e)),new h((t,r)=>v(this,n=>n&&n!==e?r(n):t(null)))},Y.prototype.push=function(e,t){return $(this,e,t,!1)},Y.prototype.unshift=function(e,t){return $(this,e,t,!0)},Y.prototype.isPaused=function(){let e=this._readableState;return!0===e[U]||!1===e.flowing},Y.prototype.setEncoding=function(e){let t=new x(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let e of r)n+=t.write(e);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this},Y.prototype.read=function(e){let t;A("read",e),void 0===e?e=NaN:a(e)||(e=l(e,10));let r=this._readableState,n=e;if(e>r.highWaterMark&&(r.highWaterMark=function(e){if(e>0x40000000)throw new P("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(r.state&=-129),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return A("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?ei(this):G(this),null;if(0===(e=z(e,r))&&r.ended)return 0===r.length&&ei(this),null;let i=(64&r.state)!=0;if(A("need readable",i),(0===r.length||r.length-e<r.highWaterMark)&&A("length less than watermark",i=!0),r.ended||r.reading||r.destroyed||r.errored||!r.constructed)A("reading, ended or constructing",i=!1);else if(i){A("do read"),r.state|=40,0===r.length&&(r.state|=64);try{this._read(r.highWaterMark)}catch(e){q(this,e)}r.state&=-33,r.reading||(e=z(n,r))}return null===(t=e>0?en(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.multiAwaitDrain?r.awaitDrainWriters.clear():r.awaitDrainWriters=null),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&ei(this)),null===t||r.errorEmitted||r.closeEmitted||(r.dataEmitted=!0,this.emit("data",t)),t},Y.prototype._read=function(e){throw new N("_read()")},Y.prototype.pipe=function(e,t){let r,n=this,o=this._readableState;1!==o.pipes.length||o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new f(o.awaitDrainWriters?[o.awaitDrainWriters]:[])),o.pipes.push(e),A("pipe count=%d opts=%j",o.pipes.length,t);let a=t&&!1===t.end||e===i.stdout||e===i.stderr?m:s;function s(){A("onend"),e.end()}o.endEmitted?i.nextTick(a):n.once("end",a),e.on("unpipe",function t(i,a){A("onunpipe"),i===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,A("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),r&&e.removeListener("drain",r),e.removeListener("error",d),e.removeListener("unpipe",t),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",u),l=!0,r&&o.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&r())});let l=!1;function c(){var t,i;l||(1===o.pipes.length&&o.pipes[0]===e?(A("false write response, pause",0),o.awaitDrainWriters=e,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(e)&&(A("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(e)),n.pause()),r||(t=n,i=e,r=function(){let e=t._readableState;e.awaitDrainWriters===i?(A("pipeOnDrain",1),e.awaitDrainWriters=null):e.multiAwaitDrain&&(A("pipeOnDrain",e.awaitDrainWriters.size),e.awaitDrainWriters.delete(i)),(!e.awaitDrainWriters||0===e.awaitDrainWriters.size)&&t.listenerCount("data")&&t.resume()},e.on("drain",r))}function u(t){A("ondata");let r=e.write(t);A("dest.write",r),!1===r&&c()}function d(t){if(A("onerror",t),m(),e.removeListener("error",d),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?q(e,t):e.emit("error",t)}}function h(){e.removeListener("finish",p),m()}function p(){A("onfinish"),e.removeListener("close",h),m()}function m(){A("unpipe"),n.unpipe(e)}return n.on("data",u),E(e,"error",d),e.once("close",h),e.once("finish",p),e.emit("pipe",n),!0===e.writableNeedDrain?c():o.flowing||(A("pipe resume"),n.resume()),e},Y.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=o(t.pipes,e);return -1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},Y.prototype.on=function(e,t){let r=_.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,A("on readable",n.length,n.reading),n.length?G(this):n.reading||i.nextTick(Z,this)),r},Y.prototype.addListener=Y.prototype.on,Y.prototype.removeListener=function(e,t){let r=_.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(X,this),r},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(e){let t=_.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&i.nextTick(X,this),t},Y.prototype.resume=function(){var e,t;let r=this._readableState;return r.flowing||(A("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,i.nextTick(J,e,t))),r[U]=!1,this},Y.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[U]=!0,this},Y.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{q(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=u(e);for(let t=1;t<r.length;t++){let n=r[t];void 0===this[n]&&"function"==typeof e[n]&&(this[n]=e[n].bind(e))}return this},Y.prototype[m]=function(){return et(this)},Y.prototype.iterator=function(e){return void 0!==e&&L(e,"options"),et(this,e)},c(Y.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(j.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[U]},set(e){this[U]=!!e}}}),Y._fromList=en,Y.from=function(e,t){return F(Y,e,t)},Y.fromWeb=function(e,t){return es().newStreamReadableFromReadableStream(e,t)},Y.toWeb=function(e,t){return es().newReadableStreamFromStreamReadable(e,t)},Y.wrap=function(e,t){var r,n;return new Y({objectMode:null==(r=null!=(n=e.readableObjectMode)?n:e.objectMode)||r,...t,destroy(t,r){S.destroyer(e,t),r(t)}}).wrap(e)}},55162,(e,t,r)=>{"use strict";let n=e.f({process:{id:()=>30615,module:()=>e.r(30615)},"process/":{id:()=>30615,module:()=>e.r(30615)}})("process/"),i=e.r(874),{isReadable:o,isWritable:a,isIterable:s,isNodeStream:l,isReadableNodeStream:c,isWritableNodeStream:u,isDuplexNodeStream:d,isReadableStream:h,isWritableStream:f}=e.r(89857),p=e.r(37279),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:y}}=e.r(37646),{destroyer:_}=e.r(40951),E=e.r(41828),T=e.r(59668),b=e.r(1072),{createDeferredPromise:v}=e.r(66415),A=e.r(77055),C=globalThis.Blob||i.Blob,S=void 0!==C?function(e){return e instanceof C}:function(e){return!1},w=globalThis.AbortController||e.r(61776).AbortController,{FunctionPrototypeCall:I}=e.r(6810);class O extends E{constructor(e){super(e),(null==e?void 0:e.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(null==e?void 0:e.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function R(e){let t,r,n,i,s,l=e.readable&&"function"!=typeof e.readable.read?T.wrap(e.readable):e.readable,c=e.writable,u=!!o(l),d=!!a(c);function h(e){let t=i;i=null,t?t(e):e&&s.destroy(e)}return s=new O({readableObjectMode:!!(null!=l&&l.readableObjectMode),writableObjectMode:!!(null!=c&&c.writableObjectMode),readable:u,writable:d}),d&&(p(c,e=>{d=!1,e&&_(l,e),h(e)}),s._write=function(e,r,n){c.write(e,r)?n():t=n},s._final=function(e){c.end(),r=e},c.on("drain",function(){if(t){let e=t;t=null,e()}}),c.on("finish",function(){if(r){let e=r;r=null,e()}})),u&&(p(l,e=>{u=!1,e&&_(l,e),h(e)}),l.on("readable",function(){if(n){let e=n;n=null,e()}}),l.on("end",function(){s.push(null)}),s._read=function(){for(;;){let e=l.read();if(null===e){n=s._read;return}if(!s.push(e))return}}),s._destroy=function(e,o){e||null===i||(e=new m),n=null,t=null,r=null,null===i?o(e):(i=o,_(c,e),_(l,e))},s}t.exports=function e(t,r){if(d(t))return t;if(c(t))return R({readable:t});if(u(t))return R({writable:t});if(l(t))return R({writable:!1,readable:!1});if(h(t))return R({readable:T.fromWeb(t)});if(f(t))return R({writable:b.fromWeb(t)});if("function"==typeof t){let{value:e,write:i,final:o,destroy:a}=function(e){let{promise:t,resolve:r}=v(),i=new w,o=i.signal;return{value:e(async function*(){for(;;){let e=t;t=null;let{chunk:i,done:a,cb:s}=await e;if(n.nextTick(s),a)return;if(o.aborted)throw new m(void 0,{cause:o.reason});({promise:t,resolve:r}=v()),yield i}}(),{signal:o}),write(e,t,n){let i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){let t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(s(e))return A(O,e,{objectMode:!0,write:i,final:o,destroy:a});let l=null==e?void 0:e.then;if("function"==typeof l){let t,r=I(l,e,e=>{if(null!=e)throw new y("nully","body",e)},e=>{_(t,e)});return t=new O({objectMode:!0,readable:!1,write:i,final(e){o(async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}})},destroy:a})}throw new y("Iterable, AsyncIterable or AsyncFunction",r,e)}if(S(t))return e(t.arrayBuffer());if(s(t))return A(O,t,{objectMode:!0,writable:!1});if(h(null==t?void 0:t.readable)&&f(null==t?void 0:t.writable))return O.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return R({readable:null!=t&&t.readable?c(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});let i=null==t?void 0:t.then;if("function"==typeof i){let e;return I(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{_(e,t)}),e=new O({objectMode:!0,writable:!1,read(){}})}throw new g(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},41828,(e,t,r)=>{"use strict";let n,i,{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:s,ObjectSetPrototypeOf:l}=e.r(6810);t.exports=d;let c=e.r(59668),u=e.r(1072);l(d.prototype,c.prototype),l(d,c);{let e=s(u.prototype);for(let t=0;t<e.length;t++){let r=e[t];d.prototype[r]||(d.prototype[r]=u.prototype[r])}}function d(e){if(!(this instanceof d))return new d(e);c.call(this,e),u.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function h(){return void 0===n&&(n={}),n}o(d.prototype,{writable:{__proto__:null,...a(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(u.prototype,"writableLength")},writableFinished:{__proto__:null,...a(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),d.fromWeb=function(e,t){return h().newStreamDuplexFromReadableWritablePair(e,t)},d.toWeb=function(e){return h().newReadableWritablePairFromDuplex(e)},d.from=function(t){return i||(i=e.r(55162)),i(t,"body")}},1072,(e,t,r)=>{"use strict";let n,i=e.f({process:{id:()=>30615,module:()=>e.r(30615)},"process/":{id:()=>30615,module:()=>e.r(30615)}})("process/"),{ArrayPrototypeSlice:o,Error:a,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:l,ObjectDefineProperties:c,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:d,Symbol:h,SymbolHasInstance:f}=e.r(6810);t.exports=L,L.WritableState=D;let{EventEmitter:p}=e.r(27699),m=e.r(74433).Stream,{Buffer:g}=e.r(874),y=e.r(40951),{addAbortSignal:_}=e.r(59833),{getHighWaterMark:E,getDefaultHighWaterMark:T}=e.r(29248),{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:A,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:w,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:O,ERR_UNKNOWN_ENCODING:R}=e.r(37646).codes,{errorOrDestroy:N}=y;function P(){}u(L.prototype,m.prototype),u(L,m);let k=h("kOnFinished");function D(t,r,n){"boolean"!=typeof n&&(n=r instanceof e.r(41828)),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?E(this,t,"writableHighWaterMark",n):T(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let i=!!(t&&!1===t.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=B.bind(void 0,r),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,M(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function M(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function L(t){let r=this instanceof e.r(41828);if(!r&&!s(L,this))return new L(t);this._writableState=new D(t,this,r),t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&_(t.signal,this)),m.call(this,t),y.construct(this,()=>{let e=this._writableState;e.writing||Y(this,e),V(this,e)})}function U(e,t,r,n){let o,a=e._writableState;if("function"==typeof r)n=r,r=a.defaultEncoding;else{if(r){if("buffer"!==r&&!g.isEncoding(r))throw new R(r)}else r=a.defaultEncoding;"function"!=typeof n&&(n=P)}if(null===t)throw new I;if(!a.objectMode)if("string"==typeof t)!1!==a.decodeStrings&&(t=g.from(t,r),r="buffer");else if(t instanceof g)r="buffer";else if(m._isUint8Array(t))t=m._uint8ArrayToBuffer(t),r="buffer";else throw new b("chunk",["string","Buffer","Uint8Array"],t);return(a.ending?o=new O:a.destroyed&&(o=new S("write")),o)?(i.nextTick(n,o),N(e,o,!0),o):(a.pendingcb++,function(e,t,r,n,i){let o=t.objectMode?1:r.length;t.length+=o;let a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==P&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1),a&&!t.errored&&!t.destroyed}(e,a,t,r,n))}function x(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function F(e,t,r,n){--t.pendingcb,n(r),j(t),N(e,r)}function B(e,t){let r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)return void N(e,new A);r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),n?i.nextTick(F,e,r,t,o):F(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&Y(e,r),n?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},i.nextTick(q,r.afterWriteTickInfo)):H(e,r,1,o))}function q({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,H(e,t,r,n)}function H(e,t,r,n){for(t.ending||e.destroyed||0!==t.length||!t.needDrain||(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&j(t),V(e,t)}function j(e){var t,r;if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){let{chunk:n,callback:i}=e.buffered[r],o=e.objectMode?1:n.length;e.length-=o,i(null!=(t=e.errored)?t:new S("write"))}let n=e[k].splice(0);for(let t=0;t<n.length;t++)n[t](null!=(r=e.errored)?r:new S("end"));M(e)}function Y(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=t,a=r.length-n;if(!a)return;let s=n;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;let n=t.allNoop?P:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)},i=t.allNoop&&0===s?r:o(r,s);i.allBuffers=t.allBuffers,x(e,t,!0,t.length,i,"",n),M(t)}else{do{let{chunk:n,encoding:o,callback:a}=r[s];r[s++]=null,x(e,t,!1,i?1:n.length,n,o,a)}while(s<r.length&&!t.writing)s===r.length?M(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function V(e,t,r){if($(t)){if(!t.prefinished&&!t.finalCalled)if("function"!=typeof e._final||t.destroyed)t.prefinished=!0,e.emit("prefinish");else{t.finalCalled=!0;let r=!1;function n(n){if(r)return void N(e,null!=n?n:A());if(r=!0,t.pendingcb--,n){let r=t[k].splice(0);for(let e=0;e<r.length;e++)r[e](n);N(e,n,t.sync)}else $(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,i.nextTick(z,e,t))}t.sync=!0,t.pendingcb++;try{e._final(n)}catch(e){n(e)}t.sync=!1}0===t.pendingcb&&(r?(t.pendingcb++,i.nextTick((e,t)=>{$(t)?z(e,t):t.pendingcb--},e,t)):$(t)&&(t.pendingcb++,z(e,t)))}}function z(e,t){t.pendingcb--,t.finished=!0;let r=t[k].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}D.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},l(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),l(L,f,{__proto__:null,value:function(e){return!!s(this,e)||this===L&&e&&e._writableState instanceof D}}),L.prototype.pipe=function(){N(this,new C)},L.prototype.write=function(e,t,r){return!0===U(this,e,t,r)},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||Y(this,e))},L.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=d(e)),!g.isEncoding(e))throw new R(e);return this._writableState.defaultEncoding=e,this},L.prototype._write=function(e,t,r){if(this._writev)this._writev([{chunk:e,encoding:t}],r);else throw new v("_write()")},L.prototype._writev=null,L.prototype.end=function(e,t,r){let n,o=this._writableState;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){let r=U(this,e,t);r instanceof a&&(n=r)}return o.corked&&(o.corked=1,this.uncork()),n||(o.errored||o.ending?o.finished?n=new w("end"):o.destroyed&&(n=new S("end")):(o.ending=!0,V(this,o,!0),o.ended=!0)),"function"==typeof r&&(n||o.finished?i.nextTick(r,n):o[k].push(r)),this},c(L.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let G=y.destroy;function W(){return void 0===n&&(n={}),n}L.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[k].length)&&i.nextTick(j,r),G.call(this,e,t),this},L.prototype._undestroy=y.undestroy,L.prototype._destroy=function(e,t){t(e)},L.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},L.fromWeb=function(e,t){return W().newStreamWritableFromWritableStream(e,t)},L.toWeb=function(e){return W().newWritableStreamFromStreamWritable(e)}},46621,(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:n,Symbol:i}=e.r(6810);t.exports=c;let{ERR_METHOD_NOT_IMPLEMENTED:o}=e.r(37646).codes,a=e.r(41828),{getHighWaterMark:s}=e.r(29248);n(c.prototype,a.prototype),n(c,a);let l=i("kCallback");function c(e){if(!(this instanceof c))return new c(e);let t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{if(t)return void(e?e(t):this.destroy(t));null!=r&&this.push(r),this.push(null),e&&e()})}function d(){this._final!==u&&u.call(this)}c.prototype._final=u,c.prototype._transform=function(e,t,r){throw new o("_transform()")},c.prototype._write=function(e,t,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(e,t)=>{if(e)return void r(e);null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[l]=r})},c.prototype._read=function(){if(this[l]){let e=this[l];this[l]=null,e()}}},40331,(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:n}=e.r(6810);t.exports=o;let i=e.r(46621);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(o.prototype,i.prototype),n(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},53587,(e,t,r)=>{"use strict";let n,i,o,a=e.f({process:{id:()=>30615,module:()=>e.r(30615)},"process/":{id:()=>30615,module:()=>e.r(30615)}})("process/"),{ArrayIsArray:s,Promise:l,SymbolAsyncIterator:c,SymbolDispose:u}=e.r(6810),d=e.r(37279),{once:h}=e.r(66415),f=e.r(40951),p=e.r(41828),{aggregateTwoErrors:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:y,ERR_MISSING_ARGS:_,ERR_STREAM_DESTROYED:E,ERR_STREAM_PREMATURE_CLOSE:T},AbortError:b}=e.r(37646),{validateFunction:v,validateAbortSignal:A}=e.r(52285),{isIterable:C,isReadable:S,isReadableNodeStream:w,isNodeStream:I,isTransformStream:O,isWebStream:R,isReadableStream:N,isReadableFinished:P}=e.r(89857),k=globalThis.AbortController||e.r(61776).AbortController;function D(e,t,r){let n=!1;return e.on("close",()=>{n=!0}),{destroy:t=>{n||(n=!0,f.destroyer(e,t||new E("pipe")))},cleanup:d(e,{readable:t,writable:r},e=>{n=!e})}}function M(e){if(C(e))return e;if(w(e))return L(e);throw new g("val",["Readable","Iterable","AsyncIterable"],e)}async function*L(t){i||(i=e.r(59668)),yield*i.prototype[c].call(t)}async function U(e,t,r,{end:n}){let i,o=null,a=e=>{if(e&&(i=e),o){let e=o;o=null,e()}},s=()=>new l((e,t)=>{i?t(i):o=()=>{i?t(i):e()}});t.on("drain",a);let c=d(t,{readable:!1},a);try{for await(let r of(t.writableNeedDrain&&await s(),e))t.write(r)||await s();n&&(t.end(),await s()),r()}catch(e){r(i!==e?m(i,e):e)}finally{c(),t.off("drain",a)}}async function x(e,t,r,{end:n}){O(t)&&(t=t.writable);let i=t.getWriter();try{for await(let t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(e){try{await i.abort(e),r(e)}catch(e){r(e)}}}function F(t,r,i){let l,c,h,f;if(1===t.length&&s(t[0])&&(t=t[0]),t.length<2)throw new _("streams");let m=new k,E=m.signal,v=null==i?void 0:i.signal,L=[];function F(){j(new b)}A(v,"options.signal"),o=o||e.r(66415).addAbortListener,v&&(l=o(v,F));let B=[],q=0;function H(e){j(e,0==--q)}function j(e,t){var n;if(e&&(!c||"ERR_STREAM_PREMATURE_CLOSE"===c.code)&&(c=e),c||t){for(;B.length;)B.shift()(c);null==(n=l)||n[u](),m.abort(),t&&(c||L.forEach(e=>e()),a.nextTick(r,c,h))}}for(let r=0;r<t.length;r++){let o=t[r],s=r<t.length-1,l=r>0,c=s||(null==i?void 0:i.end)!==!1,u=r===t.length-1;if(I(o)){if(c){let{destroy:e,cleanup:t}=D(o,s,l);B.push(e),S(o)&&u&&L.push(t)}function Y(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&H(e)}o.on("error",Y),S(o)&&u&&L.push(()=>{o.removeListener("error",Y)})}if(0===r)if("function"==typeof o){if(!C(f=o({signal:E})))throw new y("Iterable, AsyncIterable or Stream","source",f)}else f=C(o)||w(o)||O(o)?o:p.from(o);else if("function"==typeof o){var $,V;if(f=o(f=O(f)?M(null==($=f)?void 0:$.readable):M(f),{signal:E}),s){if(!C(f,!0))throw new y("AsyncIterable",`transform[${r-1}]`,f)}else{n||(n=e.r(40331));let t=new n({objectMode:!0}),r=null==(V=f)?void 0:V.then;if("function"==typeof r)q++,r.call(f,e=>{h=e,null!=e&&t.write(e),c&&t.end(),a.nextTick(H)},e=>{t.destroy(e),a.nextTick(H,e)});else if(C(f,!0))q++,U(f,t,H,{end:c});else if(N(f)||O(f)){let e=f.readable||f;q++,U(e,t,H,{end:c})}else throw new y("AsyncIterable or Promise","destination",f);let{destroy:i,cleanup:o}=D(f=t,!1,!0);B.push(i),u&&L.push(o)}}else if(I(o)){if(w(f)){q+=2;let e=function(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new T)}),e.pipe(t,{end:!1}),n){function o(){i=!0,t.end()}P(e)?a.nextTick(o):e.once("end",o)}else r();return d(e,{readable:!0,writable:!1},t=>{let n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),d(t,{readable:!1,writable:!0},r)}(f,o,H,{end:c});S(o)&&u&&L.push(e)}else if(O(f)||N(f)){let e=f.readable||f;q++,U(e,o,H,{end:c})}else if(C(f))q++,U(f,o,H,{end:c});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=o}else if(R(o)){if(w(f))q++,x(M(f),o,H,{end:c});else if(N(f)||C(f))q++,x(f,o,H,{end:c});else if(O(f))q++,x(f.readable,o,H,{end:c});else throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=o}else f=p.from(o)}return(null!=E&&E.aborted||null!=v&&v.aborted)&&a.nextTick(F),f}t.exports={pipelineImpl:F,pipeline:function(...e){return F(e,h((v(e[e.length-1],"streams[stream.length - 1]"),e.pop())))}}},20338,(e,t,r)=>{"use strict";let{pipeline:n}=e.r(53587),i=e.r(41828),{destroyer:o}=e.r(40951),{isNodeStream:a,isReadable:s,isWritable:l,isWebStream:c,isTransformStream:u,isWritableStream:d,isReadableStream:h}=e.r(89857),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:m}}=e.r(37646),g=e.r(37279);t.exports=function(...e){let t,r,y,_,E;if(0===e.length)throw new m("streams");if(1===e.length)return i.from(e[0]);let T=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=i.from(e[t])}for(let t=0;t<e.length;++t)if(a(e[t])||c(e[t])){if(t<e.length-1&&!(s(e[t])||h(e[t])||u(e[t])))throw new p(`streams[${t}]`,T[t],"must be readable");if(t>0&&!(l(e[t])||d(e[t])||u(e[t])))throw new p(`streams[${t}]`,T[t],"must be writable")}let b=e[0],v=n(e,function(e){let t=_;_=null,t?t(e):e?E.destroy(e):C||A||E.destroy()}),A=!!(l(b)||d(b)||u(b)),C=!!(s(v)||h(v)||u(v));if(E=new i({writableObjectMode:!!(null!=b&&b.writableObjectMode),readableObjectMode:!!(null!=v&&v.readableObjectMode),writable:A,readable:C}),A){if(a(b))E._write=function(e,r,n){b.write(e,r)?n():t=n},E._final=function(e){b.end(),r=e},b.on("drain",function(){if(t){let e=t;t=null,e()}});else if(c(b)){let e=(u(b)?b.writable:b).getWriter();E._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(e){n(e)}},E._final=async function(t){try{await e.ready,e.close().catch(()=>{}),r=t}catch(e){t(e)}}}g(u(v)?v.readable:v,()=>{if(r){let e=r;r=null,e()}})}if(C){if(a(v))v.on("readable",function(){if(y){let e=y;y=null,e()}}),v.on("end",function(){E.push(null)}),E._read=function(){for(;;){let e=v.read();if(null===e){y=E._read;return}if(!E.push(e))return}};else if(c(v)){let e=(u(v)?v.readable:v).getReader();E._read=async function(){for(;;)try{let{value:t,done:r}=await e.read();if(!E.push(t))return;if(r)return void E.push(null)}catch{return}}}}return E._destroy=function(e,n){e||null===_||(e=new f),y=null,t=null,r=null,null===_?n(e):(_=n,a(v)&&o(v,e))},E}},60914,(e,t,r)=>{"use strict";let n=globalThis.AbortController||e.r(61776).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:l}=e.r(37646),{validateAbortSignal:c,validateInteger:u,validateObject:d}=e.r(52285),h=e.r(6810).Symbol("kWeak"),f=e.r(6810).Symbol("kResistStopPropagation"),{finished:p}=e.r(37279),m=e.r(20338),{addAbortSignalNoValidate:g}=e.r(59833),{isWritable:y,isNodeStream:_}=e.r(89857),{deprecate:E}=e.r(66415),{ArrayPrototypePush:T,Boolean:b,MathFloor:v,Number:A,NumberIsNaN:C,Promise:S,PromiseReject:w,PromiseResolve:I,PromisePrototypeThen:O,Symbol:R}=e.r(6810),N=R("kEmpty"),P=R("kEof");function k(t,r){if("function"!=typeof t)throw new o("fn",["Function","AsyncFunction"],t);null!=r&&d(r,"options"),(null==r?void 0:r.signal)!=null&&c(r.signal,"options.signal");let n=1;(null==r?void 0:r.concurrency)!=null&&(n=v(r.concurrency));let i=n-1;return(null==r?void 0:r.highWaterMark)!=null&&(i=v(r.highWaterMark)),u(n,"options.concurrency",1),u(i,"options.highWaterMark",0),i+=n,(async function*(){let o,a,s=e.r(66415).AbortSignalAny([null==r?void 0:r.signal].filter(b)),c=this,u=[],d={signal:s},h=!1,f=0;function p(){h=!0,m()}function m(){f-=1,g()}function g(){a&&!h&&f<n&&u.length<i&&(a(),a=null)}!async function(){try{for await(let e of c){if(h)return;if(s.aborted)throw new l;try{if((e=t(e,d))===N)continue;e=I(e)}catch(t){e=w(t)}f+=1,O(e,m,p),u.push(e),o&&(o(),o=null),!h&&(u.length>=i||f>=n)&&await new S(e=>{a=e})}u.push(P)}catch(t){let e=w(t);O(e,m,p),u.push(e)}finally{h=!0,o&&(o(),o=null)}}();try{for(;;){for(;u.length>0;){let e=await u[0];if(e===P)return;if(s.aborted)throw new l;e!==N&&(yield e),u.shift(),g()}await new S(e=>{o=e})}}finally{h=!0,a&&(a(),a=null)}}).call(this)}async function D(e,t){for await(let r of x.call(this,e,t))return!0;return!1}async function M(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await D.call(this,async(...t)=>!await e(...t),t)}async function L(e,t){for await(let r of x.call(this,e,t))return r}async function U(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);async function r(t,r){return await e(t,r),N}for await(let e of k.call(this,r,t));}function x(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);async function r(t,r){return await e(t,r)?t:N}return k.call(this,r,t)}class F extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function B(e,t,r){var i,a;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&d(r,"options"),(null==r?void 0:r.signal)!=null&&c(r.signal,"options.signal");let s=arguments.length>1;if(null!=r&&null!=(i=r.signal)&&i.aborted){let e=new l(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(e)),e}let u=new n,m=u.signal;null!=r&&r.signal&&r.signal.addEventListener("abort",()=>u.abort(),{once:!0,[h]:this,[f]:!0});let g=!1;try{for await(let n of this){if(g=!0,null!=r&&null!=(a=r.signal)&&a.aborted)throw new l;s?t=await e(t,n,{signal:m}):(t=n,s=!0)}if(!g&&!s)throw new F}finally{u.abort()}return t}async function q(e){null!=e&&d(e,"options"),(null==e?void 0:e.signal)!=null&&c(e.signal,"options.signal");let t=[];for await(let n of this){var r;if(null!=e&&null!=(r=e.signal)&&r.aborted)throw new l(void 0,{cause:e.signal.reason});T(t,n)}return t}function H(e){if(C(e=A(e)))return 0;if(e<0)throw new s("number",">= 0",e);return e}t.exports.streamReturningOperators={asIndexedPairs:E(function(e){return null!=e&&d(e,"options"),(null==e?void 0:e.signal)!=null&&c(e.signal,"options.signal"),(async function*(){let t=0;for await(let n of this){var r;if(null!=e&&null!=(r=e.signal)&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,n]}}).call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t){return null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&c(t.signal,"options.signal"),e=H(e),(async function*(){var r,n;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!=(n=t.signal)&&n.aborted)throw new l;e--<=0&&(yield r)}}).call(this)},filter:x,flatMap:function(e,t){let r=k.call(this,e,t);return(async function*(){for await(let e of r)yield*e}).call(this)},map:k,take:function(e,t){return null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&c(t.signal,"options.signal"),e=H(e),(async function*(){var r,n;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!=(n=t.signal)&&n.aborted)throw new l;if(e-- >0&&(yield r),e<=0)return}}).call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&c(t.signal,"options.signal"),_(e)&&!y(e))throw new i("stream",e,"must be writable");let r=m(this,e);return null!=t&&t.signal&&g(t.signal,r),r}},t.exports.promiseReturningOperators={every:M,forEach:U,reduce:B,toArray:q,some:D,find:L}},97694,(e,t,r)=>{"use strict";let{ArrayPrototypePop:n,Promise:i}=e.r(6810),{isIterable:o,isNodeStream:a,isWebStream:s}=e.r(89857),{pipelineImpl:l}=e.r(53587),{finished:c}=e.r(37279);e.r(25642),t.exports={finished:c,pipeline:function(...e){return new i((t,r)=>{let i,c,u=e[e.length-1];if(u&&"object"==typeof u&&!a(u)&&!o(u)&&!s(u)){let t=n(e);i=t.signal,c=t.end}l(e,(e,n)=>{e?r(e):t(n)},{signal:i,end:c})})}}},25642,(e,t,r)=>{"use strict";let{Buffer:n}=e.r(874),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:a}=e.r(6810),{promisify:{custom:s}}=e.r(66415),{streamReturningOperators:l,promiseReturningOperators:c}=e.r(60914),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=e.r(37646),d=e.r(20338),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:f}=e.r(29248),{pipeline:p}=e.r(53587),{destroyer:m}=e.r(40951),g=e.r(37279),y=e.r(97694),_=e.r(89857),E=t.exports=e.r(74433).Stream;for(let t of(E.isDestroyed=_.isDestroyed,E.isDisturbed=_.isDisturbed,E.isErrored=_.isErrored,E.isReadable=_.isReadable,E.isWritable=_.isWritable,E.Readable=e.r(59668),o(l))){let e=l[t];function T(...t){if(new.target)throw u();return E.Readable.from(a(e,this,t))}i(T,"name",{__proto__:null,value:e.name}),i(T,"length",{__proto__:null,value:e.length}),i(E.Readable.prototype,t,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(let e of o(c)){let t=c[e];function b(...e){if(new.target)throw u();return a(t,this,e)}i(b,"name",{__proto__:null,value:t.name}),i(b,"length",{__proto__:null,value:t.length}),i(E.Readable.prototype,e,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}E.Writable=e.r(1072),E.Duplex=e.r(41828),E.Transform=e.r(46621),E.PassThrough=e.r(40331),E.pipeline=p;let{addAbortSignal:v}=e.r(59833);E.addAbortSignal=v,E.finished=g,E.destroy=m,E.compose=d,E.setDefaultHighWaterMark=h,E.getDefaultHighWaterMark=f,i(E,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>y}),i(p,s,{__proto__:null,enumerable:!0,get:()=>y.pipeline}),i(g,s,{__proto__:null,enumerable:!0,get:()=>y.finished}),E.Stream=E,E._isUint8Array=function(e){return e instanceof Uint8Array},E._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},23463,(e,t,r)=>{"use strict";let n=e.r(88947);if(n&&"disable"===process.env.READABLE_STREAM){let e=n.promises;t.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,t.exports._isUint8Array=n._isUint8Array,t.exports.isDisturbed=n.isDisturbed,t.exports.isErrored=n.isErrored,t.exports.isReadable=n.isReadable,t.exports.Readable=n.Readable,t.exports.Writable=n.Writable,t.exports.Duplex=n.Duplex,t.exports.Transform=n.Transform,t.exports.PassThrough=n.PassThrough,t.exports.addAbortSignal=n.addAbortSignal,t.exports.finished=n.finished,t.exports.destroy=n.destroy,t.exports.pipeline=n.pipeline,t.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>e}),t.exports.Stream=n.Stream}else{let r=e.r(25642),n=e.r(97694),i=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=i,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>n}),t.exports.Stream=r.Stream}t.exports.default=t.exports},7393,(e,t,r)=>{"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},7770,(e,t,r)=>{try{var n=e.r(24361);if("function"!=typeof n.inherits)throw"";t.exports=n.inherits}catch(r){t.exports=e.r(7393)}},78567,(e,t,r)=>{"use strict";let{Buffer:n}=e.r(874),i=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){let n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},o.prototype._reverseOffset=function(e){let t=e[0],r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},o.prototype.getBuffers=function(){return this._bufs},o.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,r,i){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length||i<=0)return e||n.alloc(0);let o=!!e,a=this._offset(r),s=i-r,l=s,c=o&&t||0,u=a[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,c),c+=this._bufs[t].length;return e}if(l<=this._bufs[a[0]].length-u)return o?this._bufs[a[0]].copy(e,t,u,u+l):this._bufs[a[0]].slice(u,u+l);o||(e=n.allocUnsafe(s));for(let t=a[0];t<this._bufs.length;t++){let r=this._bufs[t].length-u;if(l>r)this._bufs[t].copy(e,c,u),c+=r;else{this._bufs[t].copy(e,c,u,u+l),c+=r;break}l-=r,u&&(u=0)}return e.length>c?e.slice(0,c):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},o.prototype.consume=function(e){if(Number.isNaN(e=Math.trunc(e))||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this},o.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){return this._attach(e,o.prototype._appendBuffer)},o.prototype.prepend=function(e){return this._attach(e,o.prototype._prependBuffer,!0)},o.prototype._attach=function(e,t,r){if(null==e)return this;if(e.buffer)t.call(this,n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e)){let[n,i]=r?[e.length-1,-1]:[0,1];for(let o=n;o>=0&&o<e.length;o+=i)this._attach(e[o],t,r)}else if(this._isBufferList(e)){let[n,i]=r?[e._bufs.length-1,-1]:[0,1];for(let o=n;o>=0&&o<e._bufs.length;o+=i)this._attach(e._bufs[o],t,r)}else"number"==typeof e&&(e=e.toString()),t.call(this,n.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype._prependBuffer=function(e){this._bufs.unshift(e),this.length+=e.length},o.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=n.from([e]):"string"==typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),isNaN(t=Number(t||0))&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;let i=this._offset(t),o=i[0],a=i[1];for(;o<this._bufs.length;o++){let t=this._bufs[o];for(;a<t.length;)if(t.length-a>=e.length){let r=t.indexOf(e,a);if(-1!==r)return this._reverseOffset([o,r]);a=t.length-e.length+1}else{let t=this._reverseOffset([o,a]);if(this._match(t,e))return t;a++}a=0}return -1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){let e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in e)!function(t){null===e[t]?o.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}:o.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[i]},t.exports=o},18956,(e,t,r)=>{"use strict";let n=e.r(23463).Duplex,i=e.r(7770),o=e.r(78567);function a(e){if(!(this instanceof a))return new a(e);if("function"==typeof e){this._callback=e;let t=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}o._init.call(this,e),n.call(this)}i(a,n),Object.assign(a.prototype,o.prototype),a.prototype._new=function(e){return new a(e)},a.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},a.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},a.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},a.prototype._isBufferList=function(e){return e instanceof a||e instanceof o||a.isBufferList(e)},a.isBufferList=o.isBufferList,t.exports=a,t.exports.BufferListStream=a,t.exports.BufferList=o},17622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e.r(18956)),i=e.r(88947),o=l(e.r(56317)),a=e.r(33755),s=e.r(18134);function l(e){return e&&e.__esModule?e:{default:e}}class c extends i.Transform{constructor(e){super({readableObjectMode:!0}),this.debug=e,this.currentMessage=void 0,this.bl=new n.default}pause(){return super.pause(),this.currentMessage&&this.currentMessage.pause(),this}resume(){return super.resume(),this.currentMessage&&this.currentMessage.resume(),this}processBufferedData(e){for(;this.bl.length>=a.HEADER_LENGTH;){let t=this.bl.readUInt16BE(2);if(t<a.HEADER_LENGTH)return e(new s.ConnectionError("Unable to process incoming packet"));if(this.bl.length>=t){let r=this.bl.slice(0,t);this.bl.consume(t);let n=new a.Packet(r);this.debug.packet("Received",n),this.debug.data(n);let i=this.currentMessage;if(void 0===i&&(this.currentMessage=i=new o.default({type:n.type(),resetConnection:!1}),this.push(i)),n.isLast()){i.once("end",()=>{this.currentMessage=void 0,this.processBufferedData(e)}),i.end(n.data());return}if(!i.write(n.data()))return void i.once("drain",()=>{this.processBufferedData(e)})}else break}e()}_transform(e,t,r){this.bl.append(e),this.processBufferedData(r)}}r.default=c,t.exports=c},7139,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(18956)),i=e.r(88947),o=e.r(33755);class a extends i.Duplex{constructor(e,{packetSize:t}){super({writableObjectMode:!0}),this.packetSize=t,this.debug=e,this.bl=new n.default,this.on("finish",()=>{this.push(null)})}_write(e,t,r){let n=this.packetSize-o.HEADER_LENGTH,i=0;this.currentMessage=e,this.currentMessage.on("data",t=>{if(!e.ignore)for(this.bl.append(t);this.bl.length>n;){let t=this.bl.slice(0,n);this.bl.consume(n);let r=new o.Packet(e.type);r.packetId(i+=1),r.resetConnection(e.resetConnection),r.addData(t),this.debug.packet("Sent",r),this.debug.data(r),!1===this.push(r.buffer)&&e.pause()}}),this.currentMessage.on("end",()=>{let t=this.bl.slice();this.bl.consume(t.length);let n=new o.Packet(e.type);n.packetId(i+=1),n.resetConnection(e.resetConnection),n.last(!0),n.ignore(e.ignore),n.addData(t),this.debug.packet("Sent",n),this.debug.data(n),this.push(n.buffer),this.currentMessage=void 0,r()})}_read(e){this.currentMessage&&this.currentMessage.resume()}}r.default=a,t.exports=a},3619,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=d(e.r(86889)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(e.r(55004)),o=e.r(27699),a=d(e.r(56317)),s=e.r(33755),l=d(e.r(17622)),c=d(e.r(7139));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function d(e){return e&&e.__esModule?e:{default:e}}class h extends o.EventEmitter{constructor(e,t,r){super(),this.socket=e,this.debug=r,this.tlsNegotiationComplete=!1,this.incomingMessageStream=new l.default(this.debug),this.incomingMessageIterator=this.incomingMessageStream[Symbol.asyncIterator](),this.outgoingMessageStream=new c.default(this.debug,{packetSize:t}),this.socket.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(this.socket)}packetSize(...e){if(e.length>0){let t=e[0];this.debug.log("Packet size changed from "+this.outgoingMessageStream.packetSize+" to "+t),this.outgoingMessageStream.packetSize=t}return this.securePair&&this.securePair.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.packetSize}startTls(e,t,r){e.maxVersion&&["TLSv1.2","TLSv1.1","TLSv1"].includes(e.maxVersion)||(e.maxVersion="TLSv1.2");let o=i.createSecureContext(e);return new Promise((e,l)=>{let c=new n.default,u=this.securePair={cleartext:i.connect({socket:c.socket1,servername:t,secureContext:o,rejectUnauthorized:!r}),encrypted:c.socket2},d=()=>{u.encrypted.removeListener("readable",f),u.cleartext.removeListener("error",h),u.cleartext.removeListener("secureConnect",d),u.cleartext.once("error",e=>{this.socket.destroy(e)});let t=u.cleartext.getCipher();t&&this.debug.log("TLS negotiated ("+t.name+", "+t.version+")"),this.emit("secure",u.cleartext),u.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.unpipe(this.socket),this.socket.unpipe(this.incomingMessageStream),this.socket.pipe(u.encrypted),u.encrypted.pipe(this.socket),u.cleartext.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(u.cleartext),this.tlsNegotiationComplete=!0,e()},h=e=>{u.encrypted.removeListener("readable",f),u.cleartext.removeListener("error",h),u.cleartext.removeListener("secureConnect",d),u.cleartext.destroy(),u.encrypted.destroy(),l(e)},f=()=>{let e,t=new a.default({type:s.TYPE.PRELOGIN,resetConnection:!1});for(;e=u.encrypted.read();)t.write(e);this.outgoingMessageStream.write(t),t.end(),this.readMessage().then(async e=>{for await(let t of(u.encrypted.once("readable",f),e))u.encrypted.write(t)}).catch(h)};u.cleartext.once("error",h),u.cleartext.once("secureConnect",d),u.encrypted.once("readable",f)})}sendMessage(e,t,r){let n=new a.default({type:e,resetConnection:r});return n.end(t),this.outgoingMessageStream.write(n),n}async readMessage(){let e=await this.incomingMessageIterator.next();if(e.done)throw Error("unexpected end of message stream");return e.value}}r.default=h,t.exports=h},39588,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.codepageBySortId=r.codepageByLanguageId=r.Flags=r.Collation=void 0;let n=r.codepageByLanguageId={1025:"CP1256",1028:"CP950",1029:"CP1250",1030:"CP1252",1032:"CP1253",1033:"CP1252",1034:"CP1252",1035:"CP1252",1036:"CP1252",1037:"CP1255",1038:"CP1250",1039:"CP1252",1041:"CP932",1042:"CP949",1044:"CP1252",1045:"CP1250",1047:"CP1252",1048:"CP1250",1049:"CP1251",1050:"CP1250",1051:"CP1250",1052:"CP1250",1054:"CP874",1055:"CP1254",1056:"CP1256",1058:"CP1251",1060:"CP1250",1061:"CP1257",1062:"CP1257",1063:"CP1257",1065:"CP1256",1066:"CP1258",1068:"CP1254",1070:"CP1252",1071:"CP1251",1083:"CP1252",1087:"CP1251",1090:"CP1250",1091:"CP1254",1092:"CP1251",1106:"CP1252",1122:"CP1252",1133:"CP1251",1146:"CP1252",1148:"CP1252",1150:"CP1252",1152:"CP1256",1155:"CP1252",1157:"CP1251",1164:"CP1256",2052:"CP936",2074:"CP1250",2092:"CP1251",2107:"CP1252",2143:"CP1252",3076:"CP950",3082:"CP1252",3098:"CP1251",5124:"CP950",5146:"CP1250",8218:"CP1251",1031:"CP1252",1079:"CP1252"},i=r.codepageBySortId={30:"CP437",31:"CP437",32:"CP437",33:"CP437",34:"CP437",40:"CP850",41:"CP850",42:"CP850",43:"CP850",44:"CP850",49:"CP850",51:"CP1252",52:"CP1252",53:"CP1252",54:"CP1252",55:"CP850",56:"CP850",57:"CP850",58:"CP850",59:"CP850",60:"CP850",61:"CP850",80:"CP1250",81:"CP1250",82:"CP1250",83:"CP1250",84:"CP1250",85:"CP1250",86:"CP1250",87:"CP1250",88:"CP1250",89:"CP1250",90:"CP1250",91:"CP1250",92:"CP1250",93:"CP1250",94:"CP1250",95:"CP1250",96:"CP1250",104:"CP1251",105:"CP1251",106:"CP1251",107:"CP1251",108:"CP1251",112:"CP1253",113:"CP1253",114:"CP1253",120:"CP1253",121:"CP1253",122:"CP1253",124:"CP1253",128:"CP1254",129:"CP1254",130:"CP1254",136:"CP1255",137:"CP1255",138:"CP1255",144:"CP1256",145:"CP1256",146:"CP1256",152:"CP1257",153:"CP1257",154:"CP1257",155:"CP1257",156:"CP1257",157:"CP1257",158:"CP1257",159:"CP1257",160:"CP1257",183:"CP1252",184:"CP1252",185:"CP1252",186:"CP1252"},o=r.Flags={IGNORE_CASE:1,IGNORE_ACCENT:2,IGNORE_KANA:4,IGNORE_WIDTH:8,BINARY:16,BINARY2:32,UTF8:64};r.Collation=class{static fromBuffer(e,t=0){let r=(15&e[t+2])<<16;r|=e[t+1]<<8,r|=e[t+0];let n=(15&e[t+3])<<4;return n|=(240&e[t+2])>>>4,new this(r,n,(240&e[t+3])>>>4,e[t+4])}constructor(e,t,r,a){if(this.buffer=void 0,this.lcid=e,this.flags=t,this.version=r,this.sortId=a,this.flags&o.UTF8)this.codepage="utf-8";else if(this.sortId)this.codepage=i[this.sortId];else{let e=65535&this.lcid;this.codepage=n[e]}}toBuffer(){return this.buffer||(this.buffer=Buffer.alloc(5),this.buffer[0]=255&this.lcid,this.buffer[1]=this.lcid>>>8&255,this.buffer[2]=this.lcid>>>16&15|(15&this.flags)<<4,this.buffer[3]=(240&this.flags)>>>4|(15&this.version)<<4,this.buffer[4]=255&this.sortId),this.buffer}}},43053,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:31,type:"NULL",name:"Null",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},71933,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:38,type:"INTN",name:"IntN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},6848,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(71933));let i=Buffer.from([1]),o=Buffer.from([0]),a={id:48,type:"INT1",name:"TinyInt",declaration:function(){return"tinyint"},generateTypeInfo:()=>Buffer.from([n.default.id,1]),generateParameterLength:(e,t)=>null==e.value?o:i,*generateParameterData(e,t){if(null==e.value)return;let r=Buffer.alloc(1);r.writeUInt8(Number(e.value),0),yield r},validate:function(e){if(null==e)return null;if("number"!=typeof e&&(e=Number(e)),isNaN(e))throw TypeError("Invalid number.");if(e<0||e>255)throw TypeError("Value must be between 0 and 255, inclusive.");return 0|e}};r.default=a,t.exports=a},21994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:104,type:"BITN",name:"BitN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},*generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},34296,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(21994));let i=Buffer.from([1]),o=Buffer.from([0]),a={id:50,type:"BIT",name:"Bit",declaration:function(){return"bit"},generateTypeInfo:()=>Buffer.from([n.default.id,1]),generateParameterLength:(e,t)=>null==e.value?o:i,*generateParameterData(e,t){null!=e.value&&(yield e.value?Buffer.from([1]):Buffer.from([0]))},validate:function(e){return null==e?null:!!e}};r.default=a,t.exports=a},21916,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(71933));let i=Buffer.from([2]),o=Buffer.from([0]),a={id:52,type:"INT2",name:"SmallInt",declaration:function(){return"smallint"},generateTypeInfo:()=>Buffer.from([n.default.id,2]),generateParameterLength:(e,t)=>null==e.value?o:i,*generateParameterData(e,t){if(null==e.value)return;let r=Buffer.alloc(2);r.writeInt16LE(Number(e.value),0),yield r},validate:function(e){if(null==e)return null;if("number"!=typeof e&&(e=Number(e)),isNaN(e))throw TypeError("Invalid number.");if(e<-32768||e>32767)throw TypeError("Value must be between -32768 and 32767, inclusive.");return 0|e}};r.default=a,t.exports=a},68919,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(71933));let i=Buffer.from([0]),o=Buffer.from([4]),a={id:56,type:"INT4",name:"Int",declaration:function(){return"int"},generateTypeInfo:()=>Buffer.from([n.default.id,4]),generateParameterLength:(e,t)=>null==e.value?i:o,*generateParameterData(e,t){if(null==e.value)return;let r=Buffer.alloc(4);r.writeInt32LE(Number(e.value),0),yield r},validate:function(e){if(null==e)return null;if("number"!=typeof e&&(e=Number(e)),isNaN(e))throw TypeError("Invalid number.");if(e<-0x80000000||e>0x7fffffff)throw TypeError("Value must be between -2147483648 and 2147483647, inclusive.");return 0|e}};r.default=a,t.exports=a},99121,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:111,type:"DATETIMN",name:"DateTimeN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},50713,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(99121));let i=new Date(1900,0,1),o=new Date(Date.UTC(1900,0,1)),a=Buffer.from([4]),s=Buffer.from([0]),l={id:58,type:"DATETIM4",name:"SmallDateTime",declaration:function(){return"smalldatetime"},generateTypeInfo:()=>Buffer.from([n.default.id,4]),generateParameterLength:(e,t)=>null==e.value?s:a,generateParameterData:function*(e,t){let r,n,a;if(null==e.value)return;let s=Buffer.alloc(4);t.useUTC?(r=Math.floor((e.value.getTime()-o.getTime())/864e5),a=60*e.value.getUTCHours()+e.value.getUTCMinutes()):(n=-(1e3*(60*(e.value.getTimezoneOffset()-i.getTimezoneOffset()))),r=Math.floor((e.value.getTime()-i.getTime()+n)/864e5),a=60*e.value.getHours()+e.value.getMinutes()),s.writeUInt16LE(r,0),s.writeUInt16LE(a,2),yield s},validate:function(e,t,r){let n,i,o;if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),r&&r.useUTC?(n=e.getUTCFullYear(),i=e.getUTCMonth(),o=e.getUTCDate()):(n=e.getFullYear(),i=e.getMonth(),o=e.getDate()),n<1900||n>2079||2079===n&&(i>5||5===i&&o>6))throw TypeError("Out of range.");if(isNaN(e))throw TypeError("Invalid date.");return e}};r.default=l,t.exports=l},92503,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:109,type:"FLTN",name:"FloatN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},37816,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(92503));let i=Buffer.from([0]),o=Buffer.from([4]),a={id:59,type:"FLT4",name:"Real",declaration:function(){return"real"},generateTypeInfo:()=>Buffer.from([n.default.id,4]),generateParameterLength:(e,t)=>null==e.value?i:o,*generateParameterData(e,t){if(null==e.value)return;let r=Buffer.alloc(4);r.writeFloatLE(parseFloat(e.value),0),yield r},validate:function(e){if(null==e)return null;if(isNaN(e=parseFloat(e)))throw TypeError("Invalid number.");return e}};r.default=a,t.exports=a},71974,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:110,type:"MONEYN",name:"MoneyN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},46115,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(71974));let i=Buffer.from([0]),o=Buffer.from([8]),a={id:60,type:"MONEY",name:"Money",declaration:function(){return"money"},generateTypeInfo:function(){return Buffer.from([n.default.id,8])},generateParameterLength:(e,t)=>null==e.value?i:o,*generateParameterData(e,t){if(null==e.value)return;let r=1e4*e.value,n=Buffer.alloc(8);n.writeInt32LE(Math.floor(23283064365386963e-26*r),0),n.writeInt32LE(-1&r,4),yield n},validate:function(e){if(null==e)return null;if(isNaN(e=parseFloat(e)))throw TypeError("Invalid number.");if(e<-922337203685477.6||e>922337203685477.6)throw TypeError("Value must be between -922337203685477.5808 and 922337203685477.5807, inclusive.");return e}};r.default=a,t.exports=a},33529,e=>{"use strict";function t(e,t,r){function n(e){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,t&&t.apply(this,arguments),this.toString=function(){return this.name+": "+this.message}}return void 0===r&&(r=Error),n.prototype=Object.create(r.prototype),n.prototype.name=e,n.prototype.constructor=n,n}e.s(["ArithmeticException",()=>u,"ChronoField",()=>P,"ChronoLocalDate",()=>$,"ChronoLocalDateTime",()=>e1,"ChronoUnit",()=>O,"ChronoZonedDateTime",()=>eX,"Clock",()=>e6,"DateTimeException",()=>s,"DateTimeFormatter",()=>eq,"DateTimeFormatterBuilder",()=>eU,"DateTimeParseException",()=>l,"DayOfWeek",()=>U,"DecimalStyle",()=>eg,"Duration",()=>w,"IllegalArgumentException",()=>d,"IllegalStateException",()=>h,"Instant",()=>e8,"IsoChronology",()=>eK,"IsoFields",()=>er,"LocalDate",()=>e0,"LocalDateTime",()=>e2,"LocalTime",()=>e5,"Month",()=>x,"MonthDay",()=>eH,"NullPointerException",()=>f,"OffsetDateTime",()=>eJ,"OffsetTime",()=>eQ,"ParsePosition",()=>q,"Period",()=>B,"ResolverStyle",()=>j,"SignStyle",()=>ey,"Temporal",()=>Y,"TemporalAccessor",()=>D,"TemporalAdjuster",()=>e$,"TemporalAdjusters",()=>eV,"TemporalAmount",()=>C,"TemporalField",()=>R,"TemporalQueries",()=>k,"TemporalQuery",()=>M,"TemporalUnit",()=>S,"TextStyle",()=>e_,"UnsupportedTemporalTypeException",()=>c,"ValueRange",()=>N,"Year",()=>eY,"YearConstants",()=>I,"YearMonth",()=>ej,"ZoneId",()=>z,"ZoneOffset",()=>X,"ZoneOffsetTransition",()=>e7,"ZoneRegion",()=>eP,"ZoneRules",()=>G,"ZoneRulesProvider",()=>eN,"ZonedDateTime",()=>eZ,"_",()=>tl,"convert",()=>ta,"nativeJs",()=>ts,"use",()=>tu]);var r,n,i,o,a,s=t("DateTimeException",function(e,t){void 0===t&&(t=null);var r=e||this.name;null!==t&&t instanceof Error&&(r+="\n-------\nCaused by: "+t.stack+"\n-------\n"),this.message=r}),l=t("DateTimeParseException",function(e,t,r,n){void 0===t&&(t=""),void 0===r&&(r=0),void 0===n&&(n=null);var i=e||this.name;i+=": "+t+", at index: "+r,null!==n&&n instanceof Error&&(i+="\n-------\nCaused by: "+n.stack+"\n-------\n"),this.message=i,this.parsedString=function(){return t},this.errorIndex=function(){return r}}),c=t("UnsupportedTemporalTypeException",null,s),u=t("ArithmeticException"),d=t("IllegalArgumentException"),h=t("IllegalStateException"),f=t("NullPointerException");function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){if(!e)if(r)throw new r(t);else throw Error(t)}function _(e,t){if(null==e)throw new f(t+" must not be null");return e}function E(e,t,r){if(!(e instanceof t))throw new d(r+" must be an instance of "+(t.name?t.name:t)+(e&&e.constructor&&e.constructor.name?", but is "+e.constructor.name:""));return e}function T(e){throw TypeError('abstract method "'+e+'" is not implemented')}var b=Object.freeze({__proto__:null,abstractMethodFail:T,assert:y,requireInstance:E,requireNonNull:_}),v=function(){function e(){}return e.intDiv=function(t,r){var n=t/r;return n=e.roundDown(n),e.safeZero(n)},e.intMod=function(t,r){var n=t-e.intDiv(t,r)*r;return n=e.roundDown(n),e.safeZero(n)},e.roundDown=function(e){return e<0?Math.ceil(e):Math.floor(e)},e.floorDiv=function(t,r){var n=Math.floor(t/r);return e.safeZero(n)},e.floorMod=function(t,r){var n=t-e.floorDiv(t,r)*r;return e.safeZero(n)},e.safeAdd=function(t,r){if(e.verifyInt(t),e.verifyInt(r),0===t)return e.safeZero(r);if(0===r)return e.safeZero(t);var n=e.safeToInt(t+r);if(n===t||n===r)throw new u("Invalid addition beyond MAX_SAFE_INTEGER!");return n},e.safeSubtract=function(t,r){return(e.verifyInt(t),e.verifyInt(r),0===t&&0===r)?0:0===t?e.safeZero(-1*r):0===r?e.safeZero(t):e.safeToInt(t-r)},e.safeMultiply=function(t,r){if(e.verifyInt(t),e.verifyInt(r),1===t)return e.safeZero(r);if(1===r)return e.safeZero(t);if(0===t||0===r)return 0;var n=e.safeToInt(t*r);if(n/r!==t||-0x1fffffffffffff===t&&-1===r||-0x1fffffffffffff===r&&-1===t)throw new u("Multiplication overflows: "+t+" * "+r);return n},e.parseInt=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){var r=parseInt(t);return e.safeToInt(r)}),e.safeToInt=function(t){return e.verifyInt(t),e.safeZero(t)},e.verifyInt=function(e){if(null==e)throw new u("Invalid value: '"+e+"', using null or undefined as argument");if(isNaN(e))throw new u("Invalid int value, using NaN as argument");if(Number.isInteger){if(!Number.isInteger(Number(e)))throw new u("Invalid value: '"+e+"' is a float")}else if(e%1!=0)throw new u("Invalid value: '"+e+"' is a float");if(e>0x1fffffffffffff||e<-0x1fffffffffffff)throw new u("Calculation overflows an int: "+e)},e.safeZero=function(e){return 0===e?0:+e},e.compareNumbers=function(e,t){return e<t?-1:+(e>t)},e.smi=function(e){return e>>>1&0x40000000|0xbfffffff&e},e.hash=function(t){if(t!=t||t===1/0)return 0;for(var r=t;t>0xffffffff;)t/=0xffffffff,r^=t;return e.smi(r)},e.hashCode=function(){for(var t=17,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var o=0;o<n.length;o++){var a=n[o];t=(t<<5)-t+e.hash(a)}return e.hash(t)},e}();v.MAX_SAFE_INTEGER=0x1fffffffffffff,v.MIN_SAFE_INTEGER=-0x1fffffffffffff;var A=function(){function e(e){this._name=e}var t=e.prototype;return t.equals=function(e){return this===e},t.toString=function(){return this._name},t.toJSON=function(){return this.toString()},e}(),C=function(){function e(){}var t=e.prototype;return t.get=function(e){T("get")},t.units=function(){T("units")},t.addTo=function(e){T("addTo")},t.subtractFrom=function(e){T("subtractFrom")},e}();"undefined"!=typeof Symbol&&Symbol.toPrimitive&&(C.prototype[Symbol.toPrimitive]=function(e){if("number"!==e)return this.toString();throw TypeError("A conversion from TemporalAmount to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var S=function(){function e(){}var t=e.prototype;return t.duration=function(){T("duration")},t.isDurationEstimated=function(){T("isDurationEstimated")},t.isDateBased=function(){T("isDateBased")},t.isTimeBased=function(){T("isTimeBased")},t.isSupportedBy=function(e){T("isSupportedBy")},t.addTo=function(e,t){T("addTo")},t.between=function(e,t){T("between")},e}(),w=function(e){function t(t,r){var n;return(n=e.call(this)||this)._seconds=v.safeToInt(t),n._nanos=v.safeToInt(r),n}p(t,e),t.ofDays=function(e){return t._create(v.safeMultiply(e,e5.SECONDS_PER_DAY),0)},t.ofHours=function(e){return t._create(v.safeMultiply(e,e5.SECONDS_PER_HOUR),0)},t.ofMinutes=function(e){return t._create(v.safeMultiply(e,e5.SECONDS_PER_MINUTE),0)},t.ofSeconds=function(e,r){void 0===r&&(r=0);var n=v.safeAdd(e,v.floorDiv(r,e5.NANOS_PER_SECOND)),i=v.floorMod(r,e5.NANOS_PER_SECOND);return t._create(n,i)},t.ofMillis=function(e){var r=v.intDiv(e,1e3),n=v.intMod(e,1e3);return n<0&&(n+=1e3,r--),t._create(r,1e6*n)},t.ofNanos=function(e){var t=v.intDiv(e,e5.NANOS_PER_SECOND),r=v.intMod(e,e5.NANOS_PER_SECOND);return r<0&&(r+=e5.NANOS_PER_SECOND,t--),this._create(t,r)},t.of=function(e,r){return t.ZERO.plus(e,r)},t.from=function(e){_(e,"amount"),E(e,C);var r=t.ZERO;return e.units().forEach(function(t){r=r.plus(e.get(t),t)}),r},t.between=function(e,t){_(e,"startInclusive"),_(t,"endExclusive");var r=e.until(t,O.SECONDS),n=0;if(e.isSupported(P.NANO_OF_SECOND)&&t.isSupported(P.NANO_OF_SECOND))try{var i=e.getLong(P.NANO_OF_SECOND);if(n=t.getLong(P.NANO_OF_SECOND)-i,r>0&&n<0)n+=e5.NANOS_PER_SECOND;else if(r<0&&n>0)n-=e5.NANOS_PER_SECOND;else if(0===r&&0!==n){var o=t.with(P.NANO_OF_SECOND,i);r=e.until(o,O.SECONDS)}}catch(e){}return this.ofSeconds(r,n)},t.parse=function(e){_(e,"text");var r=RegExp("([-+]?)P(?:([-+]?[0-9]+)D)?(T(?:([-+]?[0-9]+)H)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)(?:[.,]([0-9]{0,9}))?S)?)?","i").exec(e);if(null!==r&&"T"===r[3]==!1){var n="-"===r[1],i=r[2],o=r[4],a=r[5],s=r[6],c=r[7];if(null!=i||null!=o||null!=a||null!=s){var u=t._parseNumber(e,i,e5.SECONDS_PER_DAY,"days"),d=t._parseNumber(e,o,e5.SECONDS_PER_HOUR,"hours"),h=t._parseNumber(e,a,e5.SECONDS_PER_MINUTE,"minutes"),f=t._parseNumber(e,s,1,"seconds"),p=null!=s&&"-"===s.charAt(0),m=t._parseFraction(e,c,p?-1:1);try{return t._create(n,u,d,h,f,m)}catch(t){throw new l("Text cannot be parsed to a Duration: overflow",e,0,t)}}}throw new l("Text cannot be parsed to a Duration",e,0)},t._parseNumber=function(e,t,r,n){if(null==t)return 0;try{return"+"===t[0]&&(t=t.substring(1)),v.safeMultiply(parseFloat(t),r)}catch(t){throw new l("Text cannot be parsed to a Duration: "+n,e,0,t)}},t._parseFraction=function(e,t,r){return null==t||0===t.length?0:parseFloat(t=(t+"000000000").substring(0,9))*r},t._create=function(){return arguments.length<=2?t._createSecondsNanos(arguments[0],arguments[1]):t._createNegateDaysHoursMinutesSecondsNanos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},t._createNegateDaysHoursMinutesSecondsNanos=function(e,r,n,i,o,a){var s=v.safeAdd(r,v.safeAdd(n,v.safeAdd(i,o)));return e?t.ofSeconds(s,a).negated():t.ofSeconds(s,a)},t._createSecondsNanos=function(e,r){return(void 0===e&&(e=0),void 0===r&&(r=0),0===e&&0===r)?t.ZERO:new t(e,r)};var r=t.prototype;return r.get=function(e){if(e===O.SECONDS)return this._seconds;if(e===O.NANOS)return this._nanos;throw new c("Unsupported unit: "+e)},r.units=function(){return[O.SECONDS,O.NANOS]},r.isZero=function(){return 0===this._seconds&&0===this._nanos},r.isNegative=function(){return this._seconds<0},r.seconds=function(){return this._seconds},r.nano=function(){return this._nanos},r.withSeconds=function(e){return t._create(e,this._nanos)},r.withNanos=function(e){return P.NANO_OF_SECOND.checkValidIntValue(e),t._create(this._seconds,e)},r.plusDuration=function(e){return _(e,"duration"),this.plus(e.seconds(),e.nano())},r.plus=function(e,t){return 1==arguments.length?this.plusDuration(e):2==arguments.length&&t instanceof S?this.plusAmountUnit(e,t):this.plusSecondsNanos(e,t)},r.plusAmountUnit=function(e,t){if(_(e,"amountToAdd"),_(t,"unit"),t===O.DAYS)return this.plusSecondsNanos(v.safeMultiply(e,e5.SECONDS_PER_DAY),0);if(t.isDurationEstimated())throw new c("Unit must not have an estimated duration");if(0===e)return this;if(t instanceof O){switch(t){case O.NANOS:return this.plusNanos(e);case O.MICROS:return this.plusSecondsNanos(1e3*v.intDiv(e,1e9),1e3*v.intMod(e,1e9));case O.MILLIS:return this.plusMillis(e);case O.SECONDS:return this.plusSeconds(e)}return this.plusSecondsNanos(v.safeMultiply(t.duration().seconds(),e),0)}var r=t.duration().multipliedBy(e);return this.plusSecondsNanos(r.seconds(),r.nano())},r.plusDays=function(e){return this.plusSecondsNanos(v.safeMultiply(e,e5.SECONDS_PER_DAY),0)},r.plusHours=function(e){return this.plusSecondsNanos(v.safeMultiply(e,e5.SECONDS_PER_HOUR),0)},r.plusMinutes=function(e){return this.plusSecondsNanos(v.safeMultiply(e,e5.SECONDS_PER_MINUTE),0)},r.plusSeconds=function(e){return this.plusSecondsNanos(e,0)},r.plusMillis=function(e){return this.plusSecondsNanos(v.intDiv(e,1e3),1e6*v.intMod(e,1e3))},r.plusNanos=function(e){return this.plusSecondsNanos(0,e)},r.plusSecondsNanos=function(e,r){if(_(e,"secondsToAdd"),_(r,"nanosToAdd"),0===e&&0===r)return this;var n=v.safeAdd(this._seconds,e);n=v.safeAdd(n,v.intDiv(r,e5.NANOS_PER_SECOND)),r=v.intMod(r,e5.NANOS_PER_SECOND);var i=v.safeAdd(this._nanos,r);return t.ofSeconds(n,i)},r.minus=function(e,t){return 1==arguments.length?this.minusDuration(e):this.minusAmountUnit(e,t)},r.minusDuration=function(e){_(e,"duration");var t=e.seconds(),r=e.nano();return -0x1fffffffffffff===t?this.plus(0x1fffffffffffff,-r):this.plus(-t,-r)},r.minusAmountUnit=function(e,t){return _(e,"amountToSubtract"),_(t,"unit"),-0x1fffffffffffff===e?this.plusAmountUnit(0x1fffffffffffff,t):this.plusAmountUnit(-e,t)},r.minusDays=function(e){return -0x1fffffffffffff===e?this.plusDays(0x1fffffffffffff):this.plusDays(-e)},r.minusHours=function(e){return -0x1fffffffffffff===e?this.plusHours(0x1fffffffffffff):this.plusHours(-e)},r.minusMinutes=function(e){return -0x1fffffffffffff===e?this.plusMinutes(0x1fffffffffffff):this.plusMinutes(-e)},r.minusSeconds=function(e){return -0x1fffffffffffff===e?this.plusSeconds(0x1fffffffffffff):this.plusSeconds(-e)},r.minusMillis=function(e){return -0x1fffffffffffff===e?this.plusMillis(0x1fffffffffffff):this.plusMillis(-e)},r.minusNanos=function(e){return -0x1fffffffffffff===e?this.plusNanos(0x1fffffffffffff):this.plusNanos(-e)},r.multipliedBy=function(e){if(0===e)return t.ZERO;if(1===e)return this;var r=v.safeMultiply(this._seconds,e),n=v.safeMultiply(this._nanos,e);return r+=v.intDiv(n,e5.NANOS_PER_SECOND),n=v.intMod(n,e5.NANOS_PER_SECOND),t.ofSeconds(r,n)},r.dividedBy=function(e){if(0===e)throw new u("Cannot divide by zero");if(1===e)return this;var r=v.intDiv(this._seconds,e),n=v.roundDown((this._seconds/e-r)*e5.NANOS_PER_SECOND),i=v.intDiv(this._nanos,e);return i=n+i,t.ofSeconds(r,i)},r.negated=function(){return this.multipliedBy(-1)},r.abs=function(){return this.isNegative()?this.negated():this},r.addTo=function(e){return _(e,"temporal"),0!==this._seconds&&(e=e.plus(this._seconds,O.SECONDS)),0!==this._nanos&&(e=e.plus(this._nanos,O.NANOS)),e},r.subtractFrom=function(e){return _(e,"temporal"),0!==this._seconds&&(e=e.minus(this._seconds,O.SECONDS)),0!==this._nanos&&(e=e.minus(this._nanos,O.NANOS)),e},r.toDays=function(){return v.intDiv(this._seconds,e5.SECONDS_PER_DAY)},r.toHours=function(){return v.intDiv(this._seconds,e5.SECONDS_PER_HOUR)},r.toMinutes=function(){return v.intDiv(this._seconds,e5.SECONDS_PER_MINUTE)},r.toMillis=function(){var e=Math.round(v.safeMultiply(this._seconds,1e3));return v.safeAdd(e,v.intDiv(this._nanos,1e6))},r.toNanos=function(){var e=v.safeMultiply(this._seconds,e5.NANOS_PER_SECOND);return v.safeAdd(e,this._nanos)},r.compareTo=function(e){_(e,"otherDuration"),E(e,t,"otherDuration");var r=v.compareNumbers(this._seconds,e.seconds());return 0!==r?r:this._nanos-e.nano()},r.equals=function(e){return this===e||e instanceof t&&this.seconds()===e.seconds()&&this.nano()===e.nano()},r.toString=function(){if(this===t.ZERO)return"PT0S";var e,r=v.intDiv(this._seconds,e5.SECONDS_PER_HOUR),n=v.intDiv(v.intMod(this._seconds,e5.SECONDS_PER_HOUR),e5.SECONDS_PER_MINUTE),i=v.intMod(this._seconds,e5.SECONDS_PER_MINUTE),o="PT";if(0!==r&&(o+=r+"H"),0!==n&&(o+=n+"M"),0===i&&0===this._nanos&&o.length>2)return o;if(i<0&&this._nanos>0?-1===i?o+="-0":o+=i+1:o+=i,this._nanos>0)for(o+=".",o+=e=(e=i<0?""+(2*e5.NANOS_PER_SECOND-this._nanos):""+(e5.NANOS_PER_SECOND+this._nanos)).slice(1,e.length);"0"===o.charAt(o.length-1);)o=o.slice(0,o.length-1);return o+"S"},r.toJSON=function(){return this.toString()},t}(C),I=function(){},O=function(e){function t(t,r){var n;return(n=e.call(this)||this)._name=t,n._duration=r,n}p(t,e);var r=t.prototype;return r.duration=function(){return this._duration},r.isDurationEstimated=function(){return this.isDateBased()||this===t.FOREVER},r.isDateBased=function(){return this.compareTo(t.DAYS)>=0&&this!==t.FOREVER},r.isTimeBased=function(){return 0>this.compareTo(t.DAYS)},r.isSupportedBy=function(e){if(this===t.FOREVER)return!1;try{return e.plus(1,this),!0}catch(t){try{return e.plus(-1,this),!0}catch(e){return!1}}},r.addTo=function(e,t){return e.plus(t,this)},r.between=function(e,t){return e.until(t,this)},r.toString=function(){return this._name},r.compareTo=function(e){return this.duration().compareTo(e.duration())},t}(S),R=function(){function e(){}var t=e.prototype;return t.isDateBased=function(){T("isDateBased")},t.isTimeBased=function(){T("isTimeBased")},t.baseUnit=function(){T("baseUnit")},t.rangeUnit=function(){T("rangeUnit")},t.range=function(){T("range")},t.rangeRefinedBy=function(e){T("rangeRefinedBy")},t.getFrom=function(e){T("getFrom")},t.adjustInto=function(e,t){T("adjustInto")},t.isSupportedBy=function(e){T("isSupportedBy")},t.displayName=function(){T("displayName")},t.equals=function(e){T("equals")},t.name=function(){T("name")},e}(),N=function(){function e(e,t,r,n){y(!(e>t),"Smallest minimum value '"+e+"' must be less than largest minimum value '"+t+"'",d),y(!(r>n),"Smallest maximum value '"+r+"' must be less than largest maximum value '"+n+"'",d),y(!(t>n),"Minimum value '"+t+"' must be less than maximum value '"+n+"'",d),this._minSmallest=e,this._minLargest=t,this._maxLargest=n,this._maxSmallest=r}var t=e.prototype;return t.isFixed=function(){return this._minSmallest===this._minLargest&&this._maxSmallest===this._maxLargest},t.minimum=function(){return this._minSmallest},t.largestMinimum=function(){return this._minLargest},t.maximum=function(){return this._maxLargest},t.smallestMaximum=function(){return this._maxSmallest},t.isValidValue=function(e){return this.minimum()<=e&&e<=this.maximum()},t.checkValidValue=function(e,t){return this.isValidValue(e)?e:y(!1,null!=t?"Invalid value for "+t+" (valid values "+this.toString()+"): "+e:"Invalid value (valid values "+this.toString()+"): "+e,s)},t.checkValidIntValue=function(e,t){if(!1===this.isValidIntValue(e))throw new s("Invalid int value for "+t+": "+e);return e},t.isValidIntValue=function(e){return this.isIntValue()&&this.isValidValue(e)},t.isIntValue=function(){return this.minimum()>=v.MIN_SAFE_INTEGER&&this.maximum()<=v.MAX_SAFE_INTEGER},t.equals=function(t){return t===this||t instanceof e&&this._minSmallest===t._minSmallest&&this._minLargest===t._minLargest&&this._maxSmallest===t._maxSmallest&&this._maxLargest===t._maxLargest},t.hashCode=function(){return v.hashCode(this._minSmallest,this._minLargest,this._maxSmallest,this._maxLargest)},t.toString=function(){var e=this.minimum()+(this.minimum()!==this.largestMinimum()?"/"+this.largestMinimum():"");return e+=" - ",e+=this.smallestMaximum()+(this.smallestMaximum()!==this.maximum()?"/"+this.maximum():"")},e.of=function(){return 2==arguments.length?new e(arguments[0],arguments[0],arguments[1],arguments[1]):3==arguments.length?new e(arguments[0],arguments[0],arguments[1],arguments[2]):4==arguments.length?new e(arguments[0],arguments[1],arguments[2],arguments[3]):y(!1,"Invalid number of arguments "+arguments.length,d)},e}(),P=function(e){function t(t,r,n,i){var o;return(o=e.call(this)||this)._name=t,o._baseUnit=r,o._rangeUnit=n,o._range=i,o}p(t,e),t.byName=function(e){for(var r in t)if(t[r]&&t[r]instanceof t&&t[r].name()===e)return t[r]};var r=t.prototype;return r.name=function(){return this._name},r.baseUnit=function(){return this._baseUnit},r.rangeUnit=function(){return this._rangeUnit},r.range=function(){return this._range},r.displayName=function(){return this.toString()},r.checkValidValue=function(e){return this.range().checkValidValue(e,this)},r.checkValidIntValue=function(e){return this.range().checkValidIntValue(e,this)},r.isDateBased=function(){return this===t.DAY_OF_WEEK||this===t.ALIGNED_DAY_OF_WEEK_IN_MONTH||this===t.ALIGNED_DAY_OF_WEEK_IN_YEAR||this===t.DAY_OF_MONTH||this===t.DAY_OF_YEAR||this===t.EPOCH_DAY||this===t.ALIGNED_WEEK_OF_MONTH||this===t.ALIGNED_WEEK_OF_YEAR||this===t.MONTH_OF_YEAR||this===t.PROLEPTIC_MONTH||this===t.YEAR_OF_ERA||this===t.YEAR||this===t.ERA},r.isTimeBased=function(){return this===t.NANO_OF_SECOND||this===t.NANO_OF_DAY||this===t.MICRO_OF_SECOND||this===t.MICRO_OF_DAY||this===t.MILLI_OF_SECOND||this===t.MILLI_OF_DAY||this===t.SECOND_OF_MINUTE||this===t.SECOND_OF_DAY||this===t.MINUTE_OF_HOUR||this===t.MINUTE_OF_DAY||this===t.HOUR_OF_AMPM||this===t.CLOCK_HOUR_OF_AMPM||this===t.HOUR_OF_DAY||this===t.CLOCK_HOUR_OF_DAY||this===t.AMPM_OF_DAY},r.rangeRefinedBy=function(e){return e.range(this)},r.getFrom=function(e){return e.getLong(this)},r.toString=function(){return this.name()},r.equals=function(e){return this===e},r.adjustInto=function(e,t){return e.with(this,t)},r.isSupportedBy=function(e){return e.isSupported(this)},t}(R),k=function(){function e(){}return e.zoneId=function(){return e.ZONE_ID},e.chronology=function(){return e.CHRONO},e.precision=function(){return e.PRECISION},e.zone=function(){return e.ZONE},e.offset=function(){return e.OFFSET},e.localDate=function(){return e.LOCAL_DATE},e.localTime=function(){return e.LOCAL_TIME},e}(),D=function(){function e(){}var t=e.prototype;return t.query=function(e){return e===k.zoneId()||e===k.chronology()||e===k.precision()?null:e.queryFrom(this)},t.get=function(e){return this.range(e).checkValidIntValue(this.getLong(e),e)},t.getLong=function(e){T("getLong")},t.range=function(e){if(e instanceof P){if(this.isSupported(e))return e.range();throw new c("Unsupported field: "+e)}return e.rangeRefinedBy(this)},t.isSupported=function(e){T("isSupported")},e}(),M=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.queryFrom=function(e){T("queryFrom")},t}(A);function L(e,t){var r=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t}(M);return r.prototype.queryFrom=t,new r(e)}var U=function(e){function t(t,r){var n;return(n=e.call(this)||this)._ordinal=t,n._name=r,n}p(t,e);var n=t.prototype;return n.ordinal=function(){return this._ordinal},n.name=function(){return this._name},t.values=function(){return r.slice()},t.valueOf=function(e){for(var n=0;n<r.length&&r[n].name()!==e;n++);return t.of(n+1)},t.of=function(e){if(e<1||e>7)throw new s("Invalid value for DayOfWeek: "+e);return r[e-1]},t.from=function(e){if(y(null!=e,"temporal",f),e instanceof t)return e;try{return t.of(e.get(P.DAY_OF_WEEK))}catch(t){if(t instanceof s)throw new s("Unable to obtain DayOfWeek from TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""),t);throw t}},n.value=function(){return this._ordinal+1},n.displayName=function(e,t){throw new d("Pattern using (localized) text not implemented yet!")},n.isSupported=function(e){return e instanceof P?e===P.DAY_OF_WEEK:null!=e&&e.isSupportedBy(this)},n.range=function(e){if(e===P.DAY_OF_WEEK)return e.range();if(e instanceof P)throw new c("Unsupported field: "+e);return e.rangeRefinedBy(this)},n.get=function(e){return e===P.DAY_OF_WEEK?this.value():this.range(e).checkValidIntValue(this.getLong(e),e)},n.getLong=function(e){if(e===P.DAY_OF_WEEK)return this.value();if(e instanceof P)throw new c("Unsupported field: "+e);return e.getFrom(this)},n.plus=function(e){var t=v.floorMod(e,7);return r[v.floorMod(this._ordinal+(t+7),7)]},n.minus=function(e){return this.plus(-1*v.floorMod(e,7))},n.query=function(e){return e===k.precision()?O.DAYS:e===k.localDate()||e===k.localTime()||e===k.chronology()||e===k.zone()||e===k.zoneId()||e===k.offset()?null:(y(null!=e,"query",f),e.queryFrom(this))},n.adjustInto=function(e){return _(e,"temporal"),e.with(P.DAY_OF_WEEK,this.value())},n.equals=function(e){return this===e},n.toString=function(){return this._name},n.compareTo=function(e){return _(e,"other"),E(e,t,"other"),this._ordinal-e._ordinal},n.toJSON=function(){return this.toString()},t}(D),x=function(e){function t(t,r){var n;return(n=e.call(this)||this)._value=v.safeToInt(t),n._name=r,n}p(t,e);var r=t.prototype;return r.value=function(){return this._value},r.ordinal=function(){return this._value-1},r.name=function(){return this._name},r.displayName=function(e,t){throw new d("Pattern using (localized) text not implemented yet!")},r.isSupported=function(e){return null!==e&&(e instanceof P?e===P.MONTH_OF_YEAR:null!=e&&e.isSupportedBy(this))},r.get=function(e){return e===P.MONTH_OF_YEAR?this.value():this.range(e).checkValidIntValue(this.getLong(e),e)},r.getLong=function(e){if(e===P.MONTH_OF_YEAR)return this.value();if(e instanceof P)throw new c("Unsupported field: "+e);return e.getFrom(this)},r.plus=function(e){var r=v.intMod(e,12)+12,n=v.intMod(this.value()+r,12);return n=0===n?12:n,t.of(n)},r.minus=function(e){return this.plus(-1*v.intMod(e,12))},r.length=function(e){switch(this){case t.FEBRUARY:return e?29:28;case t.APRIL:case t.JUNE:case t.SEPTEMBER:case t.NOVEMBER:return 30;default:return 31}},r.minLength=function(){switch(this){case t.FEBRUARY:return 28;case t.APRIL:case t.JUNE:case t.SEPTEMBER:case t.NOVEMBER:return 30;default:return 31}},r.maxLength=function(){switch(this){case t.FEBRUARY:return 29;case t.APRIL:case t.JUNE:case t.SEPTEMBER:case t.NOVEMBER:return 30;default:return 31}},r.firstDayOfYear=function(e){var r=+!!e;switch(this){case t.JANUARY:return 1;case t.FEBRUARY:return 32;case t.MARCH:return 60+r;case t.APRIL:return 91+r;case t.MAY:return 121+r;case t.JUNE:return 152+r;case t.JULY:return 182+r;case t.AUGUST:return 213+r;case t.SEPTEMBER:return 244+r;case t.OCTOBER:return 274+r;case t.NOVEMBER:return 305+r;case t.DECEMBER:default:return 335+r}},r.firstMonthOfQuarter=function(){switch(this){case t.JANUARY:case t.FEBRUARY:case t.MARCH:return t.JANUARY;case t.APRIL:case t.MAY:case t.JUNE:return t.APRIL;case t.JULY:case t.AUGUST:case t.SEPTEMBER:return t.JULY;case t.OCTOBER:case t.NOVEMBER:case t.DECEMBER:default:return t.OCTOBER}},r.query=function(t){return(y(null!=t,"query() parameter must not be null",s),t===k.chronology())?eK.INSTANCE:t===k.precision()?O.MONTHS:e.prototype.query.call(this,t)},r.toString=function(){switch(this){case t.JANUARY:return"JANUARY";case t.FEBRUARY:return"FEBRUARY";case t.MARCH:return"MARCH";case t.APRIL:return"APRIL";case t.MAY:return"MAY";case t.JUNE:return"JUNE";case t.JULY:return"JULY";case t.AUGUST:return"AUGUST";case t.SEPTEMBER:return"SEPTEMBER";case t.OCTOBER:return"OCTOBER";case t.NOVEMBER:return"NOVEMBER";case t.DECEMBER:return"DECEMBER";default:return"unknown Month, value: "+this.value()}},r.toJSON=function(){return this.toString()},r.adjustInto=function(e){return e.with(P.MONTH_OF_YEAR,this.value())},r.compareTo=function(e){return _(e,"other"),E(e,t,"other"),this._value-e._value},r.equals=function(e){return this===e},t.valueOf=function(e){for(var r=0;r<n.length&&n[r].name()!==e;r++);return t.of(r+1)},t.values=function(){return n.slice()},t.of=function(e){return(e<1||e>12)&&y(!1,"Invalid value for MonthOfYear: "+e,s),n[e-1]},t.from=function(e){if(e instanceof t)return e;try{return t.of(e.get(P.MONTH_OF_YEAR))}catch(t){throw new s("Unable to obtain Month from TemporalAccessor: "+e+" of type "+(e&&null!=e.constructor?e.constructor.name:""),t)}},t}(D),F=/([-+]?)P(?:([-+]?[0-9]+)Y)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)W)?(?:([-+]?[0-9]+)D)?/,B=function(e){function t(r,n,i){var o=e.call(this)||this,a=v.safeToInt(r),s=v.safeToInt(n),l=v.safeToInt(i);return 0===a&&0===s&&0===l?(t.ZERO||(o._years=a,o._months=s,o._days=l,t.ZERO=g(o)),t.ZERO||g(o)):(o._years=a,o._months=s,o._days=l,o)}p(t,e),t.ofYears=function(e){return t.create(e,0,0)},t.ofMonths=function(e){return t.create(0,e,0)},t.ofWeeks=function(e){return t.create(0,0,v.safeMultiply(e,7))},t.ofDays=function(e){return t.create(0,0,e)},t.of=function(e,r,n){return t.create(e,r,n)},t.from=function(e){if(e instanceof t)return e;_(e,"amount");for(var r=0,n=0,i=0,o=e.units(),a=0;a<o.length;a++){var l=o[a],c=e.get(l);if(l===O.YEARS)r=v.safeToInt(c);else if(l===O.MONTHS)n=v.safeToInt(c);else if(l===O.DAYS)i=v.safeToInt(c);else throw new s("Unit must be Years, Months or Days, but was "+l)}return t.create(r,n,i)},t.between=function(e,t){return _(e,"startDate"),_(t,"endDate"),E(e,e0,"startDate"),E(t,e0,"endDate"),e.until(t)},t.parse=function(e){_(e,"text");try{return t._parse(e)}catch(t){if(t instanceof u)throw new l("Text cannot be parsed to a Period",e,0,t);throw t}},t._parse=function(e){var r=F.exec(e);if(null!=r){var n="-"===r[1]?-1:1,i=r[2],o=r[3],a=r[4],s=r[5];if(null!=i||null!=o||null!=a||null!=s){var c=t._parseNumber(e,i,n),u=t._parseNumber(e,o,n),d=t._parseNumber(e,a,n),h=t._parseNumber(e,s,n);return h=v.safeAdd(h,v.safeMultiply(d,7)),t.create(c,u,h)}}throw new l("Text cannot be parsed to a Period",e,0)},t._parseNumber=function(e,t,r){if(null==t)return 0;var n=v.parseInt(t);return v.safeMultiply(n,r)},t.create=function(e,r,n){return new t(e,r,n)};var r=t.prototype;return r.units=function(){return[O.YEARS,O.MONTHS,O.DAYS]},r.chronology=function(){return eK.INSTANCE},r.get=function(e){if(e===O.YEARS)return this._years;if(e===O.MONTHS)return this._months;if(e===O.DAYS)return this._days;throw new c("Unsupported unit: "+e)},r.isZero=function(){return this===t.ZERO},r.isNegative=function(){return this._years<0||this._months<0||this._days<0},r.years=function(){return this._years},r.months=function(){return this._months},r.days=function(){return this._days},r.withYears=function(e){return e===this._years?this:t.create(e,this._months,this._days)},r.withMonths=function(e){return e===this._months?this:t.create(this._years,e,this._days)},r.withDays=function(e){return e===this._days?this:t.create(this._years,this._months,e)},r.plus=function(e){var r=t.from(e);return t.create(v.safeAdd(this._years,r._years),v.safeAdd(this._months,r._months),v.safeAdd(this._days,r._days))},r.plusYears=function(e){return 0===e?this:t.create(v.safeToInt(v.safeAdd(this._years,e)),this._months,this._days)},r.plusMonths=function(e){return 0===e?this:t.create(this._years,v.safeToInt(v.safeAdd(this._months,e)),this._days)},r.plusDays=function(e){return 0===e?this:t.create(this._years,this._months,v.safeToInt(v.safeAdd(this._days,e)))},r.minus=function(e){var r=t.from(e);return t.create(v.safeSubtract(this._years,r._years),v.safeSubtract(this._months,r._months),v.safeSubtract(this._days,r._days))},r.minusYears=function(e){return this.plusYears(-1*e)},r.minusMonths=function(e){return this.plusMonths(-1*e)},r.minusDays=function(e){return this.plusDays(-1*e)},r.multipliedBy=function(e){return this===t.ZERO||1===e?this:t.create(v.safeMultiply(this._years,e),v.safeMultiply(this._months,e),v.safeMultiply(this._days,e))},r.negated=function(){return this.multipliedBy(-1)},r.normalized=function(){var e=this.toTotalMonths(),r=v.intDiv(e,12),n=v.intMod(e,12);return r===this._years&&n===this._months?this:t.create(v.safeToInt(r),n,this._days)},r.toTotalMonths=function(){return 12*this._years+this._months},r.addTo=function(e){return _(e,"temporal"),0!==this._years?e=0!==this._months?e.plus(this.toTotalMonths(),O.MONTHS):e.plus(this._years,O.YEARS):0!==this._months&&(e=e.plus(this._months,O.MONTHS)),0!==this._days&&(e=e.plus(this._days,O.DAYS)),e},r.subtractFrom=function(e){return _(e,"temporal"),0!==this._years?e=0!==this._months?e.minus(this.toTotalMonths(),O.MONTHS):e.minus(this._years,O.YEARS):0!==this._months&&(e=e.minus(this._months,O.MONTHS)),0!==this._days&&(e=e.minus(this._days,O.DAYS)),e},r.equals=function(e){return this===e||e instanceof t&&this._years===e._years&&this._months===e._months&&this._days===e._days},r.hashCode=function(){return v.hashCode(this._years,this._months,this._days)},r.toString=function(){if(this===t.ZERO)return"P0D";var e="P";return 0!==this._years&&(e+=this._years+"Y"),0!==this._months&&(e+=this._months+"M"),0!==this._days&&(e+=this._days+"D"),e},r.toJSON=function(){return this.toString()},t}(C),q=function(){function e(e){this._index=e,this._errorIndex=-1}var t=e.prototype;return t.getIndex=function(){return this._index},t.setIndex=function(e){this._index=e},t.getErrorIndex=function(){return this._errorIndex},t.setErrorIndex=function(e){this._errorIndex=e},e}(),H=function(){function e(){this._map={}}var t=e.prototype;return t.putAll=function(e){for(var t in e._map)this._map[t]=e._map[t];return this},t.containsKey=function(e){return this._map.hasOwnProperty(e.name())&&void 0!==this.get(e)},t.get=function(e){return this._map[e.name()]},t.put=function(e,t){return this.set(e,t)},t.set=function(e,t){return this._map[e.name()]=t,this},t.retainAll=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r].name();t[n]=this._map[n]}return this._map=t,this},t.remove=function(e){var t=e.name(),r=this._map[t];return this._map[t]=void 0,r},t.keySet=function(){return this._map},t.clear=function(){this._map={}},e}(),j=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t}(A);j.STRICT=new j("STRICT"),j.SMART=new j("SMART"),j.LENIENT=new j("LENIENT");var Y=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.isSupported=function(e){T("isSupported")},r.minus=function(e,t){return arguments.length<2?this._minusAmount(e):this._minusUnit(e,t)},r._minusAmount=function(e){return _(e,"amount"),E(e,C,"amount"),e.subtractFrom(this)},r._minusUnit=function(e,t){return _(e,"amountToSubtract"),_(t,"unit"),E(t,S,"unit"),this._plusUnit(-e,t)},r.plus=function(e,t){return arguments.length<2?this._plusAmount(e):this._plusUnit(e,t)},r._plusAmount=function(e){return _(e,"amount"),E(e,C,"amount"),e.addTo(this)},r._plusUnit=function(e,t){T("_plusUnit")},r.until=function(e,t){T("until")},r.with=function(e,t){return arguments.length<2?this._withAdjuster(e):this._withField(e,t)},r._withAdjuster=function(e){return _(e,"adjuster"),y("function"==typeof e.adjustInto,"adjuster must be a TemporalAdjuster",d),e.adjustInto(this)},r._withField=function(e,t){T("_withField")},t}(D);"undefined"!=typeof Symbol&&Symbol.toPrimitive&&(Y.prototype[Symbol.toPrimitive]=function(e){if("number"!==e)return this.toString();throw TypeError("A conversion from Temporal to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var $=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.isSupported=function(e){return e instanceof P||e instanceof O?e.isDateBased():null!=e&&e.isSupportedBy(this)},r.query=function(t){return t===k.chronology()?this.chronology():t===k.precision()?O.DAYS:t===k.localDate()?e0.ofEpochDay(this.toEpochDay()):t===k.localTime()||t===k.zone()||t===k.zoneId()||t===k.offset()?null:e.prototype.query.call(this,t)},r.adjustInto=function(e){return e.with(P.EPOCH_DAY,this.toEpochDay())},r.format=function(e){return _(e,"formatter"),E(e,eq,"formatter"),e.format(this)},t}(Y),V=function(){function e(){}return e.startsWith=function(e,t){return 0===e.indexOf(t)},e.hashCode=function(e){var t=e.length;if(0===t)return 0;for(var r=0,n=0;n<t;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return v.smi(r)},e}(),z=function(){function e(){}e.systemDefault=function(){throw new s("not supported operation")},e.getAvailableZoneIds=function(){throw new s("not supported operation")},e.of=function(e){throw new s("not supported operation"+e)},e.ofOffset=function(e,t){throw new s("not supported operation"+e+t)},e.from=function(e){throw new s("not supported operation"+e)};var t=e.prototype;return t.id=function(){T("ZoneId.id")},t.rules=function(){T("ZoneId.rules")},t.normalized=function(){var e=this.rules();return e.isFixedOffset()?e.offset(e8.EPOCH):this},t.equals=function(t){return this===t||t instanceof e&&this.id()===t.id()},t.hashCode=function(){return V.hashCode(this.id())},t.toString=function(){return this.id()},t.toJSON=function(){return this.toString()},e}(),G=function(){function e(){}e.of=function(e){return _(e,"offset"),new W(e)};var t=e.prototype;return t.isFixedOffset=function(){T("ZoneRules.isFixedOffset")},t.offset=function(e){return e instanceof e8?this.offsetOfInstant(e):this.offsetOfLocalDateTime(e)},t.offsetOfInstant=function(e){T("ZoneRules.offsetInstant")},t.offsetOfEpochMilli=function(e){T("ZoneRules.offsetOfEpochMilli")},t.offsetOfLocalDateTime=function(e){T("ZoneRules.offsetLocalDateTime")},t.validOffsets=function(e){T("ZoneRules.validOffsets")},t.transition=function(e){T("ZoneRules.transition")},t.standardOffset=function(e){T("ZoneRules.standardOffset")},t.daylightSavings=function(e){T("ZoneRules.daylightSavings")},t.isDaylightSavings=function(e){T("ZoneRules.isDaylightSavings")},t.isValidOffset=function(e,t){T("ZoneRules.isValidOffset")},t.nextTransition=function(e){T("ZoneRules.nextTransition")},t.previousTransition=function(e){T("ZoneRules.previousTransition")},t.transitions=function(){T("ZoneRules.transitions")},t.transitionRules=function(){T("ZoneRules.transitionRules")},t.toString=function(){T("ZoneRules.toString")},t.toJSON=function(){return this.toString()},e}(),W=function(e){function t(t){var r;return(r=e.call(this)||this)._offset=t,r}p(t,e);var r=t.prototype;return r.isFixedOffset=function(){return!0},r.offsetOfInstant=function(){return this._offset},r.offsetOfEpochMilli=function(){return this._offset},r.offsetOfLocalDateTime=function(){return this._offset},r.validOffsets=function(){return[this._offset]},r.transition=function(){return null},r.standardOffset=function(){return this._offset},r.daylightSavings=function(){return w.ZERO},r.isDaylightSavings=function(){return!1},r.isValidOffset=function(e,t){return this._offset.equals(t)},r.nextTransition=function(){return null},r.previousTransition=function(){return null},r.transitions=function(){return[]},r.transitionRules=function(){return[]},r.equals=function(e){return this===e||e instanceof t&&this._offset.equals(e._offset)},r.toString=function(){return"FixedRules:"+this._offset.toString()},t}(G),K={},Q={},X=function(e){function t(r){var n;return n=e.call(this)||this,t._validateTotalSeconds(r),n._totalSeconds=v.safeToInt(r),n._rules=G.of(g(n)),n._id=t._buildId(r),n}p(t,e);var r=t.prototype;return r.totalSeconds=function(){return this._totalSeconds},r.id=function(){return this._id},t._buildId=function(e){if(0===e)return"Z";var t=Math.abs(e),r=v.intDiv(t,e5.SECONDS_PER_HOUR),n=v.intMod(v.intDiv(t,e5.SECONDS_PER_MINUTE),e5.MINUTES_PER_HOUR),i=(e<0?"-":"+")+(r<10?"0":"")+r+(n<10?":0":":")+n,o=v.intMod(t,e5.SECONDS_PER_MINUTE);return 0!==o&&(i+=(o<10?":0":":")+o),i},t._validateTotalSeconds=function(e){if(Math.abs(e)>t.MAX_SECONDS)throw new s("Zone offset not in valid range: -18:00 to +18:00")},t._validate=function(e,t,r){if(e<-18||e>18)throw new s("Zone offset hours not in valid range: value "+e+" is not in the range -18 to 18");if(e>0){if(t<0||r<0)throw new s("Zone offset minutes and seconds must be positive because hours is positive")}else if(e<0){if(t>0||r>0)throw new s("Zone offset minutes and seconds must be negative because hours is negative")}else if(t>0&&r<0||t<0&&r>0)throw new s("Zone offset minutes and seconds must have the same sign");if(Math.abs(t)>59)throw new s("Zone offset minutes not in valid range: abs(value) "+Math.abs(t)+" is not in the range 0 to 59");if(Math.abs(r)>59)throw new s("Zone offset seconds not in valid range: abs(value) "+Math.abs(r)+" is not in the range 0 to 59");if(18===Math.abs(e)&&(Math.abs(t)>0||Math.abs(r)>0))throw new s("Zone offset not in valid range: -18:00 to +18:00")},t.of=function(e){_(e,"offsetId");var r,n,i,o=Q[e];if(null!=o)return o;switch(e.length){case 2:e=e[0]+"0"+e[1];case 3:r=t._parseNumber(e,1,!1),n=0,i=0;break;case 5:r=t._parseNumber(e,1,!1),n=t._parseNumber(e,3,!1),i=0;break;case 6:r=t._parseNumber(e,1,!1),n=t._parseNumber(e,4,!0),i=0;break;case 7:r=t._parseNumber(e,1,!1),n=t._parseNumber(e,3,!1),i=t._parseNumber(e,5,!1);break;case 9:r=t._parseNumber(e,1,!1),n=t._parseNumber(e,4,!0),i=t._parseNumber(e,7,!0);break;default:throw new s("Invalid ID for ZoneOffset, invalid format: "+e)}var a=e[0];if("+"!==a&&"-"!==a)throw new s("Invalid ID for ZoneOffset, plus/minus not found when expected: "+e);return"-"===a?t.ofHoursMinutesSeconds(-r,-n,-i):t.ofHoursMinutesSeconds(r,n,i)},t._parseNumber=function(e,t,r){if(r&&":"!==e[t-1])throw new s("Invalid ID for ZoneOffset, colon not found when expected: "+e);var n=e[t],i=e[t+1];if(n<"0"||n>"9"||i<"0"||i>"9")throw new s("Invalid ID for ZoneOffset, non numeric characters found: "+e);return(n.charCodeAt(0)-48)*10+(i.charCodeAt(0)-48)},t.ofHours=function(e){return t.ofHoursMinutesSeconds(e,0,0)},t.ofHoursMinutes=function(e,r){return t.ofHoursMinutesSeconds(e,r,0)},t.ofHoursMinutesSeconds=function(e,r,n){t._validate(e,r,n);var i=e*e5.SECONDS_PER_HOUR+r*e5.SECONDS_PER_MINUTE+n;return t.ofTotalSeconds(i)},t.ofTotalMinutes=function(e){var r=e*e5.SECONDS_PER_MINUTE;return t.ofTotalSeconds(r)},t.ofTotalSeconds=function(e){if(e%(15*e5.SECONDS_PER_MINUTE)!=0)return new t(e);var r=K[e];return null==r&&(r=new t(e),K[e]=r,Q[r.id()]=r),r},r.rules=function(){return this._rules},r.get=function(e){return this.getLong(e)},r.getLong=function(e){if(e===P.OFFSET_SECONDS)return this._totalSeconds;if(e instanceof P)throw new s("Unsupported field: "+e);return e.getFrom(this)},r.query=function(e){return(_(e,"query"),e===k.offset()||e===k.zone())?this:e===k.localDate()||e===k.localTime()||e===k.precision()||e===k.chronology()||e===k.zoneId()?null:e.queryFrom(this)},r.adjustInto=function(e){return e.with(P.OFFSET_SECONDS,this._totalSeconds)},r.compareTo=function(e){return _(e,"other"),e._totalSeconds-this._totalSeconds},r.equals=function(e){return this===e||e instanceof t&&this._totalSeconds===e._totalSeconds},r.hashCode=function(){return this._totalSeconds},r.toString=function(){return this._id},t}(z),Z=function(e){function t(){var t;return(t=e.call(this)||this).fieldValues=new H,t.chrono=null,t.zone=null,t.date=null,t.time=null,t.leapSecond=!1,t.excessDays=null,t}p(t,e),t.create=function(e,r){var n=new t;return n._addFieldValue(e,r),n};var r=t.prototype;return r.getFieldValue0=function(e){return this.fieldValues.get(e)},r._addFieldValue=function(e,t){_(e,"field");var r=this.getFieldValue0(e);if(null!=r&&r!==t)throw new s("Conflict found: "+e+" "+r+" differs from "+e+" "+t+": "+this);return this._putFieldValue0(e,t)},r._putFieldValue0=function(e,t){return this.fieldValues.put(e,t),this},r.resolve=function(e,t){return null!=t&&this.fieldValues.retainAll(t),this._mergeDate(e),this._mergeTime(e),this._resolveTimeInferZeroes(e),null!=this.excessDays&&!1===this.excessDays.isZero()&&null!=this.date&&null!=this.time&&(this.date=this.date.plus(this.excessDays),this.excessDays=B.ZERO),this._resolveInstant(),this},r._mergeDate=function(e){this._checkDate(eK.INSTANCE.resolveDate(this.fieldValues,e))},r._checkDate=function(e){if(null!=e)for(var t in this._addObject(e),this.fieldValues.keySet()){var r=P.byName(t);if(r&&void 0!==this.fieldValues.get(r)&&r.isDateBased()){var n=void 0;try{n=e.getLong(r)}catch(e){if(e instanceof s)continue;throw e}var i=this.fieldValues.get(r);if(n!==i)throw new s("Conflict found: Field "+r+" "+n+" differs from "+r+" "+i+" derived from "+e)}}},r._mergeTime=function(e){if(this.fieldValues.containsKey(P.CLOCK_HOUR_OF_DAY)){var t=this.fieldValues.remove(P.CLOCK_HOUR_OF_DAY);e!==j.LENIENT&&(e===j.SMART&&0===t||P.CLOCK_HOUR_OF_DAY.checkValidValue(t)),this._addFieldValue(P.HOUR_OF_DAY,24===t?0:t)}if(this.fieldValues.containsKey(P.CLOCK_HOUR_OF_AMPM)){var r=this.fieldValues.remove(P.CLOCK_HOUR_OF_AMPM);e!==j.LENIENT&&(e===j.SMART&&0===r||P.CLOCK_HOUR_OF_AMPM.checkValidValue(r)),this._addFieldValue(P.HOUR_OF_AMPM,12===r?0:r)}if(e!==j.LENIENT&&(this.fieldValues.containsKey(P.AMPM_OF_DAY)&&P.AMPM_OF_DAY.checkValidValue(this.fieldValues.get(P.AMPM_OF_DAY)),this.fieldValues.containsKey(P.HOUR_OF_AMPM)&&P.HOUR_OF_AMPM.checkValidValue(this.fieldValues.get(P.HOUR_OF_AMPM))),this.fieldValues.containsKey(P.AMPM_OF_DAY)&&this.fieldValues.containsKey(P.HOUR_OF_AMPM)){var n=this.fieldValues.remove(P.AMPM_OF_DAY),i=this.fieldValues.remove(P.HOUR_OF_AMPM);this._addFieldValue(P.HOUR_OF_DAY,12*n+i)}if(this.fieldValues.containsKey(P.NANO_OF_DAY)){var o=this.fieldValues.remove(P.NANO_OF_DAY);e!==j.LENIENT&&P.NANO_OF_DAY.checkValidValue(o),this._addFieldValue(P.SECOND_OF_DAY,v.intDiv(o,1e9)),this._addFieldValue(P.NANO_OF_SECOND,v.intMod(o,1e9))}if(this.fieldValues.containsKey(P.MICRO_OF_DAY)){var a=this.fieldValues.remove(P.MICRO_OF_DAY);e!==j.LENIENT&&P.MICRO_OF_DAY.checkValidValue(a),this._addFieldValue(P.SECOND_OF_DAY,v.intDiv(a,1e6)),this._addFieldValue(P.MICRO_OF_SECOND,v.intMod(a,1e6))}if(this.fieldValues.containsKey(P.MILLI_OF_DAY)){var s=this.fieldValues.remove(P.MILLI_OF_DAY);e!==j.LENIENT&&P.MILLI_OF_DAY.checkValidValue(s),this._addFieldValue(P.SECOND_OF_DAY,v.intDiv(s,1e3)),this._addFieldValue(P.MILLI_OF_SECOND,v.intMod(s,1e3))}if(this.fieldValues.containsKey(P.SECOND_OF_DAY)){var l=this.fieldValues.remove(P.SECOND_OF_DAY);e!==j.LENIENT&&P.SECOND_OF_DAY.checkValidValue(l),this._addFieldValue(P.HOUR_OF_DAY,v.intDiv(l,3600)),this._addFieldValue(P.MINUTE_OF_HOUR,v.intMod(v.intDiv(l,60),60)),this._addFieldValue(P.SECOND_OF_MINUTE,v.intMod(l,60))}if(this.fieldValues.containsKey(P.MINUTE_OF_DAY)){var c=this.fieldValues.remove(P.MINUTE_OF_DAY);e!==j.LENIENT&&P.MINUTE_OF_DAY.checkValidValue(c),this._addFieldValue(P.HOUR_OF_DAY,v.intDiv(c,60)),this._addFieldValue(P.MINUTE_OF_HOUR,v.intMod(c,60))}if(e!==j.LENIENT&&(this.fieldValues.containsKey(P.MILLI_OF_SECOND)&&P.MILLI_OF_SECOND.checkValidValue(this.fieldValues.get(P.MILLI_OF_SECOND)),this.fieldValues.containsKey(P.MICRO_OF_SECOND)&&P.MICRO_OF_SECOND.checkValidValue(this.fieldValues.get(P.MICRO_OF_SECOND))),this.fieldValues.containsKey(P.MILLI_OF_SECOND)&&this.fieldValues.containsKey(P.MICRO_OF_SECOND)){var u=this.fieldValues.remove(P.MILLI_OF_SECOND),d=this.fieldValues.get(P.MICRO_OF_SECOND);this._putFieldValue0(P.MICRO_OF_SECOND,1e3*u+v.intMod(d,1e3))}if(this.fieldValues.containsKey(P.MICRO_OF_SECOND)&&this.fieldValues.containsKey(P.NANO_OF_SECOND)){var h=this.fieldValues.get(P.NANO_OF_SECOND);this._putFieldValue0(P.MICRO_OF_SECOND,v.intDiv(h,1e3)),this.fieldValues.remove(P.MICRO_OF_SECOND)}if(this.fieldValues.containsKey(P.MILLI_OF_SECOND)&&this.fieldValues.containsKey(P.NANO_OF_SECOND)){var f=this.fieldValues.get(P.NANO_OF_SECOND);this._putFieldValue0(P.MILLI_OF_SECOND,v.intDiv(f,1e6)),this.fieldValues.remove(P.MILLI_OF_SECOND)}if(this.fieldValues.containsKey(P.MICRO_OF_SECOND)){var p=this.fieldValues.remove(P.MICRO_OF_SECOND);this._putFieldValue0(P.NANO_OF_SECOND,1e3*p)}else if(this.fieldValues.containsKey(P.MILLI_OF_SECOND)){var m=this.fieldValues.remove(P.MILLI_OF_SECOND);this._putFieldValue0(P.NANO_OF_SECOND,1e6*m)}},r._resolveTimeInferZeroes=function(e){var t=this.fieldValues.get(P.HOUR_OF_DAY),r=this.fieldValues.get(P.MINUTE_OF_HOUR),n=this.fieldValues.get(P.SECOND_OF_MINUTE),i=this.fieldValues.get(P.NANO_OF_SECOND);if(null!=t&&(null!=r||null==n&&null==i)&&(null==r||null!=n||null==i)){if(e!==j.LENIENT){if(null!=t){e===j.SMART&&24===t&&(null==r||0===r)&&(null==n||0===n)&&(null==i||0===i)&&(t=0,this.excessDays=B.ofDays(1));var o=P.HOUR_OF_DAY.checkValidIntValue(t);if(null!=r){var a=P.MINUTE_OF_HOUR.checkValidIntValue(r);if(null!=n){var s=P.SECOND_OF_MINUTE.checkValidIntValue(n);if(null!=i){var l=P.NANO_OF_SECOND.checkValidIntValue(i);this._addObject(e5.of(o,a,s,l))}else this._addObject(e5.of(o,a,s))}else null==i&&this._addObject(e5.of(o,a))}else null==n&&null==i&&this._addObject(e5.of(o,0))}}else if(null!=t){var c=t;if(null!=r)if(null!=n){null==i&&(i=0);var u=v.safeMultiply(c,36e11);u=v.safeAdd(u,v.safeMultiply(r,6e10)),u=v.safeAdd(u,v.safeMultiply(n,1e9)),u=v.safeAdd(u,i);var d=v.floorDiv(u,864e11),h=v.floorMod(u,864e11);this._addObject(e5.ofNanoOfDay(h)),this.excessDays=B.ofDays(d)}else{var f=v.safeMultiply(c,3600);f=v.safeAdd(f,v.safeMultiply(r,60));var p=v.floorDiv(f,86400),m=v.floorMod(f,86400);this._addObject(e5.ofSecondOfDay(m)),this.excessDays=B.ofDays(p)}else{var g=v.safeToInt(v.floorDiv(c,24));c=v.floorMod(c,24),this._addObject(e5.of(c,0)),this.excessDays=B.ofDays(g)}}this.fieldValues.remove(P.HOUR_OF_DAY),this.fieldValues.remove(P.MINUTE_OF_HOUR),this.fieldValues.remove(P.SECOND_OF_MINUTE),this.fieldValues.remove(P.NANO_OF_SECOND)}},r._addObject=function(e){e instanceof $?this.date=e:e instanceof e5&&(this.time=e)},r._resolveInstant=function(){if(null!=this.date&&null!=this.time){var e=this.fieldValues.get(P.OFFSET_SECONDS);if(null!=e){var t=X.ofTotalSeconds(e),r=this.date.atTime(this.time).atZone(t).getLong(P.INSTANT_SECONDS);this.fieldValues.put(P.INSTANT_SECONDS,r)}else if(null!=this.zone){var n=this.date.atTime(this.time).atZone(this.zone).getLong(P.INSTANT_SECONDS);this.fieldValues.put(P.INSTANT_SECONDS,n)}}},r.build=function(e){return e.queryFrom(this)},r.isSupported=function(e){return null!=e&&(this.fieldValues.containsKey(e)&&void 0!==this.fieldValues.get(e)||null!=this.date&&this.date.isSupported(e)||null!=this.time&&this.time.isSupported(e))},r.getLong=function(e){_(e,"field");var t=this.getFieldValue0(e);if(null==t){if(null!=this.date&&this.date.isSupported(e))return this.date.getLong(e);if(null!=this.time&&this.time.isSupported(e))return this.time.getLong(e);throw new s("Field not found: "+e)}return t},r.query=function(e){if(e===k.zoneId())return this.zone;if(e===k.chronology())return this.chrono;if(e===k.localDate())return null!=this.date?e0.from(this.date):null;if(e===k.localTime())return this.time;if(e===k.zone()||e===k.offset());else if(e===k.precision())return null;return e.queryFrom(this)},t}(D),J=function(){function e(){if(1==arguments.length)if(arguments[0]instanceof e)return void this._constructorSelf.apply(this,arguments);else this._constructorFormatter.apply(this,arguments);else this._constructorParam.apply(this,arguments);this._caseSensitive=!0,this._strict=!0,this._parsed=[new ee(this)]}var t=e.prototype;return t._constructorParam=function(e,t,r){this._locale=e,this._symbols=t,this._overrideChronology=r},t._constructorFormatter=function(e){this._locale=e.locale(),this._symbols=e.decimalStyle(),this._overrideChronology=e.chronology()},t._constructorSelf=function(e){this._locale=e._locale,this._symbols=e._symbols,this._overrideChronology=e._overrideChronology,this._overrideZone=e._overrideZone,this._caseSensitive=e._caseSensitive,this._strict=e._strict,this._parsed=[new ee(this)]},t.copy=function(){return new e(this)},t.symbols=function(){return this._symbols},t.isStrict=function(){return this._strict},t.setStrict=function(e){this._strict=e},t.locale=function(){return this._locale},t.setLocale=function(e){this._locale=e},t.startOptional=function(){this._parsed.push(this.currentParsed().copy())},t.endOptional=function(e){e?this._parsed.splice(this._parsed.length-2,1):this._parsed.splice(this._parsed.length-1,1)},t.isCaseSensitive=function(){return this._caseSensitive},t.setCaseSensitive=function(e){this._caseSensitive=e},t.subSequenceEquals=function(e,t,r,n,i){if(t+i>e.length||n+i>r.length)return!1;this.isCaseSensitive()||(e=e.toLowerCase(),r=r.toLowerCase());for(var o=0;o<i;o++)if(e[t+o]!==r[n+o])return!1;return!0},t.charEquals=function(e,t){return this.isCaseSensitive()?e===t:this.charEqualsIgnoreCase(e,t)},t.charEqualsIgnoreCase=function(e,t){return e===t||e.toLowerCase()===t.toLowerCase()},t.setParsedField=function(e,t,r,n){var i=this.currentParsed().fieldValues,o=i.get(e);return i.set(e,t),null!=o&&o!==t?~r:n},t.setParsedZone=function(e){_(e,"zone"),this.currentParsed().zone=e},t.getParsed=function(e){return this.currentParsed().fieldValues.get(e)},t.toParsed=function(){return this.currentParsed()},t.currentParsed=function(){return this._parsed[this._parsed.length-1]},t.setParsedLeapSecond=function(){this.currentParsed().leapSecond=!0},t.getEffectiveChronology=function(){var e=this.currentParsed().chrono;return null==e&&null==(e=this._overrideChronology)&&(e=eK.INSTANCE),e},e}(),ee=function(e){function t(t){var r;return(r=e.call(this)||this).chrono=null,r.zone=null,r.fieldValues=new H,r.leapSecond=!1,r.dateTimeParseContext=t,r}p(t,e);var r=t.prototype;return r.copy=function(){var e=new t;return e.chrono=this.chrono,e.zone=this.zone,e.fieldValues.putAll(this.fieldValues),e.leapSecond=this.leapSecond,e.dateTimeParseContext=this.dateTimeParseContext,e},r.toString=function(){return this.fieldValues+", "+this.chrono+", "+this.zone},r.isSupported=function(e){return this.fieldValues.containsKey(e)},r.get=function(e){var t=this.fieldValues.get(e);return y(null!=t),t},r.query=function(t){return t===k.chronology()?this.chrono:t===k.zoneId()||t===k.zone()?this.zone:e.prototype.query.call(this,t)},r.toBuilder=function(){var e=new Z;return e.fieldValues.putAll(this.fieldValues),e.chrono=this.dateTimeParseContext.getEffectiveChronology(),null!=this.zone?e.zone=this.zone:e.zone=this.overrideZone,e.leapSecond=this.leapSecond,e.excessDays=this.excessDays,e},t}(Y),et=function(){function e(t,r,n){2==arguments.length&&arguments[1]instanceof eq?(this._temporal=e.adjust(t,r),this._locale=r.locale(),this._symbols=r.decimalStyle()):(this._temporal=t,this._locale=r,this._symbols=n),this._optional=0}e.adjust=function(e,t){return e};var t=e.prototype;return t.symbols=function(){return this._symbols},t.startOptional=function(){this._optional++},t.endOptional=function(){this._optional--},t.getValueQuery=function(e){var t=this._temporal.query(e);if(null==t&&0===this._optional)throw new s("Unable to extract value: "+this._temporal);return t},t.getValue=function(e){try{return this._temporal.getLong(e)}catch(e){if(e instanceof s&&this._optional>0)return null;throw e}},t.temporal=function(){return this._temporal},t.locale=function(){return this._locale},t.setDateTime=function(e){this._temporal=e},t.setLocale=function(e){this._locale=e},e}(),er={},en=[0,90,181,273,0,91,182,274],ei=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.isDateBased=function(){return!0},r.isTimeBased=function(){return!1},r._isIso=function(){return!0},t._getWeekRangeByLocalDate=function(e){var r=t._getWeekBasedYear(e);return N.of(1,t._getWeekRangeByYear(r))},t._getWeekRangeByYear=function(e){var t=e0.of(e,1,1);return t.dayOfWeek()===U.THURSDAY||t.dayOfWeek()===U.WEDNESDAY&&t.isLeapYear()?53:52},t._getWeek=function(e){var r=e.dayOfWeek().ordinal(),n=e.dayOfYear()-1,i=n+(3-r),o=v.intDiv(i,7),a=i-7*o-3;if(a<-3&&(a+=7),n<a)return t._getWeekRangeByLocalDate(e.withDayOfYear(180).minusYears(1)).maximum();var s=v.intDiv(n-a,7)+1;return 53===s&&!1===(-3===a||-2===a&&e.isLeapYear())&&(s=1),s},t._getWeekBasedYear=function(e){var t=e.year(),r=e.dayOfYear();if(r<=3)r-e.dayOfWeek().ordinal()<-2&&t--;else if(r>=363){var n=e.dayOfWeek().ordinal();(r=r-363-!!e.isLeapYear())-n>=0&&t++}return t},r.displayName=function(){return this.toString()},r.resolve=function(){return null},r.name=function(){return this.toString()},t}(R),eo=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.toString=function(){return"DayOfQuarter"},r.baseUnit=function(){return O.DAYS},r.rangeUnit=function(){return em},r.range=function(){return N.of(1,90,92)},r.isSupportedBy=function(e){return e.isSupported(P.DAY_OF_YEAR)&&e.isSupported(P.MONTH_OF_YEAR)&&e.isSupported(P.YEAR)&&this._isIso(e)},r.rangeRefinedBy=function(e){if(!1===e.isSupported(this))throw new c("Unsupported field: DayOfQuarter");var t=e.getLong(ed);if(1===t){var r=e.getLong(P.YEAR);return eK.isLeapYear(r)?N.of(1,91):N.of(1,90)}return 2===t?N.of(1,91):3===t||4===t?N.of(1,92):this.range()},r.getFrom=function(e){if(!1===e.isSupported(this))throw new c("Unsupported field: DayOfQuarter");var t=e.get(P.DAY_OF_YEAR),r=e.get(P.MONTH_OF_YEAR),n=e.getLong(P.YEAR);return t-en[v.intDiv(r-1,3)+4*!!eK.isLeapYear(n)]},r.adjustInto=function(e,t){var r=this.getFrom(e);return this.range().checkValidValue(t,this),e.with(P.DAY_OF_YEAR,e.getLong(P.DAY_OF_YEAR)+(t-r))},r.resolve=function(e,t,r){var n,i=e.get(P.YEAR),o=e.get(ed);if(null==i||null==o)return null;var a=P.YEAR.checkValidIntValue(i),s=e.get(eu);if(r===j.LENIENT)n=(n=(n=e0.of(a,1,1)).plusMonths(v.safeMultiply(v.safeSubtract(o,1),3))).plusDays(v.safeSubtract(s,1));else{var l=ed.range().checkValidIntValue(o,ed);if(r===j.STRICT){var c=92;1===l?c=eK.isLeapYear(a)?91:90:2===l&&(c=91),N.of(1,c).checkValidValue(s,this)}else this.range().checkValidValue(s,this);n=e0.of(a,(l-1)*3+1,1).plusDays(s-1)}return e.remove(this),e.remove(P.YEAR),e.remove(ed),n},t}(ei),ea=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.toString=function(){return"QuarterOfYear"},r.baseUnit=function(){return em},r.rangeUnit=function(){return O.YEARS},r.range=function(){return N.of(1,4)},r.isSupportedBy=function(e){return e.isSupported(P.MONTH_OF_YEAR)&&this._isIso(e)},r.rangeRefinedBy=function(e){return this.range()},r.getFrom=function(e){if(!1===e.isSupported(this))throw new c("Unsupported field: QuarterOfYear");var t=e.getLong(P.MONTH_OF_YEAR);return v.intDiv(t+2,3)},r.adjustInto=function(e,t){var r=this.getFrom(e);return this.range().checkValidValue(t,this),e.with(P.MONTH_OF_YEAR,e.getLong(P.MONTH_OF_YEAR)+(t-r)*3)},t}(ei),es=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.toString=function(){return"WeekOfWeekBasedYear"},r.baseUnit=function(){return O.WEEKS},r.rangeUnit=function(){return ep},r.range=function(){return N.of(1,52,53)},r.isSupportedBy=function(e){return e.isSupported(P.EPOCH_DAY)&&this._isIso(e)},r.rangeRefinedBy=function(e){if(!1===e.isSupported(this))throw new c("Unsupported field: WeekOfWeekBasedYear");return ei._getWeekRangeByLocalDate(e0.from(e))},r.getFrom=function(e){if(!1===e.isSupported(this))throw new c("Unsupported field: WeekOfWeekBasedYear");return ei._getWeek(e0.from(e))},r.adjustInto=function(e,t){return this.range().checkValidValue(t,this),e.plus(v.safeSubtract(t,this.getFrom(e)),O.WEEKS)},r.resolve=function(e,t,r){var n,i=e.get(ef),o=e.get(P.DAY_OF_WEEK);if(null==i||null==o)return null;var a=ef.range().checkValidIntValue(i,ef),s=e.get(eh);if(r===j.LENIENT){var l=o,c=0;l>7?(c=v.intDiv(l-1,7),l=v.intMod(l-1,7)+1):l<1&&(c=v.intDiv(l,7)-1,l=v.intMod(l,7)+7),n=e0.of(a,1,4).plusWeeks(s-1).plusWeeks(c).with(P.DAY_OF_WEEK,l)}else{var u=P.DAY_OF_WEEK.checkValidIntValue(o);if(r===j.STRICT){var d=e0.of(a,1,4);ei._getWeekRangeByLocalDate(d).checkValidValue(s,this)}else this.range().checkValidValue(s,this);n=e0.of(a,1,4).plusWeeks(s-1).with(P.DAY_OF_WEEK,u)}return e.remove(this),e.remove(ef),e.remove(P.DAY_OF_WEEK),n},r.displayName=function(){return"Week"},t}(ei),el=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.toString=function(){return"WeekBasedYear"},r.baseUnit=function(){return ep},r.rangeUnit=function(){return O.FOREVER},r.range=function(){return P.YEAR.range()},r.isSupportedBy=function(e){return e.isSupported(P.EPOCH_DAY)&&this._isIso(e)},r.rangeRefinedBy=function(e){return P.YEAR.range()},r.getFrom=function(e){if(!1===e.isSupported(this))throw new c("Unsupported field: WeekBasedYear");return ei._getWeekBasedYear(e0.from(e))},r.adjustInto=function(e,t){if(!1===this.isSupportedBy(e))throw new c("Unsupported field: WeekBasedYear");var r=this.range().checkValidIntValue(t,ef),n=e0.from(e),i=n.get(P.DAY_OF_WEEK),o=ei._getWeek(n);53===o&&52===ei._getWeekRangeByYear(r)&&(o=52);var a=e0.of(r,1,4),s=i-a.get(P.DAY_OF_WEEK)+(o-1)*7;return a=a.plusDays(s),e.with(a)},t}(ei),ec=function(e){function t(t,r){var n;return(n=e.call(this)||this)._name=t,n._duration=r,n}p(t,e);var r=t.prototype;return r.duration=function(){return this._duration},r.isDurationEstimated=function(){return!0},r.isDateBased=function(){return!0},r.isTimeBased=function(){return!1},r.isSupportedBy=function(e){return e.isSupported(P.EPOCH_DAY)},r.addTo=function(e,t){switch(this){case ep:var r=v.safeAdd(e.get(ef),t);return e.with(ef,r);case em:return e.plus(v.intDiv(t,256),O.YEARS).plus(3*v.intMod(t,256),O.MONTHS);default:throw new h("Unreachable")}},r.between=function(e,t){switch(this){case ep:return v.safeSubtract(t.getLong(ef),e.getLong(ef));case em:return v.intDiv(e.until(t,O.MONTHS),3);default:throw new h("Unreachable")}},r.toString=function(){return this._name},t}(S),eu=null,ed=null,eh=null,ef=null,ep=null,em=null,eg=function(){function e(e,t,r,n){this._zeroDigit=e,this._zeroDigitCharCode=e.charCodeAt(0),this._positiveSign=t,this._negativeSign=r,this._decimalSeparator=n}var t=e.prototype;return t.positiveSign=function(){return this._positiveSign},t.withPositiveSign=function(t){return t===this._positiveSign?this:new e(this._zeroDigit,t,this._negativeSign,this._decimalSeparator)},t.negativeSign=function(){return this._negativeSign},t.withNegativeSign=function(t){return t===this._negativeSign?this:new e(this._zeroDigit,this._positiveSign,t,this._decimalSeparator)},t.zeroDigit=function(){return this._zeroDigit},t.withZeroDigit=function(t){return t===this._zeroDigit?this:new e(t,this._positiveSign,this._negativeSign,this._decimalSeparator)},t.decimalSeparator=function(){return this._decimalSeparator},t.withDecimalSeparator=function(t){return t===this._decimalSeparator?this:new e(this._zeroDigit,this._positiveSign,this._negativeSign,t)},t.convertToDigit=function(e){var t=e.charCodeAt(0)-this._zeroDigitCharCode;return t>=0&&t<=9?t:-1},t.convertNumberToI18N=function(e){if("0"===this._zeroDigit)return e;for(var t=this._zeroDigitCharCode-48,r="",n=0;n<e.length;n++)r+=String.fromCharCode(e.charCodeAt(n)+t);return r},t.equals=function(t){return this===t||t instanceof e&&this._zeroDigit===t._zeroDigit&&this._positiveSign===t._positiveSign&&this._negativeSign===t._negativeSign&&this._decimalSeparator===t._decimalSeparator},t.hashCode=function(){return this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator},t.toString=function(){return"DecimalStyle["+this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator+"]"},e.of=function(){throw Error("not yet supported")},e.availableLocales=function(){throw Error("not yet supported")},e}();eg.STANDARD=new eg("0","+","-",".");var ey=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.parse=function(e,r,n){switch(this){case t.NORMAL:return!e||!r;case t.ALWAYS:case t.EXCEEDS_PAD:return!0;default:return!r&&!n}},t}(A);ey.NORMAL=new ey("NORMAL"),ey.NEVER=new ey("NEVER"),ey.ALWAYS=new ey("ALWAYS"),ey.EXCEEDS_PAD=new ey("EXCEEDS_PAD"),ey.NOT_NEGATIVE=new ey("NOT_NEGATIVE");var e_=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.isStandalone=function(){switch(this){case t.FULL_STANDALONE:case t.SHORT_STANDALONE:case t.NARROW_STANDALONE:return!0;default:return!1}},r.asStandalone=function(){switch(this){case t.FULL:return t.FULL_STANDALONE;case t.SHORT:return t.SHORT_STANDALONE;case t.NARROW:return t.NARROW_STANDALONE;default:return this}},r.asNormal=function(){switch(this){case t.FULL_STANDALONE:return t.FULL;case t.SHORT_STANDALONE:return t.SHORT;case t.NARROW_STANDALONE:return t.NARROW;default:return this}},t}(A);e_.FULL=new e_("FULL"),e_.FULL_STANDALONE=new e_("FULL_STANDALONE"),e_.SHORT=new e_("SHORT"),e_.SHORT_STANDALONE=new e_("SHORT_STANDALONE"),e_.NARROW=new e_("NARROW"),e_.NARROW_STANDALONE=new e_("NARROW_STANDALONE");var eE=function(){function e(e){if(e.length>1)throw new d('invalid literal, too long: "'+e+'"');this._literal=e}var t=e.prototype;return t.print=function(e,t){return t.append(this._literal),!0},t.parse=function(e,t,r){if(r===t.length)return~r;var n=t.charAt(r);return!1===e.charEquals(this._literal,n)?~r:r+this._literal.length},t.toString=function(){return"'"===this._literal?"''":"'"+this._literal+"'"},e}(),eT=function(){function e(e,t){this._printerParsers=e,this._optional=t}var t=e.prototype;return t.withOptional=function(t){return t===this._optional?this:new e(this._printerParsers,t)},t.print=function(e,t){var r=t.length();this._optional&&e.startOptional();try{for(var n=0;n<this._printerParsers.length;n++){var i=this._printerParsers[n];if(!1===i.print(e,t))return t.setLength(r),!0}}finally{this._optional&&e.endOptional()}return!0},t.parse=function(e,t,r){if(this._optional){e.startOptional();for(var n=r,i=0;i<this._printerParsers.length;i++)if((n=this._printerParsers[i].parse(e,t,n))<0)return e.endOptional(!1),r;return e.endOptional(!0),n}for(var o=0;o<this._printerParsers.length&&!((r=this._printerParsers[o].parse(e,t,r))<0);o++);return r},t.toString=function(){var e="";if(null!=this._printerParsers){e+=this._optional?"[":"(";for(var t=0;t<this._printerParsers.length;t++)e+=this._printerParsers[t].toString();e+=this._optional?"]":")"}return e},e}(),eb=function(){function e(e,t,r,n){if(_(e,"field"),!1===e.range().isFixed())throw new d("Field must have a fixed set of values: "+e);if(t<0||t>9)throw new d("Minimum width must be from 0 to 9 inclusive but was "+t);if(r<1||r>9)throw new d("Maximum width must be from 1 to 9 inclusive but was "+r);if(r<t)throw new d("Maximum width must exceed or equal the minimum width but "+r+" < "+t);this.field=e,this.minWidth=t,this.maxWidth=r,this.decimalPoint=n}var t=e.prototype;return t.print=function(e,t){var r=e.getValue(this.field);if(null===r)return!1;var n=e.symbols();if(0===r){if(this.minWidth>0){this.decimalPoint&&t.append(n.decimalSeparator());for(var i=0;i<this.minWidth;i++)t.append(n.zeroDigit())}}else{var o=this.convertToFraction(r,n.zeroDigit()),a=Math.min(Math.max(o.length,this.minWidth),this.maxWidth);if(+(o=o.substr(0,a))>0)for(;o.length>this.minWidth&&"0"===o[o.length-1];)o=o.substr(0,o.length-1);var s=o;s=n.convertNumberToI18N(s),this.decimalPoint&&t.append(n.decimalSeparator()),t.append(s)}return!0},t.parse=function(e,t,r){var n=e.isStrict()?this.minWidth:0,i=e.isStrict()?this.maxWidth:9,o=t.length;if(r===o)return n>0?~r:r;if(this.decimalPoint){if(t[r]!==e.symbols().decimalSeparator())return n>0?~r:r;r++}var a=r+n;if(a>o)return~r;for(var s=Math.min(r+i,o),l=0,c=r;c<s;){var u=t.charAt(c++),d=e.symbols().convertToDigit(u);if(d<0){if(c<a)return~r;c--;break}l=10*l+d}var h=Math.pow(10,c-r),f=this.convertFromFraction(l,h);return e.setParsedField(this.field,f,r,c)},t.convertToFraction=function(e,t){var r=this.field.range();r.checkValidValue(e,this.field);for(var n=r.minimum(),i=r.maximum()-n+1,o=e-n,a=""+v.intDiv(1e9*o,i);a.length<9;)a=t+a;return a},t.convertFromFraction=function(e,t){var r=this.field.range(),n=r.minimum(),i=r.maximum()-n+1;return v.intDiv(e*i,t)},t.toString=function(){var e=this.decimalPoint?",DecimalPoint":"";return"Fraction("+this.field+","+this.minWidth+","+this.maxWidth+e+")"},e}(),ev=[0,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],eA=function(){function e(e,t,r,n,i){void 0===i&&(i=0),this._field=e,this._minWidth=t,this._maxWidth=r,this._signStyle=n,this._subsequentWidth=i}var t=e.prototype;return t.field=function(){return this._field},t.minWidth=function(){return this._minWidth},t.maxWidth=function(){return this._maxWidth},t.signStyle=function(){return this._signStyle},t.withFixedWidth=function(){return -1===this._subsequentWidth?this:new e(this._field,this._minWidth,this._maxWidth,this._signStyle,-1)},t.withSubsequentWidth=function(t){return new e(this._field,this._minWidth,this._maxWidth,this._signStyle,this._subsequentWidth+t)},t._isFixedWidth=function(){return -1===this._subsequentWidth||this._subsequentWidth>0&&this._minWidth===this._maxWidth&&this._signStyle===ey.NOT_NEGATIVE},t.print=function(e,t){var r=e.getValue(this._field);if(null==r)return!1;var n=this._getValue(e,r),i=e.symbols(),o=""+Math.abs(n);if(o.length>this._maxWidth)throw new s("Field "+this._field+" cannot be printed as the value "+n+" exceeds the maximum print width of "+this._maxWidth);if(o=i.convertNumberToI18N(o),n>=0)switch(this._signStyle){case ey.EXCEEDS_PAD:this._minWidth<15&&n>=ev[this._minWidth]&&t.append(i.positiveSign());break;case ey.ALWAYS:t.append(i.positiveSign())}else switch(this._signStyle){case ey.NORMAL:case ey.EXCEEDS_PAD:case ey.ALWAYS:t.append(i.negativeSign());break;case ey.NOT_NEGATIVE:throw new s("Field "+this._field+" cannot be printed as the value "+n+" cannot be negative according to the SignStyle")}for(var a=0;a<this._minWidth-o.length;a++)t.append(i.zeroDigit());return t.append(o),!0},t.parse=function(e,t,r){var n=t.length;if(r===n)return~r;y(r>=0&&r<n);var i=t.charAt(r),o=!1,a=!1;if(i===e.symbols().positiveSign()){if(!1===this._signStyle.parse(!0,e.isStrict(),this._minWidth===this._maxWidth))return~r;a=!0,r++}else if(i===e.symbols().negativeSign()){if(!1===this._signStyle.parse(!1,e.isStrict(),this._minWidth===this._maxWidth))return~r;o=!0,r++}else if(this._signStyle===ey.ALWAYS&&e.isStrict())return~r;var s=e.isStrict()||this._isFixedWidth()?this._minWidth:1,l=r+s;if(l>n)return~r;for(var c=(e.isStrict()||this._isFixedWidth()?this._maxWidth:9)+Math.max(this._subsequentWidth,0),d=0,h=r,f=0;f<2;f++){for(var p=Math.min(h+c,n);h<p;){var m=t.charAt(h++),g=e.symbols().convertToDigit(m);if(g<0){if(--h<l)return~r;break}if(h-r>15)throw new u("number text exceeds length");d=10*d+g}if(this._subsequentWidth>0&&0===f)c=Math.max(s,h-r-this._subsequentWidth),h=r,d=0;else break}if(o){if(0===d&&e.isStrict())return~(r-1);0!==d&&(d=-d)}else if(this._signStyle===ey.EXCEEDS_PAD&&e.isStrict()){var _=h-r;if(a){if(_<=this._minWidth)return~(r-1)}else if(_>this._minWidth)return~r}return this._setValue(e,d,r,h)},t._getValue=function(e,t){return t},t._setValue=function(e,t,r,n){return e.setParsedField(this._field,t,r,n)},t.toString=function(){return 1===this._minWidth&&15===this._maxWidth&&this._signStyle===ey.NORMAL?"Value("+this._field+")":this._minWidth===this._maxWidth&&this._signStyle===ey.NOT_NEGATIVE?"Value("+this._field+","+this._minWidth+")":"Value("+this._field+","+this._minWidth+","+this._maxWidth+","+this._signStyle+")"},e}(),eC=function(e){function t(t,r,n,i,o){var a;if(a=e.call(this,t,r,n,ey.NOT_NEGATIVE)||this,r<1||r>10)throw new d("The width must be from 1 to 10 inclusive but was "+r);if(n<1||n>10)throw new d("The maxWidth must be from 1 to 10 inclusive but was "+n);if(n<r)throw new d("The maxWidth must be greater than the width");if(null===o){if(!1===t.range().isValidValue(i))throw new d("The base value must be within the range of the field");if(i+ev[r]>v.MAX_SAFE_INTEGER)throw new s("Unable to add printer-parser as the range exceeds the capacity of an int")}return a._baseValue=i,a._baseDate=o,a}p(t,e);var r=t.prototype;return r._getValue=function(e,t){var r=Math.abs(t),n=this._baseValue;return(null!==this._baseDate&&(e.temporal(),n=eK.INSTANCE.date(this._baseDate).get(this._field)),t>=n&&t<n+ev[this._minWidth])?r%ev[this._minWidth]:r%ev[this._maxWidth]},r._setValue=function(e,t,r,n){var i=this._baseValue;if(null!=this._baseDate&&(i=e.getEffectiveChronology().date(this._baseDate).get(this._field)),n-r===this._minWidth&&t>=0){var o=ev[this._minWidth],a=i%o,s=i-a;(t=i>0?s+t:s-t)<i&&(t+=o)}return e.setParsedField(this._field,t,r,n)},r.withFixedWidth=function(){return -1===this._subsequentWidth?this:new t(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate)},r.withSubsequentWidth=function(e){return new t(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate,this._subsequentWidth+e)},r.isFixedWidth=function(t){return!1!==t.isStrict()&&e.prototype.isFixedWidth.call(this,t)},r.toString=function(){return"ReducedValue("+this._field+","+this._minWidth+","+this._maxWidth+","+(null!=this._baseDate?this._baseDate:this._baseValue)+")"},t}(eA),eS=["+HH","+HHmm","+HH:mm","+HHMM","+HH:MM","+HHMMss","+HH:MM:ss","+HHMMSS","+HH:MM:SS"],ew=function(){function e(e,t){_(e,"noOffsetText"),_(t,"pattern"),this.noOffsetText=e,this.type=this._checkPattern(t)}var t=e.prototype;return t._checkPattern=function(e){for(var t=0;t<eS.length;t++)if(eS[t]===e)return t;throw new d("Invalid zone offset pattern: "+e)},t.print=function(e,t){var r=e.getValue(P.OFFSET_SECONDS);if(null==r)return!1;var n=v.safeToInt(r);if(0===n)t.append(this.noOffsetText);else{var i=Math.abs(v.intMod(v.intDiv(n,3600),100)),o=Math.abs(v.intMod(v.intDiv(n,60),60)),a=Math.abs(v.intMod(n,60)),s=t.length(),l=i;t.append(n<0?"-":"+").appendChar(v.intDiv(i,10)+"0").appendChar(v.intMod(i,10)+"0"),(this.type>=3||this.type>=1&&o>0)&&(t.append(this.type%2==0?":":"").appendChar(v.intDiv(o,10)+"0").appendChar(o%10+"0"),l+=o,(this.type>=7||this.type>=5&&a>0)&&(t.append(this.type%2==0?":":"").appendChar(v.intDiv(a,10)+"0").appendChar(a%10+"0"),l+=a)),0===l&&(t.setLength(s),t.append(this.noOffsetText))}return!0},t.parse=function(e,t,r){var n=t.length,i=this.noOffsetText.length;if(0===i){if(r===n)return e.setParsedField(P.OFFSET_SECONDS,0,r,r)}else{if(r===n)return~r;if(e.subSequenceEquals(t,r,this.noOffsetText,0,i))return e.setParsedField(P.OFFSET_SECONDS,0,r,r+i)}var o=t[r];if("+"===o||"-"===o){var a=[0,0,0,0];if(a[0]=r+1,!1===(this._parseNumber(a,1,t,!0)||this._parseNumber(a,2,t,this.type>=3)||this._parseNumber(a,3,t,!1))){var s=v.safeZero(("-"===o?-1:1)*(3600*a[1]+60*a[2]+a[3]));return e.setParsedField(P.OFFSET_SECONDS,s,r,a[0])}}return 0===i?e.setParsedField(P.OFFSET_SECONDS,0,r,r+i):~r},t._parseNumber=function(e,t,r,n){if((this.type+3)/2<t)return!1;var i=e[0];if(this.type%2==0&&t>1){if(i+1>r.length||":"!==r[i])return n;i++}if(i+2>r.length)return n;var o=r[i++],a=r[i++];if(o<"0"||o>"9"||a<"0"||a>"9")return n;var s=(o.charCodeAt(0)-48)*10+(a.charCodeAt(0)-48);return s<0||s>59?n:(e[t]=s,e[0]=i,!1)},t.toString=function(){var e=this.noOffsetText.replace("'","''");return"Offset("+eS[this.type]+",'"+e+"')"},e}();ew.INSTANCE_ID=new ew("Z","+HH:MM:ss"),ew.PATTERNS=eS;var eI=function(){function e(e,t,r){this._printerParser=e,this._padWidth=t,this._padChar=r}var t=e.prototype;return t.print=function(e,t){var r=t.length();if(!1===this._printerParser.print(e,t))return!1;var n=t.length()-r;if(n>this._padWidth)throw new s("Cannot print as output of "+n+" characters exceeds pad width of "+this._padWidth);for(var i=0;i<this._padWidth-n;i++)t.insert(r,this._padChar);return!0},t.parse=function(e,t,r){var n=e.isStrict(),i=e.isCaseSensitive();if(y(!(r>t.length)),y(r>=0),r===t.length)return~r;var o=r+this._padWidth;if(o>t.length){if(n)return~r;o=t.length}for(var a=r;a<o&&(i?t[a]===this._padChar:e.charEquals(t[a],this._padChar));)a++;t=t.substring(0,o);var s=this._printerParser.parse(e,t,a);return s!==o&&n?~(r+a):s},t.toString=function(){return"Pad("+this._printerParser+","+this._padWidth+(" "===this._padChar?")":",'"+this._padChar+"')")},e}(),eO=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.print=function(){return!0},r.parse=function(e,r,n){switch(this){case t.SENSITIVE:e.setCaseSensitive(!0);break;case t.INSENSITIVE:e.setCaseSensitive(!1);break;case t.STRICT:e.setStrict(!0);break;case t.LENIENT:e.setStrict(!1)}return n},r.toString=function(){switch(this){case t.SENSITIVE:return"ParseCaseSensitive(true)";case t.INSENSITIVE:return"ParseCaseSensitive(false)";case t.STRICT:return"ParseStrict(true)";case t.LENIENT:return"ParseStrict(false)"}},t}(A);eO.SENSITIVE=new eO("SENSITIVE"),eO.INSENSITIVE=new eO("INSENSITIVE"),eO.STRICT=new eO("STRICT"),eO.LENIENT=new eO("LENIENT");var eR=function(){function e(e){this._literal=e}var t=e.prototype;return t.print=function(e,t){return t.append(this._literal),!0},t.parse=function(e,t,r){return(y(!(r>t.length||r<0)),!1===e.subSequenceEquals(t,r,this._literal,0,this._literal.length))?~r:r+this._literal.length},t.toString=function(){return"'"+this._literal.replace("'","''")+"'"},e}(),eN=function(){function e(){}return e.getRules=function(e){throw new s("unsupported ZoneId:"+e)},e.getAvailableZoneIds=function(){return[]},e}(),eP=function(e){function t(t,r){var n;return(n=e.call(this)||this)._id=t,n._rules=r,n}p(t,e),t.ofId=function(e){var r=eN.getRules(e);return new t(e,r)};var r=t.prototype;return r.id=function(){return this._id},r.rules=function(){return this._rules},t}(z),ek=function(){function e(e,t){this.query=e,this.description=t}var t=e.prototype;return t.print=function(e,t){var r=e.getValueQuery(this.query);return null!=r&&(t.append(r.id()),!0)},t.parse=function(e,t,r){var n=t.length;if(r>n||r===n)return~r;var i=t.charAt(r);if("+"===i||"-"===i){var o=e.copy(),a=ew.INSTANCE_ID.parse(o,t,r);if(a<0)return a;var s=o.getParsed(P.OFFSET_SECONDS),l=X.ofTotalSeconds(s);return e.setParsedZone(l),a}if(n>=r+2){var c=t.charAt(r+1);if(e.charEquals(i,"U")&&e.charEquals(c,"T"))return n>=r+3&&e.charEquals(t.charAt(r+2),"C")?this._parsePrefixedOffset(e,t,r,r+3):this._parsePrefixedOffset(e,t,r,r+2);if(e.charEquals(i,"G")&&n>=r+3&&e.charEquals(c,"M")&&e.charEquals(t.charAt(r+2),"T"))return this._parsePrefixedOffset(e,t,r,r+3)}if("SYSTEM"===t.substr(r,6))return e.setParsedZone(z.systemDefault()),r+6;if(e.charEquals(i,"Z"))return e.setParsedZone(X.UTC),r+1;var u=eN.getAvailableZoneIds();eL.size!==u.length&&(eL=eD.createTreeMap(u));for(var d=n-r,h=eL.treeMap,f=null,p=0;null!=h;){var m=t.substr(r,Math.min(h.length,d));null!=(h=h.get(m))&&h.isLeaf&&(f=m,p=h.length)}return null!=f?(e.setParsedZone(eP.ofId(f)),r+p):~r},t._parsePrefixedOffset=function(e,t,r,n){var i=t.substring(r,n).toUpperCase(),o=e.copy();if(n<t.length&&e.charEquals(t.charAt(n),"Z"))return e.setParsedZone(z.ofOffset(i,X.UTC)),n;var a=ew.INSTANCE_ID.parse(o,t,n);if(a<0)return e.setParsedZone(z.ofOffset(i,X.UTC)),n;var s=o.getParsed(P.OFFSET_SECONDS),l=X.ofTotalSeconds(s);return e.setParsedZone(z.ofOffset(i,l)),a},t.toString=function(){return this.description},e}(),eD=function(){function e(e,t){this.size=e,this.treeMap=t}return e.createTreeMap=function(t){for(var r=t.sort(function(e,t){return e.length-t.length}),n=new eM(r[0].length,!1),i=0;i<r.length;i++)n.add(r[i]);return new e(r.length,n)},e}(),eM=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=!1),this.length=e,this.isLeaf=t,this._treeMap={}}var t=e.prototype;return t.add=function(t){var r=t.length;if(r===this.length)this._treeMap[t]=new e(r,!0);else if(r>this.length){var n=t.substr(0,this.length),i=this._treeMap[n];null==i&&(i=new e(r,!1),this._treeMap[n]=i),i.add(t)}},t.get=function(e){return this._treeMap[e]},e}(),eL=new eD([]),eU=function(){function e(){this._active=this,this._parent=null,this._printerParsers=[],this._optional=!1,this._padNextWidth=0,this._padNextChar=null,this._valueParserIndex=-1}e._of=function(t,r){_(t,"parent"),_(r,"optional");var n=new e;return n._parent=t,n._optional=r,n};var t=e.prototype;return t.parseCaseSensitive=function(){return this._appendInternalPrinterParser(eO.SENSITIVE),this},t.parseCaseInsensitive=function(){return this._appendInternalPrinterParser(eO.INSENSITIVE),this},t.parseStrict=function(){return this._appendInternalPrinterParser(eO.STRICT),this},t.parseLenient=function(){return this._appendInternalPrinterParser(eO.LENIENT),this},t.parseDefaulting=function(e,t){return _(e),this._appendInternal(new eF(e,t)),this},t.appendValue=function(){return 1==arguments.length?this._appendValue1.apply(this,arguments):2==arguments.length?this._appendValue2.apply(this,arguments):this._appendValue4.apply(this,arguments)},t._appendValue1=function(e){return _(e),this._appendValuePrinterParser(new eA(e,1,15,ey.NORMAL)),this},t._appendValue2=function(e,t){if(_(e),t<1||t>15)throw new d("The width must be from 1 to 15 inclusive but was "+t);var r=new eA(e,t,t,ey.NOT_NEGATIVE);return this._appendValuePrinterParser(r),this},t._appendValue4=function(e,t,r,n){if(_(e),_(n),t===r&&n===ey.NOT_NEGATIVE)return this._appendValue2(e,r);if(t<1||t>15)throw new d("The minimum width must be from 1 to 15 inclusive but was "+t);if(r<1||r>15)throw new d("The minimum width must be from 1 to 15 inclusive but was "+r);if(r<t)throw new d("The maximum width must exceed or equal the minimum width but "+r+" < "+t);var i=new eA(e,t,r,n);return this._appendValuePrinterParser(i),this},t.appendValueReduced=function(){return 4==arguments.length&&arguments[3]instanceof $?this._appendValueReducedFieldWidthMaxWidthBaseDate.apply(this,arguments):this._appendValueReducedFieldWidthMaxWidthBaseValue.apply(this,arguments)},t._appendValueReducedFieldWidthMaxWidthBaseValue=function(e,t,r,n){_(e,"field");var i=new eC(e,t,r,n,null);return this._appendValuePrinterParser(i),this},t._appendValueReducedFieldWidthMaxWidthBaseDate=function(e,t,r,n){_(e,"field"),_(n,"baseDate"),E(n,$,"baseDate");var i=new eC(e,t,r,0,n);return this._appendValuePrinterParser(i),this},t._appendValuePrinterParser=function(e){if(y(null!=e),this._active._valueParserIndex>=0&&this._active._printerParsers[this._active._valueParserIndex]instanceof eA){var t=this._active._valueParserIndex,r=this._active._printerParsers[t];e.minWidth()===e.maxWidth()&&e.signStyle()===ey.NOT_NEGATIVE?(r=r.withSubsequentWidth(e.maxWidth()),this._appendInternal(e.withFixedWidth()),this._active._valueParserIndex=t):(r=r.withFixedWidth(),this._active._valueParserIndex=this._appendInternal(e)),this._active._printerParsers[t]=r}else this._active._valueParserIndex=this._appendInternal(e);return this},t.appendFraction=function(e,t,r,n){return this._appendInternal(new eb(e,t,r,n)),this},t.appendInstant=function(e){if(void 0===e&&(e=-2),e<-2||e>9)throw new d("Invalid fractional digits: "+e);return this._appendInternal(new ex(e)),this},t.appendOffsetId=function(){return this._appendInternal(ew.INSTANCE_ID),this},t.appendOffset=function(e,t){return this._appendInternalPrinterParser(new ew(t,e)),this},t.appendZoneId=function(){return this._appendInternal(new ek(k.zoneId(),"ZoneId()")),this},t.appendPattern=function(e){return _(e,"pattern"),this._parsePattern(e),this},t.appendZoneText=function(){throw new d("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t.appendText=function(){throw new d("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t.appendLocalizedOffset=function(){throw new d("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t.appendWeekField=function(){throw new d("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},t._parsePattern=function(e){for(var t={G:P.ERA,y:P.YEAR_OF_ERA,u:P.YEAR,Q:er.QUARTER_OF_YEAR,q:er.QUARTER_OF_YEAR,M:P.MONTH_OF_YEAR,L:P.MONTH_OF_YEAR,D:P.DAY_OF_YEAR,d:P.DAY_OF_MONTH,F:P.ALIGNED_DAY_OF_WEEK_IN_MONTH,E:P.DAY_OF_WEEK,c:P.DAY_OF_WEEK,e:P.DAY_OF_WEEK,a:P.AMPM_OF_DAY,H:P.HOUR_OF_DAY,k:P.CLOCK_HOUR_OF_DAY,K:P.HOUR_OF_AMPM,h:P.CLOCK_HOUR_OF_AMPM,m:P.MINUTE_OF_HOUR,s:P.SECOND_OF_MINUTE,S:P.NANO_OF_SECOND,A:P.MILLI_OF_DAY,n:P.NANO_OF_SECOND,N:P.NANO_OF_DAY},r=0;r<e.length;r++){var n=e.charAt(r);if(n>="A"&&n<="Z"||n>="a"&&n<="z"){for(var i=r++;r<e.length&&e.charAt(r)===n;r++);var o=r-i;if("p"===n){var a=0;if(r<e.length&&((n=e.charAt(r))>="A"&&n<="Z"||n>="a"&&n<="z")){for(a=o,i=r++;r<e.length&&e.charAt(r)===n;r++);o=r-i}if(0===a)throw new d("Pad letter 'p' must be followed by valid pad pattern: "+e);this.padNext(a)}var s=t[n];if(null!=s)this._parseField(n,o,s);else if("z"===n)if(o>4)throw new d("Too many pattern letters: "+n);else 4===o?this.appendZoneText(e_.FULL):this.appendZoneText(e_.SHORT);else if("V"===n){if(2!==o)throw new d("Pattern letter count must be 2: "+n);this.appendZoneId()}else if("Z"===n)if(o<4)this.appendOffset("+HHMM","+0000");else if(4===o)this.appendLocalizedOffset(e_.FULL);else if(5===o)this.appendOffset("+HH:MM:ss","Z");else throw new d("Too many pattern letters: "+n);else if("O"===n)if(1===o)this.appendLocalizedOffset(e_.SHORT);else if(4===o)this.appendLocalizedOffset(e_.FULL);else throw new d("Pattern letter count must be 1 or 4: "+n);else if("X"===n){if(o>5)throw new d("Too many pattern letters: "+n);this.appendOffset(ew.PATTERNS[o+ +(1!==o)],"Z")}else if("x"===n){if(o>5)throw new d("Too many pattern letters: "+n);var l=1===o?"+00":o%2==0?"+0000":"+00:00";this.appendOffset(ew.PATTERNS[o+ +(1!==o)],l)}else if("W"===n){if(o>1)throw new d("Too many pattern letters: "+n);this.appendWeekField("W",o)}else if("w"===n){if(o>2)throw new d("Too many pattern letters: "+n);this.appendWeekField("w",o)}else if("Y"===n)this.appendWeekField("Y",o);else throw new d("Unknown pattern letter: "+n);r--}else if("'"===n){for(var c=r++;r<e.length;r++)if("'"===e.charAt(r))if(r+1<e.length&&"'"===e.charAt(r+1))r++;else break;if(r>=e.length)throw new d("Pattern ends with an incomplete string literal: "+e);var u=e.substring(c+1,r);0===u.length?this.appendLiteral("'"):this.appendLiteral(u.replace("''","'"))}else if("["===n)this.optionalStart();else if("]"===n){if(null===this._active._parent)throw new d("Pattern invalid as it contains ] without previous [");this.optionalEnd()}else if("{"===n||"}"===n||"#"===n)throw new d("Pattern includes reserved character: '"+n+"'");else this.appendLiteral(n)}},t._parseField=function(e,t,r){switch(e){case"u":case"y":2===t?this.appendValueReduced(r,2,2,eC.BASE_DATE):t<4?this.appendValue(r,t,15,ey.NORMAL):this.appendValue(r,t,15,ey.EXCEEDS_PAD);break;case"M":case"Q":switch(t){case 1:this.appendValue(r);break;case 2:this.appendValue(r,2);break;case 3:this.appendText(r,e_.SHORT);break;case 4:this.appendText(r,e_.FULL);break;case 5:this.appendText(r,e_.NARROW);break;default:throw new d("Too many pattern letters: "+e)}break;case"L":case"q":switch(t){case 1:this.appendValue(r);break;case 2:this.appendValue(r,2);break;case 3:this.appendText(r,e_.SHORT_STANDALONE);break;case 4:this.appendText(r,e_.FULL_STANDALONE);break;case 5:this.appendText(r,e_.NARROW_STANDALONE);break;default:throw new d("Too many pattern letters: "+e)}break;case"e":switch(t){case 1:case 2:this.appendWeekField("e",t);break;case 3:this.appendText(r,e_.SHORT);break;case 4:this.appendText(r,e_.FULL);break;case 5:this.appendText(r,e_.NARROW);break;default:throw new d("Too many pattern letters: "+e)}break;case"c":switch(t){case 1:this.appendWeekField("c",t);break;case 2:throw new d("Invalid number of pattern letters: "+e);case 3:this.appendText(r,e_.SHORT_STANDALONE);break;case 4:this.appendText(r,e_.FULL_STANDALONE);break;case 5:this.appendText(r,e_.NARROW_STANDALONE);break;default:throw new d("Too many pattern letters: "+e)}break;case"a":if(1===t)this.appendText(r,e_.SHORT);else throw new d("Too many pattern letters: "+e);break;case"E":case"G":switch(t){case 1:case 2:case 3:this.appendText(r,e_.SHORT);break;case 4:this.appendText(r,e_.FULL);break;case 5:this.appendText(r,e_.NARROW);break;default:throw new d("Too many pattern letters: "+e)}break;case"S":this.appendFraction(P.NANO_OF_SECOND,t,t,!1);break;case"F":if(1===t)this.appendValue(r);else throw new d("Too many pattern letters: "+e);break;case"d":case"h":case"H":case"k":case"K":case"m":case"s":if(1===t)this.appendValue(r);else if(2===t)this.appendValue(r,t);else throw new d("Too many pattern letters: "+e);break;case"D":if(1===t)this.appendValue(r);else if(t<=3)this.appendValue(r,t);else throw new d("Too many pattern letters: "+e);break;default:1===t?this.appendValue(r):this.appendValue(r,t)}},t.padNext=function(){return 1==arguments.length?this._padNext1.apply(this,arguments):this._padNext2.apply(this,arguments)},t._padNext1=function(e){return this._padNext2(e," ")},t._padNext2=function(e,t){if(e<1)throw new d("The pad width must be at least one but was "+e);return this._active._padNextWidth=e,this._active._padNextChar=t,this._active._valueParserIndex=-1,this},t.optionalStart=function(){return this._active._valueParserIndex=-1,this._active=e._of(this._active,!0),this},t.optionalEnd=function(){if(null==this._active._parent)throw new h("Cannot call optionalEnd() as there was no previous call to optionalStart()");if(this._active._printerParsers.length>0){var e=new eT(this._active._printerParsers,this._active._optional);this._active=this._active._parent,this._appendInternal(e)}else this._active=this._active._parent;return this},t._appendInternal=function(e){return y(null!=e),this._active._padNextWidth>0&&(null!=e&&(e=new eI(e,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(e),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},t.appendLiteral=function(e){return y(null!=e),e.length>0&&(1===e.length?this._appendInternalPrinterParser(new eE(e.charAt(0))):this._appendInternalPrinterParser(new eR(e))),this},t._appendInternalPrinterParser=function(e){return y(null!=e),this._active._padNextWidth>0&&(null!=e&&(e=new eI(e,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(e),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},t.append=function(e){return _(e,"formatter"),this._appendInternal(e._toPrinterParser(!1)),this},t.toFormatter=function(e){for(void 0===e&&(e=j.SMART);null!=this._active._parent;)this.optionalEnd();return new eq(new eT(this._printerParsers,!1),null,eg.STANDARD,e,null,null,null)},e}(),ex=function(){function e(e){this.fractionalDigits=e}var t=e.prototype;return t.print=function(e,t){var r=e.getValue(P.INSTANT_SECONDS),n=0;if(e.temporal().isSupported(P.NANO_OF_SECOND)&&(n=e.temporal().getLong(P.NANO_OF_SECOND)),null==r)return!1;var i=P.NANO_OF_SECOND.checkValidIntValue(n);if(r>=-0xe79747c00){var o=r-31556952e4+0xe79747c00,a=v.floorDiv(o,31556952e4)+1,s=v.floorMod(o,31556952e4),l=e2.ofEpochSecond(s-0xe79747c00,0,X.UTC);a>0&&t.append("+").append(a),t.append(l.toString()),0===l.second()&&t.append(":00")}else{var c=r+0xe79747c00,u=v.intDiv(c,31556952e4),d=v.intMod(c,31556952e4),h=e2.ofEpochSecond(d-0xe79747c00,0,X.UTC),f=t.length();t.append(h.toString()),0===h.second()&&t.append(":00"),u<0&&(-1e4===h.year()?t.replace(f,f+2,""+(u-1)):0===d?t.insert(f,u):t.insert(f+1,Math.abs(u)))}if(-2===this.fractionalDigits)0!==i&&(t.append("."),0===v.intMod(i,1e6)?t.append((""+(v.intDiv(i,1e6)+1e3)).substring(1)):0===v.intMod(i,1e3)?t.append((""+(v.intDiv(i,1e3)+1e6)).substring(1)):t.append((""+(i+1e9)).substring(1)));else if(this.fractionalDigits>0||-1===this.fractionalDigits&&i>0){t.append(".");for(var p=1e8,m=0;-1===this.fractionalDigits&&i>0||m<this.fractionalDigits;m++){var g=v.intDiv(i,p);t.append(g),i-=g*p,p=v.intDiv(p,10)}}return t.append("Z"),!0},t.parse=function(e,t,r){var n,i=e.copy(),o=this.fractionalDigits<0?0:this.fractionalDigits,a=this.fractionalDigits<0?9:this.fractionalDigits,s=new eU().append(eq.ISO_LOCAL_DATE).appendLiteral("T").appendValue(P.HOUR_OF_DAY,2).appendLiteral(":").appendValue(P.MINUTE_OF_HOUR,2).appendLiteral(":").appendValue(P.SECOND_OF_MINUTE,2).appendFraction(P.NANO_OF_SECOND,o,a,!0).appendLiteral("Z").toFormatter()._toPrinterParser(!1).parse(i,t,r);if(s<0)return s;var l=i.getParsed(P.YEAR),c=i.getParsed(P.MONTH_OF_YEAR),u=i.getParsed(P.DAY_OF_MONTH),d=i.getParsed(P.HOUR_OF_DAY),h=i.getParsed(P.MINUTE_OF_HOUR),f=i.getParsed(P.SECOND_OF_MINUTE),p=i.getParsed(P.NANO_OF_SECOND),m=null!=f?f:0,g=null!=p?p:0,y=v.intMod(l,1e4),_=0;24===d&&0===h&&0===m&&0===g?(d=0,_=1):23===d&&59===h&&60===m&&(e.setParsedLeapSecond(),m=59);try{n=e2.of(y,c,u,d,h,m,0).plusDays(_).toEpochSecond(X.UTC)+v.safeMultiply(v.intDiv(l,1e4),31556952e4)}catch(e){return~r}var E=s;return E=e.setParsedField(P.INSTANT_SECONDS,n,r,E),e.setParsedField(P.NANO_OF_SECOND,g,r,E)},t.toString=function(){return"Instant()"},e}(),eF=function(){function e(e,t){this._field=e,this._value=t}var t=e.prototype;return t.print=function(){return!0},t.parse=function(e,t,r){return null==e.getParsed(this._field)&&e.setParsedField(this._field,this._value,r,r),r},e}(),eB=function(){function e(){this._str=""}var t=e.prototype;return t.append=function(e){return this._str+=e,this},t.appendChar=function(e){return this._str+=e[0],this},t.insert=function(e,t){return this._str=this._str.slice(0,e)+t+this._str.slice(e),this},t.replace=function(e,t,r){return this._str=this._str.slice(0,e)+r+this._str.slice(t),this},t.length=function(){return this._str.length},t.setLength=function(e){return this._str=this._str.slice(0,e),this},t.toString=function(){return this._str},e}(),eq=function(){function e(e,t,r,n,i,o,a){void 0===o&&(o=eK.INSTANCE),y(null!=e),y(null!=r),y(null!=n),this._printerParser=e,this._locale=t,this._decimalStyle=r,this._resolverStyle=n,this._resolverFields=i,this._chrono=o,this._zone=a}e.parsedExcessDays=function(){return e.PARSED_EXCESS_DAYS},e.parsedLeapSecond=function(){return e.PARSED_LEAP_SECOND},e.ofPattern=function(e){return new eU().appendPattern(e).toFormatter()};var t=e.prototype;return t.locale=function(){return this._locale},t.decimalStyle=function(){return this._decimalStyle},t.chronology=function(){return this._chrono},t.withChronology=function(t){return null!=this._chrono&&this._chrono.equals(t)?this:new e(this._printerParser,this._locale,this._decimalStyle,this._resolverStyle,this._resolverFields,t,this._zone)},t.withLocale=function(){return this},t.withResolverStyle=function(t){return(_(t,"resolverStyle"),t.equals(this._resolverStyle))?this:new e(this._printerParser,this._locale,this._decimalStyle,t,this._resolverFields,this._chrono,this._zone)},t.format=function(e){var t=new eB(32);return this._formatTo(e,t),t.toString()},t._formatTo=function(e,t){_(e,"temporal"),_(t,"appendable");var r=new et(e,this);this._printerParser.print(r,t)},t.parse=function(e,t){return 1==arguments.length?this.parse1(e):this.parse2(e,t)},t.parse1=function(e){_(e,"text");try{return this._parseToBuilder(e,null).resolve(this._resolverStyle,this._resolverFields)}catch(t){if(t instanceof l)throw t;throw this._createError(e,t)}},t.parse2=function(e,t){_(e,"text"),_(t,"type");try{return this._parseToBuilder(e,null).resolve(this._resolverStyle,this._resolverFields).build(t)}catch(t){if(t instanceof l)throw t;throw this._createError(e,t)}},t._createError=function(e,t){return new l("Text '"+(e.length>64?e.substring(0,64)+"...":e)+"' could not be parsed: "+t.message,e,0,t)},t._parseToBuilder=function(e,t){var r=null!=t?t:new q(0),n=this._parseUnresolved0(e,r);if(null==n||r.getErrorIndex()>=0||null==t&&r.getIndex()<e.length){var i="";if(i=e.length>64?e.substr(0,64).toString()+"...":e,r.getErrorIndex()>=0)throw new l("Text '"+i+"' could not be parsed at index "+r.getErrorIndex(),e,r.getErrorIndex());throw new l("Text '"+i+"' could not be parsed, unparsed text found at index "+r.getIndex(),e,r.getIndex())}return n.toBuilder()},t.parseUnresolved=function(e,t){return this._parseUnresolved0(e,t)},t._parseUnresolved0=function(e,t){y(null!=e,"text",f),y(null!=t,"position",f);var r=new J(this),n=t.getIndex();return(n=this._printerParser.parse(r,e,n))<0?(t.setErrorIndex(~n),null):(t.setIndex(n),r.toParsed())},t._toPrinterParser=function(e){return this._printerParser.withOptional(e)},t.toString=function(){var e=this._printerParser.toString();return 0===e.indexOf("[")?e:e.substring(1,e.length-1)},e}(),eH=function(e){function t(t,r){var n;return(n=e.call(this)||this)._month=v.safeToInt(t),n._day=v.safeToInt(r),n}p(t,e),t.now=function(e){return 0==arguments.length?t.now0():1==arguments.length&&e instanceof z?t.nowZoneId(e):t.nowClock(e)},t.now0=function(){return this.nowClock(e6.systemDefaultZone())},t.nowZoneId=function(e){return _(e,"zone"),this.nowClock(e6.system(e))},t.nowClock=function(e){_(e,"clock");var r=e0.now(e);return t.of(r.month(),r.dayOfMonth())},t.of=function(e,r){return 2==arguments.length&&e instanceof x?t.ofMonthNumber(e,r):t.ofNumberNumber(e,r)},t.ofMonthNumber=function(e,r){if(_(e,"month"),P.DAY_OF_MONTH.checkValidValue(r),r>e.maxLength())throw new s("Illegal value for DayOfMonth field, value "+r+" is not valid for month "+e.toString());return new t(e.value(),r)},t.ofNumberNumber=function(e,r){return _(e,"month"),_(r,"dayOfMonth"),t.of(x.of(e),r)},t.from=function(e){if(_(e,"temporal"),E(e,D,"temporal"),e instanceof t)return e;try{return t.of(e.get(P.MONTH_OF_YEAR),e.get(P.DAY_OF_MONTH))}catch(t){throw new s("Unable to obtain MonthDay from TemporalAccessor: "+e+", type "+(e&&null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,r){return 1==arguments.length?t.parseString(e):t.parseStringFormatter(e,r)},t.parseString=function(e){return t.parseStringFormatter(e,i)},t.parseStringFormatter=function(e,r){return _(e,"text"),_(r,"formatter"),E(r,eq,"formatter"),r.parse(e,t.FROM)};var r=t.prototype;return r.monthValue=function(){return this._month},r.month=function(){return x.of(this._month)},r.dayOfMonth=function(){return this._day},r.isSupported=function(e){return e instanceof P?e===P.MONTH_OF_YEAR||e===P.DAY_OF_MONTH:null!=e&&e.isSupportedBy(this)},r.range=function(t){return t===P.MONTH_OF_YEAR?t.range():t===P.DAY_OF_MONTH?N.of(1,this.month().minLength(),this.month().maxLength()):e.prototype.range.call(this,t)},r.get=function(e){return this.range(e).checkValidIntValue(this.getLong(e),e)},r.getLong=function(e){if(_(e,"field"),e instanceof P){switch(e){case P.DAY_OF_MONTH:return this._day;case P.MONTH_OF_YEAR:return this._month}throw new c("Unsupported field: "+e)}return e.getFrom(this)},r.isValidYear=function(e){return!1==(29===this._day&&2===this._month&&!1===eY.isLeap(e))},r.withMonth=function(e){return this.with(x.of(e))},r.with=function(e){if(_(e,"month"),e.value()===this._month)return this;var r=Math.min(this._day,e.maxLength());return new t(e.value(),r)},r.withDayOfMonth=function(e){return e===this._day?this:t.of(this._month,e)},r.query=function(t){return(_(t,"query"),E(t,M,"query"),t===k.chronology())?eK.INSTANCE:e.prototype.query.call(this,t)},r.adjustInto=function(e){return _(e,"temporal"),(e=e.with(P.MONTH_OF_YEAR,this._month)).with(P.DAY_OF_MONTH,Math.min(e.range(P.DAY_OF_MONTH).maximum(),this._day))},r.atYear=function(e){return e0.of(e,this._month,this.isValidYear(e)?this._day:28)},r.compareTo=function(e){_(e,"other"),E(e,t,"other");var r=this._month-e.monthValue();return 0===r&&(r=this._day-e.dayOfMonth()),r},r.isAfter=function(e){return _(e,"other"),E(e,t,"other"),this.compareTo(e)>0},r.isBefore=function(e){return _(e,"other"),E(e,t,"other"),0>this.compareTo(e)},r.equals=function(e){return this===e||e instanceof t&&this.monthValue()===e.monthValue()&&this.dayOfMonth()===e.dayOfMonth()},r.toString=function(){return"--"+(this._month<10?"0":"")+this._month+(this._day<10?"-0":"-")+this._day},r.toJSON=function(){return this.toString()},r.format=function(e){return _(e,"formatter"),E(e,eq,"formatter"),e.format(this)},t}(D),ej=function(e){function t(t,r){var n;return(n=e.call(this)||this)._year=v.safeToInt(t),n._month=v.safeToInt(r),n}p(t,e),t.now=function(e){return 0==arguments.length?t.now0():1==arguments.length&&e instanceof z?t.nowZoneId(e):t.nowClock(e)},t.now0=function(){return t.nowClock(e6.systemDefaultZone())},t.nowZoneId=function(e){return t.nowClock(e6.system(e))},t.nowClock=function(e){var r=e0.now(e);return t.of(r.year(),r.month())},t.of=function(e,r){return 2==arguments.length&&r instanceof x?t.ofNumberMonth(e,r):t.ofNumberNumber(e,r)},t.ofNumberMonth=function(e,r){return _(r,"month"),E(r,x,"month"),t.ofNumberNumber(e,r.value())},t.ofNumberNumber=function(e,r){return _(e,"year"),_(r,"month"),P.YEAR.checkValidValue(e),P.MONTH_OF_YEAR.checkValidValue(r),new t(e,r)},t.from=function(e){if(_(e,"temporal"),e instanceof t)return e;try{return t.of(e.get(P.YEAR),e.get(P.MONTH_OF_YEAR))}catch(t){throw new s("Unable to obtain YearMonth from TemporalAccessor: "+e+", type "+(e&&null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,r){return 1==arguments.length?t.parseString(e):t.parseStringFormatter(e,r)},t.parseString=function(e){return t.parseStringFormatter(e,o)},t.parseStringFormatter=function(e,r){return _(r,"formatter"),r.parse(e,t.FROM)};var r=t.prototype;return r.isSupported=function(e){return 1==arguments.length&&e instanceof R?this.isSupportedField(e):this.isSupportedUnit(e)},r.isSupportedField=function(e){return e instanceof P?e===P.YEAR||e===P.MONTH_OF_YEAR||e===P.PROLEPTIC_MONTH||e===P.YEAR_OF_ERA||e===P.ERA:null!=e&&e.isSupportedBy(this)},r.isSupportedUnit=function(e){return e instanceof O?e===O.MONTHS||e===O.YEARS||e===O.DECADES||e===O.CENTURIES||e===O.MILLENNIA||e===O.ERAS:null!=e&&e.isSupportedBy(this)},r.range=function(t){return t===P.YEAR_OF_ERA?0>=this.year()?N.of(1,eY.MAX_VALUE+1):N.of(1,eY.MAX_VALUE):e.prototype.range.call(this,t)},r.get=function(e){return _(e,"field"),E(e,R,"field"),this.range(e).checkValidIntValue(this.getLong(e),e)},r.getLong=function(e){if(_(e,"field"),E(e,R,"field"),e instanceof P){switch(e){case P.MONTH_OF_YEAR:return this._month;case P.PROLEPTIC_MONTH:return this._getProlepticMonth();case P.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case P.YEAR:return this._year;case P.ERA:return this._year<1?0:1}throw new c("Unsupported field: "+e)}return e.getFrom(this)},r._getProlepticMonth=function(){return v.safeAdd(v.safeMultiply(this._year,12),this._month-1)},r.year=function(){return this._year},r.monthValue=function(){return this._month},r.month=function(){return x.of(this._month)},r.isLeapYear=function(){return eK.isLeapYear(this._year)},r.isValidDay=function(e){return e>=1&&e<=this.lengthOfMonth()},r.lengthOfMonth=function(){return this.month().length(this.isLeapYear())},r.lengthOfYear=function(){return this.isLeapYear()?366:365},r.with=function(e,t){return 1==arguments.length?this._withAdjuster(e):this._withField(e,t)},r._withField=function(e,t){if(_(e,"field"),E(e,R,"field"),e instanceof P){switch(e.checkValidValue(t),e){case P.MONTH_OF_YEAR:return this.withMonth(t);case P.PROLEPTIC_MONTH:return this.plusMonths(t-this.getLong(P.PROLEPTIC_MONTH));case P.YEAR_OF_ERA:return this.withYear(this._year<1?1-t:t);case P.YEAR:return this.withYear(t);case P.ERA:return this.getLong(P.ERA)===t?this:this.withYear(1-this._year)}throw new c("Unsupported field: "+e)}return e.adjustInto(this,t)},r.withYear=function(e){return P.YEAR.checkValidValue(e),new t(e,this._month)},r.withMonth=function(e){return P.MONTH_OF_YEAR.checkValidValue(e),new t(this._year,e)},r._plusUnit=function(e,t){if(_(t,"unit"),E(t,S,"unit"),t instanceof O){switch(t){case O.MONTHS:return this.plusMonths(e);case O.YEARS:return this.plusYears(e);case O.DECADES:return this.plusYears(v.safeMultiply(e,10));case O.CENTURIES:return this.plusYears(v.safeMultiply(e,100));case O.MILLENNIA:return this.plusYears(v.safeMultiply(e,1e3));case O.ERAS:return this.with(P.ERA,v.safeAdd(this.getLong(P.ERA),e))}throw new c("Unsupported unit: "+t)}return t.addTo(this,e)},r.plusYears=function(e){if(0===e)return this;var t=P.YEAR.checkValidIntValue(this._year+e);return this.withYear(t)},r.plusMonths=function(e){if(0===e)return this;var r=12*this._year+(this._month-1)+e;return new t(P.YEAR.checkValidIntValue(v.floorDiv(r,12)),v.floorMod(r,12)+1)},r.minusYears=function(e){return e===v.MIN_SAFE_INTEGER?this.plusYears(v.MIN_SAFE_INTEGER).plusYears(1):this.plusYears(-e)},r.minusMonths=function(e){return e===v.MIN_SAFE_INTEGER?this.plusMonths(Math.MAX_SAFE_INTEGER).plusMonths(1):this.plusMonths(-e)},r.query=function(t){return(_(t,"query"),E(t,M,"query"),t===k.chronology())?eK.INSTANCE:t===k.precision()?O.MONTHS:t===k.localDate()||t===k.localTime()||t===k.zone()||t===k.zoneId()||t===k.offset()?null:e.prototype.query.call(this,t)},r.adjustInto=function(e){return _(e,"temporal"),E(e,Y,"temporal"),e.with(P.PROLEPTIC_MONTH,this._getProlepticMonth())},r.until=function(e,r){_(e,"endExclusive"),_(r,"unit"),E(e,Y,"endExclusive"),E(r,S,"unit");var n=t.from(e);if(r instanceof O){var i=n._getProlepticMonth()-this._getProlepticMonth();switch(r){case O.MONTHS:return i;case O.YEARS:return v.intDiv(i,12);case O.DECADES:return v.intDiv(i,120);case O.CENTURIES:return v.intDiv(i,1200);case O.MILLENNIA:return v.intDiv(i,12e3);case O.ERAS:return n.getLong(P.ERA)-this.getLong(P.ERA)}throw new c("Unsupported unit: "+r)}return r.between(this,n)},r.atDay=function(e){return _(e,"dayOfMonth"),e0.of(this._year,this._month,e)},r.atEndOfMonth=function(){return e0.of(this._year,this._month,this.lengthOfMonth())},r.compareTo=function(e){_(e,"other"),E(e,t,"other");var r=this._year-e.year();return 0===r&&(r=this._month-e.monthValue()),r},r.isAfter=function(e){return this.compareTo(e)>0},r.isBefore=function(e){return 0>this.compareTo(e)},r.equals=function(e){return this===e||e instanceof t&&this.year()===e.year()&&this.monthValue()===e.monthValue()},r.toString=function(){return o.format(this)},r.toJSON=function(){return this.toString()},r.format=function(e){return _(e,"formatter"),e.format(this)},t}(Y),eY=function(e){function t(t){var r;return(r=e.call(this)||this)._year=v.safeToInt(t),r}p(t,e);var r=t.prototype;return r.value=function(){return this._year},t.now=function(e){return(void 0===e&&(e=void 0),void 0===e)?t.now0():e instanceof z?t.nowZoneId(e):t.nowClock(e)},t.now0=function(){return t.nowClock(e6.systemDefaultZone())},t.nowZoneId=function(e){return _(e,"zone"),E(e,z,"zone"),t.nowClock(e6.system(e))},t.nowClock=function(e){_(e,"clock"),E(e,e6,"clock");var r=e0.now(e);return t.of(r.year())},t.of=function(e){return _(e,"isoYear"),P.YEAR.checkValidValue(e),new t(e)},t.from=function(e){if(_(e,"temporal"),E(e,D,"temporal"),e instanceof t)return e;try{return t.of(e.get(P.YEAR))}catch(t){throw new s("Unable to obtain Year from TemporalAccessor: "+e+", type "+(e&&null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,r){return arguments.length<=1?t.parseText(e):t.parseTextFormatter(e,r)},t.parseText=function(e){return _(e,"text"),t.parse(e,a)},t.parseTextFormatter=function(e,r){return void 0===r&&(r=a),_(e,"text"),_(r,"formatter"),E(r,eq,"formatter"),r.parse(e,t.FROM)},t.isLeap=function(e){return 0===v.intMod(e,4)&&(0!==v.intMod(e,100)||0===v.intMod(e,400))},r.isSupported=function(e){return 1==arguments.length&&e instanceof R?this.isSupportedField(e):this.isSupportedUnit(e)},r.isSupportedField=function(e){return e instanceof P?e===P.YEAR||e===P.YEAR_OF_ERA||e===P.ERA:null!=e&&e.isSupportedBy(this)},r.isSupportedUnit=function(e){return e instanceof O?e===O.YEARS||e===O.DECADES||e===O.CENTURIES||e===O.MILLENNIA||e===O.ERAS:null!=e&&e.isSupportedBy(this)},r.range=function(t){if(this.isSupported(t))return t.range();if(t instanceof P)throw new c("Unsupported field: "+t);return e.prototype.range.call(this,t)},r.get=function(e){return this.range(e).checkValidIntValue(this.getLong(e),e)},r.getLong=function(e){if(_(e,"field"),e instanceof P){switch(e){case P.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case P.YEAR:return this._year;case P.ERA:return this._year<1?0:1}throw new c("Unsupported field: "+e)}return e.getFrom(this)},r.isLeap=function(){return t.isLeap(this._year)},r._withField=function(e,r){if(_(e,"field"),E(e,R,"field"),e instanceof P){switch(e.checkValidValue(r),e){case P.YEAR_OF_ERA:return t.of(this._year<1?1-r:r);case P.YEAR:return t.of(r);case P.ERA:return this.getLong(P.ERA)===r?this:t.of(1-this._year)}throw new c("Unsupported field: "+e)}return e.adjustInto(this,r)},r._plusUnit=function(e,t){if(_(e,"amountToAdd"),_(t,"unit"),E(t,S,"unit"),t instanceof O){switch(t){case O.YEARS:return this.plusYears(e);case O.DECADES:return this.plusYears(v.safeMultiply(e,10));case O.CENTURIES:return this.plusYears(v.safeMultiply(e,100));case O.MILLENNIA:return this.plusYears(v.safeMultiply(e,1e3));case O.ERAS:return this.with(P.ERA,v.safeAdd(this.getLong(P.ERA),e))}throw new c("Unsupported unit: "+t)}return t.addTo(this,e)},r.plusYears=function(e){return 0===e?this:t.of(P.YEAR.checkValidIntValue(v.safeAdd(this._year,e)))},r.minusYears=function(e){return e===v.MIN_SAFE_INTEGER?this.plusYears(v.MAX_SAFE_INTEGER).plusYears(1):this.plusYears(-e)},r.adjustInto=function(e){return _(e,"temporal"),e.with(P.YEAR,this._year)},r.isValidMonthDay=function(e){return null!=e&&e.isValidYear(this._year)},r.length=function(){return this.isLeap()?366:365},r.atDay=function(e){return e0.ofYearDay(this._year,e)},r.atMonth=function(e){return 1==arguments.length&&e instanceof x?this.atMonthMonth(e):this.atMonthNumber(e)},r.atMonthMonth=function(e){return _(e,"month"),E(e,x,"month"),ej.of(this._year,e)},r.atMonthNumber=function(e){return _(e,"month"),ej.of(this._year,e)},r.atMonthDay=function(e){return _(e,"monthDay"),E(e,eH,"monthDay"),e.atYear(this._year)},r.query=function(t){return(_(t,"query()"),E(t,M,"query()"),t===k.chronology())?eK.INSTANCE:t===k.precision()?O.YEARS:t===k.localDate()||t===k.localTime()||t===k.zone()||t===k.zoneId()||t===k.offset()?null:e.prototype.query.call(this,t)},r.compareTo=function(e){return _(e,"other"),E(e,t,"other"),this._year-e._year},r.isAfter=function(e){return _(e,"other"),E(e,t,"other"),this._year>e._year},r.isBefore=function(e){return _(e,"other"),E(e,t,"other"),this._year<e._year},r.format=function(e){return _(e,"formatter"),E(e,eq,"formatter"),e.format(this)},r.equals=function(e){return this===e||e instanceof t&&this.value()===e.value()},r.toString=function(){return""+this._year},r.toJSON=function(){return this.toString()},r.until=function(e,r){var n=t.from(e);if(r instanceof O){var i=n.value()-this.value();switch(r){case O.YEARS:return i;case O.DECADES:return v.intDiv(i,10);case O.CENTURIES:return v.intDiv(i,100);case O.MILLENNIA:return v.intDiv(i,1e3);case O.ERAS:return n.getLong(P.ERA)-this.getLong(P.ERA)}throw new c("Unsupported unit: "+r)}return r.between(this,n)},t}(Y),e$=function(){function e(){}return e.prototype.adjustInto=function(e){T("adjustInto")},e}(),eV=function(){function e(){}return e.firstDayOfMonth=function(){return ez.FIRST_DAY_OF_MONTH},e.lastDayOfMonth=function(){return ez.LAST_DAY_OF_MONTH},e.firstDayOfNextMonth=function(){return ez.FIRST_DAY_OF_NEXT_MONTH},e.firstDayOfYear=function(){return ez.FIRST_DAY_OF_YEAR},e.lastDayOfYear=function(){return ez.LAST_DAY_OF_YEAR},e.firstDayOfNextYear=function(){return ez.FIRST_DAY_OF_NEXT_YEAR},e.firstInMonth=function(e){return _(e,"dayOfWeek"),new eG(1,e)},e.lastInMonth=function(e){return _(e,"dayOfWeek"),new eG(-1,e)},e.dayOfWeekInMonth=function(e,t){return _(t,"dayOfWeek"),new eG(e,t)},e.next=function(e){return new eW(2,e)},e.nextOrSame=function(e){return new eW(0,e)},e.previous=function(e){return new eW(3,e)},e.previousOrSame=function(e){return new eW(1,e)},e}(),ez=function(e){function t(t){var r;return(r=e.call(this)||this)._ordinal=t,r}return p(t,e),t.prototype.adjustInto=function(e){switch(this._ordinal){case 0:return e.with(P.DAY_OF_MONTH,1);case 1:return e.with(P.DAY_OF_MONTH,e.range(P.DAY_OF_MONTH).maximum());case 2:return e.with(P.DAY_OF_MONTH,1).plus(1,O.MONTHS);case 3:return e.with(P.DAY_OF_YEAR,1);case 4:return e.with(P.DAY_OF_YEAR,e.range(P.DAY_OF_YEAR).maximum());case 5:return e.with(P.DAY_OF_YEAR,1).plus(1,O.YEARS)}throw new h("Unreachable")},t}(e$);ez.FIRST_DAY_OF_MONTH=new ez(0),ez.LAST_DAY_OF_MONTH=new ez(1),ez.FIRST_DAY_OF_NEXT_MONTH=new ez(2),ez.FIRST_DAY_OF_YEAR=new ez(3),ez.LAST_DAY_OF_YEAR=new ez(4),ez.FIRST_DAY_OF_NEXT_YEAR=new ez(5);var eG=function(e){function t(t,r){var n;return(n=e.call(this)||this)._ordinal=t,n._dowValue=r.value(),n}return p(t,e),t.prototype.adjustInto=function(e){if(this._ordinal>=0){var t=e.with(P.DAY_OF_MONTH,1),r=t.get(P.DAY_OF_WEEK),n=v.intMod(this._dowValue-r+7,7);return n+=(this._ordinal-1)*7,t.plus(n,O.DAYS)}var i=e.with(P.DAY_OF_MONTH,e.range(P.DAY_OF_MONTH).maximum()),o=i.get(P.DAY_OF_WEEK),a=this._dowValue-o;return a=(0===a?0:a>0?a-7:a)-(-this._ordinal-1)*7,i.plus(a,O.DAYS)},t}(e$),eW=function(e){function t(t,r){var n;return n=e.call(this)||this,_(r,"dayOfWeek"),n._relative=t,n._dowValue=r.value(),n}return p(t,e),t.prototype.adjustInto=function(e){var t=e.get(P.DAY_OF_WEEK);if(this._relative<2&&t===this._dowValue)return e;if((1&this._relative)==0){var r=t-this._dowValue;return e.plus(r>=0?7-r:-r,O.DAYS)}var n=this._dowValue-t;return e.minus(n>=0?7-n:-n,O.DAYS)},t}(e$),eK=function(e){function t(){return e.apply(this,arguments)||this}p(t,e),t.isLeapYear=function(e){return(3&e)==0&&(e%100!=0||e%400==0)};var r=t.prototype;return r._updateResolveMap=function(e,t,r){_(e,"fieldValues"),_(t,"field");var n=e.get(t);if(null!=n&&n!==r)throw new s("Invalid state, field: "+t+" "+n+" conflicts with "+t+" "+r);e.put(t,r)},r.resolveDate=function(e,t){if(e.containsKey(P.EPOCH_DAY))return e0.ofEpochDay(e.remove(P.EPOCH_DAY));var r=e.remove(P.PROLEPTIC_MONTH);null!=r&&(t!==j.LENIENT&&P.PROLEPTIC_MONTH.checkValidValue(r),this._updateResolveMap(e,P.MONTH_OF_YEAR,v.floorMod(r,12)+1),this._updateResolveMap(e,P.YEAR,v.floorDiv(r,12)));var n=e.remove(P.YEAR_OF_ERA);if(null!=n){t!==j.LENIENT&&P.YEAR_OF_ERA.checkValidValue(n);var i=e.remove(P.ERA);if(null==i){var o=e.get(P.YEAR);t===j.STRICT?null!=o?this._updateResolveMap(e,P.YEAR,o>0?n:v.safeSubtract(1,n)):e.put(P.YEAR_OF_ERA,n):this._updateResolveMap(e,P.YEAR,null==o||o>0?n:v.safeSubtract(1,n))}else if(1===i)this._updateResolveMap(e,P.YEAR,n);else if(0===i)this._updateResolveMap(e,P.YEAR,v.safeSubtract(1,n));else throw new s("Invalid value for era: "+i)}else e.containsKey(P.ERA)&&P.ERA.checkValidValue(e.get(P.ERA));if(e.containsKey(P.YEAR)){if(e.containsKey(P.MONTH_OF_YEAR)&&e.containsKey(P.DAY_OF_MONTH)){var a=P.YEAR.checkValidIntValue(e.remove(P.YEAR)),l=e.remove(P.MONTH_OF_YEAR),c=e.remove(P.DAY_OF_MONTH);if(t===j.LENIENT){var u=l-1,d=c-1;return e0.of(a,1,1).plusMonths(u).plusDays(d)}return t===j.SMART?(P.DAY_OF_MONTH.checkValidValue(c),4===l||6===l||9===l||11===l?c=Math.min(c,30):2===l&&(c=Math.min(c,x.FEBRUARY.length(eY.isLeap(a)))),e0.of(a,l,c)):e0.of(a,l,c)}if(e.containsKey(P.DAY_OF_YEAR)){var h=P.YEAR.checkValidIntValue(e.remove(P.YEAR));if(t===j.LENIENT){var f=v.safeSubtract(e.remove(P.DAY_OF_YEAR),1);return e0.ofYearDay(h,1).plusDays(f)}var p=P.DAY_OF_YEAR.checkValidIntValue(e.remove(P.DAY_OF_YEAR));return e0.ofYearDay(h,p)}if(e.containsKey(P.ALIGNED_WEEK_OF_YEAR)){if(e.containsKey(P.ALIGNED_DAY_OF_WEEK_IN_YEAR)){var m=P.YEAR.checkValidIntValue(e.remove(P.YEAR));if(t===j.LENIENT){var g=v.safeSubtract(e.remove(P.ALIGNED_WEEK_OF_YEAR),1),y=v.safeSubtract(e.remove(P.ALIGNED_DAY_OF_WEEK_IN_YEAR),1);return e0.of(m,1,1).plusWeeks(g).plusDays(y)}var _=P.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(e.remove(P.ALIGNED_WEEK_OF_YEAR)),E=P.ALIGNED_DAY_OF_WEEK_IN_YEAR.checkValidIntValue(e.remove(P.ALIGNED_DAY_OF_WEEK_IN_YEAR)),T=e0.of(m,1,1).plusDays((_-1)*7+(E-1));if(t===j.STRICT&&T.get(P.YEAR)!==m)throw new s("Strict mode rejected date parsed to a different year");return T}if(e.containsKey(P.DAY_OF_WEEK)){var b=P.YEAR.checkValidIntValue(e.remove(P.YEAR));if(t===j.LENIENT){var A=v.safeSubtract(e.remove(P.ALIGNED_WEEK_OF_YEAR),1),C=v.safeSubtract(e.remove(P.DAY_OF_WEEK),1);return e0.of(b,1,1).plusWeeks(A).plusDays(C)}var S=P.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(e.remove(P.ALIGNED_WEEK_OF_YEAR)),w=P.DAY_OF_WEEK.checkValidIntValue(e.remove(P.DAY_OF_WEEK)),I=e0.of(b,1,1).plusWeeks(S-1).with(eV.nextOrSame(U.of(w)));if(t===j.STRICT&&I.get(P.YEAR)!==b)throw new s("Strict mode rejected date parsed to a different month");return I}}}return null},r.date=function(e){return e0.from(e)},t}(A),eQ=function(e){function t(t,r){var n;return n=e.call(this)||this,_(t,"time"),E(t,e5,"time"),_(r,"offset"),E(r,X,"offset"),n._time=t,n._offset=r,n}p(t,e),t.from=function(e){if(_(e,"temporal"),e instanceof t)return e;if(e instanceof eJ)return e.toOffsetTime();try{var r=e5.from(e),n=X.from(e);return new t(r,n)}catch(t){throw new s("Unable to obtain OffsetTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""))}},t.now=function(e){return 0==arguments.length?t._now(e6.systemDefaultZone()):e instanceof e6?t._now(e):t._now(e6.system(e))},t._now=function(e){_(e,"clock");var r=e.instant();return t.ofInstant(r,e.zone().rules().offset(r))},t.of=function(){return arguments.length<=2?t.ofTimeAndOffset.apply(this,arguments):t.ofNumbers.apply(this,arguments)},t.ofNumbers=function(e,r,n,i,o){return new t(e5.of(e,r,n,i),o)},t.ofTimeAndOffset=function(e,r){return new t(e,r)},t.ofInstant=function(e,r){_(e,"instant"),E(e,e8,"instant"),_(r,"zone"),E(r,z,"zone");var n=r.rules().offset(e),i=e.epochSecond()%e5.SECONDS_PER_DAY;return(i=(i+n.totalSeconds())%e5.SECONDS_PER_DAY)<0&&(i+=e5.SECONDS_PER_DAY),new t(e5.ofSecondOfDay(i,e.nano()),n)},t.parse=function(e,r){return void 0===r&&(r=eq.ISO_OFFSET_TIME),_(r,"formatter"),r.parse(e,t.FROM)};var r=t.prototype;return r.adjustInto=function(e){return e.with(P.NANO_OF_DAY,this._time.toNanoOfDay()).with(P.OFFSET_SECONDS,this.offset().totalSeconds())},r.atDate=function(e){return eJ.of(e,this._time,this._offset)},r.format=function(e){return _(e,"formatter"),e.format(this,t.FROM)},r.get=function(t){return e.prototype.get.call(this,t)},r.getLong=function(e){return e instanceof P?e===P.OFFSET_SECONDS?this._offset.totalSeconds():this._time.getLong(e):e.getFrom(this)},r.hour=function(){return this._time.hour()},r.minute=function(){return this._time.minute()},r.second=function(){return this._time.second()},r.nano=function(){return this._time.nano()},r.offset=function(){return this._offset},r.isAfter=function(e){return _(e,"other"),this._toEpochNano()>e._toEpochNano()},r.isBefore=function(e){return _(e,"other"),this._toEpochNano()<e._toEpochNano()},r.isEqual=function(e){return _(e,"other"),this._toEpochNano()===e._toEpochNano()},r.isSupported=function(e){return e instanceof P?e.isTimeBased()||e===P.OFFSET_SECONDS:e instanceof O?e.isTimeBased():null!=e&&e.isSupportedBy(this)},r.minusHours=function(e){return this._withLocalTimeOffset(this._time.minusHours(e),this._offset)},r.minusMinutes=function(e){return this._withLocalTimeOffset(this._time.minusMinutes(e),this._offset)},r.minusSeconds=function(e){return this._withLocalTimeOffset(this._time.minusSeconds(e),this._offset)},r.minusNanos=function(e){return this._withLocalTimeOffset(this._time.minusNanos(e),this._offset)},r._minusAmount=function(e){return _(e),e.subtractFrom(this)},r._minusUnit=function(e,t){return this.plus(-1*e,t)},r._plusAmount=function(e){return _(e),e.addTo(this)},r._plusUnit=function(e,t){return t instanceof O?this._withLocalTimeOffset(this._time.plus(e,t),this._offset):t.addTo(this,e)},r.plusHours=function(e){return this._withLocalTimeOffset(this._time.plusHours(e),this._offset)},r.plusMinutes=function(e){return this._withLocalTimeOffset(this._time.plusMinutes(e),this._offset)},r.plusSeconds=function(e){return this._withLocalTimeOffset(this._time.plusSeconds(e),this._offset)},r.plusNanos=function(e){return this._withLocalTimeOffset(this._time.plusNanos(e),this._offset)},r.query=function(t){return(_(t,"query"),t===k.precision())?O.NANOS:t===k.offset()||t===k.zone()?this.offset():t===k.localTime()?this._time:t===k.chronology()||t===k.localDate()||t===k.zoneId()?null:e.prototype.query.call(this,t)},r.range=function(e){return e instanceof P?e===P.OFFSET_SECONDS?e.range():this._time.range(e):e.rangeRefinedBy(this)},r.toLocalTime=function(){return this._time},r.truncatedTo=function(e){return this._withLocalTimeOffset(this._time.truncatedTo(e),this._offset)},r.until=function(e,r){_(e,"endExclusive"),_(r,"unit");var n=t.from(e);if(r instanceof O){var i=n._toEpochNano()-this._toEpochNano();switch(r){case O.NANOS:return i;case O.MICROS:return v.intDiv(i,1e3);case O.MILLIS:return v.intDiv(i,1e6);case O.SECONDS:return v.intDiv(i,e5.NANOS_PER_SECOND);case O.MINUTES:return v.intDiv(i,e5.NANOS_PER_MINUTE);case O.HOURS:return v.intDiv(i,e5.NANOS_PER_HOUR);case O.HALF_DAYS:return v.intDiv(i,12*e5.NANOS_PER_HOUR)}throw new c("Unsupported unit: "+r)}return r.between(this,n)},r.withHour=function(e){return this._withLocalTimeOffset(this._time.withHour(e),this._offset)},r.withMinute=function(e){return this._withLocalTimeOffset(this._time.withMinute(e),this._offset)},r.withSecond=function(e){return this._withLocalTimeOffset(this._time.withSecond(e),this._offset)},r.withNano=function(e){return this._withLocalTimeOffset(this._time.withNano(e),this._offset)},r.withOffsetSameInstant=function(e){if(_(e,"offset"),e.equals(this._offset))return this;var r=e.totalSeconds()-this._offset.totalSeconds();return new t(this._time.plusSeconds(r),e)},r.withOffsetSameLocal=function(e){return null!=e&&e.equals(this._offset)?this:new t(this._time,e)},r._toEpochNano=function(){return this._time.toNanoOfDay()-this._offset.totalSeconds()*e5.NANOS_PER_SECOND},r._withAdjuster=function(e){return(_(e,"adjuster"),e instanceof e5)?this._withLocalTimeOffset(e,this._offset):e instanceof X?this._withLocalTimeOffset(this._time,e):e instanceof t?e:e.adjustInto(this)},r._withField=function(e,t){return(_(e,"field"),e instanceof P)?e===P.OFFSET_SECONDS?this._withLocalTimeOffset(this._time,X.ofTotalSeconds(e.checkValidIntValue(t))):this._withLocalTimeOffset(this._time.with(e,t),this._offset):e.adjustInto(this,t)},r._withLocalTimeOffset=function(e,r){return this._time===e&&this._offset.equals(r)?this:new t(e,r)},r.compareTo=function(e){if(_(e,"other"),E(e,t,"other"),this._offset.equals(e._offset))return this._time.compareTo(e._time);var r=v.compareNumbers(this._toEpochNano(),e._toEpochNano());return 0===r?this._time.compareTo(e._time):r},r.equals=function(e){return this===e||e instanceof t&&this._time.equals(e._time)&&this._offset.equals(e._offset)},r.hashCode=function(){return this._time.hashCode()^this._offset.hashCode()},r.toString=function(){return this._time.toString()+this._offset.toString()},r.toJSON=function(){return this.toString()},t}(Y),eX=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.query=function(t){if(t===k.zoneId()||t===k.zone())return this.zone();if(t===k.chronology())return this.toLocalDate().chronology();if(t===k.precision())return O.NANOS;if(t===k.offset())return this.offset();if(t===k.localDate())return e0.ofEpochDay(this.toLocalDate().toEpochDay());else if(t===k.localTime())return this.toLocalTime();return e.prototype.query.call(this,t)},r.format=function(e){return _(e,"formatter"),e.format(this)},r.toInstant=function(){return e8.ofEpochSecond(this.toEpochSecond(),this.toLocalTime().nano())},r.toEpochSecond=function(){var e=86400*this.toLocalDate().toEpochDay()+this.toLocalTime().toSecondOfDay();return e-this.offset().totalSeconds()},r.compareTo=function(e){_(e,"other");var t,r,n=v.compareNumbers(this.toEpochSecond(),e.toEpochSecond());return 0===n&&0==(n=this.toLocalTime().nano()-e.toLocalTime().nano())&&0===(n=this.toLocalDateTime().compareTo(e.toLocalDateTime()))&&(t=this.zone().id(),n=t<(r=e.zone().id())?-1:+(t>r)),n},r.isAfter=function(e){_(e,"other");var t=this.toEpochSecond(),r=e.toEpochSecond();return t>r||t===r&&this.toLocalTime().nano()>e.toLocalTime().nano()},r.isBefore=function(e){_(e,"other");var t=this.toEpochSecond(),r=e.toEpochSecond();return t<r||t===r&&this.toLocalTime().nano()<e.toLocalTime().nano()},r.isEqual=function(e){return _(e,"other"),this.toEpochSecond()===e.toEpochSecond()&&this.toLocalTime().nano()===e.toLocalTime().nano()},r.equals=function(e){return this===e||e instanceof t&&0===this.compareTo(e)},t}(Y),eZ=function(e){function t(t,r,n){var i;return _(t,"dateTime"),_(r,"offset"),_(n,"zone"),(i=e.call(this)||this)._dateTime=t,i._offset=r,i._zone=n,i}p(t,e),t.now=function(e){var r;return r=e instanceof z?e6.system(e):null==e?e6.systemDefaultZone():e,t.ofInstant(r.instant(),r.zone())},t.of=function(){return arguments.length<=2?t.of2.apply(this,arguments):3==arguments.length&&arguments[0]instanceof e0?t.of3.apply(this,arguments):t.of8.apply(this,arguments)},t.of3=function(e,r,n){return t.of2(e2.of(e,r),n)},t.of2=function(e,r){return t.ofLocal(e,r,null)},t.of8=function(e,r,n,i,o,a,s,l){var c=e2.of(e,r,n,i,o,a,s);return t.ofLocal(c,l,null)},t.ofLocal=function(e,r,n){if(_(e,"localDateTime"),_(r,"zone"),r instanceof X)return new t(e,r,r);var i=null,o=r.rules(),a=o.validOffsets(e);if(1===a.length)i=a[0];else if(0===a.length){var s=o.transition(e);e=e.plusSeconds(s.duration().seconds()),i=s.offsetAfter()}else i=null!=n&&a.some(function(e){return e.equals(n)})?n:_(a[0],"offset");return new t(e,i,r)},t.ofInstant=function(){return 2==arguments.length?t.ofInstant2.apply(this,arguments):t.ofInstant3.apply(this,arguments)},t.ofInstant2=function(e,r){return _(e,"instant"),_(r,"zone"),t._create(e.epochSecond(),e.nano(),r)},t.ofInstant3=function(e,r,n){return _(e,"localDateTime"),_(r,"offset"),_(n,"zone"),t._create(e.toEpochSecond(r),e.nano(),n)},t._create=function(e,r,n){var i=n.rules(),o=e8.ofEpochSecond(e,r),a=i.offset(o);return new t(e2.ofEpochSecond(e,r,a),a,n)},t.ofStrict=function(e,r,n){_(e,"localDateTime"),_(r,"offset"),_(n,"zone");var i=n.rules();if(!1===i.isValidOffset(e,r)){var o=i.transition(e);if(null!=o&&o.isGap())throw new s("LocalDateTime "+e+" does not exist in zone "+n+" due to a gap in the local time-line, typically caused by daylight savings");throw new s('ZoneOffset "'+r+'" is not valid for LocalDateTime "'+e+'" in zone "'+n+'"')}return new t(e,r,n)},t.ofLenient=function(e,r,n){if(_(e,"localDateTime"),_(r,"offset"),_(n,"zone"),n instanceof X&&!1===r.equals(n))throw new d("ZoneId must match ZoneOffset");return new t(e,r,n)},t.from=function(e){if(_(e,"temporal"),e instanceof t)return e;var r=z.from(e);if(e.isSupported(P.INSTANT_SECONDS)){var n=t._from(e,r);if(null!=n)return n}var i=e2.from(e);return t.of2(i,r)},t._from=function(e,r){try{return t.__from(e,r)}catch(e){if(!(e instanceof s))throw e}},t.__from=function(e,r){var n=e.getLong(P.INSTANT_SECONDS),i=e.get(P.NANO_OF_SECOND);return t._create(n,i,r)},t.parse=function(e,r){return void 0===r&&(r=eq.ISO_ZONED_DATE_TIME),_(r,"formatter"),r.parse(e,t.FROM)};var r=t.prototype;return r._resolveLocal=function(e){return _(e,"newDateTime"),t.ofLocal(e,this._zone,this._offset)},r._resolveInstant=function(e){return t.ofInstant3(e,this._offset,this._zone)},r._resolveOffset=function(e){return!1===e.equals(this._offset)&&this._zone.rules().isValidOffset(this._dateTime,e)?new t(this._dateTime,e,this._zone):this},r.isSupported=function(e){return e instanceof P||(e instanceof O?e.isDateBased()||e.isTimeBased():null!=e&&e.isSupportedBy(this))},r.range=function(e){return e instanceof P?e===P.INSTANT_SECONDS||e===P.OFFSET_SECONDS?e.range():this._dateTime.range(e):e.rangeRefinedBy(this)},r.get=function(e){return this.getLong(e)},r.getLong=function(e){if(e instanceof P){switch(e){case P.INSTANT_SECONDS:return this.toEpochSecond();case P.OFFSET_SECONDS:return this._offset.totalSeconds()}return this._dateTime.getLong(e)}return _(e,"field"),e.getFrom(this)},r.offset=function(){return this._offset},r.withEarlierOffsetAtOverlap=function(){var e=this._zone.rules().transition(this._dateTime);if(null!=e&&e.isOverlap()){var r=e.offsetBefore();if(!1===r.equals(this._offset))return new t(this._dateTime,r,this._zone)}return this},r.withLaterOffsetAtOverlap=function(){var e=this._zone.rules().transition(this.toLocalDateTime());if(null!=e){var r=e.offsetAfter();if(!1===r.equals(this._offset))return new t(this._dateTime,r,this._zone)}return this},r.zone=function(){return this._zone},r.withZoneSameLocal=function(e){return _(e,"zone"),this._zone.equals(e)?this:t.ofLocal(this._dateTime,e,this._offset)},r.withZoneSameInstant=function(e){return _(e,"zone"),this._zone.equals(e)?this:t._create(this._dateTime.toEpochSecond(this._offset),this._dateTime.nano(),e)},r.withFixedOffsetZone=function(){return this._zone.equals(this._offset)?this:new t(this._dateTime,this._offset,this._offset)},r.year=function(){return this._dateTime.year()},r.monthValue=function(){return this._dateTime.monthValue()},r.month=function(){return this._dateTime.month()},r.dayOfMonth=function(){return this._dateTime.dayOfMonth()},r.dayOfYear=function(){return this._dateTime.dayOfYear()},r.dayOfWeek=function(){return this._dateTime.dayOfWeek()},r.hour=function(){return this._dateTime.hour()},r.minute=function(){return this._dateTime.minute()},r.second=function(){return this._dateTime.second()},r.nano=function(){return this._dateTime.nano()},r._withAdjuster=function(r){if(r instanceof e0)return this._resolveLocal(e2.of(r,this._dateTime.toLocalTime()));if(r instanceof e5)return this._resolveLocal(e2.of(this._dateTime.toLocalDate(),r));if(r instanceof e2)return this._resolveLocal(r);if(r instanceof e8)return t._create(r.epochSecond(),r.nano(),this._zone);if(r instanceof X)return this._resolveOffset(r);return e.prototype._withAdjuster.call(this,r)},r._withField=function(e,r){if(e instanceof P){switch(e){case P.INSTANT_SECONDS:return t._create(r,this.nano(),this._zone);case P.OFFSET_SECONDS:var n=X.ofTotalSeconds(e.checkValidIntValue(r));return this._resolveOffset(n)}return this._resolveLocal(this._dateTime.with(e,r))}return e.adjustInto(this,r)},r.withYear=function(e){return this._resolveLocal(this._dateTime.withYear(e))},r.withMonth=function(e){return this._resolveLocal(this._dateTime.withMonth(e))},r.withDayOfMonth=function(e){return this._resolveLocal(this._dateTime.withDayOfMonth(e))},r.withDayOfYear=function(e){return this._resolveLocal(this._dateTime.withDayOfYear(e))},r.withHour=function(e){return this._resolveLocal(this._dateTime.withHour(e))},r.withMinute=function(e){return this._resolveLocal(this._dateTime.withMinute(e))},r.withSecond=function(e){return this._resolveLocal(this._dateTime.withSecond(e))},r.withNano=function(e){return this._resolveLocal(this._dateTime.withNano(e))},r.truncatedTo=function(e){return this._resolveLocal(this._dateTime.truncatedTo(e))},r._plusUnit=function(e,t){if(t instanceof O)if(t.isDateBased())return this._resolveLocal(this._dateTime.plus(e,t));else return this._resolveInstant(this._dateTime.plus(e,t));return _(t,"unit"),t.addTo(this,e)},r.plusYears=function(e){return this._resolveLocal(this._dateTime.plusYears(e))},r.plusMonths=function(e){return this._resolveLocal(this._dateTime.plusMonths(e))},r.plusWeeks=function(e){return this._resolveLocal(this._dateTime.plusWeeks(e))},r.plusDays=function(e){return this._resolveLocal(this._dateTime.plusDays(e))},r.plusHours=function(e){return this._resolveInstant(this._dateTime.plusHours(e))},r.plusMinutes=function(e){return this._resolveInstant(this._dateTime.plusMinutes(e))},r.plusSeconds=function(e){return this._resolveInstant(this._dateTime.plusSeconds(e))},r.plusNanos=function(e){return this._resolveInstant(this._dateTime.plusNanos(e))},r._minusUnit=function(e,t){return this._plusUnit(-1*e,t)},r.minusYears=function(e){return this.plusYears(-1*e)},r.minusMonths=function(e){return this.plusMonths(-1*e)},r.minusWeeks=function(e){return this.plusWeeks(-1*e)},r.minusDays=function(e){return this.plusDays(-1*e)},r.minusHours=function(e){return this.plusHours(-1*e)},r.minusMinutes=function(e){return this.plusMinutes(-1*e)},r.minusSeconds=function(e){return this.plusSeconds(-1*e)},r.minusNanos=function(e){return this.plusNanos(-1*e)},r.query=function(t){return t===k.localDate()?this.toLocalDate():(_(t,"query"),e.prototype.query.call(this,t))},r.until=function(e,r){var n=t.from(e);if(r instanceof O){if(n=n.withZoneSameInstant(this._zone),r.isDateBased())return this._dateTime.until(n._dateTime,r);var i=this._offset.totalSeconds()-n._offset.totalSeconds(),o=n._dateTime.plusSeconds(i);return this._dateTime.until(o,r)}return r.between(this,n)},r.toLocalDateTime=function(){return this._dateTime},r.toLocalDate=function(){return this._dateTime.toLocalDate()},r.toLocalTime=function(){return this._dateTime.toLocalTime()},r.toOffsetDateTime=function(){return eJ.of(this._dateTime,this._offset)},r.equals=function(e){return this===e||e instanceof t&&this._dateTime.equals(e._dateTime)&&this._offset.equals(e._offset)&&this._zone.equals(e._zone)},r.hashCode=function(){return v.hashCode(this._dateTime.hashCode(),this._offset.hashCode(),this._zone.hashCode())},r.toString=function(){var e=this._dateTime.toString()+this._offset.toString();return this._offset!==this._zone&&(e+="["+this._zone.toString()+"]"),e},r.toJSON=function(){return this.toString()},r.format=function(t){return e.prototype.format.call(this,t)},t}(eX),eJ=function(e){function t(t,r){var n;return n=e.call(this)||this,_(t,"dateTime"),E(t,e2,"dateTime"),_(r,"offset"),E(r,X,"offset"),n._dateTime=t,n._offset=r,n}p(t,e),t.from=function(e){if(_(e,"temporal"),e instanceof t)return e;try{var r=X.from(e);try{var n=e2.from(e);return t.of(n,r)}catch(n){var i=e8.from(e);return t.ofInstant(i,r)}}catch(t){throw new s("Unable to obtain OffsetDateTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""))}},t.now=function(e){if(0==arguments.length)return t.now(e6.systemDefaultZone());if(_(e,"clockOrZone"),e instanceof z)return t.now(e6.system(e));if(e instanceof e6){var r=e.instant();return t.ofInstant(r,e.zone().rules().offset(r))}throw new d("clockOrZone must be an instance of ZoneId or Clock")},t.of=function(){return arguments.length<=2?t.ofDateTime.apply(this,arguments):3==arguments.length?t.ofDateAndTime.apply(this,arguments):t.ofNumbers.apply(this,arguments)},t.ofDateTime=function(e,r){return new t(e,r)},t.ofDateAndTime=function(e,r,n){return new t(e2.of(e,r),n)},t.ofNumbers=function(e,r,n,i,o,a,s,l){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),new t(e2.of(e,r,n,i,o,a,s),l)},t.ofInstant=function(e,r){_(e,"instant"),_(r,"zone");var n=r.rules().offset(e);return new t(e2.ofEpochSecond(e.epochSecond(),e.nano(),n),n)},t.parse=function(e,r){return void 0===r&&(r=eq.ISO_OFFSET_DATE_TIME),_(r,"formatter"),r.parse(e,t.FROM)};var r=t.prototype;return r.adjustInto=function(e){return e.with(P.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(P.NANO_OF_DAY,this.toLocalTime().toNanoOfDay()).with(P.OFFSET_SECONDS,this.offset().totalSeconds())},r.until=function(e,r){var n=t.from(e);return r instanceof O?(n=n.withOffsetSameInstant(this._offset),this._dateTime.until(n._dateTime,r)):r.between(this,n)},r.atZoneSameInstant=function(e){return eZ.ofInstant(this._dateTime,this._offset,e)},r.atZoneSimilarLocal=function(e){return eZ.ofLocal(this._dateTime,e,this._offset)},r.query=function(t){if(_(t,"query"),t===k.chronology())return eK.INSTANCE;if(t===k.precision())return O.NANOS;if(t===k.offset()||t===k.zone())return this.offset();if(t===k.localDate())return this.toLocalDate();if(t===k.localTime())return this.toLocalTime();else if(t===k.zoneId())return null;return e.prototype.query.call(this,t)},r.get=function(t){if(t instanceof P){switch(t){case P.INSTANT_SECONDS:throw new s("Field too large for an int: "+t);case P.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.get(t)}return e.prototype.get.call(this,t)},r.getLong=function(e){if(e instanceof P){switch(e){case P.INSTANT_SECONDS:return this.toEpochSecond();case P.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.getLong(e)}return e.getFrom(this)},r.offset=function(){return this._offset},r.year=function(){return this._dateTime.year()},r.monthValue=function(){return this._dateTime.monthValue()},r.month=function(){return this._dateTime.month()},r.dayOfMonth=function(){return this._dateTime.dayOfMonth()},r.dayOfYear=function(){return this._dateTime.dayOfYear()},r.dayOfWeek=function(){return this._dateTime.dayOfWeek()},r.hour=function(){return this._dateTime.hour()},r.minute=function(){return this._dateTime.minute()},r.second=function(){return this._dateTime.second()},r.nano=function(){return this._dateTime.nano()},r.toLocalDateTime=function(){return this._dateTime},r.toLocalDate=function(){return this._dateTime.toLocalDate()},r.toLocalTime=function(){return this._dateTime.toLocalTime()},r.toOffsetTime=function(){return eQ.of(this._dateTime.toLocalTime(),this._offset)},r.toZonedDateTime=function(){return eZ.of(this._dateTime,this._offset)},r.toInstant=function(){return this._dateTime.toInstant(this._offset)},r.toEpochSecond=function(){return this._dateTime.toEpochSecond(this._offset)},r.isSupported=function(e){return e instanceof P||e instanceof O?e.isDateBased()||e.isTimeBased():null!=e&&e.isSupportedBy(this)},r.range=function(e){return e instanceof P?e===P.INSTANT_SECONDS||e===P.OFFSET_SECONDS?e.range():this._dateTime.range(e):e.rangeRefinedBy(this)},r._withAdjuster=function(e){return(_(e),e instanceof e0||e instanceof e5||e instanceof e2)?this._withDateTimeOffset(this._dateTime.with(e),this._offset):e instanceof e8?t.ofInstant(e,this._offset):e instanceof X?this._withDateTimeOffset(this._dateTime,e):e instanceof t?e:e.adjustInto(this)},r._withField=function(e,r){if(_(e),e instanceof P){switch(e){case P.INSTANT_SECONDS:return t.ofInstant(e8.ofEpochSecond(r,this.nano()),this._offset);case P.OFFSET_SECONDS:return this._withDateTimeOffset(this._dateTime,X.ofTotalSeconds(e.checkValidIntValue(r)))}return this._withDateTimeOffset(this._dateTime.with(e,r),this._offset)}return e.adjustInto(this,r)},r._withDateTimeOffset=function(e,r){return this._dateTime===e&&this._offset.equals(r)?this:new t(e,r)},r.withYear=function(e){return this._withDateTimeOffset(this._dateTime.withYear(e),this._offset)},r.withMonth=function(e){return this._withDateTimeOffset(this._dateTime.withMonth(e),this._offset)},r.withDayOfMonth=function(e){return this._withDateTimeOffset(this._dateTime.withDayOfMonth(e),this._offset)},r.withDayOfYear=function(e){return this._withDateTimeOffset(this._dateTime.withDayOfYear(e),this._offset)},r.withHour=function(e){return this._withDateTimeOffset(this._dateTime.withHour(e),this._offset)},r.withMinute=function(e){return this._withDateTimeOffset(this._dateTime.withMinute(e),this._offset)},r.withSecond=function(e){return this._withDateTimeOffset(this._dateTime.withSecond(e),this._offset)},r.withNano=function(e){return this._withDateTimeOffset(this._dateTime.withNano(e),this._offset)},r.withOffsetSameLocal=function(e){return _(e,"offset"),this._withDateTimeOffset(this._dateTime,e)},r.withOffsetSameInstant=function(e){if(_(e,"offset"),e.equals(this._offset))return this;var r=e.totalSeconds()-this._offset.totalSeconds();return new t(this._dateTime.plusSeconds(r),e)},r.truncatedTo=function(e){return this._withDateTimeOffset(this._dateTime.truncatedTo(e),this._offset)},r._plusAmount=function(e){return _(e,"amount"),e.addTo(this)},r._plusUnit=function(e,t){return t instanceof O?this._withDateTimeOffset(this._dateTime.plus(e,t),this._offset):t.addTo(this,e)},r.plusYears=function(e){return this._withDateTimeOffset(this._dateTime.plusYears(e),this._offset)},r.plusMonths=function(e){return this._withDateTimeOffset(this._dateTime.plusMonths(e),this._offset)},r.plusWeeks=function(e){return this._withDateTimeOffset(this._dateTime.plusWeeks(e),this._offset)},r.plusDays=function(e){return this._withDateTimeOffset(this._dateTime.plusDays(e),this._offset)},r.plusHours=function(e){return this._withDateTimeOffset(this._dateTime.plusHours(e),this._offset)},r.plusMinutes=function(e){return this._withDateTimeOffset(this._dateTime.plusMinutes(e),this._offset)},r.plusSeconds=function(e){return this._withDateTimeOffset(this._dateTime.plusSeconds(e),this._offset)},r.plusNanos=function(e){return this._withDateTimeOffset(this._dateTime.plusNanos(e),this._offset)},r._minusAmount=function(e){return _(e),e.subtractFrom(this)},r._minusUnit=function(e,t){return this.plus(-1*e,t)},r.minusYears=function(e){return this._withDateTimeOffset(this._dateTime.minusYears(e),this._offset)},r.minusMonths=function(e){return this._withDateTimeOffset(this._dateTime.minusMonths(e),this._offset)},r.minusWeeks=function(e){return this._withDateTimeOffset(this._dateTime.minusWeeks(e),this._offset)},r.minusDays=function(e){return this._withDateTimeOffset(this._dateTime.minusDays(e),this._offset)},r.minusHours=function(e){return this._withDateTimeOffset(this._dateTime.minusHours(e),this._offset)},r.minusMinutes=function(e){return this._withDateTimeOffset(this._dateTime.minusMinutes(e),this._offset)},r.minusSeconds=function(e){return this._withDateTimeOffset(this._dateTime.minusSeconds(e),this._offset)},r.minusNanos=function(e){return this._withDateTimeOffset(this._dateTime.minusNanos(e),this._offset)},r.compareTo=function(e){if(_(e,"other"),E(e,t,"other"),this.offset().equals(e.offset()))return this.toLocalDateTime().compareTo(e.toLocalDateTime());var r=v.compareNumbers(this.toEpochSecond(),e.toEpochSecond());return 0===r&&0==(r=this.toLocalTime().nano()-e.toLocalTime().nano())&&(r=this.toLocalDateTime().compareTo(e.toLocalDateTime())),r},r.isAfter=function(e){_(e,"other");var t=this.toEpochSecond(),r=e.toEpochSecond();return t>r||t===r&&this.toLocalTime().nano()>e.toLocalTime().nano()},r.isBefore=function(e){_(e,"other");var t=this.toEpochSecond(),r=e.toEpochSecond();return t<r||t===r&&this.toLocalTime().nano()<e.toLocalTime().nano()},r.isEqual=function(e){return _(e,"other"),this.toEpochSecond()===e.toEpochSecond()&&this.toLocalTime().nano()===e.toLocalTime().nano()},r.equals=function(e){return this===e||e instanceof t&&this._dateTime.equals(e._dateTime)&&this._offset.equals(e._offset)},r.hashCode=function(){return this._dateTime.hashCode()^this._offset.hashCode()},r.toString=function(){return this._dateTime.toString()+this._offset.toString()},r.toJSON=function(){return this.toString()},r.format=function(e){return _(e,"formatter"),e.format(this)},t}(Y),e0=function(e){function t(r,n,i){var o;return o=e.call(this)||this,_(r,"year"),_(n,"month"),_(i,"dayOfMonth"),n instanceof x&&(n=n.value()),o._year=v.safeToInt(r),o._month=v.safeToInt(n),o._day=v.safeToInt(i),t._validate(o._year,o._month,o._day),o}p(t,e),t.now=function(e){var r;return r=null==e?e6.systemDefaultZone():e instanceof z?e6.system(e):e,t.ofInstant(r.instant(),r.zone())},t.ofInstant=function(e,r){void 0===r&&(r=z.systemDefault()),_(e,"instant");var n=r.rules().offset(e),i=e.epochSecond()+n.totalSeconds(),o=v.floorDiv(i,e5.SECONDS_PER_DAY);return t.ofEpochDay(o)},t.of=function(e,r,n){return new t(e,r,n)},t.ofYearDay=function(e,r){P.YEAR.checkValidValue(e);var n=eK.isLeapYear(e);366===r&&!1===n&&y(!1,"Invalid date 'DayOfYear 366' as '"+e+"' is not a leap year",s);var i=x.of(Math.floor((r-1)/31+1));r>i.firstDayOfYear(n)+i.length(n)-1&&(i=i.plus(1));var o=r-i.firstDayOfYear(n)+1;return new t(e,i.value(),o)},t.ofEpochDay=function(e){void 0===e&&(e=0),r=0,(a=e+719528-60)<0&&(r=400*(n=v.intDiv(a+1,146097)-1),a+=-(146097*n)),o=v.intDiv(400*a+591,146097),(i=a-(365*o+v.intDiv(o,4)-v.intDiv(o,100)+v.intDiv(o,400)))<0&&(i=a-(365*--o+v.intDiv(o,4)-v.intDiv(o,100)+v.intDiv(o,400))),o+=r;var r,n,i,o,a,s=i,l=v.intDiv(5*s+2,153),c=s-v.intDiv(306*l+5,10)+1;return new t(o+=v.intDiv(l,10),(l+2)%12+1,c)},t.from=function(e){_(e,"temporal");var t=e.query(k.localDate());if(null==t)throw new s("Unable to obtain LocalDate from TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""));return t},t.parse=function(e,r){return void 0===r&&(r=eq.ISO_LOCAL_DATE),y(null!=r,"formatter",f),r.parse(e,t.FROM)},t._resolvePreviousValid=function(e,r,n){switch(r){case 2:n=Math.min(n,eK.isLeapYear(e)?29:28);break;case 4:case 6:case 9:case 11:n=Math.min(n,30)}return t.of(e,r,n)},t._validate=function(e,t,r){var n;if(P.YEAR.checkValidValue(e),P.MONTH_OF_YEAR.checkValidValue(t),P.DAY_OF_MONTH.checkValidValue(r),r>28){switch(n=31,t){case 2:n=eK.isLeapYear(e)?29:28;break;case 4:case 6:case 9:case 11:n=30}r>n&&(29===r?y(!1,"Invalid date 'February 29' as '"+e+"' is not a leap year",s):y(!1,"Invalid date '"+e+"' '"+t+"' '"+r+"'",s))}};var r=t.prototype;return r.isSupported=function(t){return e.prototype.isSupported.call(this,t)},r.range=function(e){if(e instanceof P){if(e.isDateBased()){switch(e){case P.DAY_OF_MONTH:return N.of(1,this.lengthOfMonth());case P.DAY_OF_YEAR:return N.of(1,this.lengthOfYear());case P.ALIGNED_WEEK_OF_MONTH:return N.of(1,this.month()===x.FEBRUARY&&!1===this.isLeapYear()?4:5);case P.YEAR_OF_ERA:return this._year<=0?N.of(1,eY.MAX_VALUE+1):N.of(1,eY.MAX_VALUE)}return e.range()}throw new c("Unsupported field: "+e)}return e.rangeRefinedBy(this)},r.get=function(e){return this.getLong(e)},r.getLong=function(e){return(y(null!=e,"",f),e instanceof P)?this._get0(e):e.getFrom(this)},r._get0=function(e){switch(e){case P.DAY_OF_WEEK:return this.dayOfWeek().value();case P.ALIGNED_DAY_OF_WEEK_IN_MONTH:return v.intMod(this._day-1,7)+1;case P.ALIGNED_DAY_OF_WEEK_IN_YEAR:return v.intMod(this.dayOfYear()-1,7)+1;case P.DAY_OF_MONTH:return this._day;case P.DAY_OF_YEAR:return this.dayOfYear();case P.EPOCH_DAY:return this.toEpochDay();case P.ALIGNED_WEEK_OF_MONTH:return v.intDiv(this._day-1,7)+1;case P.ALIGNED_WEEK_OF_YEAR:return v.intDiv(this.dayOfYear()-1,7)+1;case P.MONTH_OF_YEAR:return this._month;case P.PROLEPTIC_MONTH:return this._prolepticMonth();case P.YEAR_OF_ERA:return this._year>=1?this._year:1-this._year;case P.YEAR:return this._year;case P.ERA:return+(this._year>=1)}throw new c("Unsupported field: "+e)},r._prolepticMonth=function(){return 12*this._year+(this._month-1)},r.chronology=function(){return eK.INSTANCE},r.year=function(){return this._year},r.monthValue=function(){return this._month},r.month=function(){return x.of(this._month)},r.dayOfMonth=function(){return this._day},r.dayOfYear=function(){return this.month().firstDayOfYear(this.isLeapYear())+this._day-1},r.dayOfWeek=function(){var e=v.floorMod(this.toEpochDay()+3,7);return U.of(e+1)},r.isLeapYear=function(){return eK.isLeapYear(this._year)},r.lengthOfMonth=function(){switch(this._month){case 2:return this.isLeapYear()?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},r.lengthOfYear=function(){return this.isLeapYear()?366:365},r._withAdjuster=function(r){return(_(r,"adjuster"),r instanceof t)?r:e.prototype._withAdjuster.call(this,r)},r._withField=function(e,r){if(y(null!=e,"field",f),e instanceof P){switch(e.checkValidValue(r),e){case P.DAY_OF_WEEK:return this.plusDays(r-this.dayOfWeek().value());case P.ALIGNED_DAY_OF_WEEK_IN_MONTH:return this.plusDays(r-this.getLong(P.ALIGNED_DAY_OF_WEEK_IN_MONTH));case P.ALIGNED_DAY_OF_WEEK_IN_YEAR:return this.plusDays(r-this.getLong(P.ALIGNED_DAY_OF_WEEK_IN_YEAR));case P.DAY_OF_MONTH:return this.withDayOfMonth(r);case P.DAY_OF_YEAR:return this.withDayOfYear(r);case P.EPOCH_DAY:return t.ofEpochDay(r);case P.ALIGNED_WEEK_OF_MONTH:return this.plusWeeks(r-this.getLong(P.ALIGNED_WEEK_OF_MONTH));case P.ALIGNED_WEEK_OF_YEAR:return this.plusWeeks(r-this.getLong(P.ALIGNED_WEEK_OF_YEAR));case P.MONTH_OF_YEAR:return this.withMonth(r);case P.PROLEPTIC_MONTH:return this.plusMonths(r-this.getLong(P.PROLEPTIC_MONTH));case P.YEAR_OF_ERA:return this.withYear(this._year>=1?r:1-r);case P.YEAR:return this.withYear(r);case P.ERA:return this.getLong(P.ERA)===r?this:this.withYear(1-this._year)}throw new c("Unsupported field: "+e)}return e.adjustInto(this,r)},r.withYear=function(e){return this._year===e?this:(P.YEAR.checkValidValue(e),t._resolvePreviousValid(e,this._month,this._day))},r.withMonth=function(e){var r=e instanceof x?e.value():e;return this._month===r?this:(P.MONTH_OF_YEAR.checkValidValue(r),t._resolvePreviousValid(this._year,r,this._day))},r.withDayOfMonth=function(e){return this._day===e?this:t.of(this._year,this._month,e)},r.withDayOfYear=function(e){return this.dayOfYear()===e?this:t.ofYearDay(this._year,e)},r._plusUnit=function(e,t){if(_(e,"amountToAdd"),_(t,"unit"),t instanceof O){switch(t){case O.DAYS:return this.plusDays(e);case O.WEEKS:return this.plusWeeks(e);case O.MONTHS:return this.plusMonths(e);case O.YEARS:return this.plusYears(e);case O.DECADES:return this.plusYears(v.safeMultiply(e,10));case O.CENTURIES:return this.plusYears(v.safeMultiply(e,100));case O.MILLENNIA:return this.plusYears(v.safeMultiply(e,1e3));case O.ERAS:return this.with(P.ERA,v.safeAdd(this.getLong(P.ERA),e))}throw new c("Unsupported unit: "+t)}return t.addTo(this,e)},r.plusYears=function(e){if(0===e)return this;var r=P.YEAR.checkValidIntValue(this._year+e);return t._resolvePreviousValid(r,this._month,this._day)},r.plusMonths=function(e){if(0===e)return this;var r=12*this._year+(this._month-1)+e,n=P.YEAR.checkValidIntValue(v.floorDiv(r,12)),i=v.floorMod(r,12)+1;return t._resolvePreviousValid(n,i,this._day)},r.plusWeeks=function(e){return this.plusDays(v.safeMultiply(e,7))},r.plusDays=function(e){if(0===e)return this;var r=v.safeAdd(this.toEpochDay(),e);return t.ofEpochDay(r)},r._minusUnit=function(e,t){return _(e,"amountToSubtract"),_(t,"unit"),this._plusUnit(-1*e,t)},r.minusYears=function(e){return this.plusYears(-1*e)},r.minusMonths=function(e){return this.plusMonths(-1*e)},r.minusWeeks=function(e){return this.plusWeeks(-1*e)},r.minusDays=function(e){return this.plusDays(-1*e)},r.query=function(t){return(_(t,"query"),t===k.localDate())?this:e.prototype.query.call(this,t)},r.adjustInto=function(t){return e.prototype.adjustInto.call(this,t)},r.until=function(e,t){return arguments.length<2?this.until1(e):this.until2(e,t)},r.until2=function(e,r){var n=t.from(e);if(r instanceof O){switch(r){case O.DAYS:return this.daysUntil(n);case O.WEEKS:return v.intDiv(this.daysUntil(n),7);case O.MONTHS:return this._monthsUntil(n);case O.YEARS:return v.intDiv(this._monthsUntil(n),12);case O.DECADES:return v.intDiv(this._monthsUntil(n),120);case O.CENTURIES:return v.intDiv(this._monthsUntil(n),1200);case O.MILLENNIA:return v.intDiv(this._monthsUntil(n),12e3);case O.ERAS:return n.getLong(P.ERA)-this.getLong(P.ERA)}throw new c("Unsupported unit: "+r)}return r.between(this,n)},r.daysUntil=function(e){return e.toEpochDay()-this.toEpochDay()},r._monthsUntil=function(e){var t=32*this._prolepticMonth()+this.dayOfMonth(),r=32*e._prolepticMonth()+e.dayOfMonth();return v.intDiv(r-t,32)},r.until1=function(e){var r=t.from(e),n=r._prolepticMonth()-this._prolepticMonth(),i=r._day-this._day;if(n>0&&i<0){n--;var o=this.plusMonths(n);i=r.toEpochDay()-o.toEpochDay()}else n<0&&i>0&&(n++,i-=r.lengthOfMonth());var a=v.intDiv(n,12),s=v.intMod(n,12);return B.of(a,s,i)},r.atTime=function(){return 1==arguments.length?this.atTime1.apply(this,arguments):this.atTime4.apply(this,arguments)},r.atTime1=function(e){if(_(e,"time"),e instanceof e5)return e2.of(this,e);if(e instanceof eQ)return this._atTimeOffsetTime(e);throw new d("time must be an instance of LocalTime or OffsetTime"+(e&&e.constructor&&e.constructor.name?", but is "+e.constructor.name:""))},r.atTime4=function(e,t,r,n){return void 0===r&&(r=0),void 0===n&&(n=0),this.atTime1(e5.of(e,t,r,n))},r._atTimeOffsetTime=function(e){return eJ.of(e2.of(this,e.toLocalTime()),e.offset())},r.atStartOfDay=function(e){return null!=e?this._atStartOfDayWithZone(e):e2.of(this,e5.MIDNIGHT)},r._atStartOfDayWithZone=function(e){_(e,"zone");var t=this.atTime(e5.MIDNIGHT);if(e instanceof X==!1){var r=e.rules().transition(t);null!=r&&r.isGap()&&(t=r.dateTimeAfter())}return eZ.of(t,e)},r.toEpochDay=function(){var e,t=this._year,r=this._month;return e=0+365*t,t>=0?e+=v.intDiv(t+3,4)-v.intDiv(t+99,100)+v.intDiv(t+399,400):e-=v.intDiv(t,-4)-v.intDiv(t,-100)+v.intDiv(t,-400),e+=v.intDiv(367*r-362,12),e+=this.dayOfMonth()-1,r>2&&(e--,!eK.isLeapYear(t)&&e--),e-719528},r.compareTo=function(e){return _(e,"other"),E(e,t,"other"),this._compareTo0(e)},r._compareTo0=function(e){var t=this._year-e._year;return 0===t&&0==(t=this._month-e._month)&&(t=this._day-e._day),t},r.isAfter=function(e){return this.compareTo(e)>0},r.isBefore=function(e){return 0>this.compareTo(e)},r.isEqual=function(e){return 0===this.compareTo(e)},r.equals=function(e){return this===e||e instanceof t&&0===this._compareTo0(e)},r.hashCode=function(){var e=this._year,t=this._month,r=this._day;return v.hash(0xfffff800&e^(e<<11)+(t<<6)+r)},r.toString=function(){var e=this._year,t=this._month,r=this._day;return(1e3>Math.abs(e)?e<0?"-"+(""+(e-1e4)).slice(-4):(""+(e+1e4)).slice(-4):e>9999?"+"+e:""+e)+(t<10?"-0"+t:"-"+t)+(r<10?"-0"+r:"-"+r)},r.toJSON=function(){return this.toString()},r.format=function(t){return _(t,"formatter"),E(t,eq,"formatter"),e.prototype.format.call(this,t)},t}($),e1=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.chronology=function(){return this.toLocalDate().chronology()},r.query=function(t){if(t===k.chronology())return this.chronology();if(t===k.precision())return O.NANOS;if(t===k.localDate())return e0.ofEpochDay(this.toLocalDate().toEpochDay());if(t===k.localTime())return this.toLocalTime();if(t===k.zone()||t===k.zoneId()||t===k.offset())return null;return e.prototype.query.call(this,t)},r.adjustInto=function(e){return e.with(P.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(P.NANO_OF_DAY,this.toLocalTime().toNanoOfDay())},r.toInstant=function(e){return E(e,X,"zoneId"),e8.ofEpochSecond(this.toEpochSecond(e),this.toLocalTime().nano())},r.toEpochSecond=function(e){_(e,"offset");var t=86400*this.toLocalDate().toEpochDay()+this.toLocalTime().toSecondOfDay();return t-=e.totalSeconds(),v.safeToInt(t)},t}(Y),e2=function(e){function t(t,r){var n;return n=e.call(this)||this,E(t,e0,"date"),E(r,e5,"time"),n._date=t,n._time=r,n}p(t,e),t.now=function(e){return null==e?t._now(e6.systemDefaultZone()):e instanceof e6?t._now(e):t._now(e6.system(e))},t._now=function(e){return _(e,"clock"),t.ofInstant(e.instant(),e.zone())},t._ofEpochMillis=function(e,r){var n=v.floorDiv(e,1e3)+r.totalSeconds(),i=v.floorDiv(n,e5.SECONDS_PER_DAY),o=v.floorMod(n,e5.SECONDS_PER_DAY),a=1e6*v.floorMod(e,1e3);return new t(e0.ofEpochDay(i),e5.ofSecondOfDay(o,a))},t.of=function(){return arguments.length<=2?t.ofDateAndTime.apply(this,arguments):t.ofNumbers.apply(this,arguments)},t.ofNumbers=function(e,r,n,i,o,a,s){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),new t(e0.of(e,r,n),e5.of(i,o,a,s))},t.ofDateAndTime=function(e,r){return _(e,"date"),_(r,"time"),new t(e,r)},t.ofInstant=function(e,r){void 0===r&&(r=z.systemDefault()),_(e,"instant"),E(e,e8,"instant"),_(r,"zone");var n=r.rules().offset(e);return t.ofEpochSecond(e.epochSecond(),e.nano(),n)},t.ofEpochSecond=function(e,r,n){void 0===e&&(e=0),void 0===r&&(r=0),2==arguments.length&&r instanceof X&&(n=r,r=0),_(n,"offset");var i=e+n.totalSeconds(),o=v.floorDiv(i,e5.SECONDS_PER_DAY),a=v.floorMod(i,e5.SECONDS_PER_DAY);return new t(e0.ofEpochDay(o),e5.ofSecondOfDay(a,r))},t.from=function(e){if(_(e,"temporal"),e instanceof t)return e;if(e instanceof eZ)return e.toLocalDateTime();try{var r=e0.from(e),n=e5.from(e);return new t(r,n)}catch(t){throw new s("Unable to obtain LocalDateTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""))}},t.parse=function(e,r){return void 0===r&&(r=eq.ISO_LOCAL_DATE_TIME),_(r,"formatter"),r.parse(e,t.FROM)};var r=t.prototype;return r._withDateTime=function(e,r){return this._date.equals(e)&&this._time.equals(r)?this:new t(e,r)},r.isSupported=function(e){return e instanceof P||e instanceof O?e.isDateBased()||e.isTimeBased():null!=e&&e.isSupportedBy(this)},r.range=function(e){return e instanceof P?e.isTimeBased()?this._time.range(e):this._date.range(e):e.rangeRefinedBy(this)},r.get=function(t){return t instanceof P?t.isTimeBased()?this._time.get(t):this._date.get(t):e.prototype.get.call(this,t)},r.getLong=function(e){return(_(e,"field"),e instanceof P)?e.isTimeBased()?this._time.getLong(e):this._date.getLong(e):e.getFrom(this)},r.year=function(){return this._date.year()},r.monthValue=function(){return this._date.monthValue()},r.month=function(){return this._date.month()},r.dayOfMonth=function(){return this._date.dayOfMonth()},r.dayOfYear=function(){return this._date.dayOfYear()},r.dayOfWeek=function(){return this._date.dayOfWeek()},r.hour=function(){return this._time.hour()},r.minute=function(){return this._time.minute()},r.second=function(){return this._time.second()},r.nano=function(){return this._time.nano()},r._withAdjuster=function(r){return(_(r,"adjuster"),r instanceof e0)?this._withDateTime(r,this._time):r instanceof e5?this._withDateTime(this._date,r):r instanceof t?r:e.prototype._withAdjuster.call(this,r)},r._withField=function(e,t){if(_(e,"field"),e instanceof P)if(e.isTimeBased())return this._withDateTime(this._date,this._time.with(e,t));else return this._withDateTime(this._date.with(e,t),this._time);return e.adjustInto(this,t)},r.withYear=function(e){return this._withDateTime(this._date.withYear(e),this._time)},r.withMonth=function(e){return this._withDateTime(this._date.withMonth(e),this._time)},r.withDayOfMonth=function(e){return this._withDateTime(this._date.withDayOfMonth(e),this._time)},r.withDayOfYear=function(e){return this._withDateTime(this._date.withDayOfYear(e),this._time)},r.withHour=function(e){var t=this._time.withHour(e);return this._withDateTime(this._date,t)},r.withMinute=function(e){var t=this._time.withMinute(e);return this._withDateTime(this._date,t)},r.withSecond=function(e){var t=this._time.withSecond(e);return this._withDateTime(this._date,t)},r.withNano=function(e){var t=this._time.withNano(e);return this._withDateTime(this._date,t)},r.truncatedTo=function(e){return this._withDateTime(this._date,this._time.truncatedTo(e))},r._plusUnit=function(e,t){if(_(t,"unit"),t instanceof O){switch(t){case O.NANOS:return this.plusNanos(e);case O.MICROS:return this.plusDays(v.intDiv(e,e5.MICROS_PER_DAY)).plusNanos(1e3*v.intMod(e,e5.MICROS_PER_DAY));case O.MILLIS:return this.plusDays(v.intDiv(e,e5.MILLIS_PER_DAY)).plusNanos(1e6*v.intMod(e,e5.MILLIS_PER_DAY));case O.SECONDS:return this.plusSeconds(e);case O.MINUTES:return this.plusMinutes(e);case O.HOURS:return this.plusHours(e);case O.HALF_DAYS:return this.plusDays(v.intDiv(e,256)).plusHours(12*v.intMod(e,256))}return this._withDateTime(this._date.plus(e,t),this._time)}return t.addTo(this,e)},r.plusYears=function(e){var t=this._date.plusYears(e);return this._withDateTime(t,this._time)},r.plusMonths=function(e){var t=this._date.plusMonths(e);return this._withDateTime(t,this._time)},r.plusWeeks=function(e){var t=this._date.plusWeeks(e);return this._withDateTime(t,this._time)},r.plusDays=function(e){var t=this._date.plusDays(e);return this._withDateTime(t,this._time)},r.plusHours=function(e){return this._plusWithOverflow(this._date,e,0,0,0,1)},r.plusMinutes=function(e){return this._plusWithOverflow(this._date,0,e,0,0,1)},r.plusSeconds=function(e){return this._plusWithOverflow(this._date,0,0,e,0,1)},r.plusNanos=function(e){return this._plusWithOverflow(this._date,0,0,0,e,1)},r._minusUnit=function(e,t){return _(t,"unit"),this._plusUnit(-1*e,t)},r.minusYears=function(e){return this.plusYears(-1*e)},r.minusMonths=function(e){return this.plusMonths(-1*e)},r.minusWeeks=function(e){return this.plusWeeks(-1*e)},r.minusDays=function(e){return this.plusDays(-1*e)},r.minusHours=function(e){return this._plusWithOverflow(this._date,e,0,0,0,-1)},r.minusMinutes=function(e){return this._plusWithOverflow(this._date,0,e,0,0,-1)},r.minusSeconds=function(e){return this._plusWithOverflow(this._date,0,0,e,0,-1)},r.minusNanos=function(e){return this._plusWithOverflow(this._date,0,0,0,e,-1)},r._plusWithOverflow=function(e,t,r,n,i,o){if(0===t&&0===r&&0===n&&0===i)return this._withDateTime(e,this._time);var a=v.intDiv(i,e5.NANOS_PER_DAY)+v.intDiv(n,e5.SECONDS_PER_DAY)+v.intDiv(r,e5.MINUTES_PER_DAY)+v.intDiv(t,e5.HOURS_PER_DAY);a*=o;var s=v.intMod(i,e5.NANOS_PER_DAY)+v.intMod(n,e5.SECONDS_PER_DAY)*e5.NANOS_PER_SECOND+v.intMod(r,e5.MINUTES_PER_DAY)*e5.NANOS_PER_MINUTE+v.intMod(t,e5.HOURS_PER_DAY)*e5.NANOS_PER_HOUR,l=this._time.toNanoOfDay();s=s*o+l,a+=v.floorDiv(s,e5.NANOS_PER_DAY);var c=v.floorMod(s,e5.NANOS_PER_DAY),u=c===l?this._time:e5.ofNanoOfDay(c);return this._withDateTime(e.plusDays(a),u)},r.query=function(t){return(_(t,"query"),t===k.localDate())?this.toLocalDate():e.prototype.query.call(this,t)},r.adjustInto=function(t){return e.prototype.adjustInto.call(this,t)},r.until=function(e,r){_(e,"endExclusive"),_(r,"unit");var n=t.from(e);if(r instanceof O){if(r.isTimeBased()){var i=this._date.daysUntil(n._date),o=n._time.toNanoOfDay()-this._time.toNanoOfDay();i>0&&o<0?(i--,o+=e5.NANOS_PER_DAY):i<0&&o>0&&(i++,o-=e5.NANOS_PER_DAY);var a=i;switch(r){case O.NANOS:return a=v.safeMultiply(a,e5.NANOS_PER_DAY),v.safeAdd(a,o);case O.MICROS:return a=v.safeMultiply(a,e5.MICROS_PER_DAY),v.safeAdd(a,v.intDiv(o,1e3));case O.MILLIS:return a=v.safeMultiply(a,e5.MILLIS_PER_DAY),v.safeAdd(a,v.intDiv(o,1e6));case O.SECONDS:return a=v.safeMultiply(a,e5.SECONDS_PER_DAY),v.safeAdd(a,v.intDiv(o,e5.NANOS_PER_SECOND));case O.MINUTES:return a=v.safeMultiply(a,e5.MINUTES_PER_DAY),v.safeAdd(a,v.intDiv(o,e5.NANOS_PER_MINUTE));case O.HOURS:return a=v.safeMultiply(a,e5.HOURS_PER_DAY),v.safeAdd(a,v.intDiv(o,e5.NANOS_PER_HOUR));case O.HALF_DAYS:return a=v.safeMultiply(a,2),v.safeAdd(a,v.intDiv(o,12*e5.NANOS_PER_HOUR))}throw new c("Unsupported unit: "+r)}var s=n._date,l=n._time;return s.isAfter(this._date)&&l.isBefore(this._time)?s=s.minusDays(1):s.isBefore(this._date)&&l.isAfter(this._time)&&(s=s.plusDays(1)),this._date.until(s,r)}return r.between(this,n)},r.atOffset=function(e){return eJ.of(this,e)},r.atZone=function(e){return eZ.of(this,e)},r.toLocalDate=function(){return this._date},r.toLocalTime=function(){return this._time},r.compareTo=function(e){return _(e,"other"),E(e,t,"other"),this._compareTo0(e)},r._compareTo0=function(e){var t=this._date.compareTo(e.toLocalDate());return 0===t&&(t=this._time.compareTo(e.toLocalTime())),t},r.isAfter=function(e){return this.compareTo(e)>0},r.isBefore=function(e){return 0>this.compareTo(e)},r.isEqual=function(e){return 0===this.compareTo(e)},r.equals=function(e){return this===e||e instanceof t&&this._date.equals(e._date)&&this._time.equals(e._time)},r.hashCode=function(){return this._date.hashCode()^this._time.hashCode()},r.toString=function(){return this._date.toString()+"T"+this._time.toString()},r.toJSON=function(){return this.toString()},r.format=function(e){return _(e,"formatter"),e.format(this)},t}(e1),e5=function(e){function t(r,n,i,o){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0);var a=e.call(this)||this,s=v.safeToInt(r),l=v.safeToInt(n),c=v.safeToInt(i),u=v.safeToInt(o);return(t._validate(s,l,c,u),0===l&&0===c&&0===u)?(t.HOURS[s]||(a._hour=s,a._minute=l,a._second=c,a._nano=u,t.HOURS[s]=g(a)),t.HOURS[s]||g(a)):(a._hour=s,a._minute=l,a._second=c,a._nano=u,a)}p(t,e),t.now=function(e){return null==e?t._now(e6.systemDefaultZone()):e instanceof e6?t._now(e):t._now(e6.system(e))},t._now=function(e){return void 0===e&&(e=e6.systemDefaultZone()),_(e,"clock"),t.ofInstant(e.instant(),e.zone())},t.ofInstant=function(e,r){void 0===r&&(r=z.systemDefault());var n=r.rules().offset(e),i=v.intMod(e.epochSecond(),t.SECONDS_PER_DAY);return(i=v.intMod(i+n.totalSeconds(),t.SECONDS_PER_DAY))<0&&(i+=t.SECONDS_PER_DAY),t.ofSecondOfDay(i,e.nano())},t.of=function(e,r,n,i){return new t(e,r,n,i)},t.ofSecondOfDay=function(e,r){void 0===e&&(e=0),void 0===r&&(r=0),P.SECOND_OF_DAY.checkValidValue(e),P.NANO_OF_SECOND.checkValidValue(r);var n=v.intDiv(e,t.SECONDS_PER_HOUR);e-=n*t.SECONDS_PER_HOUR;var i=v.intDiv(e,t.SECONDS_PER_MINUTE);return e-=i*t.SECONDS_PER_MINUTE,new t(n,i,e,r)},t.ofNanoOfDay=function(e){void 0===e&&(e=0),P.NANO_OF_DAY.checkValidValue(e);var r=v.intDiv(e,t.NANOS_PER_HOUR);e-=r*t.NANOS_PER_HOUR;var n=v.intDiv(e,t.NANOS_PER_MINUTE);e-=n*t.NANOS_PER_MINUTE;var i=v.intDiv(e,t.NANOS_PER_SECOND);return e-=i*t.NANOS_PER_SECOND,new t(r,n,i,e)},t.from=function(e){_(e,"temporal");var t=e.query(k.localTime());if(null==t)throw new s("Unable to obtain LocalTime TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""));return t},t.parse=function(e,r){return void 0===r&&(r=eq.ISO_LOCAL_TIME),_(r,"formatter"),r.parse(e,t.FROM)},t._validate=function(e,t,r,n){P.HOUR_OF_DAY.checkValidValue(e),P.MINUTE_OF_HOUR.checkValidValue(t),P.SECOND_OF_MINUTE.checkValidValue(r),P.NANO_OF_SECOND.checkValidValue(n)};var r=t.prototype;return r.isSupported=function(e){return e instanceof P||e instanceof O?e.isTimeBased():null!=e&&e.isSupportedBy(this)},r.range=function(t){return _(t),e.prototype.range.call(this,t)},r.get=function(e){return this.getLong(e)},r.getLong=function(e){return(_(e,"field"),e instanceof P)?this._get0(e):e.getFrom(this)},r._get0=function(e){switch(e){case P.NANO_OF_SECOND:return this._nano;case P.NANO_OF_DAY:return this.toNanoOfDay();case P.MICRO_OF_SECOND:return v.intDiv(this._nano,1e3);case P.MICRO_OF_DAY:return v.intDiv(this.toNanoOfDay(),1e3);case P.MILLI_OF_SECOND:return v.intDiv(this._nano,1e6);case P.MILLI_OF_DAY:return v.intDiv(this.toNanoOfDay(),1e6);case P.SECOND_OF_MINUTE:return this._second;case P.SECOND_OF_DAY:return this.toSecondOfDay();case P.MINUTE_OF_HOUR:return this._minute;case P.MINUTE_OF_DAY:return 60*this._hour+this._minute;case P.HOUR_OF_AMPM:return v.intMod(this._hour,12);case P.CLOCK_HOUR_OF_AMPM:var t=v.intMod(this._hour,12);return t%12==0?12:t;case P.HOUR_OF_DAY:return this._hour;case P.CLOCK_HOUR_OF_DAY:return 0===this._hour?24:this._hour;case P.AMPM_OF_DAY:return v.intDiv(this._hour,12)}throw new c("Unsupported field: "+e)},r.hour=function(){return this._hour},r.minute=function(){return this._minute},r.second=function(){return this._second},r.nano=function(){return this._nano},r._withAdjuster=function(r){return(_(r,"adjuster"),r instanceof t)?r:e.prototype._withAdjuster.call(this,r)},r._withField=function(e,r){if(_(e,"field"),E(e,R,"field"),e instanceof P){switch(e.checkValidValue(r),e){case P.NANO_OF_SECOND:return this.withNano(r);case P.NANO_OF_DAY:return t.ofNanoOfDay(r);case P.MICRO_OF_SECOND:return this.withNano(1e3*r);case P.MICRO_OF_DAY:return t.ofNanoOfDay(1e3*r);case P.MILLI_OF_SECOND:return this.withNano(1e6*r);case P.MILLI_OF_DAY:return t.ofNanoOfDay(1e6*r);case P.SECOND_OF_MINUTE:return this.withSecond(r);case P.SECOND_OF_DAY:return this.plusSeconds(r-this.toSecondOfDay());case P.MINUTE_OF_HOUR:return this.withMinute(r);case P.MINUTE_OF_DAY:return this.plusMinutes(r-(60*this._hour+this._minute));case P.HOUR_OF_AMPM:return this.plusHours(r-v.intMod(this._hour,12));case P.CLOCK_HOUR_OF_AMPM:return this.plusHours((12===r?0:r)-v.intMod(this._hour,12));case P.HOUR_OF_DAY:return this.withHour(r);case P.CLOCK_HOUR_OF_DAY:return this.withHour(24===r?0:r);case P.AMPM_OF_DAY:return this.plusHours((r-v.intDiv(this._hour,12))*12)}throw new c("Unsupported field: "+e)}return e.adjustInto(this,r)},r.withHour=function(e){return(void 0===e&&(e=0),this._hour===e)?this:new t(e,this._minute,this._second,this._nano)},r.withMinute=function(e){return(void 0===e&&(e=0),this._minute===e)?this:new t(this._hour,e,this._second,this._nano)},r.withSecond=function(e){return(void 0===e&&(e=0),this._second===e)?this:new t(this._hour,this._minute,e,this._nano)},r.withNano=function(e){return(void 0===e&&(e=0),this._nano===e)?this:new t(this._hour,this._minute,this._second,e)},r.truncatedTo=function(e){if(_(e,"unit"),e===O.NANOS)return this;var r=e.duration();if(r.seconds()>t.SECONDS_PER_DAY)throw new s("Unit is too large to be used for truncation");var n=r.toNanos();if(0!==v.intMod(t.NANOS_PER_DAY,n))throw new s("Unit must divide into a standard day without remainder");var i=this.toNanoOfDay();return t.ofNanoOfDay(v.intDiv(i,n)*n)},r._plusUnit=function(e,r){if(_(r,"unit"),r instanceof O){switch(r){case O.NANOS:return this.plusNanos(e);case O.MICROS:return this.plusNanos(1e3*v.intMod(e,t.MICROS_PER_DAY));case O.MILLIS:return this.plusNanos(1e6*v.intMod(e,t.MILLIS_PER_DAY));case O.SECONDS:return this.plusSeconds(e);case O.MINUTES:return this.plusMinutes(e);case O.HOURS:return this.plusHours(e);case O.HALF_DAYS:return this.plusHours(12*v.intMod(e,2))}throw new c("Unsupported unit: "+r)}return r.addTo(this,e)},r.plusHours=function(e){if(0===e)return this;var r=v.intMod(v.intMod(e,t.HOURS_PER_DAY)+this._hour+t.HOURS_PER_DAY,t.HOURS_PER_DAY);return new t(r,this._minute,this._second,this._nano)},r.plusMinutes=function(e){if(0===e)return this;var r=this._hour*t.MINUTES_PER_HOUR+this._minute,n=v.intMod(v.intMod(e,t.MINUTES_PER_DAY)+r+t.MINUTES_PER_DAY,t.MINUTES_PER_DAY);if(r===n)return this;var i=v.intDiv(n,t.MINUTES_PER_HOUR),o=v.intMod(n,t.MINUTES_PER_HOUR);return new t(i,o,this._second,this._nano)},r.plusSeconds=function(e){if(0===e)return this;var r=this._hour*t.SECONDS_PER_HOUR+this._minute*t.SECONDS_PER_MINUTE+this._second,n=v.intMod(v.intMod(e,t.SECONDS_PER_DAY)+r+t.SECONDS_PER_DAY,t.SECONDS_PER_DAY);if(r===n)return this;var i=v.intDiv(n,t.SECONDS_PER_HOUR),o=v.intMod(v.intDiv(n,t.SECONDS_PER_MINUTE),t.MINUTES_PER_HOUR),a=v.intMod(n,t.SECONDS_PER_MINUTE);return new t(i,o,a,this._nano)},r.plusNanos=function(e){if(0===e)return this;var r=this.toNanoOfDay(),n=v.intMod(v.intMod(e,t.NANOS_PER_DAY)+r+t.NANOS_PER_DAY,t.NANOS_PER_DAY);if(r===n)return this;var i=v.intDiv(n,t.NANOS_PER_HOUR),o=v.intMod(v.intDiv(n,t.NANOS_PER_MINUTE),t.MINUTES_PER_HOUR),a=v.intMod(v.intDiv(n,t.NANOS_PER_SECOND),t.SECONDS_PER_MINUTE),s=v.intMod(n,t.NANOS_PER_SECOND);return new t(i,o,a,s)},r._minusUnit=function(e,t){return _(t,"unit"),this._plusUnit(-1*e,t)},r.minusHours=function(e){return this.plusHours(-1*v.intMod(e,t.HOURS_PER_DAY))},r.minusMinutes=function(e){return this.plusMinutes(-1*v.intMod(e,t.MINUTES_PER_DAY))},r.minusSeconds=function(e){return this.plusSeconds(-1*v.intMod(e,t.SECONDS_PER_DAY))},r.minusNanos=function(e){return this.plusNanos(-1*v.intMod(e,t.NANOS_PER_DAY))},r.query=function(e){return(_(e,"query"),e===k.precision())?O.NANOS:e===k.localTime()?this:e===k.chronology()||e===k.zoneId()||e===k.zone()||e===k.offset()||e===k.localDate()?null:e.queryFrom(this)},r.adjustInto=function(e){return e.with(t.NANO_OF_DAY,this.toNanoOfDay())},r.until=function(e,r){_(e,"endExclusive"),_(r,"unit");var n=t.from(e);if(r instanceof O){var i=n.toNanoOfDay()-this.toNanoOfDay();switch(r){case O.NANOS:return i;case O.MICROS:return v.intDiv(i,1e3);case O.MILLIS:return v.intDiv(i,1e6);case O.SECONDS:return v.intDiv(i,t.NANOS_PER_SECOND);case O.MINUTES:return v.intDiv(i,t.NANOS_PER_MINUTE);case O.HOURS:return v.intDiv(i,t.NANOS_PER_HOUR);case O.HALF_DAYS:return v.intDiv(i,12*t.NANOS_PER_HOUR)}throw new c("Unsupported unit: "+r)}return r.between(this,n)},r.atDate=function(e){return e2.of(e,this)},r.atOffset=function(e){return eQ.of(this,e)},r.toSecondOfDay=function(){var e=this._hour*t.SECONDS_PER_HOUR;return e+=this._minute*t.SECONDS_PER_MINUTE,e+=this._second},r.toNanoOfDay=function(){var e=this._hour*t.NANOS_PER_HOUR;return e+=this._minute*t.NANOS_PER_MINUTE,e+=this._second*t.NANOS_PER_SECOND,e+=this._nano},r.compareTo=function(e){_(e,"other"),E(e,t,"other");var r=v.compareNumbers(this._hour,e._hour);return 0===r&&0===(r=v.compareNumbers(this._minute,e._minute))&&0===(r=v.compareNumbers(this._second,e._second))&&(r=v.compareNumbers(this._nano,e._nano)),r},r.isAfter=function(e){return this.compareTo(e)>0},r.isBefore=function(e){return 0>this.compareTo(e)},r.equals=function(e){return this===e||e instanceof t&&this._hour===e._hour&&this._minute===e._minute&&this._second===e._second&&this._nano===e._nano},r.hashCode=function(){var e=this.toNanoOfDay();return v.hash(e)},r.toString=function(){var e="",t=this._hour,r=this._minute,n=this._second,i=this._nano;return e+=t<10?"0":"",e+=t,e+=r<10?":0":":",e+=r,(n>0||i>0)&&(e+=n<10?":0":":",e+=n,i>0&&(e+=".",0===v.intMod(i,1e6)?e+=(""+(v.intDiv(i,1e6)+1e3)).substring(1):0===v.intMod(i,1e3)?e+=(""+(v.intDiv(i,1e3)+1e6)).substring(1):e+=(""+(i+1e9)).substring(1))),e},r.toJSON=function(){return this.toString()},r.format=function(e){return _(e,"formatter"),e.format(this)},t}(Y);e5.HOURS_PER_DAY=24,e5.MINUTES_PER_HOUR=60,e5.MINUTES_PER_DAY=e5.MINUTES_PER_HOUR*e5.HOURS_PER_DAY,e5.SECONDS_PER_MINUTE=60,e5.SECONDS_PER_HOUR=e5.SECONDS_PER_MINUTE*e5.MINUTES_PER_HOUR,e5.SECONDS_PER_DAY=e5.SECONDS_PER_HOUR*e5.HOURS_PER_DAY,e5.MILLIS_PER_DAY=1e3*e5.SECONDS_PER_DAY,e5.MICROS_PER_DAY=1e6*e5.SECONDS_PER_DAY,e5.NANOS_PER_SECOND=1e9,e5.NANOS_PER_MINUTE=e5.NANOS_PER_SECOND*e5.SECONDS_PER_MINUTE,e5.NANOS_PER_HOUR=e5.NANOS_PER_MINUTE*e5.MINUTES_PER_HOUR,e5.NANOS_PER_DAY=e5.NANOS_PER_HOUR*e5.HOURS_PER_DAY;var e8=function(e){function t(r,n){var i;return i=e.call(this)||this,t._validate(r,n),i._seconds=v.safeToInt(r),i._nanos=v.safeToInt(n),i}p(t,e),t.now=function(e){return void 0===e&&(e=e6.systemUTC()),e.instant()},t.ofEpochSecond=function(e,r){void 0===r&&(r=0);var n=e+v.floorDiv(r,e5.NANOS_PER_SECOND),i=v.floorMod(r,e5.NANOS_PER_SECOND);return t._create(n,i)},t.ofEpochMilli=function(e){var r=v.floorDiv(e,1e3),n=v.floorMod(e,1e3);return t._create(r,1e6*n)},t.ofEpochMicro=function(e){var r=v.floorDiv(e,1e6),n=v.floorMod(e,1e6);return t._create(r,1e3*n)},t.from=function(e){try{var r=e.getLong(P.INSTANT_SECONDS),n=e.get(P.NANO_OF_SECOND);return t.ofEpochSecond(r,n)}catch(t){throw new s("Unable to obtain Instant from TemporalAccessor: "+e+", type "+typeof e,t)}},t.parse=function(e){return eq.ISO_INSTANT.parse(e,t.FROM)},t._create=function(e,r){return 0===e&&0===r?t.EPOCH:new t(e,r)},t._validate=function(e,r){if(e<t.MIN_SECONDS||e>t.MAX_SECONDS||r<0||r>e5.NANOS_PER_SECOND)throw new s("Instant exceeds minimum or maximum instant")};var r=t.prototype;return r.isSupported=function(e){return e instanceof P?e===P.INSTANT_SECONDS||e===P.NANO_OF_SECOND||e===P.MICRO_OF_SECOND||e===P.MILLI_OF_SECOND:e instanceof O?e.isTimeBased()||e===O.DAYS:null!=e&&e.isSupportedBy(this)},r.range=function(t){return e.prototype.range.call(this,t)},r.get=function(e){return this.getLong(e)},r.getLong=function(e){if(e instanceof P){switch(e){case P.NANO_OF_SECOND:return this._nanos;case P.MICRO_OF_SECOND:return v.intDiv(this._nanos,1e3);case P.MILLI_OF_SECOND:return v.intDiv(this._nanos,1e6);case P.INSTANT_SECONDS:return this._seconds}throw new c("Unsupported field: "+e)}return e.getFrom(this)},r.epochSecond=function(){return this._seconds},r.nano=function(){return this._nanos},r._withField=function(e,r){if(_(e,"field"),e instanceof P){switch(e.checkValidValue(r),e){case P.MILLI_OF_SECOND:var n=1e6*r;return n!==this._nanos?t._create(this._seconds,n):this;case P.MICRO_OF_SECOND:var i=1e3*r;return i!==this._nanos?t._create(this._seconds,i):this;case P.NANO_OF_SECOND:return r!==this._nanos?t._create(this._seconds,r):this;case P.INSTANT_SECONDS:return r!==this._seconds?t._create(r,this._nanos):this}throw new c("Unsupported field: "+e)}return e.adjustInto(this,r)},r.truncatedTo=function(e){if(_(e,"unit"),e===O.NANOS)return this;var t=e.duration();if(t.seconds()>e5.SECONDS_PER_DAY)throw new s("Unit is too large to be used for truncation");var r=t.toNanos();if(0!==v.intMod(e5.NANOS_PER_DAY,r))throw new s("Unit must divide into a standard day without remainder");var n=v.intMod(this._seconds,e5.SECONDS_PER_DAY)*e5.NANOS_PER_SECOND+this._nanos,i=v.intDiv(n,r)*r;return this.plusNanos(i-n)},r._plusUnit=function(e,t){if(_(e,"amountToAdd"),_(t,"unit"),E(t,S),t instanceof O){switch(t){case O.NANOS:return this.plusNanos(e);case O.MICROS:return this.plusMicros(e);case O.MILLIS:return this.plusMillis(e);case O.SECONDS:return this.plusSeconds(e);case O.MINUTES:return this.plusSeconds(v.safeMultiply(e,e5.SECONDS_PER_MINUTE));case O.HOURS:return this.plusSeconds(v.safeMultiply(e,e5.SECONDS_PER_HOUR));case O.HALF_DAYS:return this.plusSeconds(v.safeMultiply(e,e5.SECONDS_PER_DAY/2));case O.DAYS:return this.plusSeconds(v.safeMultiply(e,e5.SECONDS_PER_DAY))}throw new c("Unsupported unit: "+t)}return t.addTo(this,e)},r.plusSeconds=function(e){return this._plus(e,0)},r.plusMillis=function(e){return this._plus(v.intDiv(e,1e3),1e6*v.intMod(e,1e3))},r.plusNanos=function(e){return this._plus(0,e)},r.plusMicros=function(e){return this._plus(v.intDiv(e,1e6),1e3*v.intMod(e,1e6))},r._plus=function(e,r){if(0===e&&0===r)return this;var n=this._seconds+e;n+=v.intDiv(r,e5.NANOS_PER_SECOND);var i=this._nanos+r%e5.NANOS_PER_SECOND;return t.ofEpochSecond(n,i)},r._minusUnit=function(e,t){return this._plusUnit(-1*e,t)},r.minusSeconds=function(e){return this.plusSeconds(-1*e)},r.minusMillis=function(e){return this.plusMillis(-1*e)},r.minusNanos=function(e){return this.plusNanos(-1*e)},r.minusMicros=function(e){return this.plusMicros(-1*e)},r.query=function(e){return(_(e,"query"),e===k.precision())?O.NANOS:e===k.localDate()||e===k.localTime()||e===k.chronology()||e===k.zoneId()||e===k.zone()||e===k.offset()?null:e.queryFrom(this)},r.adjustInto=function(e){return _(e,"temporal"),e.with(P.INSTANT_SECONDS,this._seconds).with(P.NANO_OF_SECOND,this._nanos)},r.until=function(e,r){_(e,"endExclusive"),_(r,"unit");var n=t.from(e);if(r instanceof O){switch(r){case O.NANOS:return this._nanosUntil(n);case O.MICROS:return this._microsUntil(n);case O.MILLIS:return v.safeSubtract(n.toEpochMilli(),this.toEpochMilli());case O.SECONDS:return this._secondsUntil(n);case O.MINUTES:return v.intDiv(this._secondsUntil(n),e5.SECONDS_PER_MINUTE);case O.HOURS:return v.intDiv(this._secondsUntil(n),e5.SECONDS_PER_HOUR);case O.HALF_DAYS:return v.intDiv(this._secondsUntil(n),12*e5.SECONDS_PER_HOUR);case O.DAYS:return v.intDiv(this._secondsUntil(n),e5.SECONDS_PER_DAY)}throw new c("Unsupported unit: "+r)}return r.between(this,n)},r._microsUntil=function(e){var t=v.safeSubtract(e.epochSecond(),this.epochSecond()),r=v.safeMultiply(t,1e6);return v.safeAdd(r,v.intDiv(e.nano()-this.nano(),1e3))},r._nanosUntil=function(e){var t=v.safeSubtract(e.epochSecond(),this.epochSecond()),r=v.safeMultiply(t,e5.NANOS_PER_SECOND);return v.safeAdd(r,e.nano()-this.nano())},r._secondsUntil=function(e){var t=v.safeSubtract(e.epochSecond(),this.epochSecond()),r=e.nano()-this.nano();return t>0&&r<0?t--:t<0&&r>0&&t++,t},r.atOffset=function(e){return eJ.ofInstant(this,e)},r.atZone=function(e){return eZ.ofInstant(this,e)},r.toEpochMilli=function(){return v.safeMultiply(this._seconds,1e3)+v.intDiv(this._nanos,1e6)},r.compareTo=function(e){_(e,"otherInstant"),E(e,t,"otherInstant");var r=v.compareNumbers(this._seconds,e._seconds);return 0!==r?r:this._nanos-e._nanos},r.isAfter=function(e){return this.compareTo(e)>0},r.isBefore=function(e){return 0>this.compareTo(e)},r.equals=function(e){return this===e||e instanceof t&&this.epochSecond()===e.epochSecond()&&this.nano()===e.nano()},r.hashCode=function(){return v.hashCode(this._seconds,this._nanos)},r.toString=function(){return eq.ISO_INSTANT.format(this)},r.toJSON=function(){return this.toString()},t}(Y),e6=function(){function e(){}e.systemUTC=function(){return new e4(X.UTC)},e.systemDefaultZone=function(){return new e4(z.systemDefault())},e.system=function(e){return new e4(e)},e.fixed=function(e,t){return new e3(e,t)},e.offset=function(e,t){return new e9(e,t)};var t=e.prototype;return t.millis=function(){T("Clock.millis")},t.instant=function(){T("Clock.instant")},t.zone=function(){T("Clock.zone")},t.withZone=function(){T("Clock.withZone")},e}(),e4=function(e){function t(t){var r;return _(t,"zone"),(r=e.call(this)||this)._zone=t,r}p(t,e);var r=t.prototype;return r.zone=function(){return this._zone},r.millis=function(){return new Date().getTime()},r.instant=function(){return e8.ofEpochMilli(this.millis())},r.equals=function(e){return e instanceof t&&this._zone.equals(e._zone)},r.withZone=function(e){return e.equals(this._zone)?this:new t(e)},r.toString=function(){return"SystemClock["+this._zone.toString()+"]"},t}(e6),e3=function(e){function t(t,r){var n;return(n=e.call(this)||this)._instant=t,n._zoneId=r,n}p(t,e);var r=t.prototype;return r.instant=function(){return this._instant},r.millis=function(){return this._instant.toEpochMilli()},r.zone=function(){return this._zoneId},r.toString=function(){return"FixedClock[]"},r.equals=function(e){return e instanceof t&&this._instant.equals(e._instant)&&this._zoneId.equals(e._zoneId)},r.withZone=function(e){return e.equals(this._zoneId)?this:new t(this._instant,e)},t}(e6),e9=function(e){function t(t,r){var n;return(n=e.call(this)||this)._baseClock=t,n._offset=r,n}p(t,e);var r=t.prototype;return r.zone=function(){return this._baseClock.zone()},r.withZone=function(e){return e.equals(this._baseClock.zone())?this:new t(this._baseClock.withZone(e),this._offset)},r.millis=function(){return this._baseClock.millis()+this._offset.toMillis()},r.instant=function(){return this._baseClock.instant().plus(this._offset)},r.equals=function(e){return e instanceof t&&this._baseClock.equals(e._baseClock)&&this._offset.equals(e._offset)},r.toString=function(){return"OffsetClock["+this._baseClock+","+this._offset+"]"},t}(e6),e7=function(){function e(e,t,r){if(_(e,"transition"),_(t,"offsetBefore"),_(r,"offsetAfter"),t.equals(r))throw new d("Offsets must not be equal");if(0!==e.nano())throw new d("Nano-of-second must be zero");e instanceof e2?this._transition=e:this._transition=e2.ofEpochSecond(e,0,t),this._offsetBefore=t,this._offsetAfter=r}e.of=function(t,r,n){return new e(t,r,n)};var t=e.prototype;return t.instant=function(){return this._transition.toInstant(this._offsetBefore)},t.toEpochSecond=function(){return this._transition.toEpochSecond(this._offsetBefore)},t.dateTimeBefore=function(){return this._transition},t.dateTimeAfter=function(){return this._transition.plusSeconds(this.durationSeconds())},t.offsetBefore=function(){return this._offsetBefore},t.offsetAfter=function(){return this._offsetAfter},t.duration=function(){return w.ofSeconds(this.durationSeconds())},t.durationSeconds=function(){return this._offsetAfter.totalSeconds()-this._offsetBefore.totalSeconds()},t.isGap=function(){return this._offsetAfter.totalSeconds()>this._offsetBefore.totalSeconds()},t.isOverlap=function(){return this._offsetAfter.totalSeconds()<this._offsetBefore.totalSeconds()},t.isValidOffset=function(e){return!this.isGap()&&(this._offsetBefore.equals(e)||this._offsetAfter.equals(e))},t.validOffsets=function(){return this.isGap()?[]:[this._offsetBefore,this._offsetAfter]},t.compareTo=function(e){return this.instant().compareTo(e.instant())},t.equals=function(t){return t===this||t instanceof e&&this._transition.equals(t._transition)&&this._offsetBefore.equals(t.offsetBefore())&&this._offsetAfter.equals(t.offsetAfter())},t.hashCode=function(){return this._transition.hashCode()^this._offsetBefore.hashCode()^this._offsetAfter.hashCode()>>>16},t.toString=function(){return"Transition["+(this.isGap()?"Gap":"Overlap")+" at "+this._transition.toString()+this._offsetBefore.toString()+" to "+this._offsetAfter+"]"},e}(),te=function(e){function t(){return e.apply(this,arguments)||this}p(t,e);var r=t.prototype;return r.isFixedOffset=function(){return!1},r.offsetOfInstant=function(e){var t=new Date(e.toEpochMilli()).getTimezoneOffset();return X.ofTotalMinutes(-1*t)},r.offsetOfEpochMilli=function(e){var t=new Date(e).getTimezoneOffset();return X.ofTotalMinutes(-1*t)},r.offsetOfLocalDateTime=function(e){var t=1e3*e.toEpochSecond(X.UTC),r=new Date(t).getTimezoneOffset(),n=new Date(t+6e4*r).getTimezoneOffset();return X.ofTotalMinutes(-1*n)},r.validOffsets=function(e){return[this.offsetOfLocalDateTime(e)]},r.transition=function(){return null},r.standardOffset=function(e){return this.offsetOfInstant(e)},r.daylightSavings=function(){this._throwNotSupported()},r.isDaylightSavings=function(){this._throwNotSupported()},r.isValidOffset=function(e,t){return this.offsetOfLocalDateTime(e).equals(t)},r.nextTransition=function(){this._throwNotSupported()},r.previousTransition=function(){this._throwNotSupported()},r.transitions=function(){this._throwNotSupported()},r.transitionRules=function(){this._throwNotSupported()},r._throwNotSupported=function(){throw new s("not supported operation")},r.equals=function(e){return this===e||e instanceof t},r.toString=function(){return"SYSTEM"},t}(G),tt=function(e){function t(){var t;return(t=e.call(this)||this)._rules=new te,t}p(t,e);var r=t.prototype;return r.rules=function(){return this._rules},r.equals=function(e){return this===e},r.id=function(){return"SYSTEM"},t}(z),tr=function(){function e(){}return e.systemDefault=function(){return tn},e.getAvailableZoneIds=function(){return eN.getAvailableZoneIds()},e.of=function(e){if(_(e,"zoneId"),"Z"===e)return X.UTC;if(1===e.length)throw new s("Invalid zone: "+e);if(V.startsWith(e,"+")||V.startsWith(e,"-"))return X.of(e);if("UTC"===e||"GMT"===e||"GMT0"===e||"UT"===e)return new eP(e,X.UTC.rules());if(V.startsWith(e,"UTC+")||V.startsWith(e,"GMT+")||V.startsWith(e,"UTC-")||V.startsWith(e,"GMT-")){var t=X.of(e.substring(3));return 0===t.totalSeconds()?new eP(e.substring(0,3),t.rules()):new eP(e.substring(0,3)+t.id(),t.rules())}if(V.startsWith(e,"UT+")||V.startsWith(e,"UT-")){var r=X.of(e.substring(2));return 0===r.totalSeconds()?new eP("UT",r.rules()):new eP("UT"+r.id(),r.rules())}return"SYSTEM"===e?z.systemDefault():eP.ofId(e)},e.ofOffset=function(e,t){if(_(e,"prefix"),_(t,"offset"),0===e.length)return t;if("GMT"===e||"UTC"===e||"UT"===e)return 0===t.totalSeconds()?new eP(e,t.rules()):new eP(e+t.id(),t.rules());throw new d("Invalid prefix, must be GMT, UTC or UT: "+e)},e.from=function(e){_(e,"temporal");var t=e.query(k.zone());if(null==t)throw new s("Unable to obtain ZoneId from TemporalAccessor: "+e+", type "+(null!=e.constructor?e.constructor.name:""));return t},e}(),tn=null,ti=!1;!function(){if(!ti){ti=!0,I.MIN_VALUE=-999999,I.MAX_VALUE=999999,w.ZERO=new w(0,0),O.NANOS=new O("Nanos",w.ofNanos(1)),O.MICROS=new O("Micros",w.ofNanos(1e3)),O.MILLIS=new O("Millis",w.ofNanos(1e6)),O.SECONDS=new O("Seconds",w.ofSeconds(1)),O.MINUTES=new O("Minutes",w.ofSeconds(60)),O.HOURS=new O("Hours",w.ofSeconds(3600)),O.HALF_DAYS=new O("HalfDays",w.ofSeconds(43200)),O.DAYS=new O("Days",w.ofSeconds(86400)),O.WEEKS=new O("Weeks",w.ofSeconds(604800)),O.MONTHS=new O("Months",w.ofSeconds(2629746)),O.YEARS=new O("Years",w.ofSeconds(0x1e18558)),O.DECADES=new O("Decades",w.ofSeconds(0x12cf3570)),O.CENTURIES=new O("Centuries",w.ofSeconds(0xbc181660)),O.MILLENNIA=new O("Millennia",w.ofSeconds(31556952e3)),O.ERAS=new O("Eras",w.ofSeconds(0x1e18558*(I.MAX_VALUE+1))),O.FOREVER=new O("Forever",w.ofSeconds(v.MAX_SAFE_INTEGER,0x3b9ac9ff)),P.NANO_OF_SECOND=new P("NanoOfSecond",O.NANOS,O.SECONDS,N.of(0,0x3b9ac9ff)),P.NANO_OF_DAY=new P("NanoOfDay",O.NANOS,O.DAYS,N.of(0,0x4e94914effff)),P.MICRO_OF_SECOND=new P("MicroOfSecond",O.MICROS,O.SECONDS,N.of(0,999999)),P.MICRO_OF_DAY=new P("MicroOfDay",O.MICROS,O.DAYS,N.of(0,0x141dd75fff)),P.MILLI_OF_SECOND=new P("MilliOfSecond",O.MILLIS,O.SECONDS,N.of(0,999)),P.MILLI_OF_DAY=new P("MilliOfDay",O.MILLIS,O.DAYS,N.of(0,0x5265bff)),P.SECOND_OF_MINUTE=new P("SecondOfMinute",O.SECONDS,O.MINUTES,N.of(0,59)),P.SECOND_OF_DAY=new P("SecondOfDay",O.SECONDS,O.DAYS,N.of(0,86399)),P.MINUTE_OF_HOUR=new P("MinuteOfHour",O.MINUTES,O.HOURS,N.of(0,59)),P.MINUTE_OF_DAY=new P("MinuteOfDay",O.MINUTES,O.DAYS,N.of(0,1439)),P.HOUR_OF_AMPM=new P("HourOfAmPm",O.HOURS,O.HALF_DAYS,N.of(0,11)),P.CLOCK_HOUR_OF_AMPM=new P("ClockHourOfAmPm",O.HOURS,O.HALF_DAYS,N.of(1,12)),P.HOUR_OF_DAY=new P("HourOfDay",O.HOURS,O.DAYS,N.of(0,23)),P.CLOCK_HOUR_OF_DAY=new P("ClockHourOfDay",O.HOURS,O.DAYS,N.of(1,24)),P.AMPM_OF_DAY=new P("AmPmOfDay",O.HALF_DAYS,O.DAYS,N.of(0,1)),P.DAY_OF_WEEK=new P("DayOfWeek",O.DAYS,O.WEEKS,N.of(1,7)),P.ALIGNED_DAY_OF_WEEK_IN_MONTH=new P("AlignedDayOfWeekInMonth",O.DAYS,O.WEEKS,N.of(1,7)),P.ALIGNED_DAY_OF_WEEK_IN_YEAR=new P("AlignedDayOfWeekInYear",O.DAYS,O.WEEKS,N.of(1,7)),P.DAY_OF_MONTH=new P("DayOfMonth",O.DAYS,O.MONTHS,N.of(1,28,31),"day"),P.DAY_OF_YEAR=new P("DayOfYear",O.DAYS,O.YEARS,N.of(1,365,366)),P.EPOCH_DAY=new P("EpochDay",O.DAYS,O.FOREVER,N.of(-0x15d021be,0x15ba2ddb)),P.ALIGNED_WEEK_OF_MONTH=new P("AlignedWeekOfMonth",O.WEEKS,O.MONTHS,N.of(1,4,5)),P.ALIGNED_WEEK_OF_YEAR=new P("AlignedWeekOfYear",O.WEEKS,O.YEARS,N.of(1,53)),P.MONTH_OF_YEAR=new P("MonthOfYear",O.MONTHS,O.YEARS,N.of(1,12),"month"),P.PROLEPTIC_MONTH=new P("ProlepticMonth",O.MONTHS,O.FOREVER,N.of(12*I.MIN_VALUE,12*I.MAX_VALUE+11)),P.YEAR_OF_ERA=new P("YearOfEra",O.YEARS,O.FOREVER,N.of(1,I.MAX_VALUE,I.MAX_VALUE+1)),P.YEAR=new P("Year",O.YEARS,O.FOREVER,N.of(I.MIN_VALUE,I.MAX_VALUE),"year"),P.ERA=new P("Era",O.ERAS,O.FOREVER,N.of(0,1)),P.INSTANT_SECONDS=new P("InstantSeconds",O.SECONDS,O.FOREVER,N.of(-0x1fffffffffffff,0x1fffffffffffff)),P.OFFSET_SECONDS=new P("OffsetSeconds",O.SECONDS,O.FOREVER,N.of(-64800,64800)),e5.HOURS=[];for(var e=0;e<24;e++)e5.of(e,0,0,0);e5.MIN=e5.HOURS[0],e5.MAX=new e5(23,59,59,0x3b9ac9ff),e5.MIDNIGHT=e5.HOURS[0],e5.NOON=e5.HOURS[12],e5.FROM=L("LocalTime.FROM",function(e){return e5.from(e)}),eu=new eo,ed=new ea,eh=new es,ef=new el,ep=new ec("WeekBasedYears",w.ofSeconds(0x1e18558)),em=new ec("QuarterYears",w.ofSeconds(7889238)),er.DAY_OF_QUARTER=eu,er.QUARTER_OF_YEAR=ed,er.WEEK_OF_WEEK_BASED_YEAR=eh,er.WEEK_BASED_YEAR=ef,er.WEEK_BASED_YEARS=ep,er.QUARTER_YEARS=em,e0.prototype.isoWeekOfWeekyear=function(){return this.get(er.WEEK_OF_WEEK_BASED_YEAR)},e0.prototype.isoWeekyear=function(){return this.get(er.WEEK_BASED_YEAR)},k.ZONE_ID=L("ZONE_ID",function(e){return e.query(k.ZONE_ID)}),k.CHRONO=L("CHRONO",function(e){return e.query(k.CHRONO)}),k.PRECISION=L("PRECISION",function(e){return e.query(k.PRECISION)}),k.OFFSET=L("OFFSET",function(e){return e.isSupported(P.OFFSET_SECONDS)?X.ofTotalSeconds(e.get(P.OFFSET_SECONDS)):null}),k.ZONE=L("ZONE",function(e){var t=e.query(k.ZONE_ID);return null!=t?t:e.query(k.OFFSET)}),k.LOCAL_DATE=L("LOCAL_DATE",function(e){return e.isSupported(P.EPOCH_DAY)?e0.ofEpochDay(e.getLong(P.EPOCH_DAY)):null}),k.LOCAL_TIME=L("LOCAL_TIME",function(e){return e.isSupported(P.NANO_OF_DAY)?e5.ofNanoOfDay(e.getLong(P.NANO_OF_DAY)):null}),U.MONDAY=new U(0,"MONDAY"),U.TUESDAY=new U(1,"TUESDAY"),U.WEDNESDAY=new U(2,"WEDNESDAY"),U.THURSDAY=new U(3,"THURSDAY"),U.FRIDAY=new U(4,"FRIDAY"),U.SATURDAY=new U(5,"SATURDAY"),U.SUNDAY=new U(6,"SUNDAY"),U.FROM=L("DayOfWeek.FROM",function(e){return U.from(e)}),r=[U.MONDAY,U.TUESDAY,U.WEDNESDAY,U.THURSDAY,U.FRIDAY,U.SATURDAY,U.SUNDAY],e8.MIN_SECONDS=-0x1cc1e65e8200,e8.MAX_SECONDS=0x1ca4f5580eff,e8.EPOCH=new e8(0,0),e8.MIN=e8.ofEpochSecond(e8.MIN_SECONDS,0),e8.MAX=e8.ofEpochSecond(e8.MAX_SECONDS,0x3b9ac9ff),e8.FROM=L("Instant.FROM",function(e){return e8.from(e)}),e0.MIN=e0.of(I.MIN_VALUE,1,1),e0.MAX=e0.of(I.MAX_VALUE,12,31),e0.EPOCH_0=e0.ofEpochDay(0),e0.FROM=L("LocalDate.FROM",function(e){return e0.from(e)}),e2.MIN=e2.of(e0.MIN,e5.MIN),e2.MAX=e2.of(e0.MAX,e5.MAX),e2.FROM=L("LocalDateTime.FROM",function(e){return e2.from(e)}),eY.MIN_VALUE=I.MIN_VALUE,eY.MAX_VALUE=I.MAX_VALUE,a=new eU().appendValue(P.YEAR,4,10,ey.EXCEEDS_PAD).toFormatter(),eY.FROM=L("Year.FROM",function(e){return eY.from(e)}),x.JANUARY=new x(1,"JANUARY"),x.FEBRUARY=new x(2,"FEBRUARY"),x.MARCH=new x(3,"MARCH"),x.APRIL=new x(4,"APRIL"),x.MAY=new x(5,"MAY"),x.JUNE=new x(6,"JUNE"),x.JULY=new x(7,"JULY"),x.AUGUST=new x(8,"AUGUST"),x.SEPTEMBER=new x(9,"SEPTEMBER"),x.OCTOBER=new x(10,"OCTOBER"),x.NOVEMBER=new x(11,"NOVEMBER"),x.DECEMBER=new x(12,"DECEMBER"),n=[x.JANUARY,x.FEBRUARY,x.MARCH,x.APRIL,x.MAY,x.JUNE,x.JULY,x.AUGUST,x.SEPTEMBER,x.OCTOBER,x.NOVEMBER,x.DECEMBER],o=new eU().appendValue(P.YEAR,4,10,ey.EXCEEDS_PAD).appendLiteral("-").appendValue(P.MONTH_OF_YEAR,2).toFormatter(),ej.FROM=L("YearMonth.FROM",function(e){return ej.from(e)}),i=new eU().appendLiteral("--").appendValue(P.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(P.DAY_OF_MONTH,2).toFormatter(),eH.FROM=L("MonthDay.FROM",function(e){return eH.from(e)}),B.ofDays(0),X.MAX_SECONDS=18*e5.SECONDS_PER_HOUR,X.UTC=X.ofTotalSeconds(0),X.MIN=X.ofTotalSeconds(-X.MAX_SECONDS),X.MAX=X.ofTotalSeconds(X.MAX_SECONDS),eZ.FROM=L("ZonedDateTime.FROM",function(e){return eZ.from(e)}),tn=new tt,z.systemDefault=tr.systemDefault,z.getAvailableZoneIds=tr.getAvailableZoneIds,z.of=tr.of,z.ofOffset=tr.ofOffset,z.from=tr.from,X.from=tr.from,z.SYSTEM=tn,z.UTC=X.ofTotalSeconds(0),eK.INSTANCE=new eK("IsoChronology"),eq.ISO_LOCAL_DATE=new eU().appendValue(P.YEAR,4,10,ey.EXCEEDS_PAD).appendLiteral("-").appendValue(P.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(P.DAY_OF_MONTH,2).toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.ISO_LOCAL_TIME=new eU().appendValue(P.HOUR_OF_DAY,2).appendLiteral(":").appendValue(P.MINUTE_OF_HOUR,2).optionalStart().appendLiteral(":").appendValue(P.SECOND_OF_MINUTE,2).optionalStart().appendFraction(P.NANO_OF_SECOND,0,9,!0).toFormatter(j.STRICT),eq.ISO_LOCAL_DATE_TIME=new eU().parseCaseInsensitive().append(eq.ISO_LOCAL_DATE).appendLiteral("T").append(eq.ISO_LOCAL_TIME).toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.ISO_INSTANT=new eU().parseCaseInsensitive().appendInstant().toFormatter(j.STRICT),eq.ISO_OFFSET_DATE_TIME=new eU().parseCaseInsensitive().append(eq.ISO_LOCAL_DATE_TIME).appendOffsetId().toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.ISO_ZONED_DATE_TIME=new eU().append(eq.ISO_OFFSET_DATE_TIME).optionalStart().appendLiteral("[").parseCaseSensitive().appendZoneId().appendLiteral("]").toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.BASIC_ISO_DATE=new eU().appendValue(P.YEAR,4,10,ey.EXCEEDS_PAD).appendValue(P.MONTH_OF_YEAR,2).appendValue(P.DAY_OF_MONTH,2).toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.ISO_OFFSET_DATE=new eU().parseCaseInsensitive().append(eq.ISO_LOCAL_DATE).appendOffsetId().toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.ISO_OFFSET_TIME=new eU().parseCaseInsensitive().append(eq.ISO_LOCAL_TIME).appendOffsetId().toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.ISO_ORDINAL_DATE=new eU().appendValue(P.YEAR,4,10,ey.EXCEEDS_PAD).appendLiteral("-").appendValue(P.DAY_OF_YEAR).toFormatter(j.STRICT),eq.ISO_WEEK_DATE=new eU().appendValue(P.YEAR,4,10,ey.EXCEEDS_PAD).appendLiteral("-W").appendValue(P.ALIGNED_WEEK_OF_YEAR).appendLiteral("-").appendValue(P.DAY_OF_WEEK).toFormatter(j.STRICT),eq.ISO_DATE=new eU().parseCaseInsensitive().append(eq.ISO_LOCAL_DATE).optionalStart().appendOffsetId().optionalEnd().toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.ISO_TIME=new eU().parseCaseInsensitive().append(eq.ISO_LOCAL_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(j.STRICT),eq.ISO_DATE_TIME=new eU().append(eq.ISO_LOCAL_DATE_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(j.STRICT).withChronology(eK.INSTANCE),eq.PARSED_EXCESS_DAYS=L("PARSED_EXCESS_DAYS",function(e){return e instanceof Z?e.excessDays:B.ZERO}),eq.PARSED_LEAP_SECOND=L("PARSED_LEAP_SECOND",function(e){return e instanceof Z&&e.leapSecond}),eC.BASE_DATE=e0.of(2e3,1,1),eU.CompositePrinterParser=eT,eU.PadPrinterParserDecorator=eI,eU.SettingsParser=eO,eU.CharLiteralPrinterParser=eR,eU.StringLiteralPrinterParser=eR,eU.CharLiteralPrinterParser=eE,eU.NumberPrinterParser=eA,eU.ReducedPrinterParser=eC,eU.FractionPrinterParser=eb,eU.OffsetIdPrinterParser=ew,eU.ZoneIdPrinterParser=ek,eJ.MIN=e2.MIN.atOffset(X.MAX),eJ.MAX=e2.MAX.atOffset(X.MIN),eJ.FROM=L("OffsetDateTime.FROM",function(e){return eJ.from(e)}),eQ.MIN=eQ.ofNumbers(0,0,0,0,X.MAX),eQ.MAX=eQ.ofNumbers(23,59,59,0x3b9ac9ff,X.MIN),eQ.FROM=L("OffsetTime.FROM",function(e){return eQ.from(e)})}}();var to=function(){function e(e,t){var r;if(e instanceof e8){this.instant=e;return}if(e instanceof e0)t=null==t?z.systemDefault():t,r=e.atStartOfDay(t);else if(e instanceof e2)t=null==t?z.systemDefault():t,r=e.atZone(t);else if(e instanceof eZ)r=null==t?e:e.withZoneSameInstant(t);else throw new d("unsupported instance for convert operation:"+e);this.instant=r.toInstant()}var t=e.prototype;return t.toDate=function(){return new Date(this.instant.toEpochMilli())},t.toEpochMilli=function(){return this.instant.toEpochMilli()},e}();function ta(e,t){return new to(e,t)}function ts(e,t){if(void 0===t&&(t=z.systemDefault()),_(e,"date"),_(t,"zone"),e instanceof Date)return e8.ofEpochMilli(e.getTime()).atZone(t);if("function"==typeof e.toDate&&e.toDate()instanceof Date)return e8.ofEpochMilli(e.toDate().getTime()).atZone(t);throw new d("date must be a javascript Date or a moment instance")}var tl={assert:b,DateTimeBuilder:Z,DateTimeParseContext:J,DateTimePrintContext:et,MathUtil:v,StringUtil:V,StringBuilder:eB},tc={_:tl,convert:ta,nativeJs:ts,ArithmeticException:u,DateTimeException:s,DateTimeParseException:l,IllegalArgumentException:d,IllegalStateException:h,UnsupportedTemporalTypeException:c,NullPointerException:f,Clock:e6,DayOfWeek:U,Duration:w,Instant:e8,LocalDate:e0,LocalTime:e5,LocalDateTime:e2,OffsetTime:eQ,OffsetDateTime:eJ,Month:x,MonthDay:eH,ParsePosition:q,Period:B,Year:eY,YearConstants:I,YearMonth:ej,ZonedDateTime:eZ,ZoneOffset:X,ZoneId:z,ZoneRegion:eP,ZoneOffsetTransition:e7,ZoneRules:G,ZoneRulesProvider:eN,ChronoLocalDate:$,ChronoLocalDateTime:e1,ChronoZonedDateTime:eX,IsoChronology:eK,ChronoField:P,ChronoUnit:O,IsoFields:er,Temporal:Y,TemporalAccessor:D,TemporalAdjuster:e$,TemporalAdjusters:eV,TemporalAmount:C,TemporalField:R,TemporalQueries:k,TemporalQuery:M,TemporalUnit:S,ValueRange:N,DateTimeFormatter:eq,DateTimeFormatterBuilder:eU,DecimalStyle:eg,ResolverStyle:j,SignStyle:ey,TextStyle:e_},tu=function(e){var t=[];return function(r){return~t.indexOf(r)||(r(e),t.push(r)),e}}(tc);tc.use=tu},77936,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(99121)),i=e.r(33529);let o=i.LocalDate.ofYearDay(1900,1),a=Buffer.from([0]),s=Buffer.from([8]),l={id:61,type:"DATETIME",name:"DateTime",declaration:function(){return"datetime"},generateTypeInfo:()=>Buffer.from([n.default.id,8]),generateParameterLength:(e,t)=>null==e.value?a:s,generateParameterData:function*(e,t){let r,n,a;if(null==e.value)return;let s=e.value;r=t.useUTC?i.LocalDate.of(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()):i.LocalDate.of(s.getFullYear(),s.getMonth()+1,s.getDate());let l=o.until(r,i.ChronoUnit.DAYS);if(t.useUTC){let e=60*s.getUTCHours()*60;e+=60*s.getUTCMinutes(),e+=s.getUTCSeconds(),n=1e3*e+s.getUTCMilliseconds()}else{let e=60*s.getHours()*60;e+=60*s.getMinutes(),e+=s.getSeconds(),n=1e3*e+s.getMilliseconds()}2592e4===(a=Math.round(a=n/(3+1/3)))&&(l+=1,a=0);let c=Buffer.alloc(8);c.writeInt32LE(l,0),c.writeUInt32LE(a,4),yield c},validate:function(e,t,r){let n;if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),(n=r&&r.useUTC?e.getUTCFullYear():e.getFullYear())<1753||n>9999)throw TypeError("Out of range.");if(isNaN(e))throw TypeError("Invalid date.");return e}};r.default=l,t.exports=l},67965,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(92503));let i=Buffer.from([0]),o={id:62,type:"FLT8",name:"Float",declaration:function(){return"float"},generateTypeInfo:()=>Buffer.from([n.default.id,8]),generateParameterLength:(e,t)=>null==e.value?i:Buffer.from([8]),*generateParameterData(e,t){if(null==e.value)return;let r=Buffer.alloc(8);r.writeDoubleLE(parseFloat(e.value),0),yield r},validate:function(e){if(null==e)return null;if(isNaN(e=parseFloat(e)))throw TypeError("Invalid number.");return e}};r.default=o,t.exports=o},68535,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:106,type:"DECIMALN",name:"DecimalN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},35386,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e.r(68535)),i=o(e.r(2564));function o(e){return e&&e.__esModule?e:{default:e}}let a=Buffer.from([0]),s={id:55,type:"DECIMAL",name:"Decimal",declaration:function(e){return"decimal("+this.resolvePrecision(e)+", "+this.resolveScale(e)+")"},resolvePrecision:function(e){return null!=e.precision?e.precision:null===e.value?1:18},resolveScale:function(e){return null!=e.scale?e.scale:0},generateTypeInfo(e,t){let r;return r=e.precision<=9?5:e.precision<=19?9:e.precision<=28?13:17,Buffer.from([n.default.id,r,e.precision,e.scale])},generateParameterLength(e,t){if(null==e.value)return a;let r=e.precision;return r<=9?Buffer.from([5]):r<=19?Buffer.from([9]):r<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(e,t){if(null==e.value)return;let r=e.value<0?0:1,n=Math.round(Math.abs(e.value*Math.pow(10,e.scale))),o=e.precision;if(o<=9){let e=Buffer.alloc(5);e.writeUInt8(r,0),e.writeUInt32LE(n,1),yield e}else if(o<=19){let e=new i.default(9);e.writeUInt8(r),e.writeUInt64LE(n),yield e.data}else if(o<=28){let e=new i.default(13);e.writeUInt8(r),e.writeUInt64LE(n),e.writeUInt32LE(0),yield e.data}else{let e=new i.default(17);e.writeUInt8(r),e.writeUInt64LE(n),e.writeUInt32LE(0),e.writeUInt32LE(0),yield e.data}},validate:function(e){if(null==e)return null;if(isNaN(e=parseFloat(e)))throw TypeError("Invalid number.");return e}};r.default=s,t.exports=s},19990,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:108,type:"NUMERICN",name:"NumericN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},81110,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e.r(19990)),i=o(e.r(2564));function o(e){return e&&e.__esModule?e:{default:e}}let a=Buffer.from([0]),s={id:63,type:"NUMERIC",name:"Numeric",declaration:function(e){return"numeric("+this.resolvePrecision(e)+", "+this.resolveScale(e)+")"},resolvePrecision:function(e){return null!=e.precision?e.precision:null===e.value?1:18},resolveScale:function(e){return null!=e.scale?e.scale:0},generateTypeInfo(e){let t;return t=e.precision<=9?5:e.precision<=19?9:e.precision<=28?13:17,Buffer.from([n.default.id,t,e.precision,e.scale])},generateParameterLength(e,t){if(null==e.value)return a;let r=e.precision;return r<=9?Buffer.from([5]):r<=19?Buffer.from([9]):r<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(e,t){if(null==e.value)return;let r=e.value<0?0:1,n=Math.round(Math.abs(e.value*Math.pow(10,e.scale)));if(e.precision<=9){let e=Buffer.alloc(5);e.writeUInt8(r,0),e.writeUInt32LE(n,1),yield e}else if(e.precision<=19){let e=new i.default(10);e.writeUInt8(r),e.writeUInt64LE(n),yield e.data}else if(e.precision<=28){let e=new i.default(14);e.writeUInt8(r),e.writeUInt64LE(n),e.writeUInt32LE(0),yield e.data}else{let e=new i.default(18);e.writeUInt8(r),e.writeUInt64LE(n),e.writeUInt32LE(0),e.writeUInt32LE(0),yield e.data}},validate:function(e){if(null==e)return null;if(isNaN(e=parseFloat(e)))throw TypeError("Invalid number.");return e}};r.default=s,t.exports=s},75760,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(71974));let i=Buffer.from([4]),o=Buffer.from([0]),a={id:122,type:"MONEY4",name:"SmallMoney",declaration:function(){return"smallmoney"},generateTypeInfo:function(){return Buffer.from([n.default.id,4])},generateParameterLength:(e,t)=>null==e.value?o:i,*generateParameterData(e,t){if(null==e.value)return;let r=Buffer.alloc(4);r.writeInt32LE(1e4*e.value,0),yield r},validate:function(e){if(null==e)return null;if(isNaN(e=parseFloat(e)))throw TypeError("Invalid number.");if(e<-214748.3648||e>214748.3647)throw TypeError("Value must be between -214748.3648 and 214748.3647.");return e}};r.default=a,t.exports=a},21514,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e.r(71933)),i=o(e.r(2564));function o(e){return e&&e.__esModule?e:{default:e}}let a=Buffer.from([8]),s=Buffer.from([0]),l=-0x8000000000000000n,c={id:127,type:"INT8",name:"BigInt",declaration:function(){return"bigint"},generateTypeInfo:()=>Buffer.from([n.default.id,8]),generateParameterLength:(e,t)=>null==e.value?s:a,*generateParameterData(e,t){if(null==e.value)return;let r=new i.default(8);r.writeBigInt64LE("bigint"==typeof e.value?e.value:globalThis.BigInt(e.value)),yield r.data},validate:function(e){if(null==e)return null;if("bigint"!=typeof e&&(e=globalThis.BigInt(e)),e<l||e>0x7fffffffffffffffn)throw TypeError(`Value must be between ${l} and ${0x7fffffffffffffffn}, inclusive.`);return e}};r.default=c,t.exports=c},65,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n=Buffer.from([255,255,255,255]),i={id:34,type:"IMAGE",name:"Image",hasTableName:!0,declaration:function(){return"image"},resolveLength:function(e){return null!=e.value?e.value.length:-1},generateTypeInfo(e){let t=Buffer.alloc(5);return t.writeUInt8(this.id,0),t.writeInt32LE(e.length,1),t},generateParameterLength(e,t){if(null==e.value)return n;let r=Buffer.alloc(4);return r.writeInt32LE(e.value.length,0),r},*generateParameterData(e,t){null!=e.value&&(yield e.value)},validate:function(e){if(null==e)return null;if(!Buffer.isBuffer(e))throw TypeError("Invalid buffer.");return e}};r.default=i,t.exports=i},98472,(e,t,r)=>{"use strict";var n,i=e.r(874),o=i.Buffer,a={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(a[n]=i[n]);var s=a.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(s[n]=o[n]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(e,t,r){if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,r)}),s.alloc||(s.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*0x40000000)throw RangeError('The value "'+e+'" is invalid for option "size"');var n=o(e);return t&&0!==t.length?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n}),!a.kStringMaxLength)try{a.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}!a.constants&&(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a},5485,(e,t,r)=>{"use strict";function n(e,t){this.encoder=e,this.addBOM=!0}function i(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}r.PrependBOM=n,n.prototype.write=function(e){return this.addBOM&&(e="\uFEFF"+e,this.addBOM=!1),this.encoder.write(e)},n.prototype.end=function(){return this.encoder.end()},r.StripBOM=i,i.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||("\uFEFF"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),t},i.prototype.end=function(){return this.decoder.end()}},99348,(e,t,r)=>{t.exports=e.x("string_decoder",()=>require("string_decoder"))},45696,(e,t,r)=>{"use strict";var n=e.r(98472).Buffer;function i(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=l:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=c,""!==n.from("eda0bdedb2a9","hex").toString()&&(this.decoder=u,this.defaultCharUnicode=t.defaultCharUnicode))}t.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=s,i.prototype.decoder=a;var o=e.r(99348).StringDecoder;function a(e,t){this.decoder=new o(t.enc)}function s(e,t){this.enc=t.enc}function l(e,t){this.prevStr=""}function c(e,t){}function u(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),a.prototype.write=function(e){return n.isBuffer(e)||(e=n.from(e)),this.decoder.write(e)},a.prototype.end=function(){return this.decoder.end()},s.prototype.write=function(e){return n.from(e,this.enc)},s.prototype.end=function(){},l.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),n.from(e,"base64")},l.prototype.end=function(){return n.from(this.prevStr,"base64")},c.prototype.write=function(e){for(var t=n.alloc(3*e.length),r=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[r++]=o:(o<2048?t[r++]=192+(o>>>6):(t[r++]=224+(o>>>12),t[r++]=128+(o>>>6&63)),t[r++]=128+(63&o))}return t.slice(0,r)},c.prototype.end=function(){},u.prototype.write=function(e){for(var t=this.acc,r=this.contBytes,n=this.accBytes,i="",o=0;o<e.length;o++){var a=e[o];(192&a)!=128?(r>0&&(i+=this.defaultCharUnicode,r=0),a<128?i+=String.fromCharCode(a):a<224?(t=31&a,r=1,n=1):a<240?(t=15&a,r=2,n=1):i+=this.defaultCharUnicode):r>0?(t=t<<6|63&a,r--,n++,0===r&&(2===n&&t<128&&t>0||3===n&&t<2048?i+=this.defaultCharUnicode:i+=String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=r,this.accBytes=n,i},u.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},59128,(e,t,r)=>{"use strict";var n=e.r(98472).Buffer;function i(e,t){this.iconv=t,this.bomAware=!0,this.isLE=e.isLE}function o(e,t){this.isLE=t.isLE,this.highSurrogate=0}function a(e,t){this.isLE=t.isLE,this.badChar=t.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}function s(e,t,r,n){if((r<0||r>1114111)&&(r=n),r>=65536){var i=55296|(r-=65536)>>10;e[t++]=255&i,e[t++]=i>>8;var r=56320|1023&r}return e[t++]=255&r,e[t++]=r>>8,t}function l(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder(e.defaultEncoding||"utf-32le",e)}function u(e,t){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=e||{},this.iconv=t.iconv}function d(e,t){var r=[],n=0,i=0,o=0,a=0,s=0;r:for(var l=0;l<e.length;l++)for(var c=e[l],u=0;u<c.length;u++)if(r.push(c[u]),4===r.length){if(0===n){if(255===r[0]&&254===r[1]&&0===r[2]&&0===r[3])return"utf-32le";if(0===r[0]&&0===r[1]&&254===r[2]&&255===r[3])return"utf-32be"}if((0!==r[0]||r[1]>16)&&o++,(0!==r[3]||r[2]>16)&&i++,0===r[0]&&0===r[1]&&(0!==r[2]||0!==r[3])&&s++,(0!==r[0]||0!==r[1])&&0===r[2]&&0===r[3]&&a++,r.length=0,++n>=100)break r}return s-o>a-i?"utf-32be":s-o<a-i?"utf-32le":t||"utf-32le"}r._utf32=i,r.utf32le={type:"_utf32",isLE:!0},r.utf32be={type:"_utf32",isLE:!1},r.ucs4le="utf32le",r.ucs4be="utf32be",i.prototype.encoder=o,i.prototype.decoder=a,o.prototype.write=function(e){for(var t=n.from(e,"ucs2"),r=n.alloc(2*t.length),i=this.isLE?r.writeUInt32LE:r.writeUInt32BE,o=0,a=0;a<t.length;a+=2){var s=t.readUInt16LE(a),l=55296<=s&&s<56320,c=56320<=s&&s<57344;if(this.highSurrogate)if(l||!c)i.call(r,this.highSurrogate,o),o+=4;else{var u=(this.highSurrogate-55296<<10|s-56320)+65536;i.call(r,u,o),o+=4,this.highSurrogate=0;continue}l?this.highSurrogate=s:(i.call(r,s,o),o+=4,this.highSurrogate=0)}return o<r.length&&(r=r.slice(0,o)),r},o.prototype.end=function(){if(this.highSurrogate){var e=n.alloc(4);return this.isLE?e.writeUInt32LE(this.highSurrogate,0):e.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,e}},a.prototype.write=function(e){if(0===e.length)return"";var t=0,r=0,i=n.alloc(e.length+4),o=0,a=this.isLE,l=this.overflow,c=this.badChar;if(l.length>0){for(;t<e.length&&l.length<4;t++)l.push(e[t]);4===l.length&&(r=a?l[t]|l[t+1]<<8|l[t+2]<<16|l[t+3]<<24:l[t+3]|l[t+2]<<8|l[t+1]<<16|l[t]<<24,l.length=0,o=s(i,o,r,c))}for(;t<e.length-3;t+=4)o=s(i,o,r=a?e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24:e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]<<24,c);for(;t<e.length;t++)l.push(e[t]);return i.slice(0,o).toString("ucs2")},a.prototype.end=function(){this.overflow.length=0},r.utf32=l,r.ucs4="utf32",l.prototype.encoder=c,l.prototype.decoder=u,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},u.prototype.write=function(e){if(!this.decoder){if(this.initialBufs.push(e),this.initialBufsLen+=e.length,this.initialBufsLen<32)return"";var t=d(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var r="",n=0;n<this.initialBufs.length;n++)r+=this.decoder.write(this.initialBufs[n]);return this.initialBufs.length=this.initialBufsLen=0,r}return this.decoder.write(e)},u.prototype.end=function(){if(!this.decoder){var e=d(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);for(var t="",r=0;r<this.initialBufs.length;r++)t+=this.decoder.write(this.initialBufs[r]);var n=this.decoder.end();return n&&(t+=n),this.initialBufs.length=this.initialBufsLen=0,t}return this.decoder.end()}},28046,(e,t,r)=>{"use strict";var n=e.r(98472).Buffer;function i(){}function o(){}function a(){this.overflowByte=-1}function s(e,t){this.iconv=t}function l(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function c(e,t){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=e||{},this.iconv=t.iconv}function u(e,t){var r=[],n=0,i=0,o=0;r:for(var a=0;a<e.length;a++)for(var s=e[a],l=0;l<s.length;l++)if(r.push(s[l]),2===r.length){if(0===n){if(255===r[0]&&254===r[1])return"utf-16le";if(254===r[0]&&255===r[1])return"utf-16be"}if(0===r[0]&&0!==r[1]&&o++,0!==r[0]&&0===r[1]&&i++,r.length=0,++n>=100)break r}return o>i?"utf-16be":o<i?"utf-16le":t||"utf-16le"}r.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=a,i.prototype.bomAware=!0,o.prototype.write=function(e){for(var t=n.from(e,"ucs2"),r=0;r<t.length;r+=2){var i=t[r];t[r]=t[r+1],t[r+1]=i}return t},o.prototype.end=function(){},a.prototype.write=function(e){if(0==e.length)return"";var t=n.alloc(e.length+1),r=0,i=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,r=1,i=2);r<e.length-1;r+=2,i+=2)t[i]=e[r+1],t[i+1]=e[r];return this.overflowByte=r==e.length-1?e[e.length-1]:-1,t.slice(0,i).toString("ucs2")},a.prototype.end=function(){this.overflowByte=-1},r.utf16=s,s.prototype.encoder=l,s.prototype.decoder=c,l.prototype.write=function(e){return this.encoder.write(e)},l.prototype.end=function(){return this.encoder.end()},c.prototype.write=function(e){if(!this.decoder){if(this.initialBufs.push(e),this.initialBufsLen+=e.length,this.initialBufsLen<16)return"";var t=u(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var r="",n=0;n<this.initialBufs.length;n++)r+=this.decoder.write(this.initialBufs[n]);return this.initialBufs.length=this.initialBufsLen=0,r}return this.decoder.write(e)},c.prototype.end=function(){if(!this.decoder){var e=u(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);for(var t="",r=0;r<this.initialBufs.length;r++)t+=this.decoder.write(this.initialBufs[r]);var n=this.decoder.end();return n&&(t+=n),this.initialBufs.length=this.initialBufsLen=0,t}return this.decoder.end()}},94172,(e,t,r)=>{"use strict";var n=e.r(98472).Buffer;function i(e,t){this.iconv=t}r.utf7=i,r.unicode11utf7="utf7",i.prototype.encoder=a,i.prototype.decoder=s,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function a(e,t){this.iconv=t.iconv}function s(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(e){return n.from(e.replace(o,(function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}).bind(this)))},a.prototype.end=function(){};for(var l=/[A-Za-z0-9\/+]/,c=[],u=0;u<256;u++)c[u]=l.test(String.fromCharCode(u));function d(e,t){this.iconv=t}function h(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=n.alloc(6),this.base64AccumIdx=0}function f(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){for(var t="",r=0,i=this.inBase64,o=this.base64Accum,a=0;a<e.length;a++)if(i){if(!c[e[a]]){if(a==r&&45==e[a])t+="+";else{var s=o+this.iconv.decode(e.slice(r,a),"ascii");t+=this.iconv.decode(n.from(s,"base64"),"utf16-be")}45!=e[a]&&a--,r=a+1,i=!1,o=""}}else 43==e[a]&&(t+=this.iconv.decode(e.slice(r,a),"ascii"),r=a+1,i=!0);if(i){var s=o+this.iconv.decode(e.slice(r),"ascii"),l=s.length-s.length%8;o=s.slice(l),s=s.slice(0,l),t+=this.iconv.decode(n.from(s,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(r),"ascii");return this.inBase64=i,this.base64Accum=o,t},s.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(n.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},r.utf7imap=d,d.prototype.encoder=h,d.prototype.decoder=f,d.prototype.bomAware=!0,h.prototype.write=function(e){for(var t=this.inBase64,r=this.base64Accum,i=this.base64AccumIdx,o=n.alloc(5*e.length+10),a=0,s=0;s<e.length;s++){var l=e.charCodeAt(s);32<=l&&l<=126?(t&&(i>0&&(a+=o.write(r.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),a),i=0),o[a++]=45,t=!1),t||(o[a++]=l,38===l&&(o[a++]=45))):(t||(o[a++]=38,t=!0),t&&(r[i++]=l>>8,r[i++]=255&l,i==r.length&&(a+=o.write(r.toString("base64").replace(/\//g,","),a),i=0)))}return this.inBase64=t,this.base64AccumIdx=i,o.slice(0,a)},h.prototype.end=function(){var e=n.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=45,this.inBase64=!1),e.slice(0,t)};var p=c.slice();p[44]=!0,f.prototype.write=function(e){for(var t="",r=0,i=this.inBase64,o=this.base64Accum,a=0;a<e.length;a++)if(i){if(!p[e[a]]){if(a==r&&45==e[a])t+="&";else{var s=o+this.iconv.decode(e.slice(r,a),"ascii").replace(/,/g,"/");t+=this.iconv.decode(n.from(s,"base64"),"utf16-be")}45!=e[a]&&a--,r=a+1,i=!1,o=""}}else 38==e[a]&&(t+=this.iconv.decode(e.slice(r,a),"ascii"),r=a+1,i=!0);if(i){var s=o+this.iconv.decode(e.slice(r),"ascii").replace(/,/g,"/"),l=s.length-s.length%8;o=s.slice(l),s=s.slice(0,l),t+=this.iconv.decode(n.from(s,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(r),"ascii");return this.inBase64=i,this.base64Accum=o,t},f.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(n.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},98370,(e,t,r)=>{"use strict";var n=e.r(98472).Buffer;function i(e,t){if(!e)throw Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var r="",i=0;i<128;i++)r+=String.fromCharCode(i);e.chars=r+e.chars}this.decodeBuf=n.from(e.chars,"ucs2");for(var o=n.alloc(65536,t.defaultCharSingleByte.charCodeAt(0)),i=0;i<e.chars.length;i++)o[e.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(e,t){this.encodeBuf=t.encodeBuf}function a(e,t){this.decodeBuf=t.decodeBuf}r._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=a,o.prototype.write=function(e){for(var t=n.alloc(e.length),r=0;r<e.length;r++)t[r]=this.encodeBuf[e.charCodeAt(r)];return t},o.prototype.end=function(){},a.prototype.write=function(e){for(var t=this.decodeBuf,r=n.alloc(2*e.length),i=0,o=0,a=0;a<e.length;a++)i=2*e[a],r[o=2*a]=t[i],r[o+1]=t[i+1];return r.toString("ucs2")},a.prototype.end=function(){}},28936,(e,t,r)=>{"use strict";t.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},27926,(e,t,r)=>{"use strict";t.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\x01\x02\x03\x04\x05\x06\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\x03\x07\b	\n\v\f\r\x0e\x0f\x10\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\x01\x03\x04\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x15\x16\x17\x18\x1a\x1b\x1c\x1d\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\x01\x02\x03\x04\x05\x06\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\x01\x02\x03\x04\x05\x06\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},16591,(e,t,r)=>{"use strict";var n=e.r(98472).Buffer;r._dbcs=a;for(var i=Array(256),o=0;o<256;o++)i[o]=-1;function a(e,t){if(this.encodingName=e.encodingName,!e)throw Error("DBCS codec is called without the data.");if(!e.table)throw Error("Encoding '"+this.encodingName+"' has no data.");var r=e.table();this.decodeTables=[],this.decodeTables[0]=i.slice(0),this.decodeTableSeq=[];for(var n=0;n<r.length;n++)this._addDecodeChunk(r[n]);if("function"==typeof e.gb18030){this.gb18030=e.gb18030();var o=this.decodeTables.length;this.decodeTables.push(i.slice(0));var a=this.decodeTables.length;this.decodeTables.push(i.slice(0));for(var s=this.decodeTables[0],n=129;n<=254;n++)for(var l=this.decodeTables[-1e3-s[n]],c=48;c<=57;c++){if(-1===l[c])l[c]=-1e3-o;else if(l[c]>-1e3)throw Error("gb18030 decode tables conflict at byte 2");for(var u=this.decodeTables[-1e3-l[c]],d=129;d<=254;d++){if(-1===u[d])u[d]=-1e3-a;else if(u[d]===-1e3-a)continue;else if(u[d]>-1e3)throw Error("gb18030 decode tables conflict at byte 3");for(var h=this.decodeTables[-1e3-u[d]],f=48;f<=57;f++)-1===h[f]&&(h[f]=-2)}}}this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var p={};if(e.encodeSkipVals)for(var n=0;n<e.encodeSkipVals.length;n++){var m=e.encodeSkipVals[n];if("number"==typeof m)p[m]=!0;else for(var c=m.from;c<=m.to;c++)p[c]=!0}if(this._fillEncodeTable(0,0,p),e.encodeAdd)for(var g in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,g)&&this._setEncodeChar(g.charCodeAt(0),e.encodeAdd[g]);this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],-1===this.defCharSB&&(this.defCharSB=this.encodeTable[0]["?"]),-1===this.defCharSB&&(this.defCharSB=63)}function s(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function l(e,t){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function c(e,t){if(e[0]>t)return -1;for(var r=0,n=e.length;r<n-1;){var i=r+(n-r+1>>1);e[i]<=t?r=i:n=i}return r}a.prototype.encoder=s,a.prototype.decoder=l,a.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>>=8)t.push(255&e);0==t.length&&t.push(0);for(var r=this.decodeTables[0],n=t.length-1;n>0;n--){var o=r[t[n]];if(-1==o)r[t[n]]=-1e3-this.decodeTables.length,this.decodeTables.push(r=i.slice(0));else if(o<=-1e3)r=this.decodeTables[-1e3-o];else throw Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16))}return r},a.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),r=this._getDecodeTrieNode(t);t&=255;for(var n=1;n<e.length;n++){var i=e[n];if("string"==typeof i)for(var o=0;o<i.length;){var a=i.charCodeAt(o++);if(55296<=a&&a<56320){var s=i.charCodeAt(o++);if(56320<=s&&s<57344)r[t++]=65536+(a-55296)*1024+(s-56320);else throw Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0])}else if(4080<a&&a<=4095){for(var l=4095-a+2,c=[],u=0;u<l;u++)c.push(i.charCodeAt(o++));r[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(c)}else r[t++]=a}else if("number"==typeof i)for(var d=r[t-1]+1,o=0;o<i;o++)r[t++]=d++;else throw Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0])}if(t>255)throw Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},a.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=i.slice(0)),this.encodeTable[t]},a.prototype._setEncodeChar=function(e,t){var r=this._getEncodeBucket(e),n=255&e;r[n]<=-10?this.encodeTableSeq[-10-r[n]][-1]=t:-1==r[n]&&(r[n]=t)},a.prototype._setEncodeSequence=function(e,t){var r,n=e[0],i=this._getEncodeBucket(n),o=255&n;i[o]<=-10?r=this.encodeTableSeq[-10-i[o]]:(r={},-1!==i[o]&&(r[-1]=i[o]),i[o]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(r));for(var a=1;a<e.length-1;a++){var s=r[n];"object"==typeof s?r=s:(r=r[n]={},void 0!==s&&(r[-1]=s))}r[n=e[e.length-1]]=t},a.prototype._fillEncodeTable=function(e,t,r){for(var n=this.decodeTables[e],i=!1,o={},a=0;a<256;a++){var s=n[a],l=t+a;if(!r[l])if(s>=0)this._setEncodeChar(s,l),i=!0;else if(s<=-1e3){var c=-1e3-s;if(!o[c]){var u=l<<8>>>0;this._fillEncodeTable(c,u,r)?i=!0:o[c]=!0}}else s<=-10&&(this._setEncodeSequence(this.decodeTableSeq[-10-s],l),i=!0)}return i},s.prototype.write=function(e){for(var t=n.alloc(e.length*(this.gb18030?4:3)),r=this.leadSurrogate,i=this.seqObj,o=-1,a=0,s=0;;){if(-1===o){if(a==e.length)break;var l=e.charCodeAt(a++)}else{var l=o;o=-1}if(55296<=l&&l<57344)if(l<56320)if(-1===r){r=l;continue}else r=l,l=-1;else -1!==r?(l=65536+(r-55296)*1024+(l-56320),r=-1):l=-1;else -1!==r&&(o=l,l=-1,r=-1);var u=-1;if(void 0!==i&&-1!=l){var d=i[l];if("object"==typeof d){i=d;continue}"number"==typeof d?u=d:void 0==d&&void 0!==(d=i[-1])&&(u=d,o=l),i=void 0}else if(l>=0){var h=this.encodeTable[l>>8];if(void 0!==h&&(u=h[255&l]),u<=-10){i=this.encodeTableSeq[-10-u];continue}if(-1==u&&this.gb18030){var f=c(this.gb18030.uChars,l);if(-1!=f){var u=this.gb18030.gbChars[f]+(l-this.gb18030.uChars[f]);t[s++]=129+Math.floor(u/12600),u%=12600,t[s++]=48+Math.floor(u/1260),u%=1260,t[s++]=129+Math.floor(u/10),u%=10,t[s++]=48+u;continue}}}-1===u&&(u=this.defaultCharSingleByte),u<256?t[s++]=u:(u<65536?t[s++]=u>>8:u<0x1000000?(t[s++]=u>>16,t[s++]=u>>8&255):(t[s++]=u>>>24,t[s++]=u>>>16&255,t[s++]=u>>>8&255),t[s++]=255&u)}return this.seqObj=i,this.leadSurrogate=r,t.slice(0,s)},s.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=n.alloc(10),t=0;if(this.seqObj){var r=this.seqObj[-1];void 0!==r&&(r<256?e[t++]=r:(e[t++]=r>>8,e[t++]=255&r)),this.seqObj=void 0}return -1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},s.prototype.findIdx=c,l.prototype.write=function(e){for(var t,r=n.alloc(2*e.length),i=this.nodeIdx,o=this.prevBytes,a=this.prevBytes.length,s=-this.prevBytes.length,l=0,u=0;l<e.length;l++){var d=l>=0?e[l]:o[l+a],t=this.decodeTables[i][d];if(t>=0);else if(-1===t)t=this.defaultCharUnicode.charCodeAt(0),l=s;else if(-2===t){if(l>=3)var h=(e[l-3]-129)*12600+(e[l-2]-48)*1260+(e[l-1]-129)*10+(d-48);else var h=(o[l-3+a]-129)*12600+((l-2>=0?e[l-2]:o[l-2+a])-48)*1260+((l-1>=0?e[l-1]:o[l-1+a])-129)*10+(d-48);var f=c(this.gb18030.gbChars,h);t=this.gb18030.uChars[f]+h-this.gb18030.gbChars[f]}else if(t<=-1e3){i=-1e3-t;continue}else if(t<=-10){for(var p=this.decodeTableSeq[-10-t],m=0;m<p.length-1;m++)t=p[m],r[u++]=255&t,r[u++]=t>>8;t=p[p.length-1]}else throw Error("iconv-lite internal error: invalid decoding table value "+t+" at "+i+"/"+d);if(t>=65536){var g=55296|(t-=65536)>>10;r[u++]=255&g,r[u++]=g>>8,t=56320|1023&t}r[u++]=255&t,r[u++]=t>>8,i=0,s=l+1}return this.nodeIdx=i,this.prevBytes=s>=0?Array.prototype.slice.call(e,s):o.slice(s+a).concat(Array.prototype.slice.call(e)),r.slice(0,u).toString("ucs2")},l.prototype.end=function(){for(var e="";this.prevBytes.length>0;){e+=this.defaultCharUnicode;var t=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.prevBytes=[],this.nodeIdx=0,e}},63170,e=>{e.v(JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]'))},72410,e=>{e.v(JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]'))},76535,e=>{e.v(JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]'))},74899,e=>{e.v(JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]]'))},48720,e=>{e.v(JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}'))},85812,e=>{e.v(JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]'))},66554,e=>{e.v(JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]'))},52190,e=>{e.v(JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]'))},63877,(e,t,r)=>{"use strict";t.exports={shiftjis:{type:"_dbcs",table:function(){return e.r(63170)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return e.r(72410)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return e.r(76535)}},gbk:{type:"_dbcs",table:function(){return e.r(76535).concat(e.r(74899))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return e.r(76535).concat(e.r(74899))},gb18030:function(){return e.r(48720)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return e.r(85812)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return e.r(66554)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return e.r(66554).concat(e.r(52190))},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},95256,(e,t,r)=>{"use strict";for(var n=[e.r(45696),e.r(59128),e.r(28046),e.r(94172),e.r(98370),e.r(28936),e.r(27926),e.r(16591),e.r(63877)],i=0;i<n.length;i++){var t=n[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}},83961,(e,t,r)=>{"use strict";var n=e.r(98472).Buffer;t.exports=function(e){var t=e.Transform;function r(e,r){this.conv=e,(r=r||{}).decodeStrings=!1,t.call(this,r)}function i(e,r){this.conv=e,(r=r||{}).encoding=this.encoding="utf8",t.call(this,r)}return r.prototype=Object.create(t.prototype,{constructor:{value:r}}),r.prototype._transform=function(e,t,r){if("string"!=typeof e)return r(Error("Iconv encoding stream needs strings as its input."));try{var n=this.conv.write(e);n&&n.length&&this.push(n),r()}catch(e){r(e)}},r.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},r.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",function(e){t.push(e)}),this.on("end",function(){e(null,n.concat(t))}),this},i.prototype=Object.create(t.prototype,{constructor:{value:i}}),i.prototype._transform=function(e,t,r){if(!n.isBuffer(e)&&!(e instanceof Uint8Array))return r(Error("Iconv decoding stream needs buffers as its input."));try{var i=this.conv.write(e);i&&i.length&&this.push(i,this.encoding),r()}catch(e){r(e)}},i.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},i.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",function(e){t+=e}),this.on("end",function(){e(null,t)}),this},{IconvLiteEncoderStream:r,IconvLiteDecoderStream:i}}},69487,(e,t,r)=>{"use strict";var n,i=e.r(98472).Buffer,o=e.r(5485),a=t.exports;a.encodings=null,a.defaultCharUnicode="",a.defaultCharSingleByte="?",a.encode=function(e,t,r){e=""+(e||"");var n=a.getEncoder(t,r),o=n.write(e),s=n.end();return s&&s.length>0?i.concat([o,s]):o},a.decode=function(e,t,r){"string"==typeof e&&(a.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),a.skipDecodeWarning=!0),e=i.from(""+(e||""),"binary"));var n=a.getDecoder(t,r),o=n.write(e),s=n.end();return s?o+s:o},a.encodingExists=function(e){try{return a.getCodec(e),!0}catch(e){return!1}},a.toEncoding=a.encode,a.fromEncoding=a.decode,a._codecDataCache={},a.getCodec=function(t){a.encodings||(a.encodings=e.r(95256));for(var r=a._canonicalizeEncoding(t),n={};;){var i=a._codecDataCache[r];if(i)return i;var o=a.encodings[r];switch(typeof o){case"string":r=o;break;case"object":for(var s in o)n[s]=o[s];n.encodingName||(n.encodingName=r),r=o.type;break;case"function":return n.encodingName||(n.encodingName=r),i=new o(n,a),a._codecDataCache[n.encodingName]=i,i;default:throw Error("Encoding not recognized: '"+t+"' (searched as: '"+r+"')")}}},a._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},a.getEncoder=function(e,t){var r=a.getCodec(e),n=new r.encoder(t,r);return r.bomAware&&t&&t.addBOM&&(n=new o.PrependBOM(n,t)),n},a.getDecoder=function(e,t){var r=a.getCodec(e),n=new r.decoder(t,r);return r.bomAware&&!(t&&!1===t.stripBOM)&&(n=new o.StripBOM(n,t)),n},a.enableStreamingAPI=function(t){if(!a.supportsStreams){var r=e.r(83961)(t);a.IconvLiteEncoderStream=r.IconvLiteEncoderStream,a.IconvLiteDecoderStream=r.IconvLiteDecoderStream,a.encodeStream=function(e,t){return new a.IconvLiteEncoderStream(a.getEncoder(e,t),t)},a.decodeStream=function(e,t){return new a.IconvLiteDecoderStream(a.getDecoder(e,t),t)},a.supportsStreams=!0}};try{n=e.r(88947)}catch(e){}n&&n.Transform?a.enableStreamingAPI(n):a.encodeStream=a.decodeStream=function(){throw Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}},97985,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(69487));let i=Buffer.from([255,255,255,255]),o={id:35,type:"TEXT",name:"Text",hasTableName:!0,declaration:function(){return"text"},resolveLength:function(e){let t=e.value;return null!=t?t.length:-1},generateTypeInfo(e,t){let r=Buffer.alloc(10);return r.writeUInt8(this.id,0),r.writeInt32LE(e.length,1),e.collation&&e.collation.toBuffer().copy(r,5,0,5),r},generateParameterLength(e,t){let r=e.value;if(null==r)return i;let n=Buffer.alloc(4);return n.writeInt32LE(r.length,0),n},generateParameterData:function*(e,t){let r=e.value;null!=r&&(yield r)},validate:function(e,t){if(null==e)return null;if("string"!=typeof e)throw TypeError("Invalid string.");if(!t)throw Error("No collation was set by the server for the current connection.");if(!t.codepage)throw Error("The collation set by the server has no associated encoding.");return n.default.encode(e,t.codepage)}};r.default=o,t.exports=o},84539,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bufferToLowerCaseGuid=function(e){return i[e[3]]+i[e[2]]+i[e[1]]+i[e[0]]+"-"+i[e[5]]+i[e[4]]+"-"+i[e[7]]+i[e[6]]+"-"+i[e[8]]+i[e[9]]+"-"+i[e[10]]+i[e[11]]+i[e[12]]+i[e[13]]+i[e[14]]+i[e[15]]},r.bufferToUpperCaseGuid=function(e){return n[e[3]]+n[e[2]]+n[e[1]]+n[e[0]]+"-"+n[e[5]]+n[e[4]]+"-"+n[e[7]]+n[e[6]]+"-"+n[e[8]]+n[e[9]]+"-"+n[e[10]]+n[e[11]]+n[e[12]]+n[e[13]]+n[e[14]]+n[e[15]]},r.guidToArray=function(e){return[o[e.charCodeAt(6)][e.charCodeAt(7)],o[e.charCodeAt(4)][e.charCodeAt(5)],o[e.charCodeAt(2)][e.charCodeAt(3)],o[e.charCodeAt(0)][e.charCodeAt(1)],o[e.charCodeAt(11)][e.charCodeAt(12)],o[e.charCodeAt(9)][e.charCodeAt(10)],o[e.charCodeAt(16)][e.charCodeAt(17)],o[e.charCodeAt(14)][e.charCodeAt(15)],o[e.charCodeAt(19)][e.charCodeAt(20)],o[e.charCodeAt(21)][e.charCodeAt(22)],o[e.charCodeAt(24)][e.charCodeAt(25)],o[e.charCodeAt(26)][e.charCodeAt(27)],o[e.charCodeAt(28)][e.charCodeAt(29)],o[e.charCodeAt(30)][e.charCodeAt(31)],o[e.charCodeAt(32)][e.charCodeAt(33)],o[e.charCodeAt(34)][e.charCodeAt(35)]]};let n=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],o={},a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"].map(e=>e.charCodeAt(0));for(let e=0;e<a.length;e++){let t=o[a[e]]={};for(let r=0;r<a.length;r++){let n=parseInt(String.fromCharCode(a[e],a[r]),16);t[a[r]]=n}}},81941,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(84539);let i=Buffer.from([0]),o=Buffer.from([16]),a={id:36,type:"GUIDN",name:"UniqueIdentifier",declaration:function(){return"uniqueidentifier"},resolveLength:function(){return 16},generateTypeInfo(){return Buffer.from([this.id,16])},generateParameterLength:(e,t)=>null==e.value?i:o,generateParameterData:function*(e,t){null!=e.value&&(yield Buffer.from((0,n.guidToArray)(e.value)))},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw TypeError("Invalid string.");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))throw TypeError("Invalid GUID.");return e}};r.default=a,t.exports=a},2114,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n=Buffer.from([255,255,255,255]),i={id:99,type:"NTEXT",name:"NText",hasTableName:!0,declaration:function(){return"ntext"},resolveLength:function(e){let t=e.value;return null!=t?t.length:-1},generateTypeInfo(e,t){let r=Buffer.alloc(10);return r.writeUInt8(this.id,0),r.writeInt32LE(e.length,1),e.collation&&e.collation.toBuffer().copy(r,5,0,5),r},generateParameterLength(e,t){if(null==e.value)return n;let r=Buffer.alloc(4);return r.writeInt32LE(Buffer.byteLength(e.value,"ucs2"),0),r},generateParameterData:function*(e,t){null!=e.value&&(yield Buffer.from(e.value.toString(),"ucs2"))},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw TypeError("Invalid string.");return e}};r.default=i,t.exports=i},20702,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n=Buffer.from([254,255,255,255,255,255,255,255]),i=Buffer.from([0,0,0,0]),o=Buffer.from([255,255]),a=Buffer.from([255,255,255,255,255,255,255,255]),s={id:165,type:"BIGVARBIN",name:"VarBinary",maximumLength:8e3,declaration:function(e){let t,r=e.value;return(t=e.length?e.length:null!=r?r.length||1:null!==r||e.output?this.maximumLength:1)<=this.maximumLength?"varbinary("+t+")":"varbinary(max)"},resolveLength:function(e){let t=e.value;return null!=e.length?e.length:null!=t?t.length:this.maximumLength},generateTypeInfo:function(e){let t=Buffer.alloc(3);return t.writeUInt8(this.id,0),e.length<=this.maximumLength?t.writeUInt16LE(e.length,1):t.writeUInt16LE(65535,1),t},generateParameterLength(e,t){if(null==e.value)if(e.length<=this.maximumLength)return o;else return a;let r=e.value;Buffer.isBuffer(r)||(r=r.toString());let i=Buffer.byteLength(r,"ucs2");if(!(e.length<=this.maximumLength))return n;{let e=Buffer.alloc(2);return e.writeUInt16LE(i,0),e}},*generateParameterData(e,t){if(null==e.value)return;let r=e.value;if(e.length<=this.maximumLength)Buffer.isBuffer(r)?yield r:yield Buffer.from(r.toString(),"ucs2");else{Buffer.isBuffer(r)||(r=r.toString());let e=Buffer.byteLength(r,"ucs2");if(e>0){let t=Buffer.alloc(4);t.writeUInt32LE(e,0),yield t,Buffer.isBuffer(r)?yield r:yield Buffer.from(r,"ucs2")}yield i}},validate:function(e){if(null==e)return null;if(!Buffer.isBuffer(e))throw TypeError("Invalid buffer.");return e}};r.default=s,t.exports=s},92485,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(69487));let i=Buffer.from([254,255,255,255,255,255,255,255]),o=Buffer.from([0,0,0,0]),a=Buffer.from([255,255]),s=Buffer.from([255,255,255,255,255,255,255,255]),l={id:167,type:"BIGVARCHR",name:"VarChar",maximumLength:8e3,declaration:function(e){let t,r=e.value;return(t=e.length?e.length:null!=r?r.length||1:null!==r||e.output?this.maximumLength:1)<=this.maximumLength?"varchar("+t+")":"varchar(max)"},resolveLength:function(e){let t=e.value;return null!=e.length?e.length:null!=t?t.length||1:this.maximumLength},generateTypeInfo(e){let t=Buffer.alloc(8);return t.writeUInt8(this.id,0),e.length<=this.maximumLength?t.writeUInt16LE(e.length,1):t.writeUInt16LE(65535,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){let r=e.value;if(null==r)if(e.length<=this.maximumLength)return a;else return s;if(!(e.length<=this.maximumLength))return i;{let e=Buffer.alloc(2);return e.writeUInt16LE(r.length,0),e}},*generateParameterData(e,t){let r=e.value;if(null!=r)if(e.length<=this.maximumLength)yield r;else{if(r.length>0){let e=Buffer.alloc(4);e.writeUInt32LE(r.length,0),yield e,yield r}yield o}},validate:function(e,t){if(null==e)return null;if("string"!=typeof e)throw TypeError("Invalid string.");if(!t)throw Error("No collation was set by the server for the current connection.");if(!t.codepage)throw Error("The collation set by the server has no associated encoding.");return n.default.encode(e,t.codepage)}};r.default=l,t.exports=l},23779,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n=Buffer.from([255,255]),i={id:173,type:"BIGBinary",name:"Binary",maximumLength:8e3,declaration:function(e){let t=e.value;return"binary("+(e.length?e.length:null!=t?t.length||1:null!==t||e.output?this.maximumLength:1)+")"},resolveLength:function(e){let t=e.value;return null!=t?t.length:this.maximumLength},generateTypeInfo(e){let t=Buffer.alloc(3);return t.writeUInt8(this.id,0),t.writeUInt16LE(e.length,1),t},generateParameterLength(e,t){if(null==e.value)return n;let r=Buffer.alloc(2);return r.writeUInt16LE(e.length,0),r},*generateParameterData(e,t){null!=e.value&&(yield e.value.slice(0,void 0!==e.length?Math.min(e.length,this.maximumLength):this.maximumLength))},validate:function(e){if(null==e)return null;if(!Buffer.isBuffer(e))throw TypeError("Invalid buffer.");return e}};r.default=i,t.exports=i},87124,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(69487));let i=Buffer.from([255,255]),o={id:175,type:"BIGCHAR",name:"Char",maximumLength:8e3,declaration:function(e){let t,r=e.value;return(t=e.length?e.length:null!=r?r.length||1:null!==r||e.output?this.maximumLength:1)<this.maximumLength?"char("+t+")":"char("+this.maximumLength+")"},resolveLength:function(e){let t=e.value;return null!=e.length?e.length:null!=t?t.length||1:this.maximumLength},generateTypeInfo(e){let t=Buffer.alloc(8);return t.writeUInt8(this.id,0),t.writeUInt16LE(e.length,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){let r=e.value;if(null==r)return i;let n=Buffer.alloc(2);return n.writeUInt16LE(r.length,0),n},*generateParameterData(e,t){null!=e.value&&(yield Buffer.from(e.value,"ascii"))},validate:function(e,t){if(null==e)return null;if("string"!=typeof e)throw TypeError("Invalid string.");if(!t)throw Error("No collation was set by the server for the current connection.");if(!t.codepage)throw Error("The collation set by the server has no associated encoding.");return n.default.encode(e,t.codepage)}};r.default=o,t.exports=o},60749,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n=Buffer.from([254,255,255,255,255,255,255,255]),i=Buffer.from([0,0,0,0]),o=Buffer.from([255,255]),a=Buffer.from([255,255,255,255,255,255,255,255]),s={id:231,type:"NVARCHAR",name:"NVarChar",maximumLength:4e3,declaration:function(e){let t,r=e.value;return(t=e.length?e.length:null!=r?r.toString().length||1:null!==r||e.output?this.maximumLength:1)<=this.maximumLength?"nvarchar("+t+")":"nvarchar(max)"},resolveLength:function(e){let t=e.value;return null!=e.length?e.length:null==t?this.maximumLength:Buffer.isBuffer(t)?t.length/2||1:t.toString().length||1},generateTypeInfo(e){let t=Buffer.alloc(8);return t.writeUInt8(this.id,0),e.length<=this.maximumLength?t.writeUInt16LE(2*e.length,1):t.writeUInt16LE(65535,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){if(null==e.value)if(e.length<=this.maximumLength)return o;else return a;let r=e.value;if(!(e.length<=this.maximumLength))return n;{let e;r instanceof Buffer?e=r.length:(r=r.toString(),e=Buffer.byteLength(r,"ucs2"));let t=Buffer.alloc(2);return t.writeUInt16LE(e,0),t}},*generateParameterData(e,t){if(null==e.value)return;let r=e.value;if(e.length<=this.maximumLength)r instanceof Buffer?yield r:(r=r.toString(),yield Buffer.from(r,"ucs2"));else{if(r instanceof Buffer){let e=r.length;if(e>0){let t=Buffer.alloc(4);t.writeUInt32LE(e,0),yield t,yield r}}else{r=r.toString();let e=Buffer.byteLength(r,"ucs2");if(e>0){let t=Buffer.alloc(4);t.writeUInt32LE(e,0),yield t,yield Buffer.from(r,"ucs2")}}yield i}},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw TypeError("Invalid string.");return e}};r.default=s,t.exports=s},7318,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n=Buffer.from([255,255]),i={id:239,type:"NCHAR",name:"NChar",maximumLength:4e3,declaration:function(e){let t,r=e.value;return(t=e.length?e.length:null!=e.value?r.toString().length||1:null!==e.value||e.output?this.maximumLength:1)<this.maximumLength?"nchar("+t+")":"nchar("+this.maximumLength+")"},resolveLength:function(e){let t=e.value;return null!=e.length?e.length:null==e.value?this.maximumLength:Buffer.isBuffer(e.value)?e.value.length/2||1:t.toString().length||1},generateTypeInfo:function(e){let t=Buffer.alloc(8);return t.writeUInt8(this.id,0),t.writeUInt16LE(2*e.length,1),e.collation&&e.collation.toBuffer().copy(t,3,0,5),t},generateParameterLength(e,t){if(null==e.value)return n;let{value:r}=e;if(r instanceof Buffer){let e=r.length,t=Buffer.alloc(2);return t.writeUInt16LE(e,0),t}{let e=Buffer.byteLength(r.toString(),"ucs2"),t=Buffer.alloc(2);return t.writeUInt16LE(e,0),t}},*generateParameterData(e,t){if(null==e.value)return;let r=e.value;r instanceof Buffer?yield r:yield Buffer.from(r,"ucs2")},validate:function(e){if(null==e)return null;if("string"!=typeof e)throw TypeError("Invalid string.");return e}};r.default=i,t.exports=i},97819,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:241,type:"XML",name:"Xml",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},97110,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564));let i=Buffer.from([0]),o={id:41,type:"TIMEN",name:"Time",declaration:function(e){return"time("+this.resolveScale(e)+")"},resolveScale:function(e){return null!=e.scale?e.scale:7*(null!==e.value)},generateTypeInfo(e){return Buffer.from([this.id,e.scale])},generateParameterLength(e,t){if(null==e.value)return i;switch(e.scale){case 0:case 1:case 2:return Buffer.from([3]);case 3:case 4:return Buffer.from([4]);case 5:case 6:case 7:return Buffer.from([5]);default:throw Error("invalid scale")}},*generateParameterData(e,t){let r;if(null==e.value)return;let i=new n.default(16),o=e.value;switch(r=Math.round(r=(t.useUTC?((60*o.getUTCHours()+o.getUTCMinutes())*60+o.getUTCSeconds())*1e3+o.getUTCMilliseconds():((60*o.getHours()+o.getMinutes())*60+o.getSeconds())*1e3+o.getMilliseconds())*Math.pow(10,e.scale-3)+(null!=e.value.nanosecondDelta?e.value.nanosecondDelta:0)*Math.pow(10,e.scale)),e.scale){case 0:case 1:case 2:i.writeUInt24LE(r);break;case 3:case 4:i.writeUInt32LE(r);break;case 5:case 6:case 7:i.writeUInt40LE(r)}yield i.data},validate:function(e){if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),isNaN(e))throw TypeError("Invalid time.");return e}};r.default=o,t.exports=o},70747,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(33529);let i=e.g.Date,o=n.LocalDate.ofYearDay(1,1),a=Buffer.from([0]),s=Buffer.from([3]),l={id:40,type:"DATEN",name:"Date",declaration:function(){return"date"},generateTypeInfo:function(){return Buffer.from([this.id])},generateParameterLength:(e,t)=>null==e.value?a:s,*generateParameterData(e,t){let r;if(null==e.value)return;let i=e.value;r=t.useUTC?n.LocalDate.of(i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate()):n.LocalDate.of(i.getFullYear(),i.getMonth()+1,i.getDate());let a=o.until(r,n.ChronoUnit.DAYS),s=Buffer.alloc(3);s.writeUIntLE(a,0,3),yield s},validate:function(e,t,r){let n;if(null==e)return null;if(e instanceof i||(e=new i(i.parse(e))),(n=r&&r.useUTC?e.getUTCFullYear():e.getFullYear())<1||n>9999)throw TypeError("Out of range.");if(isNaN(e))throw TypeError("Invalid date.");return e}};r.default=l,t.exports=l},12879,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(33529),i=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564));let o=n.LocalDate.ofYearDay(1,1),a=Buffer.from([0]),s={id:42,type:"DATETIME2N",name:"DateTime2",declaration:function(e){return"datetime2("+this.resolveScale(e)+")"},resolveScale:function(e){return null!=e.scale?e.scale:7*(null!==e.value)},generateTypeInfo(e,t){return Buffer.from([this.id,e.scale])},generateParameterLength(e,t){if(null==e.value)return a;switch(e.scale){case 0:case 1:case 2:return Buffer.from([6]);case 3:case 4:return Buffer.from([7]);case 5:case 6:case 7:return Buffer.from([8]);default:throw Error("invalid scale")}},*generateParameterData(e,t){let r,a;if(null==e.value)return;let s=e.value,l=e.scale,c=new i.default(16);switch(r=Math.round(r=(t.useUTC?((60*s.getUTCHours()+s.getUTCMinutes())*60+s.getUTCSeconds())*1e3+s.getUTCMilliseconds():((60*s.getHours()+s.getMinutes())*60+s.getSeconds())*1e3+s.getMilliseconds())*Math.pow(10,l-3)+(null!=s.nanosecondDelta?s.nanosecondDelta:0)*Math.pow(10,l)),l){case 0:case 1:case 2:c.writeUInt24LE(r);break;case 3:case 4:c.writeUInt32LE(r);break;case 5:case 6:case 7:c.writeUInt40LE(r)}a=t.useUTC?n.LocalDate.of(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()):n.LocalDate.of(s.getFullYear(),s.getMonth()+1,s.getDate());let u=o.until(a,n.ChronoUnit.DAYS);c.writeUInt24LE(u),yield c.data},validate:function(e,t,r){let n;if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),(n=r&&r.useUTC?e.getUTCFullYear():e.getFullYear())<1||n>9999)throw TypeError("Out of range.");if(isNaN(e))throw TypeError("Invalid date.");return e}};r.default=s,t.exports=s},36149,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(33529),i=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564));let o=n.LocalDate.ofYearDay(1,1),a=Buffer.from([0]),s={id:43,type:"DATETIMEOFFSETN",name:"DateTimeOffset",declaration:function(e){return"datetimeoffset("+this.resolveScale(e)+")"},resolveScale:function(e){return null!=e.scale?e.scale:7*(null!==e.value)},generateTypeInfo(e){return Buffer.from([this.id,e.scale])},generateParameterLength(e,t){if(null==e.value)return a;switch(e.scale){case 0:case 1:case 2:return Buffer.from([8]);case 3:case 4:return Buffer.from([9]);case 5:case 6:case 7:return Buffer.from([10]);default:throw Error("invalid scale")}},*generateParameterData(e,t){let r;if(null==e.value)return;let a=e.value,s=e.scale,l=new i.default(16);switch(r=Math.round(r=(((60*a.getUTCHours()+a.getUTCMinutes())*60+a.getUTCSeconds())*1e3+a.getMilliseconds())*Math.pow(10,s-3)+(null!=a.nanosecondDelta?a.nanosecondDelta:0)*Math.pow(10,s)),s){case 0:case 1:case 2:l.writeUInt24LE(r);break;case 3:case 4:l.writeUInt32LE(r);break;case 5:case 6:case 7:l.writeUInt40LE(r)}let c=n.LocalDate.of(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate()),u=o.until(c,n.ChronoUnit.DAYS);l.writeUInt24LE(u);let d=-a.getTimezoneOffset();l.writeInt16LE(d),yield l.data},validate:function(e,t,r){let n;if(null==e)return null;if(e instanceof Date||(e=new Date(Date.parse(e))),(n=r&&r.useUTC?e.getUTCFullYear():e.getFullYear())<1||n>9999)throw TypeError("Out of range.");if(isNaN(e))throw TypeError("Invalid date.");return e}};r.default=s,t.exports=s},3568,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:240,type:"UDTTYPE",name:"UDT",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},61531,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(18134),i=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564));let o=Buffer.from([1]),a=Buffer.from([0]),s=Buffer.from([255,255]),l={id:243,type:"TVPTYPE",name:"TVP",declaration:function(e){return e.value.name+" readonly"},generateTypeInfo(e){let t=e.value?.schema??"",r=e.value?.name??"",n=2+Buffer.byteLength("","ucs2")+1+Buffer.byteLength(t,"ucs2")+1+Buffer.byteLength(r,"ucs2"),o=new i.default(n,"ucs2");return o.writeUInt8(this.id),o.writeBVarchar(""),o.writeBVarchar(t),o.writeBVarchar(r),o.data},generateParameterLength(e,t){if(null==e.value)return s;let{columns:r}=e.value,n=Buffer.alloc(2);return n.writeUInt16LE(r.length,0),n},*generateParameterData(e,t){if(null==e.value){yield a,yield a;return}let{columns:r,rows:i}=e.value;for(let e=0,t=r.length;e<t;e++){let t=r[e],n=Buffer.alloc(6);n.writeUInt32LE(0,0),n.writeUInt16LE(0,4),yield n,yield t.type.generateTypeInfo(t),yield Buffer.from([0])}yield a;for(let a=0,s=i.length;a<s;a++){yield o;let s=i[a];for(let i=0,o=s.length;i<o;i++){let o,l=r[i],c=s[i];try{o=l.type.validate(c,e.collation)}catch(e){throw new n.InputError(`TVP column '${l.name}' has invalid data at row index ${a}`,{cause:e})}let u={value:o,length:l.length,scale:l.scale,precision:l.precision};yield l.type.generateParameterLength(u,t),yield*l.type.generateParameterData(u,t)}}yield a},validate:function(e){if(null==e)return null;if("object"!=typeof e||!Array.isArray(e.columns)||!Array.isArray(e.rows))throw TypeError("Invalid table.");return e}};r.default=l,t.exports=l},16141,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={id:98,type:"SSVARIANTTYPE",name:"Variant",declaration:function(){return"sql_variant"},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};r.default=n,t.exports=n},2557,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.typeByName=r.TYPES=r.TYPE=void 0;var n=j(e.r(43053)),i=j(e.r(6848)),o=j(e.r(34296)),a=j(e.r(21916)),s=j(e.r(68919)),l=j(e.r(50713)),c=j(e.r(37816)),u=j(e.r(46115)),d=j(e.r(77936)),h=j(e.r(67965)),f=j(e.r(35386)),p=j(e.r(81110)),m=j(e.r(75760)),g=j(e.r(21514)),y=j(e.r(65)),_=j(e.r(97985)),E=j(e.r(81941)),T=j(e.r(71933)),b=j(e.r(2114)),v=j(e.r(21994)),A=j(e.r(68535)),C=j(e.r(19990)),S=j(e.r(92503)),w=j(e.r(71974)),I=j(e.r(99121)),O=j(e.r(20702)),R=j(e.r(92485)),N=j(e.r(23779)),P=j(e.r(87124)),k=j(e.r(60749)),D=j(e.r(7318)),M=j(e.r(97819)),L=j(e.r(97110)),U=j(e.r(70747)),x=j(e.r(12879)),F=j(e.r(36149)),B=j(e.r(3568)),q=j(e.r(61531)),H=j(e.r(16141));function j(e){return e&&e.__esModule?e:{default:e}}r.TYPE={[n.default.id]:n.default,[i.default.id]:i.default,[o.default.id]:o.default,[a.default.id]:a.default,[s.default.id]:s.default,[l.default.id]:l.default,[c.default.id]:c.default,[u.default.id]:u.default,[d.default.id]:d.default,[h.default.id]:h.default,[f.default.id]:f.default,[p.default.id]:p.default,[m.default.id]:m.default,[g.default.id]:g.default,[y.default.id]:y.default,[_.default.id]:_.default,[E.default.id]:E.default,[T.default.id]:T.default,[b.default.id]:b.default,[v.default.id]:v.default,[A.default.id]:A.default,[C.default.id]:C.default,[S.default.id]:S.default,[w.default.id]:w.default,[I.default.id]:I.default,[O.default.id]:O.default,[R.default.id]:R.default,[N.default.id]:N.default,[P.default.id]:P.default,[k.default.id]:k.default,[D.default.id]:D.default,[M.default.id]:M.default,[L.default.id]:L.default,[U.default.id]:U.default,[x.default.id]:x.default,[F.default.id]:F.default,[B.default.id]:B.default,[q.default.id]:q.default,[H.default.id]:H.default};let Y=r.TYPES={TinyInt:i.default,Bit:o.default,SmallInt:a.default,Int:s.default,SmallDateTime:l.default,Real:c.default,Money:u.default,DateTime:d.default,Float:h.default,Decimal:f.default,Numeric:p.default,SmallMoney:m.default,BigInt:g.default,Image:y.default,Text:_.default,UniqueIdentifier:E.default,NText:b.default,VarBinary:O.default,VarChar:R.default,Binary:N.default,Char:P.default,NVarChar:k.default,NChar:D.default,Xml:M.default,Time:L.default,Date:U.default,DateTime2:x.default,DateTimeOffset:F.default,UDT:B.default,TVP:q.default,Variant:H.default};r.typeByName=Y},64241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Result=r.NotEnoughDataError=void 0,r.readBVarByte=function(e,t){let r;if(t*=1,{offset:t,value:r}=o(e,t),e.length<t+r)throw new i(t+r);return new n(e.slice(t,t+r),t+r)},r.readBVarChar=function(e,t){let r;t*=1,{offset:t,value:r}=o(e,t);let a=2*r;if(e.length<t+a)throw new i(t+a);return new n(e.toString("ucs2",t,t+a),t+a)},r.readBigInt64LE=function(e,t){if(t*=1,e.length<t+8)throw new i(t+8);return new n(e.readBigInt64LE(t),t+8)},r.readBigUInt64LE=function(e,t){if(t*=1,e.length<t+8)throw new i(t+8);return new n(e.readBigUInt64LE(t),t+8)},r.readDoubleLE=function(e,t){if(t*=1,e.length<t+8)throw new i(t+8);return new n(e.readDoubleLE(t),t+8)},r.readFloatLE=function(e,t){if(t*=1,e.length<t+4)throw new i(t+4);return new n(e.readFloatLE(t),t+4)},r.readInt16LE=function(e,t){if(t*=1,e.length<t+2)throw new i(t+2);return new n(e.readInt16LE(t),t+2)},r.readInt32LE=function(e,t){if(t*=1,e.length<t+4)throw new i(t+4);return new n(e.readInt32LE(t),t+4)},r.readUInt16LE=a,r.readUInt24LE=function(e,t){if(t*=1,e.length<t+3)throw new i(t+3);return new n(e.readUIntLE(t,3),t+3)},r.readUInt32BE=function(e,t){if(t*=1,e.length<t+4)throw new i(t+4);return new n(e.readUInt32BE(t),t+4)},r.readUInt32LE=function(e,t){if(t*=1,e.length<t+4)throw new i(t+4);return new n(e.readUInt32LE(t),t+4)},r.readUInt40LE=function(e,t){if(t*=1,e.length<t+5)throw new i(t+5);return new n(e.readUIntLE(t,5),t+5)},r.readUInt8=o,r.readUNumeric128LE=function(e,t){if(t*=1,e.length<t+16)throw new i(t+16);let r=e.readUInt32LE(t),o=e.readUInt32LE(t+4);return new n(r+0x100000000*o+0xffffffffffffffff*e.readUInt32LE(t+8)+7922816251426434e13*e.readUInt32LE(t+12),t+16)},r.readUNumeric64LE=function(e,t){if(t*=1,e.length<t+8)throw new i(t+8);let r=e.readUInt32LE(t);return new n(0x100000000*e.readUInt32LE(t+4)+r,t+8)},r.readUNumeric96LE=function(e,t){if(t*=1,e.length<t+12)throw new i(t+12);let r=e.readUInt32LE(t);return new n(r+0x100000000*e.readUInt32LE(t+4)+0xffffffffffffffff*e.readUInt32LE(t+8),t+12)},r.readUsVarByte=function(e,t){let r;if(t*=1,{offset:t,value:r}=a(e,t),e.length<t+r)throw new i(t+r);return new n(e.slice(t,t+r),t+r)},r.readUsVarChar=function(e,t){let r;t*=1,{offset:t,value:r}=a(e,t);let o=2*r;if(e.length<t+o)throw new i(t+o);return new n(e.toString("ucs2",t,t+o),t+o)};class n{constructor(e,t){this.value=e,this.offset=t}}r.Result=n;class i extends Error{byteCount;constructor(e){super(),this.byteCount=e}}function o(e,t){if(t*=1,e.length<t+1)throw new i(t+1);return new n(e.readUInt8(t),t+1)}function a(e,t){if(t*=1,e.length<t+2)throw new i(t+2);return new n(e.readUInt16LE(t),t+2)}r.NotEnoughDataError=i},82010,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.readCollation=s,r.readMetadata=l;var n=e.r(39588),i=e.r(2557),o=e.r(31071),a=e.r(64241);function s(e,t){if(t*=1,e.length<t+5)throw new a.NotEnoughDataError(t+5);let r=n.Collation.fromBuffer(e.slice(t,t+5));return new a.Result(r,t+5)}function l(e,t,r){var n,l;let c,u,d;({offset:t,value:c}=(r.tdsVersion<"7_2"?a.readUInt16LE:a.readUInt32LE)(e,t)),({offset:t,value:u}=(0,a.readUInt16LE)(e,t)),{offset:t,value:d}=(0,a.readUInt8)(e,t);let h=i.TYPE[d];if(!h)throw Error((0,o.sprintf)("Unrecognised data type 0x%02X",d));switch(h.name){case"Null":case"TinyInt":case"SmallInt":case"Int":case"BigInt":case"Real":case"Float":case"SmallMoney":case"Money":case"Bit":case"SmallDateTime":case"DateTime":case"Date":return new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:void 0},t);case"IntN":case"FloatN":case"MoneyN":case"BitN":case"UniqueIdentifier":case"DateTimeN":{let r;return{offset:t,value:r}=(0,a.readUInt8)(e,t),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:r,schema:void 0,udtInfo:void 0},t)}case"Variant":{let r;return{offset:t,value:r}=(0,a.readUInt32LE)(e,t),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:r,schema:void 0,udtInfo:void 0},t)}case"VarChar":case"Char":case"NVarChar":case"NChar":{let r,n;return{offset:t,value:r}=(0,a.readUInt16LE)(e,t),{offset:t,value:n}=s(e,t),new a.Result({userType:c,flags:u,type:h,collation:n,precision:void 0,scale:void 0,dataLength:r,schema:void 0,udtInfo:void 0},t)}case"Text":case"NText":{let r,n;return{offset:t,value:r}=(0,a.readUInt32LE)(e,t),{offset:t,value:n}=s(e,t),new a.Result({userType:c,flags:u,type:h,collation:n,precision:void 0,scale:void 0,dataLength:r,schema:void 0,udtInfo:void 0},t)}case"VarBinary":case"Binary":{let r;return{offset:t,value:r}=(0,a.readUInt16LE)(e,t),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:r,schema:void 0,udtInfo:void 0},t)}case"Image":{let r;return{offset:t,value:r}=(0,a.readUInt32LE)(e,t),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:r,schema:void 0,udtInfo:void 0},t)}case"Xml":{let r,i,o,s,l;return n=+t,{offset:n,value:i}=(0,a.readUInt8)(e,n),{offset:t,value:r}=1!==i?new a.Result(void 0,n):({offset:n,value:o}=(0,a.readBVarChar)(e,n),{offset:n,value:s}=(0,a.readBVarChar)(e,n),{offset:n,value:l}=(0,a.readUsVarChar)(e,n),new a.Result({dbname:o,owningSchema:s,xmlSchemaCollection:l},n)),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:r,udtInfo:void 0},t)}case"Time":case"DateTime2":case"DateTimeOffset":{let r;return{offset:t,value:r}=(0,a.readUInt8)(e,t),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:r,dataLength:void 0,schema:void 0,udtInfo:void 0},t)}case"NumericN":case"DecimalN":{let r,n,i;return{offset:t,value:r}=(0,a.readUInt8)(e,t),{offset:t,value:n}=(0,a.readUInt8)(e,t),{offset:t,value:i}=(0,a.readUInt8)(e,t),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:n,scale:i,dataLength:r,schema:void 0,udtInfo:void 0},t)}case"UDT":{let r,n,i,o,s,d;return{offset:t,value:r}=(l=t,{offset:l,value:n}=(0,a.readUInt16LE)(e,l),{offset:l,value:i}=(0,a.readBVarChar)(e,l),{offset:l,value:o}=(0,a.readBVarChar)(e,l),{offset:l,value:s}=(0,a.readBVarChar)(e,l),{offset:l,value:d}=(0,a.readUsVarChar)(e,l),new a.Result({maxByteSize:n,dbname:i,owningSchema:o,typeName:s,assemblyName:d},l)),new a.Result({userType:c,flags:u,type:h,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:r},t)}default:throw Error((0,o.sprintf)("Unrecognised type %s",h.name))}}function c(e,t,r){(async()=>{for(;;){let n;try{n=l(e.buffer,e.position,t)}catch(t){if(t instanceof a.NotEnoughDataError){await e.waitForChunk();continue}throw t}return e.position=n.offset,r(n.value)}})()}r.default=c,t.exports=c,t.exports.readCollation=s,t.exports.readMetadata=l},53259,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(82010),i=e.r(2986),o=e.r(64241);async function a(e){let t;for(;;){let r;try{({offset:r,value:t}=(0,o.readUInt16LE)(e.buffer,e.position))}catch(t){if(t instanceof o.NotEnoughDataError){await e.waitForChunk();continue}throw t}e.position=r;break}let r=[];for(let i=0;i<t;i++)for(;;){let t,a;try{({offset:a,value:t}=function(e,t,r,i){var a;let s,l,c,u;return{offset:t,value:s}=(0,n.readMetadata)(e,t,r),{offset:t,value:l}=function(e,t,r,n){let i;if(!r.type.hasTableName)return new o.Result(void 0,t);if(n.tdsVersion<"7_2")return(0,o.readUsVarChar)(e,t);({offset:t,value:i}=(0,o.readUInt8)(e,t));let a=[];for(let r=0;r<i;r++){let r;({offset:t,value:r}=(0,o.readUsVarChar)(e,t)),a.push(r)}return new o.Result(a,t)}(e,t,s,r),{offset:t,value:c}=(a=t,({offset:a,value:u}=(0,o.readBVarChar)(e,a),r.columnNameReplacer)?new o.Result(r.columnNameReplacer(u,i,s),a):r.camelCaseColumns?new o.Result(u.replace(/^[A-Z]/,function(e){return e.toLowerCase()}),a):new o.Result(u,a)),new o.Result({userType:s.userType,flags:s.flags,type:s.type,collation:s.collation,precision:s.precision,scale:s.scale,udtInfo:s.udtInfo,dataLength:s.dataLength,schema:s.schema,colName:c,tableName:l},t)}(e.buffer,e.position,e.options,i))}catch(t){if(t instanceof o.NotEnoughDataError){await e.waitForChunk();continue}throw t}e.position=a,r.push(t);break}return new i.ColMetadataToken(r)}r.default=a,t.exports=a},62017,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.doneInProcParser=function(e,t,r){let o;return{offset:t,value:o}=a(e,t,r),new i.Result(new n.DoneInProcToken(o),t)},r.doneParser=function(e,t,r){let o;return{offset:t,value:o}=a(e,t,r),new i.Result(new n.DoneToken(o),t)},r.doneProcParser=function(e,t,r){let o;return{offset:t,value:o}=a(e,t,r),new i.Result(new n.DoneProcToken(o),t)};var n=e.r(2986),i=e.r(64241);let o={MORE:1,ERROR:2,COUNT:16,ATTN:32,SRVERROR:256};function a(e,t,r){let n,a,s;({offset:t,value:n}=(0,i.readUInt16LE)(e,t));let l=!!(n&o.MORE),c=!!(n&o.ERROR),u=!!(n&o.COUNT),d=!!(n&o.ATTN),h=!!(n&o.SRVERROR);return{offset:t,value:a}=(0,i.readUInt16LE)(e,t),{offset:t,value:s}=(r.tdsVersion<"7_2"?i.readUInt32LE:i.readBigUInt64LE)(e,t),new i.Result({more:l,sqlError:c,attention:d,serverError:h,rowCount:u?Number(s):void 0,curCmd:a},t)}},15855,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(39588),i=e.r(2986),o=e.r(64241);let a={1:{name:"DATABASE",event:"databaseChange"},2:{name:"LANGUAGE",event:"languageChange"},3:{name:"CHARSET",event:"charsetChange"},4:{name:"PACKET_SIZE",event:"packetSizeChange"},7:{name:"SQL_COLLATION",event:"sqlCollationChange"},8:{name:"BEGIN_TXN",event:"beginTransaction"},9:{name:"COMMIT_TXN",event:"commitTransaction"},10:{name:"ROLLBACK_TXN",event:"rollbackTransaction"},13:{name:"DATABASE_MIRRORING_PARTNER",event:"partnerNode"},17:{name:"TXN_ENDED"},18:{name:"RESET_CONNECTION",event:"resetConnection"},20:{name:"ROUTING_CHANGE",event:"routingChange"}};function s(e,t,r){let s,l;if({offset:t,value:s}=(0,o.readUInt16LE)(e,t),e.length<t+s)throw new o.NotEnoughDataError(t+s);({offset:t,value:l}=(0,o.readUInt8)(e,t));let c=a[l];return c?function(e,t,r,a){switch(a.name){case"DATABASE":case"LANGUAGE":case"CHARSET":case"PACKET_SIZE":case"DATABASE_MIRRORING_PARTNER":{let r,n;switch({offset:t,value:r}=(0,o.readBVarChar)(e,t),{offset:t,value:n}=(0,o.readBVarChar)(e,t),a.name){case"PACKET_SIZE":return new o.Result(new i.PacketSizeEnvChangeToken(parseInt(r),parseInt(n)),t);case"DATABASE":return new o.Result(new i.DatabaseEnvChangeToken(r,n),t);case"LANGUAGE":return new o.Result(new i.LanguageEnvChangeToken(r,n),t);case"CHARSET":return new o.Result(new i.CharsetEnvChangeToken(r,n),t);case"DATABASE_MIRRORING_PARTNER":return new o.Result(new i.DatabaseMirroringPartnerEnvChangeToken(r,n),t)}throw Error("unreachable")}case"SQL_COLLATION":case"BEGIN_TXN":case"COMMIT_TXN":case"ROLLBACK_TXN":case"RESET_CONNECTION":{let r,s;switch({offset:t,value:r}=(0,o.readBVarByte)(e,t),{offset:t,value:s}=(0,o.readBVarByte)(e,t),a.name){case"SQL_COLLATION":{let e=r.length?n.Collation.fromBuffer(r):void 0,a=s.length?n.Collation.fromBuffer(s):void 0;return new o.Result(new i.CollationChangeToken(e,a),t)}case"BEGIN_TXN":return new o.Result(new i.BeginTransactionEnvChangeToken(r,s),t);case"COMMIT_TXN":return new o.Result(new i.CommitTransactionEnvChangeToken(r,s),t);case"ROLLBACK_TXN":return new o.Result(new i.RollbackTransactionEnvChangeToken(r,s),t);case"RESET_CONNECTION":return new o.Result(new i.ResetConnectionEnvChangeToken(r,s),t)}throw Error("unreachable")}case"ROUTING_CHANGE":{let r,n;({offset:t,value:r}=(0,o.readUsVarByte)(e,t)),{offset:t,value:n}=(0,o.readUsVarByte)(e,t);let a=r.readUInt8(0);if(0!==a)throw Error("Unknown protocol byte in routing change event");let s=r.readUInt16LE(1),l=r.readUInt16LE(3),c=r.toString("ucs2",5,5+2*l);return new o.Result(new i.RoutingEnvChangeToken({protocol:a,port:s,server:c},n),t)}default:return console.error("Tedious > Unsupported ENVCHANGE type "+a.name),new o.Result(void 0,t+r-1)}}(e,t,s,c):(console.error("Tedious > Unsupported ENVCHANGE type "+l),new o.Result(void 0,t+s-1))}r.default=s,t.exports=s},95105,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.errorParser=function(e,t,r){let a;return{offset:t,value:a}=o(e,t,r),new n.Result(new i.ErrorMessageToken(a),t)},r.infoParser=function(e,t,r){let a;return{offset:t,value:a}=o(e,t,r),new n.Result(new i.InfoMessageToken(a),t)};var n=e.r(64241),i=e.r(2986);function o(e,t,r){let i,o,a,s,l,c,u,d;if({offset:t,value:i}=(0,n.readUInt16LE)(e,t),e.length<i+t)throw new n.NotEnoughDataError(i+t);return{offset:t,value:o}=(0,n.readUInt32LE)(e,t),{offset:t,value:a}=(0,n.readUInt8)(e,t),{offset:t,value:s}=(0,n.readUInt8)(e,t),{offset:t,value:l}=(0,n.readUsVarChar)(e,t),{offset:t,value:c}=(0,n.readBVarChar)(e,t),{offset:t,value:u}=(0,n.readBVarChar)(e,t),{offset:t,value:d}=r.tdsVersion<"7_2"?(0,n.readUInt16LE)(e,t):(0,n.readUInt32LE)(e,t),new n.Result({number:o,state:a,class:s,message:l,serverName:c,procName:u,lineNumber:d},t)}},78494,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(64241),i=e.r(2986);let o={STSURL:1,SPN:2};function a(e,t,r){let a;if({offset:t,value:a}=(0,n.readUInt32LE)(e,t),e.length<t+a)throw new n.NotEnoughDataError(t+a);let s=e.slice(t,t+a);t+=a;let{spn:l,stsurl:c}=function(e){let t,r,n=0,i=e.readUInt32LE(n);n+=4;for(let a=0;a<i;a++){let i=e.readUInt8(n);n+=1;let a=e.readUInt32LE(n);n+=4;let s=e.readUInt32LE(n);switch(n+=4,i){case o.SPN:t=e.toString("ucs2",s,s+a);break;case o.STSURL:r=e.toString("ucs2",s,s+a)}}return{spn:t,stsurl:r}}(s);return new n.Result(new i.FedAuthInfoToken(l,c),t)}r.default=a,t.exports=a},17228,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(64241),i=e.r(2986);let o={FEDAUTH:2,UTF8_SUPPORT:10,TERMINATOR:255};function a(e,t,r){let a,s;for(;;){let r,l;if({value:r,offset:t}=(0,n.readUInt8)(e,t),r===o.TERMINATOR)return new n.Result(new i.FeatureExtAckToken(a,s),t);if({value:l,offset:t}=(0,n.readUInt32LE)(e,t),e.length<t+l)throw new n.NotEnoughDataError(t+l);let c=e.slice(t,t+l);switch(t+=l,r){case o.FEDAUTH:a=c;break;case o.UTF8_SUPPORT:s=!!c[0]}}}r.default=a,t.exports=a},33302,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(2986),i=e.r(88014),o=e.r(64241);let a={0:"SQL_DFLT",1:"SQL_TSQL"};function s(e,t,r){let s,l,c,u,d,h,f,p;if({offset:t,value:s}=(0,o.readUInt16LE)(e,t),e.length<s+t)throw new o.NotEnoughDataError(s+t);({offset:t,value:l}=(0,o.readUInt8)(e,t));let m=a[l];({offset:t,value:c}=(0,o.readUInt32BE)(e,t));let g=i.versionsByValue[c];return{offset:t,value:u}=(0,o.readBVarChar)(e,t),{offset:t,value:d}=(0,o.readUInt8)(e,t),{offset:t,value:h}=(0,o.readUInt8)(e,t),{offset:t,value:f}=(0,o.readUInt8)(e,t),{offset:t,value:p}=(0,o.readUInt8)(e,t),new o.Result(new n.LoginAckToken({interface:m,tdsVersion:g,progName:u,progVersion:{major:d,minor:h,buildNumHi:f,buildNumLow:p}}),t)}r.default=s,t.exports=s},80677,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(2986),i=e.r(64241);function o(e,t,r){let o;if({offset:t,value:o}=(0,i.readUInt16LE)(e,t),e.length<t+o)throw new i.NotEnoughDataError(t+o);let a=[];for(let r=0;r<o;r+=2){let r;({offset:t,value:r}=(0,i.readUInt16LE)(e,t)),a.push(r)}return new i.Result(new n.OrderToken(a),t)}r.default=o,t.exports=o},12648,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(64241),i=e.r(2986);function o(e,t,r){let o;return{value:o,offset:t}=(0,n.readInt32LE)(e,t),new n.Result(new i.ReturnStatusToken(o),t)}r.default=o,t.exports=o},53005,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPLPStream=T,r.readPLPStream=w,r.readValue=E;var n=e.r(82010),i=e.r(2557),o=function(e){return e&&e.__esModule?e:{default:e}}(e.r(69487)),a=e.r(31071),s=e.r(84539),l=e.r(64241);let c=3+1/3;function u(e,t){return(0,l.readUInt8)(e,t)}function d(e,t){return(0,l.readInt16LE)(e,t)}function h(e,t){return(0,l.readInt32LE)(e,t)}function f(e,t){let r;return{offset:t,value:r}=(0,l.readBigInt64LE)(e,t),new l.Result(r.toString(),t)}function p(e,t){return(0,l.readFloatLE)(e,t)}function m(e,t){return(0,l.readDoubleLE)(e,t)}function g(e,t){let r;return{offset:t,value:r}=(0,l.readInt32LE)(e,t),new l.Result(r/1e4,t)}function y(e,t){let r,n;return{offset:t,value:r}=(0,l.readInt32LE)(e,t),{offset:t,value:n}=(0,l.readUInt32LE)(e,t),new l.Result((n+0x100000000*r)/1e4,t)}function _(e,t){let r;return{offset:t,value:r}=(0,l.readUInt8)(e,t),new l.Result(!!r,t)}function E(e,t,r,o){switch(r.type.name){case"Null":return new l.Result(null,t);case"TinyInt":return u(e,t);case"SmallInt":return d(e,t);case"Int":return h(e,t);case"BigInt":return f(e,t);case"IntN":{let r;switch({offset:t,value:r}=(0,l.readUInt8)(e,t),r){case 0:return new l.Result(null,t);case 1:return u(e,t);case 2:return d(e,t);case 4:return h(e,t);case 8:return f(e,t);default:throw Error("Unsupported dataLength "+r+" for IntN")}}case"Real":return p(e,t);case"Float":return m(e,t);case"FloatN":{let r;switch({offset:t,value:r}=(0,l.readUInt8)(e,t),r){case 0:return new l.Result(null,t);case 4:return p(e,t);case 8:return m(e,t);default:throw Error("Unsupported dataLength "+r+" for FloatN")}}case"SmallMoney":return g(e,t);case"Money":return y(e,t);case"MoneyN":{let r;switch({offset:t,value:r}=(0,l.readUInt8)(e,t),r){case 0:return new l.Result(null,t);case 4:return g(e,t);case 8:return y(e,t);default:throw Error("Unsupported dataLength "+r+" for MoneyN")}}case"Bit":return _(e,t);case"BitN":{let r;switch({offset:t,value:r}=(0,l.readUInt8)(e,t),r){case 0:return new l.Result(null,t);case 1:return _(e,t);default:throw Error("Unsupported dataLength "+r+" for BitN")}}case"VarChar":case"Char":{let n,i=r.collation.codepage;if({offset:t,value:n}=(0,l.readUInt16LE)(e,t),65535===n)return new l.Result(null,t);return C(e,t,n,i)}case"NVarChar":case"NChar":{let r;if({offset:t,value:r}=(0,l.readUInt16LE)(e,t),65535===r)return new l.Result(null,t);return S(e,t,r)}case"VarBinary":case"Binary":{let r;if({offset:t,value:r}=(0,l.readUInt16LE)(e,t),65535===r)return new l.Result(null,t);return A(e,t,r)}case"Text":{let n,i;if({offset:t,value:n}=(0,l.readUInt8)(e,t),0===n)return new l.Result(null,t);return{offset:t}=A(e,t,n),{offset:t}=A(e,t,8),{offset:t,value:i}=(0,l.readUInt32LE)(e,t),C(e,t,i,r.collation.codepage)}case"NText":{let r,n;if({offset:t,value:r}=(0,l.readUInt8)(e,t),0===r)return new l.Result(null,t);return{offset:t}=A(e,t,r),{offset:t}=A(e,t,8),{offset:t,value:n}=(0,l.readUInt32LE)(e,t),S(e,t,n)}case"Image":{let r,n;if({offset:t,value:r}=(0,l.readUInt8)(e,t),0===r)return new l.Result(null,t);return{offset:t}=A(e,t,r),{offset:t}=A(e,t,8),{offset:t,value:n}=(0,l.readUInt32LE)(e,t),A(e,t,n)}case"SmallDateTime":return I(e,t,o.useUTC);case"DateTime":return O(e,t,o.useUTC);case"DateTimeN":{let r;switch({offset:t,value:r}=(0,l.readUInt8)(e,t),r){case 0:return new l.Result(null,t);case 4:return I(e,t,o.useUTC);case 8:return O(e,t,o.useUTC);default:throw Error("Unsupported dataLength "+r+" for DateTimeN")}}case"Time":{let n;if({offset:t,value:n}=(0,l.readUInt8)(e,t),0===n)return new l.Result(null,t);return R(e,t,n,r.scale,o.useUTC)}case"Date":{let r;if({offset:t,value:r}=(0,l.readUInt8)(e,t),0===r)return new l.Result(null,t);return N(e,t,o.useUTC)}case"DateTime2":{let n;if({offset:t,value:n}=(0,l.readUInt8)(e,t),0===n)return new l.Result(null,t);return P(e,t,n,r.scale,o.useUTC)}case"DateTimeOffset":{let n;if({offset:t,value:n}=(0,l.readUInt8)(e,t),0===n)return new l.Result(null,t);return k(e,t,n,r.scale)}case"NumericN":case"DecimalN":{let n;if({offset:t,value:n}=(0,l.readUInt8)(e,t),0===n)return new l.Result(null,t);return v(e,t,n,r.precision,r.scale)}case"UniqueIdentifier":{let r;switch({offset:t,value:r}=(0,l.readUInt8)(e,t),r){case 0:return new l.Result(null,t);case 16:return b(e,t,o);default:throw Error((0,a.sprintf)("Unsupported guid size %d",r-1))}}case"Variant":{let r;if({offset:t,value:r}=(0,l.readUInt32LE)(e,t),0===r)return new l.Result(null,t);return function(e,t,r,o){let a,s;({value:a,offset:t}=(0,l.readUInt8)(e,t));let c=i.TYPE[a];switch({value:s,offset:t}=(0,l.readUInt8)(e,t),o=o-s-2,c.name){case"UniqueIdentifier":return b(e,t,r);case"Bit":return _(e,t);case"TinyInt":return u(e,t);case"SmallInt":return d(e,t);case"Int":return h(e,t);case"BigInt":return f(e,t);case"SmallDateTime":return I(e,t,r.useUTC);case"DateTime":return O(e,t,r.useUTC);case"Real":return p(e,t);case"Float":return m(e,t);case"SmallMoney":return g(e,t);case"Money":return y(e,t);case"Date":return N(e,t,r.useUTC);case"Time":{let n;return{value:n,offset:t}=(0,l.readUInt8)(e,t),R(e,t,o,n,r.useUTC)}case"DateTime2":{let n;return{value:n,offset:t}=(0,l.readUInt8)(e,t),P(e,t,o,n,r.useUTC)}case"DateTimeOffset":{let r;return{value:r,offset:t}=(0,l.readUInt8)(e,t),k(e,t,o,r)}case"VarBinary":case"Binary":return{offset:t}=(0,l.readUInt16LE)(e,t),A(e,t,o);case"NumericN":case"DecimalN":{let r,n;return{value:r,offset:t}=(0,l.readUInt8)(e,t),{value:n,offset:t}=(0,l.readUInt8)(e,t),v(e,t,o,r,n)}case"VarChar":case"Char":{let r;return{offset:t}=(0,l.readUInt16LE)(e,t),{value:r,offset:t}=(0,n.readCollation)(e,t),C(e,t,o,r.codepage)}case"NVarChar":case"NChar":return{offset:t}=(0,l.readUInt16LE)(e,t),{offset:t}=(0,n.readCollation)(e,t),S(e,t,o);default:throw Error("Invalid type!")}}(e,t,o,r)}default:throw Error("Invalid type!")}}function T(e){switch(e.type.name){case"VarChar":case"NVarChar":case"VarBinary":return 65535===e.dataLength;case"Xml":case"UDT":return!0}}function b(e,t,r){let n;return{value:n,offset:t}=A(e,t,16),new l.Result(r.lowerCaseGuids?(0,s.bufferToLowerCaseGuid)(n):(0,s.bufferToUpperCaseGuid)(n),t)}function v(e,t,r,n,i){let o,s;if({offset:t,value:o}=(0,l.readUInt8)(e,t),o=1===o?1:-1,5===r)({offset:t,value:s}=(0,l.readUInt32LE)(e,t));else if(9===r)({offset:t,value:s}=(0,l.readUNumeric64LE)(e,t));else if(13===r)({offset:t,value:s}=(0,l.readUNumeric96LE)(e,t));else if(17===r)({offset:t,value:s}=(0,l.readUNumeric128LE)(e,t));else throw Error((0,a.sprintf)("Unsupported numeric dataLength %d",r));return new l.Result(s*o/Math.pow(10,i),t)}function A(e,t,r){if(e.length<t+r)throw new l.NotEnoughDataError(t+r);return new l.Result(e.slice(t,t+r),t+r)}function C(e,t,r,n){if(e.length<t+r)throw new l.NotEnoughDataError(t+r);return new l.Result(o.default.decode(e.slice(t,t+r),n??"utf8"),t+r)}function S(e,t,r){if(e.length<t+r)throw new l.NotEnoughDataError(t+r);return new l.Result(e.toString("ucs2",t,t+r),t+r)}async function w(e){for(;e.buffer.length<e.position+8;)await e.waitForChunk();let t=e.buffer.readBigUInt64LE(e.position);if(e.position+=8,0xffffffffffffffffn===t)return null;let r=[],n=0;for(;;){for(;e.buffer.length<e.position+4;)await e.waitForChunk();let t=e.buffer.readUInt32LE(e.position);if(e.position+=4,!t)break;for(;e.buffer.length<e.position+t;)await e.waitForChunk();r.push(e.buffer.slice(e.position,e.position+t)),e.position+=t,n+=t}if(0xfffffffffffffffen!==t&&n!==Number(t))throw Error("Partially Length-prefixed Bytes unmatched lengths : expected "+t+", but got "+n+" bytes");return r}function I(e,t,r){let n,i,o;return{offset:t,value:n}=(0,l.readUInt16LE)(e,t),{offset:t,value:i}=(0,l.readUInt16LE)(e,t),o=r?new Date(Date.UTC(1900,0,1+n,0,i)):new Date(1900,0,1+n,0,i),new l.Result(o,t)}function O(e,t,r){let n,i,o;({offset:t,value:n}=(0,l.readInt32LE)(e,t)),{offset:t,value:i}=(0,l.readInt32LE)(e,t);let a=Math.round(i*c);return o=r?new Date(Date.UTC(1900,0,1+n,0,0,0,a)):new Date(1900,0,1+n,0,0,0,a),new l.Result(o,t)}function R(e,t,r,n,i){let o,a;switch(r){case 3:({value:o,offset:t}=(0,l.readUInt24LE)(e,t));break;case 4:({value:o,offset:t}=(0,l.readUInt32LE)(e,t));break;case 5:({value:o,offset:t}=(0,l.readUInt40LE)(e,t));break;default:throw Error("unreachable")}if(n<7)for(let e=n;e<7;e++)o*=10;return Object.defineProperty(a=i?new Date(Date.UTC(1970,0,1,0,0,0,o/1e4)):new Date(1970,0,1,0,0,0,o/1e4),"nanosecondsDelta",{enumerable:!1,value:o%1e4/1e7}),new l.Result(a,t)}function N(e,t,r){let n;return({offset:t,value:n}=(0,l.readUInt24LE)(e,t),r)?new l.Result(new Date(Date.UTC(2e3,0,n-730118)),t):new l.Result(new Date(2e3,0,n-730118),t)}function P(e,t,r,n,i){let o,a,s;return{offset:t,value:o}=R(e,t,r-3,n,i),{offset:t,value:a}=(0,l.readUInt24LE)(e,t),Object.defineProperty(s=i?new Date(Date.UTC(2e3,0,a-730118,0,0,0,+o)):new Date(2e3,0,a-730118,o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()),"nanosecondsDelta",{enumerable:!1,value:o.nanosecondsDelta}),new l.Result(s,t)}function k(e,t,r,n){let i,o;({offset:t,value:i}=R(e,t,r-5,n,!0)),({offset:t,value:o}=(0,l.readUInt24LE)(e,t)),{offset:t}=(0,l.readUInt16LE)(e,t);let a=new Date(Date.UTC(2e3,0,o-730118,0,0,0,+i));return Object.defineProperty(a,"nanosecondsDelta",{enumerable:!1,value:i.nanosecondsDelta}),new l.Result(a,t)}t.exports.readValue=E,t.exports.isPLPStream=T,t.exports.readPLPStream=w},30276,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(2986),i=e.r(82010),o=e.r(53005),a=e.r(64241),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(e.r(69487));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}async function c(e){let t,r,l,c;for(;;){let n=e.buffer,o=e.position;try{({offset:o,value:r}=(0,a.readUInt16LE)(n,o)),({offset:o,value:t}=(0,a.readBVarChar)(n,o)),({offset:o}=(0,a.readUInt8)(n,o)),({offset:o,value:l}=(0,i.readMetadata)(n,o,e.options)),"@"===t.charAt(0)&&(t=t.slice(1))}catch(t){if(t instanceof a.NotEnoughDataError){await e.waitForChunk();continue}throw t}e.position=o;break}for(;;){let t=e.buffer,r=e.position;if((0,o.isPLPStream)(l)){let t=await (0,o.readPLPStream)(e);null===t?c=t:"NVarChar"===l.type.name||"Xml"===l.type.name?c=Buffer.concat(t).toString("ucs2"):"VarChar"===l.type.name?c=s.decode(Buffer.concat(t),l.collation?.codepage??"utf8"):("VarBinary"===l.type.name||"UDT"===l.type.name)&&(c=Buffer.concat(t))}else{try{({value:c,offset:r}=(0,o.readValue)(t,r,l,e.options))}catch(t){if(t instanceof a.NotEnoughDataError){await e.waitForChunk();continue}throw t}e.position=r}break}return new n.ReturnValueToken({paramOrdinal:r,paramName:t,metadata:l,value:c})}r.default=c,t.exports=c},15250,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(2986),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(e.r(69487)),o=e.r(53005),a=e.r(64241);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}async function l(e){let t=[];for(let r of e.colMetadata)for(;;){if((0,o.isPLPStream)(r)){let n=await (0,o.readPLPStream)(e);null===n?t.push({value:n,metadata:r}):"NVarChar"===r.type.name||"Xml"===r.type.name?t.push({value:Buffer.concat(n).toString("ucs2"),metadata:r}):"VarChar"===r.type.name?t.push({value:i.decode(Buffer.concat(n),r.collation?.codepage??"utf8"),metadata:r}):("VarBinary"===r.type.name||"UDT"===r.type.name)&&t.push({value:Buffer.concat(n),metadata:r})}else{let n;try{n=(0,o.readValue)(e.buffer,e.position,r,e.options)}catch(t){if(t instanceof a.NotEnoughDataError){await e.waitForChunk();continue}throw t}e.position=n.offset,t.push({value:n.value,metadata:r})}break}if(!e.options.useColumnNames)return new n.RowToken(t);{let e=Object.create(null);return t.forEach(t=>{let r=t.metadata.colName;null==e[r]&&(e[r]=t)}),new n.RowToken(e)}}r.default=l,t.exports=l},38916,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(2986),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(e.r(69487)),o=e.r(53005),a=e.r(64241);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}async function l(e){let t=e.colMetadata,r=[],s=[],l=Math.ceil(t.length/8);for(;e.buffer.length-e.position<l;)await e.waitForChunk();let c=e.buffer.slice(e.position,e.position+l);e.position+=l;for(let e=0,t=c.length;e<t;e++){let t=c[e];s.push(!!(1&t)),s.push(!!(2&t)),s.push(!!(4&t)),s.push(!!(8&t)),s.push(!!(16&t)),s.push(!!(32&t)),s.push(!!(64&t)),s.push(!!(128&t))}for(let n=0;n<t.length;n++){let l=t[n];if(s[n]){r.push({value:null,metadata:l});continue}for(;;){if((0,o.isPLPStream)(l)){let t=await (0,o.readPLPStream)(e);null===t?r.push({value:t,metadata:l}):"NVarChar"===l.type.name||"Xml"===l.type.name?r.push({value:Buffer.concat(t).toString("ucs2"),metadata:l}):"VarChar"===l.type.name?r.push({value:i.decode(Buffer.concat(t),l.collation?.codepage??"utf8"),metadata:l}):("VarBinary"===l.type.name||"UDT"===l.type.name)&&r.push({value:Buffer.concat(t),metadata:l})}else{let t;try{t=(0,o.readValue)(e.buffer,e.position,l,e.options)}catch(t){if(t instanceof a.NotEnoughDataError){await e.waitForChunk();continue}throw t}e.position=t.offset,r.push({value:t.value,metadata:l})}break}}if(!e.options.useColumnNames)return new n.NBCRowToken(r);{let e=Object.create(null);return r.forEach(t=>{let r=t.metadata.colName;null==e[r]&&(e[r]=t)}),new n.NBCRowToken(e)}}r.default=l,t.exports=l},82746,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(64241),i=e.r(2986);function o(e,t,r){let o;if({offset:t,value:o}=(0,n.readUInt16LE)(e,t),e.length<t+o)throw new n.NotEnoughDataError(t+o);let a=e.slice(t,t+o);return t+=o,new n.Result(new i.SSPIToken(function(e){let t={};return t.magic=e.slice(0,8).toString("utf8"),t.type=e.readInt32LE(8),t.domainLen=e.readInt16LE(12),t.domainMax=e.readInt16LE(14),t.domainOffset=e.readInt32LE(16),t.flags=e.readInt32LE(20),t.nonce=e.slice(24,32),t.zeroes=e.slice(32,40),t.targetLen=e.readInt16LE(40),t.targetMax=e.readInt16LE(42),t.targetOffset=e.readInt32LE(44),t.oddData=e.slice(48,56),t.domain=e.slice(56,56+t.domainLen).toString("ucs2"),t.target=e.slice(56+t.domainLen,56+t.domainLen+t.targetLen),t}(a),a),t)}r.default=o,t.exports=o},6297,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(2986),i=_(e.r(53259)),o=e.r(62017),a=_(e.r(15855)),s=e.r(95105),l=_(e.r(78494)),c=_(e.r(17228)),u=_(e.r(33302)),d=_(e.r(80677)),h=_(e.r(12648)),f=_(e.r(30276)),p=_(e.r(15250)),m=_(e.r(38916)),g=_(e.r(82746)),y=e.r(64241);function _(e){return e&&e.__esModule?e:{default:e}}class E{debug;colMetadata;options;iterator;buffer;position;static async *parseTokens(e,t,r,n=[]){let i=new E(e,t,r);for(i.colMetadata=n;;){try{await i.waitForChunk()}catch(e){if(i.position===i.buffer.length)return;throw e}for(;i.buffer.length>=i.position+1;){let e=i.buffer.readUInt8(i.position);i.position+=1;let t=i.readToken(e);void 0!==t&&(yield t)}}}readToken(e){switch(e){case n.TYPE.DONE:return this.readDoneToken();case n.TYPE.DONEPROC:return this.readDoneProcToken();case n.TYPE.DONEINPROC:return this.readDoneInProcToken();case n.TYPE.ERROR:return this.readErrorToken();case n.TYPE.INFO:return this.readInfoToken();case n.TYPE.ENVCHANGE:return this.readEnvChangeToken();case n.TYPE.LOGINACK:return this.readLoginAckToken();case n.TYPE.RETURNSTATUS:return this.readReturnStatusToken();case n.TYPE.ORDER:return this.readOrderToken();case n.TYPE.FEDAUTHINFO:return this.readFedAuthInfoToken();case n.TYPE.SSPI:return this.readSSPIToken();case n.TYPE.COLMETADATA:return this.readColMetadataToken();case n.TYPE.RETURNVALUE:return this.readReturnValueToken();case n.TYPE.ROW:return this.readRowToken();case n.TYPE.NBCROW:return this.readNbcRowToken();case n.TYPE.FEATUREEXTACK:return this.readFeatureExtAckToken();default:throw Error("Unknown type: "+e)}}readFeatureExtAckToken(){let e;try{e=(0,c.default)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readFeatureExtAckToken());throw e}return this.position=e.offset,e.value}async readNbcRowToken(){return await (0,m.default)(this)}async readReturnValueToken(){return await (0,f.default)(this)}async readColMetadataToken(){let e=await (0,i.default)(this);return this.colMetadata=e.columns,e}readSSPIToken(){let e;try{e=(0,g.default)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readSSPIToken());throw e}return this.position=e.offset,e.value}readFedAuthInfoToken(){let e;try{e=(0,l.default)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readFedAuthInfoToken());throw e}return this.position=e.offset,e.value}readOrderToken(){let e;try{e=(0,d.default)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readOrderToken());throw e}return this.position=e.offset,e.value}readReturnStatusToken(){let e;try{e=(0,h.default)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readReturnStatusToken());throw e}return this.position=e.offset,e.value}readLoginAckToken(){let e;try{e=(0,u.default)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readLoginAckToken());throw e}return this.position=e.offset,e.value}readEnvChangeToken(){let e;try{e=(0,a.default)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readEnvChangeToken());throw e}return this.position=e.offset,e.value}readRowToken(){return(0,p.default)(this)}readInfoToken(){let e;try{e=(0,s.infoParser)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readInfoToken());throw e}return this.position=e.offset,e.value}readErrorToken(){let e;try{e=(0,s.errorParser)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readErrorToken());throw e}return this.position=e.offset,e.value}readDoneInProcToken(){let e;try{e=(0,o.doneInProcParser)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneInProcToken());throw e}return this.position=e.offset,e.value}readDoneProcToken(){let e;try{e=(0,o.doneProcParser)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneProcToken());throw e}return this.position=e.offset,e.value}readDoneToken(){let e;try{e=(0,o.doneParser)(this.buffer,this.position,this.options)}catch(e){if(e instanceof y.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneToken());throw e}return this.position=e.offset,e.value}constructor(e,t,r){this.debug=t,this.colMetadata=[],this.options=r,this.iterator=(e[Symbol.asyncIterator]||e[Symbol.iterator]).call(e),this.buffer=Buffer.alloc(0),this.position=0}async waitForChunk(){let e=await this.iterator.next();if(e.done)throw Error("unexpected end of data");this.position===this.buffer.length?this.buffer=e.value:this.buffer=Buffer.concat([this.buffer.slice(this.position),e.value]),this.position=0}}r.default=E,t.exports=E},76562,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;var n=e.r(27699),i=function(e){return e&&e.__esModule?e:{default:e}}(e.r(6297)),o=e.r(88947);class a extends n.EventEmitter{constructor(e,t,r,n){super(),this.debug=t,this.options=n,this.parser=o.Readable.from(i.default.parseTokens(e,this.debug,this.options)),this.parser.on("data",e=>{t.token(e),r[e.handlerName](e)}),this.parser.on("drain",()=>{this.emit("drain")}),this.parser.on("end",()=>{this.emit("end")})}pause(){return this.parser.pause()}resume(){return this.parser.resume()}}r.Parser=a},53454,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Transaction=r.OPERATION_TYPE=r.ISOLATION_LEVEL=void 0,r.assertValidIsolationLevel=function(e,t){if("number"!=typeof e)throw TypeError(`The "${t}" ${t.includes(".")?"property":"argument"} must be of type number. Received type ${typeof e} (${e})`);if(!Number.isInteger(e))throw RangeError(`The value of "${t}" is out of range. It must be an integer. Received: ${e}`);if(!(e>=0&&e<=5))throw RangeError(`The value of "${t}" is out of range. It must be >= 0 && <= 5. Received: ${e}`)},r.isolationLevelByValue=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(2564)),i=e.r(76849);let o=r.OPERATION_TYPE={TM_GET_DTC_ADDRESS:0,TM_PROPAGATE_XACT:1,TM_BEGIN_XACT:5,TM_PROMOTE_XACT:6,TM_COMMIT_XACT:7,TM_ROLLBACK_XACT:8,TM_SAVE_XACT:9},a=r.ISOLATION_LEVEL={NO_CHANGE:0,READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5},s=r.isolationLevelByValue={};for(let e in a)s[a[e]]=e;r.Transaction=class{constructor(e,t=a.NO_CHANGE){this.name=e,this.isolationLevel=t,this.outstandingRequestCount=1}beginPayload(e){let t=new n.default(100,"ucs2");return(0,i.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(o.TM_BEGIN_XACT),t.writeUInt8(this.isolationLevel),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield t.data},toString:()=>"Begin Transaction: name="+this.name+", isolationLevel="+s[this.isolationLevel]}}commitPayload(e){let t=new n.default(100,"ascii");return(0,i.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(o.TM_COMMIT_XACT),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),t.writeUInt8(0),{*[Symbol.iterator](){yield t.data},toString:()=>"Commit Transaction: name="+this.name}}rollbackPayload(e){let t=new n.default(100,"ascii");return(0,i.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(o.TM_ROLLBACK_XACT),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),t.writeUInt8(0),{*[Symbol.iterator](){yield t.data},toString:()=>"Rollback Transaction: name="+this.name}}savePayload(e){let t=new n.default(100,"ascii");return(0,i.writeToTrackingBuffer)(t,e,this.outstandingRequestCount),t.writeUShort(o.TM_SAVE_XACT),t.writeUInt8(2*this.name.length),t.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield t.data},toString:()=>"Save Transaction: name="+this.name}}isolationLevelToTSQL(){switch(this.isolationLevel){case a.READ_UNCOMMITTED:return"READ UNCOMMITTED";case a.READ_COMMITTED:return"READ COMMITTED";case a.REPEATABLE_READ:return"REPEATABLE READ";case a.SERIALIZABLE:return"SERIALIZABLE";case a.SNAPSHOT:return"SNAPSHOT"}return""}}},89180,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.connectInParallel=s,r.connectInSequence=l,r.lookupAllAddresses=c;var n=a(e.r(4446)),i=a(e.r(57764)),o=a(e.r(42012));function a(e){return e&&e.__esModule?e:{default:e}}async function s(e,t,r){if(r.aborted)throw new o.default;let i=await c(e.host,t,r);return await new Promise((t,a)=>{let s=Array(i.length),l=[];function c(e){l.push(e),this.removeListener("error",c),this.removeListener("connect",u),this.destroy(),l.length===i.length&&(r.removeEventListener("abort",d),a(AggregateError(l,"Could not connect (parallel)")))}function u(){r.removeEventListener("abort",d);for(let e=0;e<s.length;e++){let t=s[e];this!==t&&(t.removeListener("error",c),t.removeListener("connect",u),t.destroy())}t(this)}let d=()=>{for(let e=0;e<s.length;e++){let t=s[e];t.removeListener("error",c),t.removeListener("connect",u),t.destroy()}a(new o.default)};for(let t=0,r=i.length;t<r;t++){let r=s[t]=n.default.connect({...e,host:i[t].address,family:i[t].family});r.on("error",c),r.on("connect",u)}r.addEventListener("abort",d,{once:!0})})}async function l(e,t,r){if(r.aborted)throw new o.default;let i=[];for(let a of(await c(e.host,t,r)))try{return await new Promise((t,i)=>{let s=n.default.connect({...e,host:a.address,family:a.family}),l=()=>{s.removeListener("error",c),s.removeListener("connect",u),s.destroy(),i(new o.default)},c=e=>{r.removeEventListener("abort",l),s.removeListener("error",c),s.removeListener("connect",u),s.destroy(),i(e)},u=()=>{r.removeEventListener("abort",l),s.removeListener("error",c),s.removeListener("connect",u),t(s)};r.addEventListener("abort",l,{once:!0}),s.on("error",c),s.on("connect",u)})}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw e;i.push(e);continue}throw AggregateError(i,"Could not connect (sequence)")}async function c(e,t,r){if(r.aborted)throw new o.default;return n.default.isIPv6(e)?[{address:e,family:6}]:n.default.isIPv4(e)?[{address:e,family:4}]:await new Promise((n,a)=>{let s=()=>{a(new o.default)};r.addEventListener("abort",s);let l=i.default.domainToASCII(e);t(""===l?e:l,{all:!0},(e,t)=>{r.removeEventListener("abort",s),e?a(e):n(t)})})}},99410,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.name=void 0,r.name="Tedious"},99959,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createNTLMRequest=function(e){let t=escape(e.domain.toUpperCase()),r=e.workstation?escape(e.workstation.toUpperCase()):"",i=n.NTLM_NegotiateUnicode+n.NTLM_NegotiateOEM+n.NTLM_RequestTarget+n.NTLM_NegotiateNTLM+n.NTLM_NegotiateOemDomainSupplied+n.NTLM_NegotiateOemWorkstationSupplied+n.NTLM_NegotiateAlwaysSign+n.NTLM_NegotiateVersion+n.NTLM_NegotiateExtendedSecurity+n.NTLM_Negotiate128+n.NTLM_Negotiate56;""===r&&(i-=n.NTLM_NegotiateOemWorkstationSupplied);let o=Buffer.alloc(40),a=[o],s=0;return s+=o.write("NTLMSSP",s,7,"ascii"),s=o.writeUInt8(0,s),s=o.writeUInt32LE(1,s),s=o.writeUInt32LE(i,s),s=o.writeUInt16LE(t.length,s),s=o.writeUInt16LE(t.length,s),s=o.writeUInt32LE(o.length+r.length,s),s=o.writeUInt16LE(r.length,s),s=o.writeUInt16LE(r.length,s),s=o.writeUInt32LE(o.length,s),s=o.writeUInt8(5,s),s=o.writeUInt8(0,s),s=o.writeUInt16LE(2195,s),s=o.writeUInt8(0,s),s=o.writeUInt8(0,s),s=o.writeUInt8(0,s),o.writeUInt8(15,s),a.push(Buffer.from(r,"ascii")),a.push(Buffer.from(t,"ascii")),Buffer.concat(a)};let n={NTLM_NegotiateUnicode:1,NTLM_NegotiateOEM:2,NTLM_RequestTarget:4,NTLM_NegotiateNTLM:512,NTLM_NegotiateOemDomainSupplied:4096,NTLM_NegotiateOemWorkstationSupplied:8192,NTLM_NegotiateAlwaysSign:32768,NTLM_NegotiateExtendedSecurity:524288,NTLM_NegotiateVersion:0x2000000,NTLM_Negotiate128:0x20000000,NTLM_Negotiate56:0x80000000}},59733,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BulkLoadPayload=void 0;class n{constructor(e){this.bulkLoad=e,this.iterator=this.bulkLoad.rowToPacketTransform[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterator}toString(e=""){return e+"BulkLoad"}}r.BulkLoadPayload=n},26686,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;let n={Sp_Cursor:1,Sp_CursorOpen:2,Sp_CursorPrepare:3,Sp_CursorExecute:4,Sp_CursorPrepExec:5,Sp_CursorUnprepare:6,Sp_CursorFetch:7,Sp_CursorOption:8,Sp_CursorClose:9,Sp_ExecuteSql:10,Sp_Prepare:11,Sp_Execute:12,Sp_PrepExec:13,Sp_PrepExecRpc:14,Sp_Unprepare:15};r.default=n,t.exports=n},3405,e=>{e.v(JSON.parse('{"author":"Mike D Pilsbury <mike.pilsbury@gmail.com>","contributors":["Alex Robson","Arthur Schreiber","Bret Copeland <bret@atlantisflight.org> (https://github.com/bretcope)","Bryan Ross <bryan@rossipedia.com> (https://github.com/rossipedia)","Ciaran Jessup <ciaranj@gmail.com>","Cort Fritz <cfritz@caa.com>","lastonesky","Patrik Simek <patrik@patriksimek.cz>","Phil Dodderidge <pdodde@poyntz.com>","Zach Aller"],"name":"tedious","description":"A TDS driver, for connecting to MS SQLServer databases.","keywords":["sql","database","mssql","sqlserver","sql-server","tds","msnodesql","azure"],"homepage":"https://github.com/tediousjs/tedious","bugs":"https://github.com/tediousjs/tedious/issues","license":"MIT","version":"18.6.1","main":"./lib/tedious.js","types":"./lib/tedious.d.ts","repository":{"type":"git","url":"https://github.com/tediousjs/tedious.git"},"engines":{"node":">=18"},"publishConfig":{"tag":"next","provenance":true},"dependencies":{"@azure/core-auth":"^1.7.2","@azure/identity":"^4.2.1","@azure/keyvault-keys":"^4.4.0","@js-joda/core":"^5.6.1","@types/node":">=18","bl":"^6.0.11","iconv-lite":"^0.6.3","js-md4":"^0.3.2","native-duplexpair":"^1.0.0","sprintf-js":"^1.1.3"},"devDependencies":{"@babel/cli":"^7.23.9","@babel/core":"^7.23.9","@babel/node":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@babel/register":"^7.23.7","@types/async":"^3.2.24","@types/bl":"^5.1.0","@types/chai":"^4.3.12","@types/depd":"^1.1.36","@types/lru-cache":"^5.1.1","@types/mocha":"^10.0.6","@types/sprintf-js":"^1.1.4","@typescript-eslint/eslint-plugin":"^7.0.2","@typescript-eslint/parser":"^7.0.2","async":"^3.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.4.1","codecov":"^3.8.3","eslint":"^8.57.0","mitm":"^1.7.2","mocha":"^10.3.0","nyc":"^15.1.0","rimraf":"^5.0.5","semantic-release":"^19.0.3","sinon":"^15.2.0","typedoc":"^0.26.5","typescript":"^5.5.4"},"scripts":{"docs":"typedoc","lint":"eslint src test --ext .js,.ts && tsc","test":"mocha --forbid-only test/unit test/unit/token test/unit/tracking-buffer","test-integration":"mocha --forbid-only test/integration/","test-all":"mocha --forbid-only test/unit/ test/unit/token/ test/unit/tracking-buffer test/integration/","build:types":"tsc --project tsconfig.build-types.json","build":"rimraf lib && babel src --out-dir lib --extensions .js,.ts && npm run build:types","prepublish":"npm run build","semantic-release":"semantic-release"},"babel":{"sourceMaps":"both","ignore":["./src/**/*.d.ts"],"presets":[["@babel/preset-env",{"targets":{"node":18}}],["@babel/preset-typescript",{"allowDeclareFields":true}]],"plugins":[["@babel/transform-typescript",{"allowDeclareFields":true}]]},"mocha":{"require":"test/setup.js","timeout":5000,"extension":["js","ts"]},"nyc":{"sourceMap":false,"instrument":false,"extension":[".ts"]}}'))},15092,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnexpectedTokenError=r.TokenHandler=r.RequestTokenHandler=r.Login7TokenHandler=r.InitialSqlTokenHandler=r.AttentionTokenHandler=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e.r(48779)),i=e.r(18134);class o extends Error{constructor(e,t){super("Unexpected token `"+t.name+"` in `"+e.constructor.name+"`")}}r.UnexpectedTokenError=o;class a{onInfoMessage(e){throw new o(this,e)}onErrorMessage(e){throw new o(this,e)}onSSPI(e){throw new o(this,e)}onDatabaseChange(e){throw new o(this,e)}onLanguageChange(e){throw new o(this,e)}onCharsetChange(e){throw new o(this,e)}onSqlCollationChange(e){throw new o(this,e)}onRoutingChange(e){throw new o(this,e)}onPacketSizeChange(e){throw new o(this,e)}onResetConnection(e){throw new o(this,e)}onBeginTransaction(e){throw new o(this,e)}onCommitTransaction(e){throw new o(this,e)}onRollbackTransaction(e){throw new o(this,e)}onFedAuthInfo(e){throw new o(this,e)}onFeatureExtAck(e){throw new o(this,e)}onLoginAck(e){throw new o(this,e)}onColMetadata(e){throw new o(this,e)}onOrder(e){throw new o(this,e)}onRow(e){throw new o(this,e)}onReturnStatus(e){throw new o(this,e)}onReturnValue(e){throw new o(this,e)}onDoneProc(e){throw new o(this,e)}onDoneInProc(e){throw new o(this,e)}onDone(e){throw new o(this,e)}onDatabaseMirroringPartner(e){throw new o(this,e)}}r.TokenHandler=a,r.InitialSqlTokenHandler=class extends a{constructor(e){super(),this.connection=e}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){this.connection.emit("errorMessage",e)}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onBeginTransaction(e){this.connection.transactionDescriptors.push(e.newValue),this.connection.inTransaction=!0}onCommitTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(e){this.connection.emit("error",Error("Received 'columnMetadata' when no sqlRequest is in progress")),this.connection.close()}onOrder(e){this.connection.emit("error",Error("Received 'order' when no sqlRequest is in progress")),this.connection.close()}onRow(e){this.connection.emit("error",Error("Received 'row' when no sqlRequest is in progress")),this.connection.close()}onReturnStatus(e){}onReturnValue(e){}onDoneProc(e){}onDoneInProc(e){}onDone(e){}onResetConnection(e){this.connection.emit("resetConnection")}},r.Login7TokenHandler=class extends a{constructor(e){super(),this.loginAckReceived=!1,this.connection=e}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){this.connection.emit("errorMessage",e);let t=new i.ConnectionError(e.message,"ELOGIN");this.connection.transientErrorLookup.isTransientError(e.number)&&this.connection.curTransientRetryCount!==this.connection.config.options.maxRetriesOnTransientErrors&&(t.isTransient=!0),this.connection.loginError=t}onSSPI(e){e.ntlmpacket&&(this.connection.ntlmpacket=e.ntlmpacket,this.connection.ntlmpacketBuffer=e.ntlmpacketBuffer)}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onFedAuthInfo(e){this.fedAuthInfoToken=e}onFeatureExtAck(e){let{authentication:t}=this.connection.config;"azure-active-directory-password"===t.type||"azure-active-directory-access-token"===t.type||"azure-active-directory-msi-vm"===t.type||"azure-active-directory-msi-app-service"===t.type||"azure-active-directory-service-principal-secret"===t.type||"azure-active-directory-default"===t.type?void 0===e.fedAuth?this.connection.loginError=new i.ConnectionError("Did not receive Active Directory authentication acknowledgement"):0!==e.fedAuth.length&&(this.connection.loginError=new i.ConnectionError(`Active Directory authentication acknowledgment for ${t.type} authentication method includes extra data`)):void 0===e.fedAuth&&void 0===e.utf8Support?this.connection.loginError=new i.ConnectionError("Received acknowledgement for unknown feature"):e.fedAuth&&(this.connection.loginError=new i.ConnectionError("Did not request Active Directory authentication, but received the acknowledgment"))}onLoginAck(e){if(!e.tdsVersion){this.connection.loginError=new i.ConnectionError("Server responded with unknown TDS version.","ETDS");return}if(!e.interface){this.connection.loginError=new i.ConnectionError("Server responded with unsupported interface.","EINTERFACENOTSUPP");return}this.connection.config.options.tdsVersion=e.tdsVersion,this.loginAckReceived=!0}onRoutingChange(e){let[t]=e.newValue.server.split("\\");this.routingData={server:t,port:e.newValue.port}}onDoneInProc(e){}onDone(e){}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onDatabaseMirroringPartner(e){}},r.RequestTokenHandler=class extends a{constructor(e,t){super(),this.connection=e,this.request=t,this.errors=[]}onInfoMessage(e){this.connection.emit("infoMessage",e)}onErrorMessage(e){if(this.connection.emit("errorMessage",e),!this.request.canceled){let t=new i.RequestError(e.message,"EREQUEST");t.number=e.number,t.state=e.state,t.class=e.class,t.serverName=e.serverName,t.procName=e.procName,t.lineNumber=e.lineNumber,this.errors.push(t),this.request.error=t,this.request instanceof n.default&&this.errors.length>1&&(this.request.error=AggregateError(this.errors))}}onDatabaseChange(e){this.connection.emit("databaseChange",e.newValue)}onLanguageChange(e){this.connection.emit("languageChange",e.newValue)}onCharsetChange(e){this.connection.emit("charsetChange",e.newValue)}onSqlCollationChange(e){this.connection.databaseCollation=e.newValue}onPacketSizeChange(e){this.connection.messageIo.packetSize(e.newValue)}onBeginTransaction(e){this.connection.transactionDescriptors.push(e.newValue),this.connection.inTransaction=!0}onCommitTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(e){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(e){if(!this.request.canceled)if(this.connection.config.options.useColumnNames){let t=Object.create(null);for(let r=0,n=e.columns.length;r<n;r++){let n=e.columns[r];null==t[n.colName]&&(t[n.colName]=n)}this.request.emit("columnMetadata",t)}else this.request.emit("columnMetadata",e.columns)}onOrder(e){this.request.canceled||this.request.emit("order",e.orderColumns)}onRow(e){this.request.canceled||(this.connection.config.options.rowCollectionOnRequestCompletion&&this.request.rows.push(e.columns),this.connection.config.options.rowCollectionOnDone&&this.request.rst.push(e.columns),this.request.emit("row",e.columns))}onReturnStatus(e){this.request.canceled||(this.connection.procReturnStatusValue=e.value)}onReturnValue(e){this.request.canceled||this.request.emit("returnValue",e.paramName,e.value,e.metadata)}onDoneProc(e){!this.request.canceled&&(e.sqlError&&!this.request.error&&(this.request.error=new i.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("doneProc",e.rowCount,e.more,this.connection.procReturnStatusValue,this.request.rst),this.connection.procReturnStatusValue=void 0,void 0!==e.rowCount&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDoneInProc(e){!this.request.canceled&&(this.request.emit("doneInProc",e.rowCount,e.more,this.request.rst),void 0!==e.rowCount&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDone(e){!this.request.canceled&&(e.sqlError&&!this.request.error&&(this.request.error=new i.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("done",e.rowCount,e.more,this.request.rst),void 0!==e.rowCount&&(this.request.rowCount+=e.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onResetConnection(e){this.connection.emit("resetConnection")}},r.AttentionTokenHandler=class extends a{constructor(e,t){super(),this.connection=e,this.request=t,this.attentionReceived=!1}onDone(e){e.attention&&(this.attentionReceived=!0)}}},81959,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=H(e.r(54799)),i=H(e.r(46786)),o=q(e.r(55004)),a=q(e.r(4446)),s=H(e.r(79594)),l=H(e.r(12249)),c=e.r(88947),u=e.r(68297),d=e.r(57926),h=H(e.r(14746)),f=H(e.r(75823)),p=e.r(27699),m=e.r(74242),g=e.r(73476),y=e.r(33755),_=H(e.r(9278)),E=H(e.r(49614)),T=H(e.r(88022)),b=H(e.r(48779)),v=H(e.r(14568)),A=H(e.r(18886)),C=H(e.r(3619)),S=e.r(76562),w=e.r(53454),I=e.r(18134),O=e.r(89180),R=e.r(99410),N=e.r(88014),P=H(e.r(56317)),k=e.r(99959),D=e.r(2557),M=e.r(59733),L=H(e.r(26686)),U=e.r(3405),x=e.r(92509),F=e.r(15092);function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(B=function(e){return e?r:t})(e)}function q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=B(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function H(e){return e&&e.__esModule?e:{default:e}}let j={NORMAL:0,REDIRECT:1,RETRY:2};class Y extends p.EventEmitter{_cancelAfterRequestSent;constructor(e){let t;if(super(),"object"!=typeof e||null===e)throw TypeError('The "config" argument is required and must be of type Object.');if("string"!=typeof e.server)throw TypeError('The "config.server" property is required and must be of type string.');if(this.fedAuthRequired=!1,void 0!==e.authentication){if("object"!=typeof e.authentication||null===e.authentication)throw TypeError('The "config.authentication" property must be of type Object.');let r=e.authentication.type,n=void 0===e.authentication.options?{}:e.authentication.options;if("string"!=typeof r)throw TypeError('The "config.authentication.type" property must be of type string.');if("default"!==r&&"ntlm"!==r&&"token-credential"!==r&&"azure-active-directory-password"!==r&&"azure-active-directory-access-token"!==r&&"azure-active-directory-msi-vm"!==r&&"azure-active-directory-msi-app-service"!==r&&"azure-active-directory-service-principal-secret"!==r&&"azure-active-directory-default"!==r)throw TypeError('The "type" property must one of "default", "ntlm", "token-credential", "azure-active-directory-password", "azure-active-directory-access-token", "azure-active-directory-default", "azure-active-directory-msi-vm" or "azure-active-directory-msi-app-service" or "azure-active-directory-service-principal-secret".');if("object"!=typeof n||null===n)throw TypeError('The "config.authentication.options" property must be of type object.');if("ntlm"===r){if("string"!=typeof n.domain)throw TypeError('The "config.authentication.options.domain" property must be of type string.');if(void 0!==n.userName&&"string"!=typeof n.userName)throw TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==n.password&&"string"!=typeof n.password)throw TypeError('The "config.authentication.options.password" property must be of type string.');t={type:"ntlm",options:{userName:n.userName,password:n.password,domain:n.domain&&n.domain.toUpperCase()}}}else if("token-credential"===r){if(!(0,d.isTokenCredential)(n.credential))throw TypeError('The "config.authentication.options.credential" property must be an instance of the token credential class.');t={type:"token-credential",options:{credential:n.credential}}}else if("azure-active-directory-password"===r){if("string"!=typeof n.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');if(void 0!==n.userName&&"string"!=typeof n.userName)throw TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==n.password&&"string"!=typeof n.password)throw TypeError('The "config.authentication.options.password" property must be of type string.');if(void 0!==n.tenantId&&"string"!=typeof n.tenantId)throw TypeError('The "config.authentication.options.tenantId" property must be of type string.');t={type:"azure-active-directory-password",options:{userName:n.userName,password:n.password,tenantId:n.tenantId,clientId:n.clientId}}}else if("azure-active-directory-access-token"===r){if("string"!=typeof n.token)throw TypeError('The "config.authentication.options.token" property must be of type string.');t={type:"azure-active-directory-access-token",options:{token:n.token}}}else if("azure-active-directory-msi-vm"===r){if(void 0!==n.clientId&&"string"!=typeof n.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');t={type:"azure-active-directory-msi-vm",options:{clientId:n.clientId}}}else if("azure-active-directory-default"===r){if(void 0!==n.clientId&&"string"!=typeof n.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');t={type:"azure-active-directory-default",options:{clientId:n.clientId}}}else if("azure-active-directory-msi-app-service"===r){if(void 0!==n.clientId&&"string"!=typeof n.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');t={type:"azure-active-directory-msi-app-service",options:{clientId:n.clientId}}}else if("azure-active-directory-service-principal-secret"===r){if("string"!=typeof n.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');if("string"!=typeof n.clientSecret)throw TypeError('The "config.authentication.options.clientSecret" property must be of type string.');if("string"!=typeof n.tenantId)throw TypeError('The "config.authentication.options.tenantId" property must be of type string.');t={type:"azure-active-directory-service-principal-secret",options:{clientId:n.clientId,clientSecret:n.clientSecret,tenantId:n.tenantId}}}else{if(void 0!==n.userName&&"string"!=typeof n.userName)throw TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==n.password&&"string"!=typeof n.password)throw TypeError('The "config.authentication.options.password" property must be of type string.');t={type:"default",options:{userName:n.userName,password:n.password}}}}else t={type:"default",options:{userName:void 0,password:void 0}};if(this.config={server:e.server,authentication:t,options:{abortTransactionOnError:!1,appName:void 0,camelCaseColumns:!1,cancelTimeout:5e3,columnEncryptionKeyCacheTTL:72e5,columnEncryptionSetting:!1,columnNameReplacer:void 0,connectionRetryInterval:500,connectTimeout:15e3,connector:void 0,connectionIsolationLevel:w.ISOLATION_LEVEL.READ_COMMITTED,cryptoCredentialsDetails:{},database:void 0,datefirst:7,dateFormat:"mdy",debug:{data:!1,packet:!1,payload:!1,token:!1},enableAnsiNull:!0,enableAnsiNullDefault:!0,enableAnsiPadding:!0,enableAnsiWarnings:!0,enableArithAbort:!0,enableConcatNullYieldsNull:!0,enableCursorCloseOnCommit:null,enableImplicitTransactions:!1,enableNumericRoundabort:!1,enableQuotedIdentifier:!0,encrypt:!0,fallbackToDefaultDb:!1,encryptionKeyStoreProviders:void 0,instanceName:void 0,isolationLevel:w.ISOLATION_LEVEL.READ_COMMITTED,language:"us_english",localAddress:void 0,maxRetriesOnTransientErrors:3,multiSubnetFailover:!1,packetSize:4096,port:1433,readOnlyIntent:!1,requestTimeout:15e3,rowCollectionOnDone:!1,rowCollectionOnRequestCompletion:!1,serverName:void 0,serverSupportsColumnEncryption:!1,tdsVersion:"7_4",textsize:0x7fffffff,trustedServerNameAE:void 0,trustServerCertificate:!1,useColumnNames:!1,useUTC:!0,workstationId:void 0,lowerCaseGuids:!1}},e.options){if(e.options.port&&e.options.instanceName)throw Error("Port and instanceName are mutually exclusive, but "+e.options.port+" and "+e.options.instanceName+" provided");if(void 0!==e.options.abortTransactionOnError){if("boolean"!=typeof e.options.abortTransactionOnError&&null!==e.options.abortTransactionOnError)throw TypeError('The "config.options.abortTransactionOnError" property must be of type string or null.');this.config.options.abortTransactionOnError=e.options.abortTransactionOnError}if(void 0!==e.options.appName){if("string"!=typeof e.options.appName)throw TypeError('The "config.options.appName" property must be of type string.');this.config.options.appName=e.options.appName}if(void 0!==e.options.camelCaseColumns){if("boolean"!=typeof e.options.camelCaseColumns)throw TypeError('The "config.options.camelCaseColumns" property must be of type boolean.');this.config.options.camelCaseColumns=e.options.camelCaseColumns}if(void 0!==e.options.cancelTimeout){if("number"!=typeof e.options.cancelTimeout)throw TypeError('The "config.options.cancelTimeout" property must be of type number.');this.config.options.cancelTimeout=e.options.cancelTimeout}if(e.options.columnNameReplacer){if("function"!=typeof e.options.columnNameReplacer)throw TypeError('The "config.options.cancelTimeout" property must be of type function.');this.config.options.columnNameReplacer=e.options.columnNameReplacer}if(void 0!==e.options.connectionIsolationLevel&&((0,w.assertValidIsolationLevel)(e.options.connectionIsolationLevel,"config.options.connectionIsolationLevel"),this.config.options.connectionIsolationLevel=e.options.connectionIsolationLevel),void 0!==e.options.connectTimeout){if("number"!=typeof e.options.connectTimeout)throw TypeError('The "config.options.connectTimeout" property must be of type number.');this.config.options.connectTimeout=e.options.connectTimeout}if(void 0!==e.options.connector){if("function"!=typeof e.options.connector)throw TypeError('The "config.options.connector" property must be a function.');this.config.options.connector=e.options.connector}if(void 0!==e.options.cryptoCredentialsDetails){if("object"!=typeof e.options.cryptoCredentialsDetails||null===e.options.cryptoCredentialsDetails)throw TypeError('The "config.options.cryptoCredentialsDetails" property must be of type Object.');this.config.options.cryptoCredentialsDetails=e.options.cryptoCredentialsDetails}if(void 0!==e.options.database){if("string"!=typeof e.options.database)throw TypeError('The "config.options.database" property must be of type string.');this.config.options.database=e.options.database}if(void 0!==e.options.datefirst){if("number"!=typeof e.options.datefirst&&null!==e.options.datefirst)throw TypeError('The "config.options.datefirst" property must be of type number.');if(null!==e.options.datefirst&&(e.options.datefirst<1||e.options.datefirst>7))throw RangeError('The "config.options.datefirst" property must be >= 1 and <= 7');this.config.options.datefirst=e.options.datefirst}if(void 0!==e.options.dateFormat){if("string"!=typeof e.options.dateFormat&&null!==e.options.dateFormat)throw TypeError('The "config.options.dateFormat" property must be of type string or null.');this.config.options.dateFormat=e.options.dateFormat}if(e.options.debug){if(void 0!==e.options.debug.data){if("boolean"!=typeof e.options.debug.data)throw TypeError('The "config.options.debug.data" property must be of type boolean.');this.config.options.debug.data=e.options.debug.data}if(void 0!==e.options.debug.packet){if("boolean"!=typeof e.options.debug.packet)throw TypeError('The "config.options.debug.packet" property must be of type boolean.');this.config.options.debug.packet=e.options.debug.packet}if(void 0!==e.options.debug.payload){if("boolean"!=typeof e.options.debug.payload)throw TypeError('The "config.options.debug.payload" property must be of type boolean.');this.config.options.debug.payload=e.options.debug.payload}if(void 0!==e.options.debug.token){if("boolean"!=typeof e.options.debug.token)throw TypeError('The "config.options.debug.token" property must be of type boolean.');this.config.options.debug.token=e.options.debug.token}}if(void 0!==e.options.enableAnsiNull){if("boolean"!=typeof e.options.enableAnsiNull&&null!==e.options.enableAnsiNull)throw TypeError('The "config.options.enableAnsiNull" property must be of type boolean or null.');this.config.options.enableAnsiNull=e.options.enableAnsiNull}if(void 0!==e.options.enableAnsiNullDefault){if("boolean"!=typeof e.options.enableAnsiNullDefault&&null!==e.options.enableAnsiNullDefault)throw TypeError('The "config.options.enableAnsiNullDefault" property must be of type boolean or null.');this.config.options.enableAnsiNullDefault=e.options.enableAnsiNullDefault}if(void 0!==e.options.enableAnsiPadding){if("boolean"!=typeof e.options.enableAnsiPadding&&null!==e.options.enableAnsiPadding)throw TypeError('The "config.options.enableAnsiPadding" property must be of type boolean or null.');this.config.options.enableAnsiPadding=e.options.enableAnsiPadding}if(void 0!==e.options.enableAnsiWarnings){if("boolean"!=typeof e.options.enableAnsiWarnings&&null!==e.options.enableAnsiWarnings)throw TypeError('The "config.options.enableAnsiWarnings" property must be of type boolean or null.');this.config.options.enableAnsiWarnings=e.options.enableAnsiWarnings}if(void 0!==e.options.enableArithAbort){if("boolean"!=typeof e.options.enableArithAbort&&null!==e.options.enableArithAbort)throw TypeError('The "config.options.enableArithAbort" property must be of type boolean or null.');this.config.options.enableArithAbort=e.options.enableArithAbort}if(void 0!==e.options.enableConcatNullYieldsNull){if("boolean"!=typeof e.options.enableConcatNullYieldsNull&&null!==e.options.enableConcatNullYieldsNull)throw TypeError('The "config.options.enableConcatNullYieldsNull" property must be of type boolean or null.');this.config.options.enableConcatNullYieldsNull=e.options.enableConcatNullYieldsNull}if(void 0!==e.options.enableCursorCloseOnCommit){if("boolean"!=typeof e.options.enableCursorCloseOnCommit&&null!==e.options.enableCursorCloseOnCommit)throw TypeError('The "config.options.enableCursorCloseOnCommit" property must be of type boolean or null.');this.config.options.enableCursorCloseOnCommit=e.options.enableCursorCloseOnCommit}if(void 0!==e.options.enableImplicitTransactions){if("boolean"!=typeof e.options.enableImplicitTransactions&&null!==e.options.enableImplicitTransactions)throw TypeError('The "config.options.enableImplicitTransactions" property must be of type boolean or null.');this.config.options.enableImplicitTransactions=e.options.enableImplicitTransactions}if(void 0!==e.options.enableNumericRoundabort){if("boolean"!=typeof e.options.enableNumericRoundabort&&null!==e.options.enableNumericRoundabort)throw TypeError('The "config.options.enableNumericRoundabort" property must be of type boolean or null.');this.config.options.enableNumericRoundabort=e.options.enableNumericRoundabort}if(void 0!==e.options.enableQuotedIdentifier){if("boolean"!=typeof e.options.enableQuotedIdentifier&&null!==e.options.enableQuotedIdentifier)throw TypeError('The "config.options.enableQuotedIdentifier" property must be of type boolean or null.');this.config.options.enableQuotedIdentifier=e.options.enableQuotedIdentifier}if(void 0!==e.options.encrypt){if("boolean"!=typeof e.options.encrypt&&"strict"!==e.options.encrypt)throw TypeError('The "encrypt" property must be set to "strict", or of type boolean.');this.config.options.encrypt=e.options.encrypt}if(void 0!==e.options.fallbackToDefaultDb){if("boolean"!=typeof e.options.fallbackToDefaultDb)throw TypeError('The "config.options.fallbackToDefaultDb" property must be of type boolean.');this.config.options.fallbackToDefaultDb=e.options.fallbackToDefaultDb}if(void 0!==e.options.instanceName){if("string"!=typeof e.options.instanceName)throw TypeError('The "config.options.instanceName" property must be of type string.');this.config.options.instanceName=e.options.instanceName,this.config.options.port=void 0}if(void 0!==e.options.isolationLevel&&((0,w.assertValidIsolationLevel)(e.options.isolationLevel,"config.options.isolationLevel"),this.config.options.isolationLevel=e.options.isolationLevel),void 0!==e.options.language){if("string"!=typeof e.options.language&&null!==e.options.language)throw TypeError('The "config.options.language" property must be of type string or null.');this.config.options.language=e.options.language}if(void 0!==e.options.localAddress){if("string"!=typeof e.options.localAddress)throw TypeError('The "config.options.localAddress" property must be of type string.');this.config.options.localAddress=e.options.localAddress}if(void 0!==e.options.multiSubnetFailover){if("boolean"!=typeof e.options.multiSubnetFailover)throw TypeError('The "config.options.multiSubnetFailover" property must be of type boolean.');this.config.options.multiSubnetFailover=e.options.multiSubnetFailover}if(void 0!==e.options.packetSize){if("number"!=typeof e.options.packetSize)throw TypeError('The "config.options.packetSize" property must be of type number.');this.config.options.packetSize=e.options.packetSize}if(void 0!==e.options.port){if("number"!=typeof e.options.port)throw TypeError('The "config.options.port" property must be of type number.');if(e.options.port<=0||e.options.port>=65536)throw RangeError('The "config.options.port" property must be > 0 and < 65536');this.config.options.port=e.options.port,this.config.options.instanceName=void 0}if(void 0!==e.options.readOnlyIntent){if("boolean"!=typeof e.options.readOnlyIntent)throw TypeError('The "config.options.readOnlyIntent" property must be of type boolean.');this.config.options.readOnlyIntent=e.options.readOnlyIntent}if(void 0!==e.options.requestTimeout){if("number"!=typeof e.options.requestTimeout)throw TypeError('The "config.options.requestTimeout" property must be of type number.');this.config.options.requestTimeout=e.options.requestTimeout}if(void 0!==e.options.maxRetriesOnTransientErrors){if("number"!=typeof e.options.maxRetriesOnTransientErrors)throw TypeError('The "config.options.maxRetriesOnTransientErrors" property must be of type number.');if(e.options.maxRetriesOnTransientErrors<0)throw TypeError('The "config.options.maxRetriesOnTransientErrors" property must be equal or greater than 0.');this.config.options.maxRetriesOnTransientErrors=e.options.maxRetriesOnTransientErrors}if(void 0!==e.options.connectionRetryInterval){if("number"!=typeof e.options.connectionRetryInterval)throw TypeError('The "config.options.connectionRetryInterval" property must be of type number.');if(e.options.connectionRetryInterval<=0)throw TypeError('The "config.options.connectionRetryInterval" property must be greater than 0.');this.config.options.connectionRetryInterval=e.options.connectionRetryInterval}if(void 0!==e.options.rowCollectionOnDone){if("boolean"!=typeof e.options.rowCollectionOnDone)throw TypeError('The "config.options.rowCollectionOnDone" property must be of type boolean.');this.config.options.rowCollectionOnDone=e.options.rowCollectionOnDone}if(void 0!==e.options.rowCollectionOnRequestCompletion){if("boolean"!=typeof e.options.rowCollectionOnRequestCompletion)throw TypeError('The "config.options.rowCollectionOnRequestCompletion" property must be of type boolean.');this.config.options.rowCollectionOnRequestCompletion=e.options.rowCollectionOnRequestCompletion}if(void 0!==e.options.tdsVersion){if("string"!=typeof e.options.tdsVersion)throw TypeError('The "config.options.tdsVersion" property must be of type string.');this.config.options.tdsVersion=e.options.tdsVersion}if(void 0!==e.options.textsize){if("number"!=typeof e.options.textsize&&null!==e.options.textsize)throw TypeError('The "config.options.textsize" property must be of type number or null.');if(e.options.textsize>0x7fffffff)throw TypeError('The "config.options.textsize" can\'t be greater than 2147483647.');if(e.options.textsize<-1)throw TypeError('The "config.options.textsize" can\'t be smaller than -1.');this.config.options.textsize=0|e.options.textsize}if(void 0!==e.options.trustServerCertificate){if("boolean"!=typeof e.options.trustServerCertificate)throw TypeError('The "config.options.trustServerCertificate" property must be of type boolean.');this.config.options.trustServerCertificate=e.options.trustServerCertificate}if(void 0!==e.options.serverName){if("string"!=typeof e.options.serverName)throw TypeError('The "config.options.serverName" property must be of type string.');this.config.options.serverName=e.options.serverName}if(void 0!==e.options.useColumnNames){if("boolean"!=typeof e.options.useColumnNames)throw TypeError('The "config.options.useColumnNames" property must be of type boolean.');this.config.options.useColumnNames=e.options.useColumnNames}if(void 0!==e.options.useUTC){if("boolean"!=typeof e.options.useUTC)throw TypeError('The "config.options.useUTC" property must be of type boolean.');this.config.options.useUTC=e.options.useUTC}if(void 0!==e.options.workstationId){if("string"!=typeof e.options.workstationId)throw TypeError('The "config.options.workstationId" property must be of type string.');this.config.options.workstationId=e.options.workstationId}if(void 0!==e.options.lowerCaseGuids){if("boolean"!=typeof e.options.lowerCaseGuids)throw TypeError('The "config.options.lowerCaseGuids" property must be of type boolean.');this.config.options.lowerCaseGuids=e.options.lowerCaseGuids}}this.secureContextOptions=this.config.options.cryptoCredentialsDetails,void 0===this.secureContextOptions.secureOptions&&(this.secureContextOptions=Object.create(this.secureContextOptions,{secureOptions:{value:l.default.SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS}})),this.debug=this.createDebug(),this.inTransaction=!1,this.transactionDescriptors=[Buffer.from([0,0,0,0,0,0,0,0])],this.transactionDepth=0,this.isSqlBatch=!1,this.closed=!1,this.messageBuffer=Buffer.alloc(0),this.curTransientRetryCount=0,this.transientErrorLookup=new g.TransientErrorLookup,this.state=this.STATE.INITIALIZED,this._cancelAfterRequestSent=()=>{this.messageIo.sendMessage(y.TYPE.ATTENTION),this.createCancelTimer()}}connect(e){if(this.state!==this.STATE.INITIALIZED)throw new I.ConnectionError("`.connect` can not be called on a Connection in `"+this.state.name+"` state.");if(e){let t=t=>{this.removeListener("error",r),e(t)},r=r=>{this.removeListener("connect",t),e(r)};this.once("connect",t),this.once("error",r)}this.transitionTo(this.STATE.CONNECTING)}on(e,t){return super.on(e,t)}emit(e,...t){return super.emit(e,...t)}close(){this.transitionTo(this.STATE.FINAL)}initialiseConnection(){let e=this.createConnectTimer();return this.config.options.port?this.connectOnPort(this.config.options.port,this.config.options.multiSubnetFailover,e,this.config.options.connector):(0,m.instanceLookup)({server:this.config.server,instanceName:this.config.options.instanceName,timeout:this.config.options.connectTimeout,signal:e}).then(t=>{process.nextTick(()=>{this.connectOnPort(t,this.config.options.multiSubnetFailover,e,this.config.options.connector)})},t=>{this.clearConnectTimer(),e.aborted||process.nextTick(()=>{this.emit("connect",new I.ConnectionError(t.message,"EINSTLOOKUP",{cause:t}))})})}cleanupConnection(e){if(!this.closed){this.clearConnectTimer(),this.clearRequestTimer(),this.clearRetryTimer(),this.closeConnection(),e===j.REDIRECT?this.emit("rerouting"):e!==j.RETRY&&process.nextTick(()=>{this.emit("end")});let t=this.request;if(t){let e=new I.RequestError("Connection closed before request completed.","ECLOSE");t.callback(e),this.request=void 0}this.closed=!0,this.loginError=void 0}}createDebug(){let e=new f.default(this.config.options.debug);return e.on("debug",e=>{this.emit("debug",e)}),e}createTokenStreamParser(e,t){return new S.Parser(e,this.debug,t,this.config.options)}socketHandlingForSendPreLogin(e){e.on("error",e=>{this.socketError(e)}),e.on("close",()=>{this.socketClose()}),e.on("end",()=>{this.socketEnd()}),e.setKeepAlive(!0,3e4),this.messageIo=new C.default(e,this.config.options.packetSize,this.debug),this.messageIo.on("secure",e=>{this.emit("secure",e)}),this.socket=e,this.closed=!1,this.debug.log("connected to "+this.config.server+":"+this.config.options.port),this.sendPreLogin(),this.transitionTo(this.STATE.SENT_PRELOGIN)}wrapWithTls(e,t){return t.throwIfAborted(),new Promise((r,n)=>{let i=o.createSecureContext(this.secureContextOptions),s=a.isIP(this.config.server)?"":this.config.server,l={host:this.config.server,socket:e,ALPNProtocols:["tds/8.0"],secureContext:i,servername:this.config.options.serverName?this.config.options.serverName:s},c=o.connect(l),u=()=>{c.removeListener("error",d),c.removeListener("connect",h),c.destroy(),n(t.reason)},d=e=>{t.removeEventListener("abort",u),c.removeListener("error",d),c.removeListener("connect",h),c.destroy(),n(e)},h=()=>{t.removeEventListener("abort",u),c.removeListener("error",d),c.removeListener("connect",h),r(c)};t.addEventListener("abort",u,{once:!0}),c.on("error",d),c.on("secureConnect",h)})}connectOnPort(e,t,r,n){let i={host:this.routingData?this.routingData.server:this.config.server,port:this.routingData?this.routingData.port:e,localAddress:this.config.options.localAddress},o=n||(t?O.connectInParallel:O.connectInSequence);(async()=>{let e=await o(i,s.default.lookup,r);if("strict"===this.config.options.encrypt)try{e=await this.wrapWithTls(e,r)}catch(t){throw e.end(),t}this.socketHandlingForSendPreLogin(e)})().catch(e=>{this.clearConnectTimer(),r.aborted||process.nextTick(()=>{this.socketError(e)})})}closeConnection(){this.socket&&this.socket.destroy()}createConnectTimer(){let e=new AbortController;return this.connectTimer=setTimeout(()=>{e.abort(),this.connectTimeout()},this.config.options.connectTimeout),e.signal}createCancelTimer(){this.clearCancelTimer();let e=this.config.options.cancelTimeout;e>0&&(this.cancelTimer=setTimeout(()=>{this.cancelTimeout()},e))}createRequestTimer(){this.clearRequestTimer();let e=this.request,t=void 0!==e.timeout?e.timeout:this.config.options.requestTimeout;t&&(this.requestTimer=setTimeout(()=>{this.requestTimeout()},t))}createRetryTimer(){this.clearRetryTimer(),this.retryTimer=setTimeout(()=>{this.retryTimeout()},this.config.options.connectionRetryInterval)}connectTimeout(){let e=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,t=this.routingData?this.routingData.server:this.config.server,r=this.routingData?`:${this.routingData.port}`:e,n=this.routingData?` (redirected from ${this.config.server}${e})`:"",i=`Failed to connect to ${t}${r}${n} in ${this.config.options.connectTimeout}ms`;this.debug.log(i),this.emit("connect",new I.ConnectionError(i,"ETIMEOUT")),this.connectTimer=void 0,this.dispatchEvent("connectTimeout")}cancelTimeout(){let e=`Failed to cancel request in ${this.config.options.cancelTimeout}ms`;this.debug.log(e),this.dispatchEvent("socketError",new I.ConnectionError(e,"ETIMEOUT"))}requestTimeout(){this.requestTimer=void 0;let e=this.request;e.cancel();let t=void 0!==e.timeout?e.timeout:this.config.options.requestTimeout;e.error=new I.RequestError("Timeout: Request failed to complete in "+t+"ms","ETIMEOUT")}retryTimeout(){this.retryTimer=void 0,this.emit("retry"),this.transitionTo(this.STATE.CONNECTING)}clearConnectTimer(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=void 0)}clearCancelTimer(){this.cancelTimer&&(clearTimeout(this.cancelTimer),this.cancelTimer=void 0)}clearRequestTimer(){this.requestTimer&&(clearTimeout(this.requestTimer),this.requestTimer=void 0)}clearRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=void 0)}transitionTo(e){if(this.state===e)return void this.debug.log("State is already "+e.name);this.state&&this.state.exit&&this.state.exit.call(this,e),this.debug.log("State change: "+(this.state?this.state.name:"undefined")+" -> "+e.name),this.state=e,this.state.enter&&this.state.enter.apply(this)}getEventHandler(e){let t=this.state.events[e];if(!t)throw Error(`No event '${e}' in state '${this.state.name}'`);return t}dispatchEvent(e,...t){let r=this.state.events[e];r?r.apply(this,t):(this.emit("error",Error(`No event '${e}' in state '${this.state.name}'`)),this.close())}socketError(e){if(this.state===this.STATE.CONNECTING||this.state===this.STATE.SENT_TLSSSLNEGOTIATION){let t=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,r=this.routingData?this.routingData.server:this.config.server,n=this.routingData?`:${this.routingData.port}`:t,i=this.routingData?` (redirected from ${this.config.server}${t})`:"",o=`Failed to connect to ${r}${n}${i} - ${e.message}`;this.debug.log(o),this.emit("connect",new I.ConnectionError(o,"ESOCKET",{cause:e}))}else{let t=`Connection lost - ${e.message}`;this.debug.log(t),this.emit("error",new I.ConnectionError(t,"ESOCKET",{cause:e}))}this.dispatchEvent("socketError",e)}socketEnd(){if(this.debug.log("socket ended"),this.state!==this.STATE.FINAL){let e=Error("socket hang up");e.code="ECONNRESET",this.socketError(e)}}socketClose(){if(this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed"),this.state===this.STATE.REROUTING)this.debug.log("Rerouting to "+this.routingData.server+":"+this.routingData.port),this.dispatchEvent("reconnect");else if(this.state===this.STATE.TRANSIENT_FAILURE_RETRY){let e=this.routingData?this.routingData.server:this.config.server,t=this.routingData?this.routingData.port:this.config.options.port;this.debug.log("Retry after transient failure connecting to "+e+":"+t),this.dispatchEvent("retry")}else this.transitionTo(this.STATE.FINAL)}sendPreLogin(){let[,e,t,r]=/^(\d+)\.(\d+)\.(\d+)/.exec(U.version)??["0.0.0","0","0","0"],n=new _.default({encrypt:"boolean"==typeof this.config.options.encrypt&&this.config.options.encrypt,version:{major:Number(e),minor:Number(t),build:Number(r),subbuild:0}});this.messageIo.sendMessage(y.TYPE.PRELOGIN,n.data),this.debug.payload(function(){return n.toString("  ")})}sendLogin7Packet(){let e=new E.default({tdsVersion:N.versions[this.config.options.tdsVersion],packetSize:this.config.options.packetSize,clientProgVer:0,clientPid:process.pid,connectionId:0,clientTimeZone:new Date().getTimezoneOffset(),clientLcid:1033}),{authentication:t}=this.config;switch(t.type){case"azure-active-directory-password":e.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"default"};break;case"azure-active-directory-access-token":e.fedAuth={type:"SECURITYTOKEN",echo:this.fedAuthRequired,fedAuthToken:t.options.token};break;case"token-credential":case"azure-active-directory-msi-vm":case"azure-active-directory-default":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":e.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"integrated"};break;case"ntlm":e.sspi=(0,k.createNTLMRequest)({domain:t.options.domain});break;default:e.userName=t.options.userName,e.password=t.options.password}e.hostname=this.config.options.workstationId||i.default.hostname(),e.serverName=this.routingData?this.routingData.server:this.config.server,e.appName=this.config.options.appName||"Tedious",e.libraryName=R.name,e.language=this.config.options.language,e.database=this.config.options.database,e.clientId=Buffer.from([1,2,3,4,5,6]),e.readOnlyIntent=this.config.options.readOnlyIntent,e.initDbFatal=!this.config.options.fallbackToDefaultDb,this.routingData=void 0,this.messageIo.sendMessage(y.TYPE.LOGIN7,e.toBuffer()),this.debug.payload(function(){return e.toString("  ")})}sendFedAuthTokenMessage(e){let t=Buffer.byteLength(e,"ucs2"),r=Buffer.alloc(8+t),n=0;n=r.writeUInt32LE(t+4,n),n=r.writeUInt32LE(t,n),r.write(e,n,"ucs2"),this.messageIo.sendMessage(y.TYPE.FEDAUTH_TOKEN,r),this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}sendInitialSql(){let e=new A.default(this.getInitialSql(),this.currentTransactionDescriptor(),this.config.options),t=new P.default({type:y.TYPE.SQL_BATCH});this.messageIo.outgoingMessageStream.write(t),c.Readable.from(e).pipe(t)}getInitialSql(){let e=[];return!0===this.config.options.enableAnsiNull?e.push("set ansi_nulls on"):!1===this.config.options.enableAnsiNull&&e.push("set ansi_nulls off"),!0===this.config.options.enableAnsiNullDefault?e.push("set ansi_null_dflt_on on"):!1===this.config.options.enableAnsiNullDefault&&e.push("set ansi_null_dflt_on off"),!0===this.config.options.enableAnsiPadding?e.push("set ansi_padding on"):!1===this.config.options.enableAnsiPadding&&e.push("set ansi_padding off"),!0===this.config.options.enableAnsiWarnings?e.push("set ansi_warnings on"):!1===this.config.options.enableAnsiWarnings&&e.push("set ansi_warnings off"),!0===this.config.options.enableArithAbort?e.push("set arithabort on"):!1===this.config.options.enableArithAbort&&e.push("set arithabort off"),!0===this.config.options.enableConcatNullYieldsNull?e.push("set concat_null_yields_null on"):!1===this.config.options.enableConcatNullYieldsNull&&e.push("set concat_null_yields_null off"),!0===this.config.options.enableCursorCloseOnCommit?e.push("set cursor_close_on_commit on"):!1===this.config.options.enableCursorCloseOnCommit&&e.push("set cursor_close_on_commit off"),null!==this.config.options.datefirst&&e.push(`set datefirst ${this.config.options.datefirst}`),null!==this.config.options.dateFormat&&e.push(`set dateformat ${this.config.options.dateFormat}`),!0===this.config.options.enableImplicitTransactions?e.push("set implicit_transactions on"):!1===this.config.options.enableImplicitTransactions&&e.push("set implicit_transactions off"),null!==this.config.options.language&&e.push(`set language ${this.config.options.language}`),!0===this.config.options.enableNumericRoundabort?e.push("set numeric_roundabort on"):!1===this.config.options.enableNumericRoundabort&&e.push("set numeric_roundabort off"),!0===this.config.options.enableQuotedIdentifier?e.push("set quoted_identifier on"):!1===this.config.options.enableQuotedIdentifier&&e.push("set quoted_identifier off"),null!==this.config.options.textsize&&e.push(`set textsize ${this.config.options.textsize}`),null!==this.config.options.connectionIsolationLevel&&e.push(`set transaction isolation level ${this.getIsolationLevelText(this.config.options.connectionIsolationLevel)}`),!0===this.config.options.abortTransactionOnError?e.push("set xact_abort on"):!1===this.config.options.abortTransactionOnError&&e.push("set xact_abort off"),e.join("\n")}processedInitialSql(){this.clearConnectTimer(),this.emit("connect")}execSqlBatch(e){this.makeRequest(e,y.TYPE.SQL_BATCH,new A.default(e.sqlTextOrProcedure,this.currentTransactionDescriptor(),this.config.options))}execSql(e){try{e.validateParameters(this.databaseCollation)}catch(t){e.error=t,process.nextTick(()=>{this.debug.log(t.message),e.callback(t)});return}let t=[];t.push({type:D.TYPES.NVarChar,name:"statement",value:e.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),e.parameters.length&&(t.push({type:D.TYPES.NVarChar,name:"params",value:e.makeParamsParameter(e.parameters),output:!1,length:void 0,precision:void 0,scale:void 0}),t.push(...e.parameters)),this.makeRequest(e,y.TYPE.RPC_REQUEST,new v.default(L.default.Sp_ExecuteSql,t,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}newBulkLoad(e,t,r){let n;if(void 0===r?(r=t,n={}):n=t,"object"!=typeof n)throw TypeError('"options" argument must be an object');return new h.default(e,this.databaseCollation,this.config.options,n,r)}execBulkLoad(e,t){if(e.executionStarted=!0,t){if(e.streamingMode)throw Error("Connection.execBulkLoad can't be called with a BulkLoad that was put in streaming mode.");if(e.firstRowWritten)throw Error("Connection.execBulkLoad can't be called with a BulkLoad that already has rows written to it.");let r=c.Readable.from(t);r.on("error",t=>{e.rowToPacketTransform.destroy(t)}),e.rowToPacketTransform.on("error",e=>{r.destroy(e)}),r.pipe(e.rowToPacketTransform)}else e.streamingMode||e.rowToPacketTransform.end();let r=()=>{i.cancel()},n=new M.BulkLoadPayload(e),i=new b.default(e.getBulkInsertSql(),t=>{if(e.removeListener("cancel",r),t){"UNKNOWN"===t.code&&(t.message+=" This is likely because the schema of the BulkLoad does not match the schema of the table you are attempting to insert into."),e.error=t,e.callback(t);return}this.makeRequest(e,y.TYPE.BULK_LOAD,n)});e.once("cancel",r),this.execSqlBatch(i)}prepare(e){let t=[];t.push({type:D.TYPES.Int,name:"handle",value:void 0,output:!0,length:void 0,precision:void 0,scale:void 0}),t.push({type:D.TYPES.NVarChar,name:"params",value:e.parameters.length?e.makeParamsParameter(e.parameters):null,output:!1,length:void 0,precision:void 0,scale:void 0}),t.push({type:D.TYPES.NVarChar,name:"stmt",value:e.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),e.preparing=!0,e.on("returnValue",(t,r)=>{"handle"===t?e.handle=r:e.error=new I.RequestError(`Tedious > Unexpected output parameter ${t} from sp_prepare`)}),this.makeRequest(e,y.TYPE.RPC_REQUEST,new v.default(L.default.Sp_Prepare,t,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}unprepare(e){let t=[];t.push({type:D.TYPES.Int,name:"handle",value:e.handle,output:!1,length:void 0,precision:void 0,scale:void 0}),this.makeRequest(e,y.TYPE.RPC_REQUEST,new v.default(L.default.Sp_Unprepare,t,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}execute(e,t){let r=[];r.push({type:D.TYPES.Int,name:"",value:e.handle,output:!1,length:void 0,precision:void 0,scale:void 0});try{for(let n=0,i=e.parameters.length;n<i;n++){let i=e.parameters[n];r.push({...i,value:i.type.validate(t?t[i.name]:null,this.databaseCollation)})}}catch(t){e.error=t,process.nextTick(()=>{this.debug.log(t.message),e.callback(t)});return}this.makeRequest(e,y.TYPE.RPC_REQUEST,new v.default(L.default.Sp_Execute,r,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}callProcedure(e){try{e.validateParameters(this.databaseCollation)}catch(t){e.error=t,process.nextTick(()=>{this.debug.log(t.message),e.callback(t)});return}this.makeRequest(e,y.TYPE.RPC_REQUEST,new v.default(e.sqlTextOrProcedure,e.parameters,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}beginTransaction(e,t="",r=this.config.options.isolationLevel){(0,w.assertValidIsolationLevel)(r,"isolationLevel");let n=new w.Transaction(t,r);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new b.default("SET TRANSACTION ISOLATION LEVEL "+n.isolationLevelToTSQL()+";BEGIN TRAN "+n.name,t=>{this.transactionDepth++,1===this.transactionDepth&&(this.inTransaction=!0),e(t)}));let i=new b.default(void 0,t=>e(t,this.currentTransactionDescriptor()));return this.makeRequest(i,y.TYPE.TRANSACTION_MANAGER,n.beginPayload(this.currentTransactionDescriptor()))}commitTransaction(e,t=""){let r=new w.Transaction(t);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new b.default("COMMIT TRAN "+r.name,t=>{this.transactionDepth--,0===this.transactionDepth&&(this.inTransaction=!1),e(t)}));let n=new b.default(void 0,e);return this.makeRequest(n,y.TYPE.TRANSACTION_MANAGER,r.commitPayload(this.currentTransactionDescriptor()))}rollbackTransaction(e,t=""){let r=new w.Transaction(t);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new b.default("ROLLBACK TRAN "+r.name,t=>{this.transactionDepth--,0===this.transactionDepth&&(this.inTransaction=!1),e(t)}));let n=new b.default(void 0,e);return this.makeRequest(n,y.TYPE.TRANSACTION_MANAGER,r.rollbackPayload(this.currentTransactionDescriptor()))}saveTransaction(e,t){let r=new w.Transaction(t);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new b.default("SAVE TRAN "+r.name,t=>{this.transactionDepth++,e(t)}));let n=new b.default(void 0,e);return this.makeRequest(n,y.TYPE.TRANSACTION_MANAGER,r.savePayload(this.currentTransactionDescriptor()))}transaction(e,t){if("function"!=typeof e)throw TypeError("`cb` must be a function");let r=this.inTransaction,i="_tedious_"+n.default.randomBytes(10).toString("hex"),o=(e,t,...n)=>{e?this.inTransaction&&this.state===this.STATE.LOGGED_IN?this.rollbackTransaction(r=>{t(r||e,...n)},i):t(e,...n):r?(this.config.options.tdsVersion<"7_2"&&this.transactionDepth--,t(null,...n)):this.commitTransaction(e=>{t(e,...n)},i)};return r?this.saveTransaction(r=>r?e(r):t?this.execSqlBatch(new b.default("SET transaction isolation level "+this.getIsolationLevelText(t),t=>e(t,o))):e(null,o),i):this.beginTransaction(t=>t?e(t):e(null,o),i,t)}makeRequest(e,t,r){if(this.state!==this.STATE.LOGGED_IN){let t="Requests can only be made in the "+this.STATE.LOGGED_IN.name+" state, not the "+this.state.name+" state";this.debug.log(t),e.callback(new I.RequestError(t,"EINVALIDSTATE"))}else if(e.canceled)process.nextTick(()=>{e.callback(new I.RequestError("Canceled.","ECANCEL"))});else{t===y.TYPE.SQL_BATCH?this.isSqlBatch=!0:this.isSqlBatch=!1,this.request=e,e.connection=this,e.rowCount=0,e.rows=[],e.rst=[];let n=()=>{o.unpipe(i),o.destroy(new I.RequestError("Canceled.","ECANCEL")),i.ignore=!0,i.end(),e instanceof b.default&&e.paused&&e.resume()};e.once("cancel",n),this.createRequestTimer();let i=new P.default({type:t,resetConnection:this.resetConnectionOnNextRequest});this.messageIo.outgoingMessageStream.write(i),this.transitionTo(this.STATE.SENT_CLIENT_REQUEST),i.once("finish",()=>{e.removeListener("cancel",n),e.once("cancel",this._cancelAfterRequestSent),this.resetConnectionOnNextRequest=!1,this.debug.payload(function(){return r.toString("  ")})});let o=c.Readable.from(r);o.once("error",t=>{o.unpipe(i),e.error??=t,i.ignore=!0,i.end()}),o.pipe(i)}}cancel(){return!!this.request&&!this.request.canceled&&(this.request.cancel(),!0)}reset(e){let t=new b.default(this.getInitialSql(),t=>{this.config.options.tdsVersion<"7_2"&&(this.inTransaction=!1),e(t)});this.resetConnectionOnNextRequest=!0,this.execSqlBatch(t)}currentTransactionDescriptor(){return this.transactionDescriptors[this.transactionDescriptors.length-1]}getIsolationLevelText(e){switch(e){case w.ISOLATION_LEVEL.READ_UNCOMMITTED:return"read uncommitted";case w.ISOLATION_LEVEL.REPEATABLE_READ:return"repeatable read";case w.ISOLATION_LEVEL.SERIALIZABLE:return"serializable";case w.ISOLATION_LEVEL.SNAPSHOT:return"snapshot";default:return"read committed"}}}function $(e){return e instanceof AggregateError&&(e=e.errors[0]),e instanceof I.ConnectionError&&!!e.isTransient}r.default=Y,t.exports=Y,Y.prototype.STATE={INITIALIZED:{name:"Initialized",events:{}},CONNECTING:{name:"Connecting",enter:function(){this.initialiseConnection()},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_PRELOGIN:{name:"SentPrelogin",enter:function(){(async()=>{let e,t=Buffer.alloc(0);try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}for await(let r of e)t=Buffer.concat([t,r]);let r=new _.default(t);if(this.debug.payload(function(){return r.toString("  ")}),1===r.fedAuthRequired&&(this.fedAuthRequired=!0),"strict"!==this.config.options.encrypt&&("ON"===r.encryptionString||"REQ"===r.encryptionString)){if(!this.config.options.encrypt)return this.emit("connect",new I.ConnectionError("Server requires encryption, set 'encrypt' config option to true.","EENCRYPT")),this.close();try{this.transitionTo(this.STATE.SENT_TLSSSLNEGOTIATION),await this.messageIo.startTls(this.secureContextOptions,this.config.options.serverName?this.config.options.serverName:this.routingData?.server??this.config.server,this.config.options.trustServerCertificate)}catch(e){return this.socketError(e)}}this.sendLogin7Packet();let{authentication:n}=this.config;switch(n.type){case"token-credential":case"azure-active-directory-password":case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":case"azure-active-directory-default":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_FEDAUTH);break;case"ntlm":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_NTLM);break;default:this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}})().catch(e=>{process.nextTick(()=>{throw e})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},REROUTING:{name:"ReRouting",enter:function(){this.cleanupConnection(j.REDIRECT)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},reconnect:function(){this.transitionTo(this.STATE.CONNECTING)}}},TRANSIENT_FAILURE_RETRY:{name:"TRANSIENT_FAILURE_RETRY",enter:function(){this.curTransientRetryCount++,this.cleanupConnection(j.RETRY)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},retry:function(){this.createRetryTimer()}}},SENT_TLSSSLNEGOTIATION:{name:"SentTLSSSLNegotiation",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_STANDARD_LOGIN:{name:"SentLogin7WithStandardLogin",enter:function(){(async()=>{let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}let t=new F.Login7TokenHandler(this),r=this.createTokenStreamParser(e,t);await (0,p.once)(r,"end"),t.loginAckReceived?t.routingData?(this.routingData=t.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL):this.loginError?$(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new I.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL))})().catch(e=>{process.nextTick(()=>{throw e})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_NTLM:{name:"SentLogin7WithNTLMLogin",enter:function(){(async()=>{for(;;){let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}let t=new F.Login7TokenHandler(this),r=this.createTokenStreamParser(e,t);if(await (0,p.once)(r,"end"),t.loginAckReceived)if(t.routingData)return this.routingData=t.routingData,this.transitionTo(this.STATE.REROUTING);else return this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL);if(this.ntlmpacket){let e=this.config.authentication,t=new T.default({domain:e.options.domain,userName:e.options.userName,password:e.options.password,ntlmpacket:this.ntlmpacket});this.messageIo.sendMessage(y.TYPE.NTLMAUTH_PKT,t.data),this.debug.payload(function(){return t.toString("  ")}),this.ntlmpacket=void 0}else if(!this.loginError)return this.emit("connect",new I.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL);else if($(this.loginError))return this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY);else return this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)}})().catch(e=>{process.nextTick(()=>{throw e})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_FEDAUTH:{name:"SentLogin7Withfedauth",enter:function(){(async()=>{let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}let t=new F.Login7TokenHandler(this),r=this.createTokenStreamParser(e,t);if(await (0,p.once)(r,"end"),t.loginAckReceived)return void(t.routingData?(this.routingData=t.routingData,this.transitionTo(this.STATE.REROUTING)):this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL));let n=t.fedAuthInfoToken;if(n&&n.stsurl&&n.spn){let e,t,r=this.config.authentication,i=new x.URL("/.default",n.spn).toString();switch(r.type){case"token-credential":e=r.options.credential;break;case"azure-active-directory-password":e=new u.UsernamePasswordCredential(r.options.tenantId??"common",r.options.clientId,r.options.userName,r.options.password);break;case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":let o=r.options.clientId?[r.options.clientId,{}]:[{}];e=new u.ManagedIdentityCredential(...o);break;case"azure-active-directory-default":let a=r.options.clientId?{managedIdentityClientId:r.options.clientId}:{};e=new u.DefaultAzureCredential(a);break;case"azure-active-directory-service-principal-secret":e=new u.ClientSecretCredential(r.options.tenantId,r.options.clientId,r.options.clientSecret)}try{t=await e.getToken(i)}catch(e){this.loginError=AggregateError([new I.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH"),e]),this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);return}if(null===t){this.loginError=AggregateError([new I.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH")]),this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);return}this.sendFedAuthTokenMessage(t.token)}else this.loginError?$(this.loginError)?(this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY)):(this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL)):(this.emit("connect",new I.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL))})().catch(e=>{process.nextTick(()=>{throw e})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN_SENDING_INITIAL_SQL:{name:"LoggedInSendingInitialSql",enter:function(){(async()=>{let e;this.sendInitialSql();try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}let t=this.createTokenStreamParser(e,new F.InitialSqlTokenHandler(this));await (0,p.once)(t,"end"),this.transitionTo(this.STATE.LOGGED_IN),this.processedInitialSql()})().catch(e=>{process.nextTick(()=>{throw e})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN:{name:"LoggedIn",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_CLIENT_REQUEST:{name:"SentClientRequest",enter:function(){(async()=>{let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}this.clearRequestTimer();let t=this.createTokenStreamParser(e,new F.RequestTokenHandler(this,this.request));if(this.request?.canceled&&this.cancelTimer)return this.transitionTo(this.STATE.SENT_ATTENTION);let r=()=>{t.resume()},n=()=>{t.pause(),this.request?.once("resume",r)};this.request?.on("pause",n),this.request instanceof b.default&&this.request.paused&&n();let i=()=>{t.removeListener("end",o),this.request instanceof b.default&&this.request.paused&&this.request.resume(),this.request?.removeListener("pause",n),this.request?.removeListener("resume",r),this.transitionTo(this.STATE.SENT_ATTENTION)},o=()=>{this.request?.removeListener("cancel",this._cancelAfterRequestSent),this.request?.removeListener("cancel",i),this.request?.removeListener("pause",n),this.request?.removeListener("resume",r),this.transitionTo(this.STATE.LOGGED_IN);let e=this.request;this.request=void 0,this.config.options.tdsVersion<"7_2"&&e.error&&this.isSqlBatch&&(this.inTransaction=!1),e.callback(e.error,e.rowCount,e.rows)};t.once("end",o),this.request?.once("cancel",i)})()},exit:function(e){this.clearRequestTimer()},events:{socketError:function(e){let t=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),t.callback(e)}}},SENT_ATTENTION:{name:"SentAttention",enter:function(){(async()=>{let e;try{e=await this.messageIo.readMessage()}catch(e){return this.socketError(e)}let t=new F.AttentionTokenHandler(this,this.request),r=this.createTokenStreamParser(e,t);if(await (0,p.once)(r,"end"),t.attentionReceived){this.clearCancelTimer();let e=this.request;this.request=void 0,this.transitionTo(this.STATE.LOGGED_IN),e.error&&e.error instanceof I.RequestError&&"ETIMEOUT"===e.error.code?e.callback(e.error):e.callback(new I.RequestError("Canceled.","ECANCEL"))}})().catch(e=>{process.nextTick(()=>{throw e})})},events:{socketError:function(e){let t=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),t.callback(e)}}},FINAL:{name:"Final",enter:function(){this.cleanupConnection(j.NORMAL)},events:{connectTimeout:function(){},message:function(){},socketError:function(){}}}}},48567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BulkLoad",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"ConnectionError",{enumerable:!0,get:function(){return s.ConnectionError}}),Object.defineProperty(r,"ISOLATION_LEVEL",{enumerable:!0,get:function(){return c.ISOLATION_LEVEL}}),Object.defineProperty(r,"Request",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"RequestError",{enumerable:!0,get:function(){return s.RequestError}}),Object.defineProperty(r,"TDS_VERSION",{enumerable:!0,get:function(){return u.versions}}),Object.defineProperty(r,"TYPES",{enumerable:!0,get:function(){return l.TYPES}}),r.connect=function(e,t){let r=new i.default(e);return r.connect(t),r},r.library=void 0;var n=d(e.r(14746)),i=d(e.r(81959)),o=d(e.r(48779)),a=e.r(99410),s=e.r(18134),l=e.r(2557),c=e.r(53454),u=e.r(88014);function d(e){return e&&e.__esModule?e:{default:e}}r.library={name:a.name}},50619,e=>{"use strict";e.s(["executeQuery",()=>s]);var t=e.i(48567);let r={server:process.env.DB_SERVER||"10.0.0.45",authentication:{type:"default",options:{userName:process.env.DB_USER||"sa",password:process.env.DB_PASSWORD||"Mapexdd2017"}},options:{port:parseInt(process.env.DB_PORT||"1433"),encrypt:!1,trustServerCertificate:!0,connectTimeout:3e4,requestTimeout:3e4,enableArithAbort:!0}},n={...r,options:{...r.options,database:process.env.DB_NAME||"mapexbp_Test"}},i={...r,authentication:{type:"default",options:{userName:"sa",password:"admin000"}},options:{...r.options,database:"SAGE"}},o={...r,authentication:{type:"default",options:{userName:"sa",password:"87cc88bb89."}},options:{...r.options,database:"WHALES"}};async function a(e="mapex"){let r;switch(e){case"mapex":default:r=n;break;case"sage":r=i;break;case"whales":r=o}let s=new t.Connection(r);return new Promise((t,r)=>{s.on("connect",n=>{n?(console.error(` Erro ao conectar \xe0 base ${e.toUpperCase()}:`,n),r(n)):(console.log(` Nova conex\xe3o criada para ${e.toUpperCase()}`),t(s))}),s.on("error",t=>{console.error(` Erro na conex\xe3o ${e.toUpperCase()}:`,t),r(t)}),s.connect()})}async function s(e,r,n="mapex"){let i=await a(n);return new Promise((o,a)=>{let s=[],l=new t.Request(e,t=>{try{i.close()}catch(e){console.warn(" Erro ao fechar conexo:",e)}t?(console.error(` Erro na query ${n.toUpperCase()}:`,t),console.error("SQL:",e.substring(0,200)+"..."),a(t)):o(s)});r&&Object.entries(r).forEach(([e,r])=>{let n=t.TYPES.NVarChar;"number"==typeof r?n=Number.isInteger(r)?t.TYPES.Int:t.TYPES.Float:"boolean"==typeof r?n=t.TYPES.Bit:r instanceof Date&&(n=t.TYPES.DateTime),l.addParameter(e,n,r)}),l.on("row",e=>{let t={};e.forEach(e=>{t[e.metadata.colName]=e.value}),s.push(t)});try{i.execSql(l)}catch(e){try{i.close()}catch(e){console.warn(" Erro ao fechar conexo aps falha:",e)}a(e)}})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7794cabc._.js.map