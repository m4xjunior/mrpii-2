module.exports=[32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},61724,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},24868,(e,t,r)=>{t.exports=e.x("fs/promises",()=>require("fs/promises"))},48633,(e,t,r)=>{},3754,e=>{"use strict";e.s(["handler",()=>A,"patchFetch",()=>S,"routeModule",()=>k,"serverHooks",()=>C,"workAsyncStorage",()=>O,"workUnitAsyncStorage",()=>N],3754);var t=e.i(74353),r=e.i(19310),a=e.i(20050),n=e.i(32930),o=e.i(49260),s=e.i(25482),i=e.i(36688),d=e.i(23026),l=e.i(1251),u=e.i(6621),c=e.i(93265),p=e.i(72116),h=e.i(61195),x=e.i(99119),m=e.i(93695);e.i(4079);var f=e.i(55985);e.s(["GET",()=>v],50026);var R=e.i(12415),w=e.i(24868),g=e.i(14747);async function v(e){try{console.log("🔍 Buscando datos de producción...");let e=await b();return await E(e),R.NextResponse.json({success:!0,data:e,summary:function(e){let t=e.reduce((e,t)=>e+t.ok,0),r=e.reduce((e,t)=>e+t.nok,0),a=e.reduce((e,t)=>e+t.rw,0),n=e.reduce((e,t)=>e+t.efficiency,0)/e.length;return e.forEach(e=>{e.total=e.ok+e.nok+e.rw}),{totalOk:t,totalNok:r,totalRw:a,totalProduction:t+r+a,averageEfficiency:Math.round(100*n)/100,machines:e,timestamp:new Date().toISOString()}}(e),timestamp:new Date().toISOString()})}catch(e){return console.error("❌ Error al buscar datos de producción:",e),R.NextResponse.json({success:!1,error:"Error al conectar con banco de datos",message:e instanceof Error?e.message:"Error desconocido",timestamp:new Date().toISOString()},{status:500})}}async function b(){let e=new Date,t=e.getHours(),r=100*Math.sin((60*t+e.getMinutes())/100);return[{id:"DOBL01",name:"Dobladora 01",baseOk:8500,baseNok:45,baseRw:12},{id:"DOBL02",name:"Dobladora 02",baseOk:9200,baseNok:38,baseRw:8},{id:"SOLD01",name:"Soldadura 01",baseOk:7800,baseNok:52,baseRw:15},{id:"SOLD02",name:"Soldadura 02",baseOk:8100,baseNok:41,baseRw:11},{id:"TROQ01",name:"Troqueladora 01",baseOk:7600,baseNok:35,baseRw:9},{id:"TERM01",name:"Terminación 01",baseOk:8900,baseNok:47,baseRw:13}].map(a=>({machineId:a.id,machineName:a.name,ok:Math.floor(a.baseOk+r+50*Math.random()),nok:Math.floor(a.baseNok+10*Math.random()),rw:Math.floor(a.baseRw+5*Math.random()),total:0,efficiency:Math.round(85+15*Math.random()),timestamp:e.toISOString(),operator:`Operador ${Math.floor(10*Math.random())+1}`,shift:t<14?"Mañana":t<22?"Tarde":"Noche"}))}async function E(e){try{let t=g.default.join(process.cwd(),"data","production"),r=`${new Date().toISOString().split("T")[0]}.json`;await w.default.mkdir(t,{recursive:!0});let a=[];try{let e=await w.default.readFile(g.default.join(t,r),"utf-8");a=JSON.parse(e)}catch(e){}a.push(...e),await w.default.writeFile(g.default.join(t,r),JSON.stringify(a,null,2),"utf-8"),console.log("💾 Datos de producción guardados en:",g.default.join(t,r))}catch(e){console.error("❌ Error al guardar datos de producción:",e)}}var y=e.i(50026);let k=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/scada/production/route",pathname:"/api/scada/production",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/Downloads/mrpii 2/src/app/api/scada/production/route.ts",nextConfigOutput:"",userland:y}),{workAsyncStorage:O,workUnitAsyncStorage:N,serverHooks:C}=k;function S(){return(0,a.patchFetch)({workAsyncStorage:O,workUnitAsyncStorage:N})}async function A(e,t,a){var R;let w="/api/scada/production/route";w=w.replace(/\/index$/,"")||"/";let g=await k.prepare(e,t,{srcPage:w,multiZoneDraftMode:!1});if(!g)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:v,params:b,nextConfig:E,isDraftMode:y,prerenderManifest:O,routerServerContext:N,isOnDemandRevalidate:C,revalidateOnlyGenerated:S,resolvedPathname:A}=g,M=(0,s.normalizeAppPath)(w),T=!!(O.dynamicRoutes[M]||O.routes[A]);if(T&&!y){let e=!!O.routes[A],t=O.dynamicRoutes[M];if(t&&!1===t.fallback&&!e)throw new m.NoFallbackError}let j=null;!T||k.isDev||y||(j="/index"===(j=A)?"/":j);let q=!0===k.isDev||!T,D=T&&!q,P=e.method||"GET",I=(0,o.getTracer)(),_=I.getActiveScopeSpan(),H={params:b,prerenderManifest:O,renderOpts:{experimental:{cacheComponents:!!E.experimental.cacheComponents,authInterrupts:!!E.experimental.authInterrupts},supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(R=E.experimental)?void 0:R.cacheLife,isRevalidate:D,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>k.onRequestError(e,t,a,N)},sharedContext:{buildId:v}},U=new i.NodeNextRequest(e),$=new i.NodeNextResponse(t),F=d.NextRequestAdapter.fromNodeNextRequest(U,(0,d.signalFromNodeResponse)(t));try{let s=async r=>k.handle(F,H).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=I.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=a.get("next.route");if(n){let e=`${P} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${P} ${e.url}`)}),i=async o=>{var i,d;let l=async({previousCacheEntry:r})=>{try{if(!(0,n.getRequestMeta)(e,"minimalMode")&&C&&S&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await s(o);e.fetchMetrics=H.renderOpts.fetchMetrics;let d=H.renderOpts.pendingWaitUntil;d&&a.waitUntil&&(a.waitUntil(d),d=void 0);let l=H.renderOpts.collectedTags;if(!T)return await (0,c.sendResponse)(U,$,i,H.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,p.toNodeOutgoingHttpHeaders)(i.headers);l&&(t[x.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==H.renderOpts.collectedRevalidate&&!(H.renderOpts.collectedRevalidate>=x.INFINITE_CACHE)&&H.renderOpts.collectedRevalidate,a=void 0===H.renderOpts.collectedExpire||H.renderOpts.collectedExpire>=x.INFINITE_CACHE?void 0:H.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await k.onRequestError(e,t,{routerKind:"App Router",routePath:w,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isRevalidate:D,isOnDemandRevalidate:C})},N),t}},m=await k.handleResponse({req:e,nextConfig:E,cacheKey:j,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:O,isRoutePPREnabled:!1,isOnDemandRevalidate:C,revalidateOnlyGenerated:S,responseGenerator:l,waitUntil:a.waitUntil});if(!T)return null;if((null==m||null==(i=m.value)?void 0:i.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==m||null==(d=m.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",C?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),y&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let R=(0,p.fromNodeOutgoingHttpHeaders)(m.value.headers);return(0,n.getRequestMeta)(e,"minimalMode")&&T||R.delete(x.NEXT_CACHE_TAGS_HEADER),!m.cacheControl||t.getHeader("Cache-Control")||R.get("Cache-Control")||R.set("Cache-Control",(0,h.getCacheControlHeader)(m.cacheControl)),await (0,c.sendResponse)(U,$,new Response(m.value.body,{headers:R,status:m.value.status||200})),null};_?await i(_):await I.withPropagatedContext(e.headers,()=>I.trace(l.BaseServerSpan.handleRequest,{spanName:`${P} ${e.url}`,kind:o.SpanKind.SERVER,attributes:{"http.method":P,"http.target":e.url}},i))}catch(t){if(_||t instanceof m.NoFallbackError||await k.onRequestError(e,t,{routerKind:"App Router",routePath:M,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isRevalidate:D,isOnDemandRevalidate:C})}),T)throw t;return await (0,c.sendResponse)(U,$,new Response(null,{status:500})),null}}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__66e27554._.js.map