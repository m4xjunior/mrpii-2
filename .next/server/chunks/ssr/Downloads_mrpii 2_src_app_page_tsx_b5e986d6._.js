module.exports=[74839,a=>{"use strict";let b;a.s(["default",()=>f1],74839);var c=a.i(9183),d=a.i(74213);function e(a){return a+.5|0}let f=(a,b,c)=>Math.max(Math.min(a,c),b);function g(a){return f(e(2.55*a),0,255)}function h(a){return f(e(255*a),0,255)}function i(a){return f(e(a/2.55)/100,0,1)}function j(a){return f(e(100*a),0,100)}let k={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},l=[..."0123456789ABCDEF"],m=a=>l[15&a],n=a=>l[(240&a)>>4]+l[15&a],o=a=>(240&a)>>4==(15&a),p=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function q(a,b,c){let d=b*Math.min(c,1-c),e=(b,e=(b+a/30)%12)=>c-d*Math.max(Math.min(e-3,9-e,1),-1);return[e(0),e(8),e(4)]}function r(a,b,c){let d=(d,e=(d+a/60)%6)=>c-c*b*Math.max(Math.min(e,4-e,1),0);return[d(5),d(3),d(1)]}function s(a,b,c){let d,e=q(a,1,.5);for(b+c>1&&(d=1/(b+c),b*=d,c*=d),d=0;d<3;d++)e[d]*=1-b-c,e[d]+=b;return e}function t(a){let b,c,d,e=a.r/255,f=a.g/255,g=a.b/255,h=Math.max(e,f,g),i=Math.min(e,f,g),j=(h+i)/2;h!==i&&(d=h-i,c=j>.5?d/(2-h-i):d/(h+i),b=60*(b=e===h?(f-g)/d+6*(f<g):f===h?(g-e)/d+2:(e-f)/d+4)+.5);return[0|b,c||0,j]}function u(a,b,c,d){return(Array.isArray(b)?a(b[0],b[1],b[2]):a(b,c,d)).map(h)}function v(a){return(a%360+360)%360}let w={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},x={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},y=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,z=a=>a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055,A=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function B(a,b,c){if(a){let d=t(a);d[b]=Math.max(0,Math.min(d[b]+d[b]*c,0===b?360:1)),a.r=(d=u(q,d,void 0,void 0))[0],a.g=d[1],a.b=d[2]}}function C(a,b){return a?Object.assign(b||{},a):a}function D(a){var b={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(b={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(b.a=h(a[3]))):(b=C(a,{r:0,g:0,b:0,a:1})).a=h(b.a),b}class E{constructor(a){let c;if(a instanceof E)return a;let d=typeof a;"object"===d?c=D(a):"string"===d&&(c=function(a){var b,c=a.length;return"#"===a[0]&&(4===c||5===c?b={r:255&17*k[a[1]],g:255&17*k[a[2]],b:255&17*k[a[3]],a:5===c?17*k[a[4]]:255}:(7===c||9===c)&&(b={r:k[a[1]]<<4|k[a[2]],g:k[a[3]]<<4|k[a[4]],b:k[a[5]]<<4|k[a[6]],a:9===c?k[a[7]]<<4|k[a[8]]:255})),b}(a)||function(a){b||((b=function(){let a,b,c,d,e,f={},g=Object.keys(x),h=Object.keys(w);for(a=0;a<g.length;a++){for(b=0,d=e=g[a];b<h.length;b++)c=h[b],e=e.replace(c,w[c]);c=parseInt(x[d],16),f[e]=[c>>16&255,c>>8&255,255&c]}return f}()).transparent=[0,0,0,0]);let c=b[a.toLowerCase()];return c&&{r:c[0],g:c[1],b:c[2],a:4===c.length?c[3]:255}}(a)||function(a){return"r"===a.charAt(0)?function(a){let b,c,d,e=y.exec(a),h=255;if(e){if(e[7]!==b){let a=+e[7];h=e[8]?g(a):f(255*a,0,255)}return b=+e[1],c=+e[3],d=+e[5],b=255&(e[2]?g(b):f(b,0,255)),{r:b,g:c=255&(e[4]?g(c):f(c,0,255)),b:d=255&(e[6]?g(d):f(d,0,255)),a:h}}}(a):function(a){let b,c=p.exec(a),d=255;if(!c)return;c[5]!==b&&(d=c[6]?g(+c[5]):h(+c[5]));let e=v(+c[2]),f=c[3]/100,i=c[4]/100;return{r:(b="hwb"===c[1]?u(s,e,f,i):"hsv"===c[1]?u(r,e,f,i):u(q,e,f,i))[0],g:b[1],b:b[2],a:d}}(a)}(a)),this._rgb=c,this._valid=!!c}get valid(){return this._valid}get rgb(){var a=C(this._rgb);return a&&(a.a=i(a.a)),a}set rgb(a){this._rgb=D(a)}rgbString(){var a;return this._valid?(a=this._rgb)&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${i(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`):void 0}hexString(){var a,b;let c,d;return this._valid?(b=o((c=a=this._rgb).r)&&o(c.g)&&o(c.b)&&o(c.a)?m:n,a?"#"+b(a.r)+b(a.g)+b(a.b)+(d=a.a,d<255?b(d):""):void 0):void 0}hslString(){return this._valid?function(a){if(!a)return;let b=t(a),c=b[0],d=j(b[1]),e=j(b[2]);return a.a<255?`hsla(${c}, ${d}%, ${e}%, ${i(a.a)})`:`hsl(${c}, ${d}%, ${e}%)`}(this._rgb):void 0}mix(a,b){if(a){let c,d=this.rgb,e=a.rgb,f=b===c?.5:b,g=2*f-1,h=d.a-e.a,i=((g*h==-1?g:(g+h)/(1+g*h))+1)/2;c=1-i,d.r=255&i*d.r+c*e.r+.5,d.g=255&i*d.g+c*e.g+.5,d.b=255&i*d.b+c*e.b+.5,d.a=f*d.a+(1-f)*e.a,this.rgb=d}return this}interpolate(a,b){return a&&(this._rgb=function(a,b,c){let d=A(i(a.r)),e=A(i(a.g)),f=A(i(a.b));return{r:h(z(d+c*(A(i(b.r))-d))),g:h(z(e+c*(A(i(b.g))-e))),b:h(z(f+c*(A(i(b.b))-f))),a:a.a+c*(b.a-a.a)}}(this._rgb,a._rgb,b)),this}clone(){return new E(this.rgb)}alpha(a){return this._rgb.a=h(a),this}clearer(a){let b=this._rgb;return b.a*=1-a,this}greyscale(){let a=this._rgb,b=e(.3*a.r+.59*a.g+.11*a.b);return a.r=a.g=a.b=b,this}opaquer(a){let b=this._rgb;return b.a*=1+a,this}negate(){let a=this._rgb;return a.r=255-a.r,a.g=255-a.g,a.b=255-a.b,this}lighten(a){return B(this._rgb,2,a),this}darken(a){return B(this._rgb,2,-a),this}saturate(a){return B(this._rgb,1,a),this}desaturate(a){return B(this._rgb,1,-a),this}rotate(a){var b,c;return b=this._rgb,(c=t(b))[0]=v(c[0]+a),b.r=(c=u(q,c,void 0,void 0))[0],b.g=c[1],b.b=c[2],this}}function F(){}let G=(()=>{let a=0;return()=>a++})();function H(a){return null==a}function I(a){if(Array.isArray&&Array.isArray(a))return!0;let b=Object.prototype.toString.call(a);return"[object"===b.slice(0,7)&&"Array]"===b.slice(-6)}function J(a){return null!==a&&"[object Object]"===Object.prototype.toString.call(a)}function K(a){return("number"==typeof a||a instanceof Number)&&isFinite(+a)}function L(a,b){return K(a)?a:b}function M(a,b){return void 0===a?b:a}let N=(a,b)=>"string"==typeof a&&a.endsWith("%")?parseFloat(a)/100*b:+a;function O(a,b,c){if(a&&"function"==typeof a.call)return a.apply(c,b)}function P(a,b,c,d){let e,f,g;if(I(a))if(f=a.length,d)for(e=f-1;e>=0;e--)b.call(c,a[e],e);else for(e=0;e<f;e++)b.call(c,a[e],e);else if(J(a))for(e=0,f=(g=Object.keys(a)).length;e<f;e++)b.call(c,a[g[e]],g[e])}function Q(a,b){let c,d,e,f;if(!a||!b||a.length!==b.length)return!1;for(c=0,d=a.length;c<d;++c)if(e=a[c],f=b[c],e.datasetIndex!==f.datasetIndex||e.index!==f.index)return!1;return!0}function R(a){if(I(a))return a.map(R);if(J(a)){let b=Object.create(null),c=Object.keys(a),d=c.length,e=0;for(;e<d;++e)b[c[e]]=R(a[c[e]]);return b}return a}function S(a){return -1===["__proto__","prototype","constructor"].indexOf(a)}function T(a,b,c,d){if(!S(a))return;let e=b[a],f=c[a];J(e)&&J(f)?U(e,f,d):b[a]=R(f)}function U(a,b,c){let d,e=I(b)?b:[b],f=e.length;if(!J(a))return a;let g=(c=c||{}).merger||T;for(let b=0;b<f;++b){if(!J(d=e[b]))continue;let f=Object.keys(d);for(let b=0,e=f.length;b<e;++b)g(f[b],a,d,c)}return a}function V(a,b){return U(a,b,{merger:W})}function W(a,b,c){if(!S(a))return;let d=b[a],e=c[a];J(d)&&J(e)?V(d,e):Object.prototype.hasOwnProperty.call(b,a)||(b[a]=R(e))}let X={"":a=>a,x:a=>a.x,y:a=>a.y};function Y(a,b){return(X[b]||(X[b]=function(a){let b=function(a){let b=a.split("."),c=[],d="";for(let a of b)(d+=a).endsWith("\\")?d=d.slice(0,-1)+".":(c.push(d),d="");return c}(a);return a=>{for(let c of b){if(""===c)break;a=a&&a[c]}return a}}(b)))(a)}function Z(a){return a.charAt(0).toUpperCase()+a.slice(1)}let $=a=>void 0!==a,_=a=>"function"==typeof a,aa=(a,b)=>{if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0},ab=Math.PI,ac=2*ab,ad=ac+ab,ae=ab/180,af=ab/2,ag=ab/4,ah=2*ab/3,ai=Math.log10,aj=Math.sign;function ak(a,b,c){return Math.abs(a-b)<c}function al(a){let b=Math.round(a),c=Math.pow(10,Math.floor(ai(a=ak(a,b,a/1e3)?b:a))),d=a/c;return(d<=1?1:d<=2?2:d<=5?5:10)*c}function am(a){return"symbol"!=typeof a&&("object"!=typeof a||null===a||!!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a))&&!isNaN(parseFloat(a))&&isFinite(a)}function an(a,b,c){let d,e,f;for(d=0,e=a.length;d<e;d++)isNaN(f=a[d][c])||(b.min=Math.min(b.min,f),b.max=Math.max(b.max,f))}function ao(a){return ab/180*a}function ap(a){if(!K(a))return;let b=1,c=0;for(;Math.round(a*b)/b!==a;)b*=10,c++;return c}function aq(a,b){let c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=Math.atan2(d,c);return f<-.5*ab&&(f+=ac),{angle:f,distance:e}}function ar(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))}function as(a,b){return(a-b+ad)%ac-ab}function at(a){return(a%ac+ac)%ac}function au(a,b,c,d){let e=at(a),f=at(b),g=at(c),h=at(f-e),i=at(g-e),j=at(e-f),k=at(e-g);return e===f||e===g||d&&f===g||h>i&&j<k}function av(a,b,c){return Math.max(b,Math.min(c,a))}function aw(a,b,c,d=1e-6){return a>=Math.min(b,c)-d&&a<=Math.max(b,c)+d}function ax(a,b,c){let d;c=c||(c=>a[c]<b);let e=a.length-1,f=0;for(;e-f>1;)c(d=f+e>>1)?f=d:e=d;return{lo:f,hi:e}}let ay=(a,b,c,d)=>ax(a,c,d?d=>{let e=a[d][b];return e<c||e===c&&a[d+1][b]===c}:d=>a[d][b]<c),az=(a,b,c)=>ax(a,c,d=>a[d][b]>=c),aA=["push","pop","shift","splice","unshift"];function aB(a,b){let c=a._chartjs;if(!c)return;let d=c.listeners,e=d.indexOf(b);-1!==e&&d.splice(e,1),d.length>0||(aA.forEach(b=>{delete a[b]}),delete a._chartjs)}function aC(a){let b=new Set(a);return b.size===a.length?a:Array.from(b)}let aD=function(a){return a()},aE=a=>"start"===a?"left":"end"===a?"right":"center",aF=(a,b,c)=>"start"===a?b:"end"===a?c:(b+c)/2;function aG(a,b,c){let d=b.length,e=0,f=d;if(a._sorted){let{iScale:g,vScale:h,_parsed:i}=a,j=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null,k=g.axis,{min:l,max:m,minDefined:n,maxDefined:o}=g.getUserBounds();if(n){if(e=Math.min(ay(i,k,l).lo,c?d:ay(b,k,g.getPixelForValue(l)).lo),j){let a=i.slice(0,e+1).reverse().findIndex(a=>!H(a[h.axis]));e-=Math.max(0,a)}e=av(e,0,d-1)}if(o){let a=Math.max(ay(i,g.axis,m,!0).hi+1,c?0:ay(b,k,g.getPixelForValue(m),!0).hi+1);if(j){let b=i.slice(a-1).findIndex(a=>!H(a[h.axis]));a+=Math.max(0,b)}f=av(a,e,d)-e}else f=d-e}return{start:e,count:f}}function aH(a){let{xScale:b,yScale:c,_scaleRanges:d}=a,e={xmin:b.min,xmax:b.max,ymin:c.min,ymax:c.max};if(!d)return a._scaleRanges=e,!0;let f=d.xmin!==b.min||d.xmax!==b.max||d.ymin!==c.min||d.ymax!==c.max;return Object.assign(d,e),f}let aI=a=>0===a||1===a,aJ=(a,b,c)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-b)*ac/c)),aK=(a,b,c)=>Math.pow(2,-10*a)*Math.sin((a-b)*ac/c)+1,aL={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*af)+1,easeOutSine:a=>Math.sin(a*af),easeInOutSine:a=>-.5*(Math.cos(ab*a)-1),easeInExpo:a=>0===a?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>1===a?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>aI(a)?a:a<.5?.5*Math.pow(2,10*(2*a-1)):.5*(-Math.pow(2,-10*(2*a-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>aI(a)?a:aJ(a,.075,.3),easeOutElastic:a=>aI(a)?a:aK(a,.075,.3),easeInOutElastic:a=>aI(a)?a:a<.5?.5*aJ(2*a,.1125,.45):.5+.5*aK(2*a-1,.1125,.45),easeInBack:a=>a*a*(2.70158*a-1.70158),easeOutBack:a=>(a-=1)*a*(2.70158*a+1.70158)+1,easeInOutBack(a){let b=1.70158;return(a/=.5)<1?.5*(a*a*(((b*=1.525)+1)*a-b)):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:a=>1-aL.easeOutBounce(1-a),easeOutBounce:a=>a<.36363636363636365?7.5625*a*a:a<.7272727272727273?7.5625*(a-=.5454545454545454)*a+.75:a<.9090909090909091?7.5625*(a-=.8181818181818182)*a+.9375:7.5625*(a-=.9545454545454546)*a+.984375,easeInOutBounce:a=>a<.5?.5*aL.easeInBounce(2*a):.5*aL.easeOutBounce(2*a-1)+.5};function aM(a){if(a&&"object"==typeof a){let b=a.toString();return"[object CanvasPattern]"===b||"[object CanvasGradient]"===b}return!1}function aN(a){return aM(a)?a:new E(a)}function aO(a){return aM(a)?a:new E(a).saturate(.5).darken(.1).hexString()}let aP=["x","y","borderWidth","radius","tension"],aQ=["color","borderColor","backgroundColor"],aR=new Map;function aS(a,b,c){return(function(a,b){let c=a+JSON.stringify(b=b||{}),d=aR.get(c);return d||(d=new Intl.NumberFormat(a,b),aR.set(c,d)),d})(b,c).format(a)}let aT={values:a=>I(a)?a:""+a,numeric(a,b,c){let d;if(0===a)return"0";let e=this.chart.options.locale,f=a;if(c.length>1){var g,h;let b,e=Math.max(Math.abs(c[0].value),Math.abs(c[c.length-1].value));(e<1e-4||e>1e15)&&(d="scientific"),g=a,Math.abs(b=(h=c).length>3?h[2].value-h[1].value:h[1].value-h[0].value)>=1&&g!==Math.floor(g)&&(b=g-Math.floor(g)),f=b}let i=ai(Math.abs(f)),j=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),k={notation:d,minimumFractionDigits:j,maximumFractionDigits:j};return Object.assign(k,this.options.ticks.format),aS(a,e,k)},logarithmic(a,b,c){return 0===a?"0":[1,2,3,5,10,15].includes(c[b].significand||a/Math.pow(10,Math.floor(ai(a))))||b>.8*c.length?aT.numeric.call(this,a,b,c):""}};var aU={formatters:aT};let aV=Object.create(null),aW=Object.create(null);function aX(a,b){if(!b)return a;let c=b.split(".");for(let b=0,d=c.length;b<d;++b){let d=c[b];a=a[d]||(a[d]=Object.create(null))}return a}function aY(a,b,c){return"string"==typeof b?U(aX(a,b),c):U(aX(a,""),b)}var aZ=new class{constructor(a,b){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=a=>a.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(a,b)=>aO(b.backgroundColor),this.hoverBorderColor=(a,b)=>aO(b.borderColor),this.hoverColor=(a,b)=>aO(b.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(a),this.apply(b)}set(a,b){return aY(this,a,b)}get(a){return aX(this,a)}describe(a,b){return aY(aW,a,b)}override(a,b){return aY(aV,a,b)}route(a,b,c,d){let e=aX(this,a),f=aX(this,c),g="_"+b;Object.defineProperties(e,{[g]:{value:e[b],writable:!0},[b]:{enumerable:!0,get(){let a=this[g],b=f[d];return J(a)?Object.assign({},b,a):M(a,b)},set(a){this[g]=a}}})}apply(a){a.forEach(a=>a(this))}}({_scriptable:a=>!a.startsWith("on"),_indexable:a=>"events"!==a,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:a=>"onProgress"!==a&&"onComplete"!==a&&"fn"!==a}),a.set("animations",{colors:{type:"color",properties:aQ},numbers:{type:"number",properties:aP}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:a=>0|a}}}})},function(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(a,b)=>b.lineWidth,tickColor:(a,b)=>b.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:aU.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:a=>!a.startsWith("before")&&!a.startsWith("after")&&"callback"!==a&&"parser"!==a,_indexable:a=>"borderDash"!==a&&"tickBorderDash"!==a&&"dash"!==a}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:a=>"backdropPadding"!==a&&"callback"!==a,_indexable:a=>"backdropPadding"!==a})}]);function a$(a,b,c,d,e){let f=b[e];return f||(f=b[e]=a.measureText(e).width,c.push(e)),f>d&&(d=f),d}function a_(a,b,c){let d=a.currentDevicePixelRatio,e=0!==c?Math.max(c/2,.5):0;return Math.round((b-e)*d)/d+e}function a0(a,b){(b||a)&&((b=b||a.getContext("2d")).save(),b.resetTransform(),b.clearRect(0,0,a.width,a.height),b.restore())}function a1(a,b,c,d){a2(a,b,c,d,null)}function a2(a,b,c,d,e){let f,g,h,i,j,k,l,m,n=b.pointStyle,o=b.rotation,p=b.radius,q=(o||0)*ae;if(n&&"object"==typeof n&&("[object HTMLImageElement]"===(f=n.toString())||"[object HTMLCanvasElement]"===f)){a.save(),a.translate(c,d),a.rotate(q),a.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),a.restore();return}if(!isNaN(p)&&!(p<=0)){switch(a.beginPath(),n){default:e?a.ellipse(c,d,e/2,p,0,0,ac):a.arc(c,d,p,0,ac),a.closePath();break;case"triangle":k=e?e/2:p,a.moveTo(c+Math.sin(q)*k,d-Math.cos(q)*p),q+=ah,a.lineTo(c+Math.sin(q)*k,d-Math.cos(q)*p),q+=ah,a.lineTo(c+Math.sin(q)*k,d-Math.cos(q)*p),a.closePath();break;case"rectRounded":j=.516*p,g=Math.cos(q+ag)*(i=p-j),l=Math.cos(q+ag)*(e?e/2-j:i),h=Math.sin(q+ag)*i,m=Math.sin(q+ag)*(e?e/2-j:i),a.arc(c-l,d-h,j,q-ab,q-af),a.arc(c+m,d-g,j,q-af,q),a.arc(c+l,d+h,j,q,q+af),a.arc(c-m,d+g,j,q+af,q+ab),a.closePath();break;case"rect":if(!o){i=Math.SQRT1_2*p,k=e?e/2:i,a.rect(c-k,d-i,2*k,2*i);break}q+=ag;case"rectRot":l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+m,d-g),a.lineTo(c+l,d+h),a.lineTo(c-m,d+g),a.closePath();break;case"crossRot":q+=ag;case"cross":l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+l,d+h),a.moveTo(c+m,d-g),a.lineTo(c-m,d+g);break;case"star":l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+l,d+h),a.moveTo(c+m,d-g),a.lineTo(c-m,d+g),q+=ag,l=Math.cos(q)*(e?e/2:p),g=Math.cos(q)*p,h=Math.sin(q)*p,m=Math.sin(q)*(e?e/2:p),a.moveTo(c-l,d-h),a.lineTo(c+l,d+h),a.moveTo(c+m,d-g),a.lineTo(c-m,d+g);break;case"line":g=e?e/2:Math.cos(q)*p,h=Math.sin(q)*p,a.moveTo(c-g,d-h),a.lineTo(c+g,d+h);break;case"dash":a.moveTo(c,d),a.lineTo(c+Math.cos(q)*(e?e/2:p),d+Math.sin(q)*p);break;case!1:a.closePath()}a.fill(),b.borderWidth>0&&a.stroke()}}function a3(a,b,c){return c=c||.5,!b||a&&a.x>b.left-c&&a.x<b.right+c&&a.y>b.top-c&&a.y<b.bottom+c}function a4(a,b){a.save(),a.beginPath(),a.rect(b.left,b.top,b.right-b.left,b.bottom-b.top),a.clip()}function a5(a){a.restore()}function a6(a,b,c,d,e){if(!b)return a.lineTo(c.x,c.y);if("middle"===e){let d=(b.x+c.x)/2;a.lineTo(d,b.y),a.lineTo(d,c.y)}else"after"===e!=!!d?a.lineTo(b.x,c.y):a.lineTo(c.x,b.y);a.lineTo(c.x,c.y)}function a7(a,b,c,d){if(!b)return a.lineTo(c.x,c.y);a.bezierCurveTo(d?b.cp1x:b.cp2x,d?b.cp1y:b.cp2y,d?c.cp2x:c.cp1x,d?c.cp2y:c.cp1y,c.x,c.y)}function a8(a,b,c,d,e,f={}){let g,h,i=I(b)?b:[b],j=f.strokeWidth>0&&""!==f.strokeColor;for(a.save(),a.font=e.string,f.translation&&a.translate(f.translation[0],f.translation[1]),H(f.rotation)||a.rotate(f.rotation),f.color&&(a.fillStyle=f.color),f.textAlign&&(a.textAlign=f.textAlign),f.textBaseline&&(a.textBaseline=f.textBaseline),g=0;g<i.length;++g)h=i[g],f.backdrop&&function(a,b){let c=a.fillStyle;a.fillStyle=b.color,a.fillRect(b.left,b.top,b.width,b.height),a.fillStyle=c}(a,f.backdrop),j&&(f.strokeColor&&(a.strokeStyle=f.strokeColor),H(f.strokeWidth)||(a.lineWidth=f.strokeWidth),a.strokeText(h,c,d,f.maxWidth)),a.fillText(h,c,d,f.maxWidth),function(a,b,c,d,e){if(e.strikethrough||e.underline){let f=a.measureText(d),g=b-f.actualBoundingBoxLeft,h=b+f.actualBoundingBoxRight,i=c-f.actualBoundingBoxAscent,j=c+f.actualBoundingBoxDescent,k=e.strikethrough?(i+j)/2:j;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=e.decorationWidth||2,a.moveTo(g,k),a.lineTo(h,k),a.stroke()}}(a,c,d,h,f),d+=Number(e.lineHeight);a.restore()}function a9(a,b){let{x:c,y:d,w:e,h:f,radius:g}=b;a.arc(c+g.topLeft,d+g.topLeft,g.topLeft,1.5*ab,ab,!0),a.lineTo(c,d+f-g.bottomLeft),a.arc(c+g.bottomLeft,d+f-g.bottomLeft,g.bottomLeft,ab,af,!0),a.lineTo(c+e-g.bottomRight,d+f),a.arc(c+e-g.bottomRight,d+f-g.bottomRight,g.bottomRight,af,0,!0),a.lineTo(c+e,d+g.topRight),a.arc(c+e-g.topRight,d+g.topRight,g.topRight,0,-af,!0),a.lineTo(c+g.topLeft,d)}let ba=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,bb=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,bc=a=>+a||0;function bd(a,b){let c={},d=J(b),e=d?Object.keys(b):b,f=J(a)?d?c=>M(a[c],a[b[c]]):b=>a[b]:()=>a;for(let a of e)c[a]=bc(f(a));return c}function be(a){return bd(a,{top:"y",right:"x",bottom:"y",left:"x"})}function bf(a){return bd(a,["topLeft","topRight","bottomLeft","bottomRight"])}function bg(a){let b=be(a);return b.width=b.left+b.right,b.height=b.top+b.bottom,b}function bh(a,b){a=a||{},b=b||aZ.font;let c=M(a.size,b.size);"string"==typeof c&&(c=parseInt(c,10));let d=M(a.style,b.style);d&&!(""+d).match(bb)&&(console.warn('Invalid font style specified: "'+d+'"'),d=void 0);let e={family:M(a.family,b.family),lineHeight:function(a,b){let c=(""+a).match(ba);if(!c||"normal"===c[1])return 1.2*b;switch(a=+c[2],c[3]){case"px":return a;case"%":a/=100}return b*a}(M(a.lineHeight,b.lineHeight),c),size:c,style:d,weight:M(a.weight,b.weight),string:""};return e.string=!e||H(e.size)||H(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family,e}function bi(a,b,c,d){let e,f,g,h=!0;for(e=0,f=a.length;e<f;++e)if(void 0!==(g=a[e])&&(void 0!==b&&"function"==typeof g&&(g=g(b),h=!1),void 0!==c&&I(g)&&(g=g[c%g.length],h=!1),void 0!==g))return d&&!h&&(d.cacheable=!1),g}function bj(a,b){return Object.assign(Object.create(a),b)}function bk(a,b=[""],c,d,e=()=>a[0]){let f=c||a;return void 0===d&&(d=bt("_fallback",a)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:f,_fallback:d,_getTarget:e,override:c=>bk([c,...a],b,f,d)},{deleteProperty:(b,c)=>(delete b[c],delete b._keys,delete a[0][c],!0),get:(c,d)=>bp(c,d,()=>(function(a,b,c,d){let e;for(let f of b)if(void 0!==(e=bt(bn(f,a),c)))return bo(a,e)?br(c,d,a,e):e})(d,b,a,c)),getOwnPropertyDescriptor:(a,b)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],b),getPrototypeOf:()=>Reflect.getPrototypeOf(a[0]),has:(a,b)=>bu(a).includes(b),ownKeys:a=>bu(a),set(a,b,c){let d=a._storage||(a._storage=e());return a[b]=d[b]=c,delete a._keys,!0}})}function bl(a,b,c,d){return new Proxy({_cacheable:!1,_proxy:a,_context:b,_subProxy:c,_stack:new Set,_descriptors:bm(a,d),setContext:b=>bl(a,b,c,d),override:e=>bl(a.override(e),b,c,d)},{deleteProperty:(b,c)=>(delete b[c],delete a[c],!0),get:(a,b,c)=>bp(a,b,()=>(function(a,b,c){let{_proxy:d,_context:e,_subProxy:f,_descriptors:g}=a,h=d[b];return _(h)&&g.isScriptable(b)&&(h=function(a,b,c,d){let{_proxy:e,_context:f,_subProxy:g,_stack:h}=c;if(h.has(a))throw Error("Recursion detected: "+Array.from(h).join("->")+"->"+a);h.add(a);let i=b(f,g||d);return h.delete(a),bo(a,i)&&(i=br(e._scopes,e,a,i)),i}(b,h,a,c)),I(h)&&h.length&&(h=function(a,b,c,d){let{_proxy:e,_context:f,_subProxy:g,_descriptors:h}=c;if(void 0!==f.index&&d(a))return b[f.index%b.length];if(J(b[0])){let c=b,d=e._scopes.filter(a=>a!==c);for(let i of(b=[],c)){let c=br(d,e,a,i);b.push(bl(c,f,g&&g[a],h))}}return b}(b,h,a,g.isIndexable)),bo(b,h)&&(h=bl(h,e,f&&f[b],g)),h})(a,b,c)),getOwnPropertyDescriptor:(b,c)=>b._descriptors.allKeys?Reflect.has(a,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,c),getPrototypeOf:()=>Reflect.getPrototypeOf(a),has:(b,c)=>Reflect.has(a,c),ownKeys:()=>Reflect.ownKeys(a),set:(b,c,d)=>(a[c]=d,delete b[c],!0)})}function bm(a,b={scriptable:!0,indexable:!0}){let{_scriptable:c=b.scriptable,_indexable:d=b.indexable,_allKeys:e=b.allKeys}=a;return{allKeys:e,scriptable:c,indexable:d,isScriptable:_(c)?c:()=>c,isIndexable:_(d)?d:()=>d}}let bn=(a,b)=>a?a+Z(b):b,bo=(a,b)=>J(b)&&"adapters"!==a&&(null===Object.getPrototypeOf(b)||b.constructor===Object);function bp(a,b,c){if(Object.prototype.hasOwnProperty.call(a,b)||"constructor"===b)return a[b];let d=c();return a[b]=d,d}let bq=(a,b)=>!0===a?b:"string"==typeof a?Y(b,a):void 0;function br(a,b,c,d){var e;let f=b._rootScopes,g=(e=b._fallback,_(e)?e(c,d):e),h=[...a,...f],i=new Set;i.add(d);let j=bs(i,h,c,g||c,d);return null!==j&&(void 0===g||g===c||null!==(j=bs(i,h,g,j,d)))&&bk(Array.from(i),[""],f,g,()=>(function(a,b,c){let d=a._getTarget();b in d||(d[b]={});let e=d[b];return I(e)&&J(c)?c:e||{}})(b,c,d))}function bs(a,b,c,d,e){for(;c;)c=function(a,b,c,d,e){for(let g of b){let b=bq(c,g);if(b){var f;a.add(b);let g=(f=b._fallback,_(f)?f(c,e):f);if(void 0!==g&&g!==c&&g!==d)return g}else if(!1===b&&void 0!==d&&c!==d)return null}return!1}(a,b,c,d,e);return c}function bt(a,b){for(let c of b){if(!c)continue;let b=c[a];if(void 0!==b)return b}}function bu(a){let b=a._keys;return b||(b=a._keys=function(a){let b=new Set;for(let c of a)for(let a of Object.keys(c).filter(a=>!a.startsWith("_")))b.add(a);return Array.from(b)}(a._scopes)),b}function bv(a,b,c,d){let e,f,g,{iScale:h}=a,{key:i="r"}=this._parsing,j=Array(d);for(e=0;e<d;++e)g=b[f=e+c],j[e]={r:h.parse(Y(g,i),f)};return j}let bw=Number.EPSILON||1e-14,bx=(a,b)=>b<a.length&&!a[b].skip&&a[b],by=a=>"x"===a?"y":"x";function bz(a,b,c){return Math.max(Math.min(a,c),b)}let bA=a=>a.ownerDocument.defaultView.getComputedStyle(a,null),bB=["top","right","bottom","left"];function bC(a,b,c){let d={};c=c?"-"+c:"";for(let e=0;e<4;e++){let f=bB[e];d[f]=parseFloat(a[b+"-"+f+c])||0}return d.width=d.left+d.right,d.height=d.top+d.bottom,d}function bD(a,b){if("native"in a)return a;let{canvas:c,currentDevicePixelRatio:d}=b,e=bA(c),f="border-box"===e.boxSizing,g=bC(e,"padding"),h=bC(e,"border","width"),{x:i,y:j,box:k}=function(a,b){let c,d,e,f=a.touches,g=f&&f.length?f[0]:a,{offsetX:h,offsetY:i}=g,j=!1;if(e=a.target,(h>0||i>0)&&(!e||!e.shadowRoot))c=h,d=i;else{let a=b.getBoundingClientRect();c=g.clientX-a.left,d=g.clientY-a.top,j=!0}return{x:c,y:d,box:j}}(a,c),l=g.left+(k&&h.left),m=g.top+(k&&h.top),{width:n,height:o}=b;return f&&(n-=g.width+h.width,o-=g.height+h.height),{x:Math.round((i-l)/n*c.width/d),y:Math.round((j-m)/o*c.height/d)}}function bE(a,b,c){let d=b||1,e=Math.floor(a.height*d),f=Math.floor(a.width*d);a.height=Math.floor(a.height),a.width=Math.floor(a.width);let g=a.canvas;return g.style&&(c||!g.style.height&&!g.style.width)&&(g.style.height=`${a.height}px`,g.style.width=`${a.width}px`),(a.currentDevicePixelRatio!==d||g.height!==e||g.width!==f)&&(a.currentDevicePixelRatio=d,g.height=e,g.width=f,a.ctx.setTransform(d,0,0,d,0,0),!0)}function bF(a,b,c,d){return{x:a.x+c*(b.x-a.x),y:a.y+c*(b.y-a.y)}}function bG(a,b,c,d){return{x:a.x+c*(b.x-a.x),y:"middle"===d?c<.5?a.y:b.y:"after"===d?c<1?a.y:b.y:c>0?b.y:a.y}}function bH(a,b,c,d){let e={x:a.cp2x,y:a.cp2y},f={x:b.cp1x,y:b.cp1y},g=bF(a,e,c),h=bF(e,f,c),i=bF(f,b,c),j=bF(g,h,c),k=bF(h,i,c);return bF(j,k,c)}function bI(a,b,c){var d;return a?(d=c,{x:a=>b+b+d-a,setWidth(a){d=a},textAlign:a=>"center"===a?a:"right"===a?"left":"right",xPlus:(a,b)=>a-b,leftForLtr:(a,b)=>a-b}):{x:a=>a,setWidth(a){},textAlign:a=>a,xPlus:(a,b)=>a+b,leftForLtr:(a,b)=>a}}function bJ(a,b){let c,d;("ltr"===b||"rtl"===b)&&(d=[(c=a.canvas.style).getPropertyValue("direction"),c.getPropertyPriority("direction")],c.setProperty("direction",b,"important"),a.prevTextDirection=d)}function bK(a,b){void 0!==b&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",b[0],b[1]))}function bL(a){return"angle"===a?{between:au,compare:as,normalize:at}:{between:aw,compare:(a,b)=>a-b,normalize:a=>a}}function bM({start:a,end:b,count:c,loop:d,style:e}){return{start:a%c,end:b%c,loop:d&&(b-a+1)%c==0,style:e}}function bN(a,b,c){let d,e,f;if(!c)return[a];let{property:g,start:h,end:i}=c,j=b.length,{compare:k,between:l,normalize:m}=bL(g),{start:n,end:o,loop:p,style:q}=function(a,b,c){let d,{property:e,start:f,end:g}=c,{between:h,normalize:i}=bL(e),j=b.length,{start:k,end:l,loop:m}=a;if(m){for(k+=j,l+=j,d=0;d<j&&h(i(b[k%j][e]),f,g);++d)k--,l--;k%=j,l%=j}return l<k&&(l+=j),{start:k,end:l,loop:m,style:a.style}}(a,b,c),r=[],s=!1,t=null,u=()=>s||l(h,f,d)&&0!==k(h,f),v=()=>!s||0===k(i,d)||l(i,f,d);for(let a=n,c=n;a<=o;++a)(e=b[a%j]).skip||(d=m(e[g]))!==f&&(s=l(d,h,i),null===t&&u()&&(t=0===k(d,h)?a:c),null!==t&&v()&&(r.push(bM({start:t,end:a,loop:p,count:j,style:q})),t=null),c=a,f=d);return null!==t&&r.push(bM({start:t,end:o,loop:p,count:j,style:q})),r}function bO(a,b){let c=[],d=a.segments;for(let e=0;e<d.length;e++){let f=bN(d[e],a.points,b);f.length&&c.push(...f)}return c}function bP(a,b,c,d){return d&&d.setContext&&c?function(a,b,c,d){let e=a._chart.getContext(),f=bQ(a.options),{_datasetIndex:g,options:{spanGaps:h}}=a,i=c.length,j=[],k=f,l=b[0].start,m=l;function n(a,b,d,e){let f=h?-1:1;if(a!==b){for(a+=i;c[a%i].skip;)a-=f;for(;c[b%i].skip;)b+=f;a%i!=b%i&&(j.push({start:a%i,end:b%i,loop:d,style:e}),k=e,l=b%i)}}for(let a of b){let b,f=c[(l=h?l:a.start)%i];for(m=l+1;m<=a.end;m++){let h=c[m%i];(function(a,b){if(!b)return!1;let c=[],d=function(a,b){return aM(b)?(c.includes(b)||c.push(b),c.indexOf(b)):b};return JSON.stringify(a,d)!==JSON.stringify(b,d)})(b=bQ(d.setContext(bj(e,{type:"segment",p0:f,p1:h,p0DataIndex:(m-1)%i,p1DataIndex:m%i,datasetIndex:g}))),k)&&n(l,m-1,a.loop,k),f=h,k=b}l<m-1&&n(l,m-1,a.loop,k)}return j}(a,b,c,d):b}function bQ(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function bR(a,b,c){return a.options.clip?a[c]:b[c]}function bS(a,b){let c=b._clip;if(c.disabled)return!1;let d=function(a,b){let{xScale:c,yScale:d}=a;return c&&d?{left:bR(c,b,"left"),right:bR(c,b,"right"),top:bR(d,b,"top"),bottom:bR(d,b,"bottom")}:b}(b,a.chartArea);return{left:!1===c.left?0:d.left-(!0===c.left?0:c.left),right:!1===c.right?a.width:d.right+(!0===c.right?0:c.right),top:!1===c.top?0:d.top-(!0===c.top?0:c.top),bottom:!1===c.bottom?a.height:d.bottom+(!0===c.bottom?0:c.bottom)}}var bT=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(a,b,c,d){let e=b.listeners[d],f=b.duration;e.forEach(d=>d({chart:a,initial:b.initial,numSteps:f,currentStep:Math.min(c-b.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=aD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(a=Date.now()){let b=0;this._charts.forEach((c,d)=>{let e;if(!c.running||!c.items.length)return;let f=c.items,g=f.length-1,h=!1;for(;g>=0;--g)(e=f[g])._active?(e._total>c.duration&&(c.duration=e._total),e.tick(a),h=!0):(f[g]=f[f.length-1],f.pop());h&&(d.draw(),this._notify(d,c,a,"progress")),f.length||(c.running=!1,this._notify(d,c,a,"complete"),c.initial=!1),b+=f.length}),this._lastDate=a,0===b&&(this._running=!1)}_getAnims(a){let b=this._charts,c=b.get(a);return c||(c={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},b.set(a,c)),c}listen(a,b,c){this._getAnims(a).listeners[b].push(c)}add(a,b){b&&b.length&&this._getAnims(a).items.push(...b)}has(a){return this._getAnims(a).items.length>0}start(a){let b=this._charts.get(a);b&&(b.running=!0,b.start=Date.now(),b.duration=b.items.reduce((a,b)=>Math.max(a,b._duration),0),this._refresh())}running(a){if(!this._running)return!1;let b=this._charts.get(a);return!!b&&!!b.running&&!!b.items.length}stop(a){let b=this._charts.get(a);if(!b||!b.items.length)return;let c=b.items,d=c.length-1;for(;d>=0;--d)c[d].cancel();b.items=[],this._notify(a,b,Date.now(),"complete")}remove(a){return this._charts.delete(a)}};let bU="transparent",bV={boolean:(a,b,c)=>c>.5?b:a,color(a,b,c){let d=aN(a||bU),e=d.valid&&aN(b||bU);return e&&e.valid?e.mix(d,c).hexString():b},number:(a,b,c)=>a+(b-a)*c};class bW{constructor(a,b,c,d){let e=b[c];d=bi([a.to,d,e,a.from]);let f=bi([a.from,e,d]);this._active=!0,this._fn=a.fn||bV[a.type||typeof f],this._easing=aL[a.easing]||aL.linear,this._start=Math.floor(Date.now()+(a.delay||0)),this._duration=this._total=Math.floor(a.duration),this._loop=!!a.loop,this._target=b,this._prop=c,this._from=f,this._to=d,this._promises=void 0}active(){return this._active}update(a,b,c){if(this._active){this._notify(!1);let d=this._target[this._prop],e=c-this._start,f=this._duration-e;this._start=c,this._duration=Math.floor(Math.max(f,a.duration)),this._total+=e,this._loop=!!a.loop,this._to=bi([a.to,b,d,a.from]),this._from=bi([a.from,d,b])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(a){let b,c=a-this._start,d=this._duration,e=this._prop,f=this._from,g=this._loop,h=this._to;if(this._active=f!==h&&(g||c<d),!this._active){this._target[e]=h,this._notify(!0);return}if(c<0){this._target[e]=f;return}b=c/d%2,b=g&&b>1?2-b:b,b=this._easing(Math.min(1,Math.max(0,b))),this._target[e]=this._fn(f,h,b)}wait(){let a=this._promises||(this._promises=[]);return new Promise((b,c)=>{a.push({res:b,rej:c})})}_notify(a){let b=a?"res":"rej",c=this._promises||[];for(let a=0;a<c.length;a++)c[a][b]()}}class bX{constructor(a,b){this._chart=a,this._properties=new Map,this.configure(b)}configure(a){if(!J(a))return;let b=Object.keys(aZ.animation),c=this._properties;Object.getOwnPropertyNames(a).forEach(d=>{let e=a[d];if(!J(e))return;let f={};for(let a of b)f[a]=e[a];(I(e.properties)&&e.properties||[d]).forEach(a=>{a!==d&&c.has(a)||c.set(a,f)})})}_animateOptions(a,b){let c=b.options,d=function(a,b){if(!b)return;let c=a.options;if(!c){a.options=b;return}return c.$shared&&(a.options=c=Object.assign({},c,{$shared:!1,$animations:{}})),c}(a,c);if(!d)return[];let e=this._createAnimations(d,c);return c.$shared&&(function(a,b){let c=[],d=Object.keys(b);for(let b=0;b<d.length;b++){let e=a[d[b]];e&&e.active()&&c.push(e.wait())}return Promise.all(c)})(a.options.$animations,c).then(()=>{a.options=c},()=>{}),e}_createAnimations(a,b){let c,d=this._properties,e=[],f=a.$animations||(a.$animations={}),g=Object.keys(b),h=Date.now();for(c=g.length-1;c>=0;--c){let i=g[c];if("$"===i.charAt(0))continue;if("options"===i){e.push(...this._animateOptions(a,b));continue}let j=b[i],k=f[i],l=d.get(i);if(k)if(l&&k.active()){k.update(l,j,h);continue}else k.cancel();if(!l||!l.duration){a[i]=j;continue}f[i]=k=new bW(l,a,i,j),e.push(k)}return e}update(a,b){if(0===this._properties.size)return void Object.assign(a,b);let c=this._createAnimations(a,b);if(c.length)return bT.add(this._chart,c),!0}}function bY(a,b){let c=a&&a.options||{},d=c.reverse,e=void 0===c.min?b:0,f=void 0===c.max?b:0;return{start:d?f:e,end:d?e:f}}function bZ(a,b){let c,d,e=[],f=a._getSortedDatasetMetas(b);for(c=0,d=f.length;c<d;++c)e.push(f[c].index);return e}function b$(a,b,c,d={}){let e,f,g,h,i=a.keys,j="single"===d.mode;if(null===b)return;let k=!1;for(e=0,f=i.length;e<f;++e){if((g=+i[e])===c){if(k=!0,d.all)continue;break}K(h=a.values[g])&&(j||0===b||aj(b)===aj(h))&&(b+=h)}return k||d.all?b:0}function b_(a,b){let c=a&&a.options.stacked;return c||void 0===c&&void 0!==b.stack}function b0(a,b,c,d){for(let e of b.getMatchingVisibleMetas(d).reverse()){let b=a[e.index];if(c&&b>0||!c&&b<0)return e.index}return null}function b1(a,b){let c,{chart:d,_cachedMeta:e}=a,f=d._stacks||(d._stacks={}),{iScale:g,vScale:h,index:i}=e,j=g.axis,k=h.axis,l=`${g.id}.${h.id}.${e.stack||e.type}`,m=b.length;for(let a=0;a<m;++a){let d=b[a],{[j]:g,[k]:m}=d;(c=(d._stacks||(d._stacks={}))[k]=function(a,b,c){let d=a[b]||(a[b]={});return d[c]||(d[c]={})}(f,l,g))[i]=m,c._top=b0(c,h,!0,e.type),c._bottom=b0(c,h,!1,e.type),(c._visualValues||(c._visualValues={}))[i]=m}}function b2(a,b){let c=a.scales;return Object.keys(c).filter(a=>c[a].axis===b).shift()}function b3(a,b){let c=a.controller.index,d=a.vScale&&a.vScale.axis;if(d)for(let e of b=b||a._parsed){let a=e._stacks;if(!a||void 0===a[d]||void 0===a[d][c])return;delete a[d][c],void 0!==a[d]._visualValues&&void 0!==a[d]._visualValues[c]&&delete a[d]._visualValues[c]}}let b4=a=>"reset"===a||"none"===a,b5=(a,b)=>b?a:Object.assign({},a);class b6{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(a,b){this.chart=a,this._ctx=a.ctx,this.index=b,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let a=this._cachedMeta;this.configure(),this.linkScales(),a._stacked=b_(a.vScale,a),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(a){this.index!==a&&b3(this._cachedMeta),this.index=a}linkScales(){let a=this.chart,b=this._cachedMeta,c=this.getDataset(),d=(a,b,c,d)=>"x"===a?b:"r"===a?d:c,e=b.xAxisID=M(c.xAxisID,b2(a,"x")),f=b.yAxisID=M(c.yAxisID,b2(a,"y")),g=b.rAxisID=M(c.rAxisID,b2(a,"r")),h=b.indexAxis,i=b.iAxisID=d(h,e,f,g),j=b.vAxisID=d(h,f,e,g);b.xScale=this.getScaleForId(e),b.yScale=this.getScaleForId(f),b.rScale=this.getScaleForId(g),b.iScale=this.getScaleForId(i),b.vScale=this.getScaleForId(j)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(a){return this.chart.scales[a]}_getOtherScale(a){let b=this._cachedMeta;return a===b.iScale?b.vScale:b.iScale}reset(){this._update("reset")}_destroy(){let a=this._cachedMeta;this._data&&aB(this._data,this),a._stacked&&b3(a)}_dataCheck(){let a=this.getDataset(),b=a.data||(a.data=[]),c=this._data;if(J(b)){let a=this._cachedMeta;this._data=function(a,b){let c,d,e,{iScale:f,vScale:g}=b,h="x"===f.axis?"x":"y",i="x"===g.axis?"x":"y",j=Object.keys(a),k=Array(j.length);for(c=0,d=j.length;c<d;++c)e=j[c],k[c]={[h]:e,[i]:a[e]};return k}(b,a)}else if(c!==b){if(c){aB(c,this);let a=this._cachedMeta;b3(a),a._parsed=[]}b&&Object.isExtensible(b)&&function(a,b){if(a._chartjs)return a._chartjs.listeners.push(b);Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[b]}}),aA.forEach(b=>{let c="_onData"+Z(b),d=a[b];Object.defineProperty(a,b,{configurable:!0,enumerable:!1,value(...b){let e=d.apply(this,b);return a._chartjs.listeners.forEach(a=>{"function"==typeof a[c]&&a[c](...b)}),e}})})}(b,this),this._syncList=[],this._data=b}}addElements(){let a=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(a.dataset=new this.datasetElementType)}buildOrUpdateElements(a){let b=this._cachedMeta,c=this.getDataset(),d=!1;this._dataCheck();let e=b._stacked;b._stacked=b_(b.vScale,b),b.stack!==c.stack&&(d=!0,b3(b),b.stack=c.stack),this._resyncElements(a),(d||e!==b._stacked)&&(b1(this,b._parsed),b._stacked=b_(b.vScale,b))}configure(){let a=this.chart.config,b=a.datasetScopeKeys(this._type),c=a.getOptionScopes(this.getDataset(),b,!0);this.options=a.createResolver(c,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(a,b){let c,d,e,{_cachedMeta:f,_data:g}=this,{iScale:h,_stacked:i}=f,j=h.axis,k=0===a&&b===g.length||f._sorted,l=a>0&&f._parsed[a-1];if(!1===this._parsing)f._parsed=g,f._sorted=!0,e=g;else{e=I(g[a])?this.parseArrayData(f,g,a,b):J(g[a])?this.parseObjectData(f,g,a,b):this.parsePrimitiveData(f,g,a,b);let h=()=>null===d[j]||l&&d[j]<l[j];for(c=0;c<b;++c)f._parsed[c+a]=d=e[c],k&&(h()&&(k=!1),l=d);f._sorted=k}i&&b1(this,e)}parsePrimitiveData(a,b,c,d){let e,f,{iScale:g,vScale:h}=a,i=g.axis,j=h.axis,k=g.getLabels(),l=g===h,m=Array(d);for(e=0;e<d;++e)f=e+c,m[e]={[i]:l||g.parse(k[f],f),[j]:h.parse(b[f],f)};return m}parseArrayData(a,b,c,d){let e,f,g,{xScale:h,yScale:i}=a,j=Array(d);for(e=0;e<d;++e)g=b[f=e+c],j[e]={x:h.parse(g[0],f),y:i.parse(g[1],f)};return j}parseObjectData(a,b,c,d){let e,f,g,{xScale:h,yScale:i}=a,{xAxisKey:j="x",yAxisKey:k="y"}=this._parsing,l=Array(d);for(e=0;e<d;++e)g=b[f=e+c],l[e]={x:h.parse(Y(g,j),f),y:i.parse(Y(g,k),f)};return l}getParsed(a){return this._cachedMeta._parsed[a]}getDataElement(a){return this._cachedMeta.data[a]}applyStack(a,b,c){let d=this.chart,e=this._cachedMeta,f=b[a.axis];return b$({keys:bZ(d,!0),values:b._stacks[a.axis]._visualValues},f,e.index,{mode:c})}updateRangeFromParsed(a,b,c,d){let e=c[b.axis],f=null===e?NaN:e,g=d&&c._stacks[b.axis];d&&g&&(d.values=g,f=b$(d,e,this._cachedMeta.index)),a.min=Math.min(a.min,f),a.max=Math.max(a.max,f)}getMinMax(a,b){let c,d,e,f=this._cachedMeta,g=f._parsed,h=f._sorted&&a===f.iScale,i=g.length,j=this._getOtherScale(a),k=(e=this.chart,b&&!f.hidden&&f._stacked&&{keys:bZ(e,!0),values:null}),l={min:1/0,max:-1/0},{min:m,max:n}=function(a){let{min:b,max:c,minDefined:d,maxDefined:e}=a.getUserBounds();return{min:d?b:-1/0,max:e?c:1/0}}(j);function o(){let b=(d=g[c])[j.axis];return!K(d[a.axis])||m>b||n<b}for(c=0;c<i&&(o()||(this.updateRangeFromParsed(l,a,d,k),!h));++c);if(h){for(c=i-1;c>=0;--c)if(!o()){this.updateRangeFromParsed(l,a,d,k);break}}return l}getAllParsedValues(a){let b,c,d,e=this._cachedMeta._parsed,f=[];for(b=0,c=e.length;b<c;++b)K(d=e[b][a.axis])&&f.push(d);return f}getMaxOverflow(){return!1}getLabelAndValue(a){let b=this._cachedMeta,c=b.iScale,d=b.vScale,e=this.getParsed(a);return{label:c?""+c.getLabelForValue(e[c.axis]):"",value:d?""+d.getLabelForValue(e[d.axis]):""}}_update(a){var b;let c,d,e,f,g=this._cachedMeta;this.update(a||"default"),J(b=M(this.options.clip,function(a,b,c){if(!1===c)return!1;let d=bY(a,c),e=bY(b,c);return{top:e.end,right:d.end,bottom:e.start,left:d.start}}(g.xScale,g.yScale,this.getMaxOverflow())))?(c=b.top,d=b.right,e=b.bottom,f=b.left):c=d=e=f=b,g._clip={top:c,right:d,bottom:e,left:f,disabled:!1===b}}update(a){}draw(){let a,b=this._ctx,c=this.chart,d=this._cachedMeta,e=d.data||[],f=c.chartArea,g=[],h=this._drawStart||0,i=this._drawCount||e.length-h,j=this.options.drawActiveElementsOnTop;for(d.dataset&&d.dataset.draw(b,f,h,i),a=h;a<h+i;++a){let c=e[a];c.hidden||(c.active&&j?g.push(c):c.draw(b,f))}for(a=0;a<g.length;++a)g[a].draw(b,f)}getStyle(a,b){let c=b?"active":"default";return void 0===a&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(c):this.resolveDataElementOptions(a||0,c)}getContext(a,b,c){var d,e;let f,g=this.getDataset();if(a>=0&&a<this._cachedMeta.data.length){let b=this._cachedMeta.data[a];(f=b.$context||(d=this.getContext(),b.$context=bj(d,{active:!1,dataIndex:a,parsed:void 0,raw:void 0,element:b,index:a,mode:"default",type:"data"}))).parsed=this.getParsed(a),f.raw=g.data[a],f.index=f.dataIndex=a}else(f=this.$context||(this.$context=bj(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:e=this.index,index:e,mode:"default",type:"dataset"}))).dataset=g,f.index=f.datasetIndex=this.index;return f.active=!!b,f.mode=c,f}resolveDatasetElementOptions(a){return this._resolveElementOptions(this.datasetElementType.id,a)}resolveDataElementOptions(a,b){return this._resolveElementOptions(this.dataElementType.id,b,a)}_resolveElementOptions(a,b="default",c){let d="active"===b,e=this._cachedDataOpts,f=a+"-"+b,g=e[f],h=this.enableOptionSharing&&$(c);if(g)return b5(g,h);let i=this.chart.config,j=i.datasetElementScopeKeys(this._type,a),k=d?[`${a}Hover`,"hover",a,""]:[a,""],l=i.getOptionScopes(this.getDataset(),j),m=Object.keys(aZ.elements[a]),n=()=>this.getContext(c,d,b),o=i.resolveNamedOptions(l,m,n,k);return o.$shared&&(o.$shared=h,e[f]=Object.freeze(b5(o,h))),o}_resolveAnimations(a,b,c){let d,e=this.chart,f=this._cachedDataOpts,g=`animation-${b}`,h=f[g];if(h)return h;if(!1!==e.options.animation){let e=this.chart.config,f=e.datasetAnimationScopeKeys(this._type,b),g=e.getOptionScopes(this.getDataset(),f);d=e.createResolver(g,this.getContext(a,c,b))}let i=new bX(e,d&&d.animations);return d&&d._cacheable&&(f[g]=Object.freeze(i)),i}getSharedOptions(a){if(a.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},a))}includeOptions(a,b){return!b||b4(a)||this.chart._animationsDisabled}_getSharedOptions(a,b){let c=this.resolveDataElementOptions(a,b),d=this._sharedOptions,e=this.getSharedOptions(c),f=this.includeOptions(b,e)||e!==d;return this.updateSharedOptions(e,b,c),{sharedOptions:e,includeOptions:f}}updateElement(a,b,c,d){b4(d)?Object.assign(a,c):this._resolveAnimations(b,d).update(a,c)}updateSharedOptions(a,b,c){a&&!b4(b)&&this._resolveAnimations(void 0,b).update(a,c)}_setStyle(a,b,c,d){a.active=d;let e=this.getStyle(b,d);this._resolveAnimations(b,c,d).update(a,{options:!d&&this.getSharedOptions(e)||e})}removeHoverStyle(a,b,c){this._setStyle(a,c,"active",!1)}setHoverStyle(a,b,c){this._setStyle(a,c,"active",!0)}_removeDatasetHoverStyle(){let a=this._cachedMeta.dataset;a&&this._setStyle(a,void 0,"active",!1)}_setDatasetHoverStyle(){let a=this._cachedMeta.dataset;a&&this._setStyle(a,void 0,"active",!0)}_resyncElements(a){let b=this._data,c=this._cachedMeta.data;for(let[a,b,c]of this._syncList)this[a](b,c);this._syncList=[];let d=c.length,e=b.length,f=Math.min(e,d);f&&this.parse(0,f),e>d?this._insertElements(d,e-d,a):e<d&&this._removeElements(e,d-e)}_insertElements(a,b,c=!0){let d,e=this._cachedMeta,f=e.data,g=a+b,h=a=>{for(a.length+=b,d=a.length-1;d>=g;d--)a[d]=a[d-b]};for(h(f),d=a;d<g;++d)f[d]=new this.dataElementType;this._parsing&&h(e._parsed),this.parse(a,b),c&&this.updateElements(f,a,b,"reset")}updateElements(a,b,c,d){}_removeElements(a,b){let c=this._cachedMeta;if(this._parsing){let d=c._parsed.splice(a,b);c._stacked&&b3(c,d)}c.data.splice(a,b)}_sync(a){if(this._parsing)this._syncList.push(a);else{let[b,c,d]=a;this[b](c,d)}this.chart._dataChanges.push([this.index,...a])}_onDataPush(){let a=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-a,a])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(a,b){b&&this._sync(["_removeElements",a,b]);let c=arguments.length-2;c&&this._sync(["_insertElements",a,c])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function b7(a,b,c,d){return I(a)?!function(a,b,c,d){let e=c.parse(a[0],d),f=c.parse(a[1],d),g=Math.min(e,f),h=Math.max(e,f),i=g,j=h;Math.abs(g)>Math.abs(h)&&(i=h,j=g),b[c.axis]=j,b._custom={barStart:i,barEnd:j,start:e,end:f,min:g,max:h}}(a,b,c,d):b[c.axis]=c.parse(a,d),b}function b8(a,b,c,d){let e,f,g,h,i=a.iScale,j=a.vScale,k=i.getLabels(),l=i===j,m=[];for(e=c,f=c+d;e<f;++e)h=b[e],(g={})[i.axis]=l||i.parse(k[e],e),m.push(b7(h,g,j,e));return m}function b9(a){return a&&void 0!==a.barStart&&void 0!==a.barEnd}function ca(a,b,c,d){var e,f,g;return d?cb((e=a,f=b,g=c,a=e===f?g:e===g?f:e),c,b):cb(a,b,c)}function cb(a,b,c){return"start"===a?b:"end"===a?c:a}class cc extends b6{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(a,b,c,d){let e=super.parsePrimitiveData(a,b,c,d);for(let a=0;a<e.length;a++)e[a]._custom=this.resolveDataElementOptions(a+c).radius;return e}parseArrayData(a,b,c,d){let e=super.parseArrayData(a,b,c,d);for(let a=0;a<e.length;a++){let d=b[c+a];e[a]._custom=M(d[2],this.resolveDataElementOptions(a+c).radius)}return e}parseObjectData(a,b,c,d){let e=super.parseObjectData(a,b,c,d);for(let a=0;a<e.length;a++){let d=b[c+a];e[a]._custom=M(d&&d.r&&+d.r,this.resolveDataElementOptions(a+c).radius)}return e}getMaxOverflow(){let a=this._cachedMeta.data,b=0;for(let c=a.length-1;c>=0;--c)b=Math.max(b,a[c].size(this.resolveDataElementOptions(c))/2);return b>0&&b}getLabelAndValue(a){let b=this._cachedMeta,c=this.chart.data.labels||[],{xScale:d,yScale:e}=b,f=this.getParsed(a),g=d.getLabelForValue(f.x),h=e.getLabelForValue(f.y),i=f._custom;return{label:c[a]||"",value:"("+g+", "+h+(i?", "+i:"")+")"}}update(a){let b=this._cachedMeta.data;this.updateElements(b,0,b.length,a)}updateElements(a,b,c,d){let e="reset"===d,{iScale:f,vScale:g}=this._cachedMeta,{sharedOptions:h,includeOptions:i}=this._getSharedOptions(b,d),j=f.axis,k=g.axis;for(let l=b;l<b+c;l++){let b=a[l],c=!e&&this.getParsed(l),m={},n=m[j]=e?f.getPixelForDecimal(.5):f.getPixelForValue(c[j]),o=m[k]=e?g.getBasePixel():g.getPixelForValue(c[k]);m.skip=isNaN(n)||isNaN(o),i&&(m.options=h||this.resolveDataElementOptions(l,b.active?"active":d),e&&(m.options.radius=0)),this.updateElement(b,l,m,d)}}resolveDataElementOptions(a,b){let c=this.getParsed(a),d=super.resolveDataElementOptions(a,b);d.$shared&&(d=Object.assign({},d,{$shared:!1}));let e=d.radius;return"active"!==b&&(d.radius=0),d.radius+=M(c&&c._custom,e),d}}class cd extends b6{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:a=>"spacing"!==a,_indexable:a=>"spacing"!==a&&!a.startsWith("borderDash")&&!a.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(a){let b=a.data;if(b.labels.length&&b.datasets.length){let{labels:{pointStyle:c,color:d}}=a.legend.options;return b.labels.map((b,e)=>{let f=a.getDatasetMeta(0).controller.getStyle(e);return{text:b,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:d,lineWidth:f.borderWidth,pointStyle:c,hidden:!a.getDataVisibility(e),index:e}})}return[]}},onClick(a,b,c){c.chart.toggleDataVisibility(b.index),c.chart.update()}}}};constructor(a,b){super(a,b),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(a,b){let c=this.getDataset().data,d=this._cachedMeta;if(!1===this._parsing)d._parsed=c;else{let e,f,g=a=>+c[a];if(J(c[a])){let{key:a="value"}=this._parsing;g=b=>+Y(c[b],a)}for(e=a,f=a+b;e<f;++e)d._parsed[e]=g(e)}}_getRotation(){return ao(this.options.rotation-90)}_getCircumference(){return ao(this.options.circumference)}_getRotationExtents(){let a=ac,b=-ac;for(let c=0;c<this.chart.data.datasets.length;++c)if(this.chart.isDatasetVisible(c)&&this.chart.getDatasetMeta(c).type===this._type){let d=this.chart.getDatasetMeta(c).controller,e=d._getRotation(),f=d._getCircumference();a=Math.min(a,e),b=Math.max(b,e+f)}return{rotation:a,circumference:b-a}}update(a){let b,{chartArea:c}=this.chart,d=this._cachedMeta,e=d.data,f=this.getMaxBorderWidth()+this.getMaxOffset(e)+this.options.spacing,g=Math.max((Math.min(c.width,c.height)-f)/2,0),h=Math.min((b=this.options.cutout,"string"==typeof b&&b.endsWith("%")?parseFloat(b)/100:b/g),1),i=this._getRingWeight(this.index),{circumference:j,rotation:k}=this._getRotationExtents(),{ratioX:l,ratioY:m,offsetX:n,offsetY:o}=function(a,b,c){let d=1,e=1,f=0,g=0;if(b<ac){let h=a+b,i=Math.cos(a),j=Math.sin(a),k=Math.cos(h),l=Math.sin(h),m=(b,d,e)=>au(b,a,h,!0)?1:Math.max(d,d*c,e,e*c),n=(b,d,e)=>au(b,a,h,!0)?-1:Math.min(d,d*c,e,e*c),o=m(0,i,k),p=m(af,j,l),q=n(ab,i,k),r=n(ab+af,j,l);d=(o-q)/2,e=(p-r)/2,f=-(o+q)/2,g=-(p+r)/2}return{ratioX:d,ratioY:e,offsetX:f,offsetY:g}}(k,j,h),p=Math.max(Math.min((c.width-f)/l,(c.height-f)/m)/2,0),q=N(this.options.radius,p),r=Math.max(q*h,0),s=(q-r)/this._getVisibleDatasetWeightTotal();this.offsetX=n*q,this.offsetY=o*q,d.total=this.calculateTotal(),this.outerRadius=q-s*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-s*i,0),this.updateElements(e,0,e.length,a)}_circumference(a,b){let c=this.options,d=this._cachedMeta,e=this._getCircumference();return b&&c.animation.animateRotate||!this.chart.getDataVisibility(a)||null===d._parsed[a]||d.data[a].hidden?0:this.calculateCircumference(d._parsed[a]*e/ac)}updateElements(a,b,c,d){let e,f="reset"===d,g=this.chart,h=g.chartArea,i=g.options.animation,j=(h.left+h.right)/2,k=(h.top+h.bottom)/2,l=f&&i.animateScale,m=l?0:this.innerRadius,n=l?0:this.outerRadius,{sharedOptions:o,includeOptions:p}=this._getSharedOptions(b,d),q=this._getRotation();for(e=0;e<b;++e)q+=this._circumference(e,f);for(e=b;e<b+c;++e){let b=this._circumference(e,f),c=a[e],g={x:j+this.offsetX,y:k+this.offsetY,startAngle:q,endAngle:q+b,circumference:b,outerRadius:n,innerRadius:m};p&&(g.options=o||this.resolveDataElementOptions(e,c.active?"active":d)),q+=b,this.updateElement(c,e,g,d)}}calculateTotal(){let a,b=this._cachedMeta,c=b.data,d=0;for(a=0;a<c.length;a++){let e=b._parsed[a];null!==e&&!isNaN(e)&&this.chart.getDataVisibility(a)&&!c[a].hidden&&(d+=Math.abs(e))}return d}calculateCircumference(a){let b=this._cachedMeta.total;return b>0&&!isNaN(a)?Math.abs(a)/b*ac:0}getLabelAndValue(a){let b=this._cachedMeta,c=this.chart,d=c.data.labels||[],e=aS(b._parsed[a],c.options.locale);return{label:d[a]||"",value:e}}getMaxBorderWidth(a){let b,c,d,e,f,g=0,h=this.chart;if(!a){for(b=0,c=h.data.datasets.length;b<c;++b)if(h.isDatasetVisible(b)){a=(d=h.getDatasetMeta(b)).data,e=d.controller;break}}if(!a)return 0;for(b=0,c=a.length;b<c;++b)"inner"!==(f=e.resolveDataElementOptions(b)).borderAlign&&(g=Math.max(g,f.borderWidth||0,f.hoverBorderWidth||0));return g}getMaxOffset(a){let b=0;for(let c=0,d=a.length;c<d;++c){let a=this.resolveDataElementOptions(c);b=Math.max(b,a.offset||0,a.hoverOffset||0)}return b}_getRingWeightOffset(a){let b=0;for(let c=0;c<a;++c)this.chart.isDatasetVisible(c)&&(b+=this._getRingWeight(c));return b}_getRingWeight(a){return Math.max(M(this.chart.data.datasets[a].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ce extends b6{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(a){let b=a.data;if(b.labels.length&&b.datasets.length){let{labels:{pointStyle:c,color:d}}=a.legend.options;return b.labels.map((b,e)=>{let f=a.getDatasetMeta(0).controller.getStyle(e);return{text:b,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:d,lineWidth:f.borderWidth,pointStyle:c,hidden:!a.getDataVisibility(e),index:e}})}return[]}},onClick(a,b,c){c.chart.toggleDataVisibility(b.index),c.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(a,b){super(a,b),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(a){let b=this._cachedMeta,c=this.chart,d=c.data.labels||[],e=aS(b._parsed[a].r,c.options.locale);return{label:d[a]||"",value:e}}parseObjectData(a,b,c,d){return bv.bind(this)(a,b,c,d)}update(a){let b=this._cachedMeta.data;this._updateRadius(),this.updateElements(b,0,b.length,a)}getMinMax(){let a=this._cachedMeta,b={min:1/0,max:-1/0};return a.data.forEach((a,c)=>{let d=this.getParsed(c).r;!isNaN(d)&&this.chart.getDataVisibility(c)&&(d<b.min&&(b.min=d),d>b.max&&(b.max=d))}),b}_updateRadius(){let a=this.chart,b=a.chartArea,c=a.options,d=Math.max(Math.min(b.right-b.left,b.bottom-b.top)/2,0),e=Math.max(c.cutoutPercentage?d/100*c.cutoutPercentage:1,0),f=(d-e)/a.getVisibleDatasetCount();this.outerRadius=d-f*this.index,this.innerRadius=this.outerRadius-f}updateElements(a,b,c,d){let e,f="reset"===d,g=this.chart,h=g.options.animation,i=this._cachedMeta.rScale,j=i.xCenter,k=i.yCenter,l=i.getIndexAngle(0)-.5*ab,m=l,n=360/this.countVisibleElements();for(e=0;e<b;++e)m+=this._computeAngle(e,d,n);for(e=b;e<b+c;e++){let b=a[e],c=m,o=m+this._computeAngle(e,d,n),p=g.getDataVisibility(e)?i.getDistanceFromCenterForValue(this.getParsed(e).r):0;m=o,f&&(h.animateScale&&(p=0),h.animateRotate&&(c=o=l));let q={x:j,y:k,innerRadius:0,outerRadius:p,startAngle:c,endAngle:o,options:this.resolveDataElementOptions(e,b.active?"active":d)};this.updateElement(b,e,q,d)}}countVisibleElements(){let a=this._cachedMeta,b=0;return a.data.forEach((a,c)=>{!isNaN(this.getParsed(c).r)&&this.chart.getDataVisibility(c)&&b++}),b}_computeAngle(a,b,c){return this.chart.getDataVisibility(a)?ao(this.resolveDataElementOptions(a,b).angle||c):0}}class cf extends b6{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(a){let b=this._cachedMeta.vScale,c=this.getParsed(a);return{label:b.getLabels()[a],value:""+b.getLabelForValue(c[b.axis])}}parseObjectData(a,b,c,d){return bv.bind(this)(a,b,c,d)}update(a){let b=this._cachedMeta,c=b.dataset,d=b.data||[],e=b.iScale.getLabels();if(c.points=d,"resize"!==a){let b=this.resolveDatasetElementOptions(a);this.options.showLine||(b.borderWidth=0);let f={_loop:!0,_fullLoop:e.length===d.length,options:b};this.updateElement(c,void 0,f,a)}this.updateElements(d,0,d.length,a)}updateElements(a,b,c,d){let e=this._cachedMeta.rScale,f="reset"===d;for(let g=b;g<b+c;g++){let b=a[g],c=this.resolveDataElementOptions(g,b.active?"active":d),h=e.getPointPositionForValue(g,this.getParsed(g).r),i=f?e.xCenter:h.x,j=f?e.yCenter:h.y,k={x:i,y:j,angle:h.angle,skip:isNaN(i)||isNaN(j),options:c};this.updateElement(b,g,k,d)}}}class cg extends b6{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(a){let b=this._cachedMeta,c=this.chart.data.labels||[],{xScale:d,yScale:e}=b,f=this.getParsed(a),g=d.getLabelForValue(f.x),h=e.getLabelForValue(f.y);return{label:c[a]||"",value:"("+g+", "+h+")"}}update(a){let b=this._cachedMeta,{data:c=[]}=b,d=this.chart._animationsDisabled,{start:e,count:f}=aG(b,c,d);if(this._drawStart=e,this._drawCount=f,aH(b)&&(e=0,f=c.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:e,_dataset:f}=b;e._chart=this.chart,e._datasetIndex=this.index,e._decimated=!!f._decimated,e.points=c;let g=this.resolveDatasetElementOptions(a);g.segment=this.options.segment,this.updateElement(e,void 0,{animated:!d,options:g},a)}else this.datasetElementType&&(delete b.dataset,this.datasetElementType=!1);this.updateElements(c,e,f,a)}addElements(){let{showLine:a}=this.options;!this.datasetElementType&&a&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(a,b,c,d){let e="reset"===d,{iScale:f,vScale:g,_stacked:h,_dataset:i}=this._cachedMeta,j=this.resolveDataElementOptions(b,d),k=this.getSharedOptions(j),l=this.includeOptions(d,k),m=f.axis,n=g.axis,{spanGaps:o,segment:p}=this.options,q=am(o)?o:1/0,r=this.chart._animationsDisabled||e||"none"===d,s=b>0&&this.getParsed(b-1);for(let j=b;j<b+c;++j){let b=a[j],c=this.getParsed(j),o=r?b:{},t=H(c[n]),u=o[m]=f.getPixelForValue(c[m],j),v=o[n]=e||t?g.getBasePixel():g.getPixelForValue(h?this.applyStack(g,c,h):c[n],j);o.skip=isNaN(u)||isNaN(v)||t,o.stop=j>0&&Math.abs(c[m]-s[m])>q,p&&(o.parsed=c,o.raw=i.data[j]),l&&(o.options=k||this.resolveDataElementOptions(j,b.active?"active":d)),r||this.updateElement(b,j,o,d),s=c}this.updateSharedOptions(k,d,j)}getMaxOverflow(){let a=this._cachedMeta,b=a.data||[];if(!this.options.showLine){let a=0;for(let c=b.length-1;c>=0;--c)a=Math.max(a,b[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}let c=a.dataset,d=c.options&&c.options.borderWidth||0;return b.length?Math.max(d,b[0].size(this.resolveDataElementOptions(0)),b[b.length-1].size(this.resolveDataElementOptions(b.length-1)))/2:d}}function ch(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class ci{static override(a){Object.assign(ci.prototype,a)}options;constructor(a){this.options=a||{}}init(){}formats(){return ch()}parse(){return ch()}format(){return ch()}add(){return ch()}diff(){return ch()}startOf(){return ch()}endOf(){return ch()}}var cj={_date:ci};function ck(a,b,c,d,e){let f=a.getSortedVisibleDatasetMetas(),g=c[b];for(let a=0,c=f.length;a<c;++a){let{index:c,data:h}=f[a],{lo:i,hi:j}=function(a,b,c,d){let{controller:e,data:f,_sorted:g}=a,h=e._cachedMeta.iScale,i=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(h&&b===h.axis&&"r"!==b&&g&&f.length){let g=h._reversePixels?az:ay;if(d){if(e._sharedOptions){let a=f[0],d="function"==typeof a.getRange&&a.getRange(b);if(d){let a=g(f,b,c-d),e=g(f,b,c+d);return{lo:a.lo,hi:e.hi}}}}else{let d=g(f,b,c);if(i){let{vScale:b}=e._cachedMeta,{_parsed:c}=a,f=c.slice(0,d.lo+1).reverse().findIndex(a=>!H(a[b.axis]));d.lo-=Math.max(0,f);let g=c.slice(d.hi).findIndex(a=>!H(a[b.axis]));d.hi+=Math.max(0,g)}return d}}return{lo:0,hi:f.length-1}}(f[a],b,g,e);for(let a=i;a<=j;++a){let b=h[a];b.skip||d(b,c,a)}}}function cl(a,b,c,d,e){let f=[];return(e||a.isPointInArea(b))&&ck(a,c,b,function(c,g,h){(e||a3(c,a.chartArea,0))&&c.inRange(b.x,b.y,d)&&f.push({element:c,datasetIndex:g,index:h})},!0),f}function cm(a,b,c,d,e,f){let g;return f||a.isPointInArea(b)?"r"!==c||d?function(a,b,c,d,e,f){let g=[],h=function(a){let b=-1!==a.indexOf("x"),c=-1!==a.indexOf("y");return function(a,d){return Math.sqrt(Math.pow(b?Math.abs(a.x-d.x):0,2)+Math.pow(c?Math.abs(a.y-d.y):0,2))}}(c),i=1/0;return ck(a,c,b,function(c,j,k){let l=c.inRange(b.x,b.y,e);if(d&&!l)return;let m=c.getCenterPoint(e);if(!(f||a.isPointInArea(m))&&!l)return;let n=h(b,m);n<i?(g=[{element:c,datasetIndex:j,index:k}],i=n):n===i&&g.push({element:c,datasetIndex:j,index:k})}),g}(a,b,c,d,e,f):(g=[],ck(a,c,b,function(a,c,d){let{startAngle:f,endAngle:h}=a.getProps(["startAngle","endAngle"],e),{angle:i}=aq(a,{x:b.x,y:b.y});au(i,f,h)&&g.push({element:a,datasetIndex:c,index:d})}),g):[]}function cn(a,b,c,d,e){let f=[],g="x"===c?"inXRange":"inYRange",h=!1;return(ck(a,c,b,(a,d,i)=>{a[g]&&a[g](b[c],e)&&(f.push({element:a,datasetIndex:d,index:i}),h=h||a.inRange(b.x,b.y,e))}),d&&!h)?[]:f}var co={modes:{index(a,b,c,d){let e=bD(b,a),f=c.axis||"x",g=c.includeInvisible||!1,h=c.intersect?cl(a,e,f,d,g):cm(a,e,f,!1,d,g),i=[];return h.length?(a.getSortedVisibleDatasetMetas().forEach(a=>{let b=h[0].index,c=a.data[b];c&&!c.skip&&i.push({element:c,datasetIndex:a.index,index:b})}),i):[]},dataset(a,b,c,d){let e=bD(b,a),f=c.axis||"xy",g=c.includeInvisible||!1,h=c.intersect?cl(a,e,f,d,g):cm(a,e,f,!1,d,g);if(h.length>0){let b=h[0].datasetIndex,c=a.getDatasetMeta(b).data;h=[];for(let a=0;a<c.length;++a)h.push({element:c[a],datasetIndex:b,index:a})}return h},point(a,b,c,d){let e=bD(b,a);return cl(a,e,c.axis||"xy",d,c.includeInvisible||!1)},nearest(a,b,c,d){let e=bD(b,a),f=c.axis||"xy",g=c.includeInvisible||!1;return cm(a,e,f,c.intersect,d,g)},x(a,b,c,d){let e=bD(b,a);return cn(a,e,"x",c.intersect,d)},y(a,b,c,d){let e=bD(b,a);return cn(a,e,"y",c.intersect,d)}}};let cp=["left","top","right","bottom"];function cq(a,b){return a.filter(a=>a.pos===b)}function cr(a,b){return a.filter(a=>-1===cp.indexOf(a.pos)&&a.box.axis===b)}function cs(a,b){return a.sort((a,c)=>{let d=b?c:a,e=b?a:c;return d.weight===e.weight?d.index-e.index:d.weight-e.weight})}function ct(a,b,c,d){return Math.max(a[c],b[c])+Math.max(a[d],b[d])}function cu(a,b){a.top=Math.max(a.top,b.top),a.left=Math.max(a.left,b.left),a.bottom=Math.max(a.bottom,b.bottom),a.right=Math.max(a.right,b.right)}function cv(a,b,c,d){let e,f,g,h,i,j,k=[];for(e=0,f=a.length,i=0;e<f;++e){(h=(g=a[e]).box).update(g.width||b.w,g.height||b.h,function(a,b){let c=b.maxPadding;var d=a?["left","right"]:["top","bottom"];let e={left:0,top:0,right:0,bottom:0};return d.forEach(a=>{e[a]=Math.max(b[a],c[a])}),e}(g.horizontal,b));let{same:f,other:l}=function(a,b,c,d){let{pos:e,box:f}=c,g=a.maxPadding;if(!J(e)){c.size&&(a[e]-=c.size);let b=d[c.stack]||{size:0,count:1};b.size=Math.max(b.size,c.horizontal?f.height:f.width),c.size=b.size/b.count,a[e]+=c.size}f.getPadding&&cu(g,f.getPadding());let h=Math.max(0,b.outerWidth-ct(g,a,"left","right")),i=Math.max(0,b.outerHeight-ct(g,a,"top","bottom")),j=h!==a.w,k=i!==a.h;return a.w=h,a.h=i,c.horizontal?{same:j,other:k}:{same:k,other:j}}(b,c,g,d);i|=f&&k.length,j=j||l,h.fullSize||k.push(g)}return i&&cv(k,b,c,d)||j}function cw(a,b,c,d,e){a.top=c,a.left=b,a.right=b+d,a.bottom=c+e,a.width=d,a.height=e}function cx(a,b,c,d){let e=c.padding,{x:f,y:g}=b;for(let h of a){let a=h.box,i=d[h.stack]||{count:1,placed:0,weight:1},j=h.stackWeight/i.weight||1;if(h.horizontal){let d=b.w*j,f=i.size||a.height;$(i.start)&&(g=i.start),a.fullSize?cw(a,e.left,g,c.outerWidth-e.right-e.left,f):cw(a,b.left+i.placed,g,d,f),i.start=g,i.placed+=d,g=a.bottom}else{let d=b.h*j,g=i.size||a.width;$(i.start)&&(f=i.start),a.fullSize?cw(a,f,e.top,g,c.outerHeight-e.bottom-e.top):cw(a,f,b.top+i.placed,g,d),i.start=f,i.placed+=d,f=a.right}}b.x=f,b.y=g}var cy={addBox(a,b){a.boxes||(a.boxes=[]),b.fullSize=b.fullSize||!1,b.position=b.position||"top",b.weight=b.weight||0,b._layers=b._layers||function(){return[{z:0,draw(a){b.draw(a)}}]},a.boxes.push(b)},removeBox(a,b){let c=a.boxes?a.boxes.indexOf(b):-1;-1!==c&&a.boxes.splice(c,1)},configure(a,b,c){b.fullSize=c.fullSize,b.position=c.position,b.weight=c.weight},update(a,b,c,d){if(!a)return;let e=bg(a.options.layout.padding),f=Math.max(b-e.width,0),g=Math.max(c-e.height,0),h=function(a){let b=function(a){let b,c,d,e,f,g,h=[];for(b=0,c=(a||[]).length;b<c;++b)d=a[b],({position:e,options:{stack:f,stackWeight:g=1}}=d),h.push({index:b,box:d,pos:e,horizontal:d.isHorizontal(),weight:d.weight,stack:f&&e+f,stackWeight:g});return h}(a),c=cs(b.filter(a=>a.box.fullSize),!0),d=cs(cq(b,"left"),!0),e=cs(cq(b,"right")),f=cs(cq(b,"top"),!0),g=cs(cq(b,"bottom")),h=cr(b,"x"),i=cr(b,"y");return{fullSize:c,leftAndTop:d.concat(f),rightAndBottom:e.concat(i).concat(g).concat(h),chartArea:cq(b,"chartArea"),vertical:d.concat(e).concat(i),horizontal:f.concat(g).concat(h)}}(a.boxes),i=h.vertical,j=h.horizontal;P(a.boxes,a=>{"function"==typeof a.beforeLayout&&a.beforeLayout()});let k=Object.freeze({outerWidth:b,outerHeight:c,padding:e,availableWidth:f,availableHeight:g,vBoxMaxWidth:f/2/(i.reduce((a,b)=>b.box.options&&!1===b.box.options.display?a:a+1,0)||1),hBoxMaxHeight:g/2}),l=Object.assign({},e);cu(l,bg(d));let m=Object.assign({maxPadding:l,w:f,h:g,x:e.left,y:e.top},e),n=function(a,b){let c,d,e,f=function(a){let b={};for(let c of a){let{stack:a,pos:d,stackWeight:e}=c;if(!a||!cp.includes(d))continue;let f=b[a]||(b[a]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=e}return b}(a),{vBoxMaxWidth:g,hBoxMaxHeight:h}=b;for(c=0,d=a.length;c<d;++c){let{fullSize:d}=(e=a[c]).box,i=f[e.stack],j=i&&e.stackWeight/i.weight;e.horizontal?(e.width=j?j*g:d&&b.availableWidth,e.height=h):(e.width=g,e.height=j?j*h:d&&b.availableHeight)}return f}(i.concat(j),k);cv(h.fullSize,m,k,n),cv(i,m,k,n),cv(j,m,k,n)&&cv(i,m,k,n);let o=m.maxPadding;function p(a){let b=Math.max(o[a]-m[a],0);return m[a]+=b,b}m.y+=p("top"),m.x+=p("left"),p("right"),p("bottom"),cx(h.leftAndTop,m,k,n),m.x+=m.w,m.y+=m.h,cx(h.rightAndBottom,m,k,n),a.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},P(h.chartArea,b=>{let c=b.box;Object.assign(c,a.chartArea),c.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class cz{acquireContext(a,b){}releaseContext(a){return!1}addEventListener(a,b,c){}removeEventListener(a,b,c){}getDevicePixelRatio(){return 1}getMaximumSize(a,b,c,d){return b=Math.max(0,b||a.width),c=c||a.height,{width:b,height:Math.max(0,d?Math.floor(b/d):c)}}isAttached(a){return!0}updateConfig(a){}}class cA extends cz{acquireContext(a){return a&&a.getContext&&a.getContext("2d")||null}updateConfig(a){a.options.animation=!1}}class cB{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(a){let{x:b,y:c}=this.getProps(["x","y"],a);return{x:b,y:c}}hasValue(){return am(this.x)&&am(this.y)}getProps(a,b){let c=this.$animations;if(!b||!c)return this;let d={};return a.forEach(a=>{d[a]=c[a]&&c[a].active()?c[a]._to:this[a]}),d}}function cC(a,b,c,d,e){let f,g,h,i=M(d,0),j=Math.min(M(e,a.length),a.length),k=0;for(c=Math.ceil(c),e&&(c=(f=e-d)/Math.floor(f/c)),h=i;h<0;)h=Math.round(i+ ++k*c);for(g=Math.max(i,0);g<j;g++)g===h&&(b.push(a[g]),h=Math.round(i+ ++k*c))}let cD=(a,b,c)=>"top"===b||"left"===b?a[b]+c:a[b]-c,cE=(a,b)=>Math.min(b||a,a);function cF(a,b){let c=[],d=a.length/b,e=a.length,f=0;for(;f<e;f+=d)c.push(a[Math.floor(f)]);return c}function cG(a){return a.drawTicks?a.tickLength:0}function cH(a,b){if(!a.display)return 0;let c=bh(a.font,b),d=bg(a.padding);return(I(a.text)?a.text.length:1)*c.lineHeight+d.height}class cI extends cB{constructor(a){super(),this.id=a.id,this.type=a.type,this.options=void 0,this.ctx=a.ctx,this.chart=a.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(a){this.options=a.setContext(this.getContext()),this.axis=a.axis,this._userMin=this.parse(a.min),this._userMax=this.parse(a.max),this._suggestedMin=this.parse(a.suggestedMin),this._suggestedMax=this.parse(a.suggestedMax)}parse(a,b){return a}getUserBounds(){let{_userMin:a,_userMax:b,_suggestedMin:c,_suggestedMax:d}=this;return a=L(a,1/0),b=L(b,-1/0),c=L(c,1/0),d=L(d,-1/0),{min:L(a,c),max:L(b,d),minDefined:K(a),maxDefined:K(b)}}getMinMax(a){let b,{min:c,max:d,minDefined:e,maxDefined:f}=this.getUserBounds();if(e&&f)return{min:c,max:d};let g=this.getMatchingVisibleMetas();for(let h=0,i=g.length;h<i;++h)b=g[h].controller.getMinMax(this,a),e||(c=Math.min(c,b.min)),f||(d=Math.max(d,b.max));return c=f&&c>d?d:c,d=e&&c>d?c:d,{min:L(c,L(d,c)),max:L(d,L(c,d))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let a=this.chart.data;return this.options.labels||(this.isHorizontal()?a.xLabels:a.yLabels)||a.labels||[]}getLabelItems(a=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(a))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){O(this.options.beforeUpdate,[this])}update(a,b,c){let{beginAtZero:d,grace:e,ticks:f}=this.options,g=f.sampleSize;this.beforeUpdate(),this.maxWidth=a,this.maxHeight=b,this._margins=c=Object.assign({left:0,right:0,top:0,bottom:0},c),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+c.left+c.right:this.height+c.top+c.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(a,b,c){let{min:d,max:e}=a,f=N(b,(e-d)/2),g=(a,b)=>c&&0===a?0:a+b;return{min:g(d,-Math.abs(f)),max:g(e,f)}}(this,e,d),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let h=g<this.ticks.length;this._convertTicksToLabels(h?cF(this.ticks,g):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||"auto"===f.source)&&(this.ticks=function(a,b){let c=a.options.ticks,d=function(a){let b=a.options.offset,c=a._tickSize();return Math.floor(Math.min(a._length/c+ +!b,a._maxLength/c))}(a),e=Math.min(c.maxTicksLimit||d,d),f=c.major.enabled?function(a){let b,c,d=[];for(b=0,c=a.length;b<c;b++)a[b].major&&d.push(b);return d}(b):[],g=f.length,h=f[0],i=f[g-1],j=[];if(g>e)return function(a,b,c,d){let e,f=0,g=c[0];for(e=0,d=Math.ceil(d);e<a.length;e++)e===g&&(b.push(a[e]),g=c[++f*d])}(b,j,f,g/e),j;let k=function(a,b,c){let d=function(a){let b,c,d=a.length;if(d<2)return!1;for(c=a[0],b=1;b<d;++b)if(a[b]-a[b-1]!==c)return!1;return c}(a),e=b.length/c;if(!d)return Math.max(e,1);let f=function(a){let b,c=[],d=Math.sqrt(a);for(b=1;b<d;b++)a%b==0&&(c.push(b),c.push(a/b));return d===(0|d)&&c.push(d),c.sort((a,b)=>a-b).pop(),c}(d);for(let a=0,b=f.length-1;a<b;a++){let b=f[a];if(b>e)return b}return Math.max(e,1)}(f,b,e);if(g>0){let a,c,d=g>1?Math.round((i-h)/(g-1)):null;for(cC(b,j,k,H(d)?0:h-d,h),a=0,c=g-1;a<c;a++)cC(b,j,k,f[a],f[a+1]);return cC(b,j,k,i,H(d)?b.length:i+d),j}return cC(b,j,k),j}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let a,b,c=this.options.reverse;this.isHorizontal()?(a=this.left,b=this.right):(a=this.top,b=this.bottom,c=!c),this._startPixel=a,this._endPixel=b,this._reversePixels=c,this._length=b-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){O(this.options.afterUpdate,[this])}beforeSetDimensions(){O(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){O(this.options.afterSetDimensions,[this])}_callHooks(a){this.chart.notifyPlugins(a,this.getContext()),O(this.options[a],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){O(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(a){let b,c,d,e=this.options.ticks;for(b=0,c=a.length;b<c;b++)(d=a[b]).label=O(e.callback,[d.value,b,a],this)}afterTickToLabelConversion(){O(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){O(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let a,b,c,d=this.options,e=d.ticks,f=cE(this.ticks.length,d.ticks.maxTicksLimit),g=e.minRotation||0,h=e.maxRotation,i=g;if(!this._isVisible()||!e.display||g>=h||f<=1||!this.isHorizontal()){this.labelRotation=g;return}let j=this._getLabelSizes(),k=j.widest.width,l=j.highest.height,m=av(this.chart.width-k,0,this.maxWidth);k+6>(a=d.offset?this.maxWidth/f:m/(f-1))&&(a=m/(f-(d.offset?.5:1)),b=this.maxHeight-cG(d.grid)-e.padding-cH(d.title,this.chart.options.font),c=Math.sqrt(k*k+l*l),i=Math.max(g,Math.min(h,i=180/ab*Math.min(Math.asin(av((j.highest.height+6)/a,-1,1)),Math.asin(av(b/c,-1,1))-Math.asin(av(l/c,-1,1)))))),this.labelRotation=i}afterCalculateLabelRotation(){O(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){O(this.options.beforeFit,[this])}fit(){let a={width:0,height:0},{chart:b,options:{ticks:c,title:d,grid:e}}=this,f=this._isVisible(),g=this.isHorizontal();if(f){let f=cH(d,b.options.font);if(g?(a.width=this.maxWidth,a.height=cG(e)+f):(a.height=this.maxHeight,a.width=cG(e)+f),c.display&&this.ticks.length){let{first:b,last:d,widest:e,highest:f}=this._getLabelSizes(),h=2*c.padding,i=ao(this.labelRotation),j=Math.cos(i),k=Math.sin(i);if(g){let b=c.mirror?0:k*e.width+j*f.height;a.height=Math.min(this.maxHeight,a.height+b+h)}else{let b=c.mirror?0:j*e.width+k*f.height;a.width=Math.min(this.maxWidth,a.width+b+h)}this._calculatePadding(b,d,k,j)}}this._handleMargins(),g?(this.width=this._length=b.width-this._margins.left-this._margins.right,this.height=a.height):(this.width=a.width,this.height=this._length=b.height-this._margins.top-this._margins.bottom)}_calculatePadding(a,b,c,d){let{ticks:{align:e,padding:f},position:g}=this.options,h=0!==this.labelRotation,i="top"!==g&&"x"===this.axis;if(this.isHorizontal()){let g=this.getPixelForTick(0)-this.left,j=this.right-this.getPixelForTick(this.ticks.length-1),k=0,l=0;h?i?(k=d*a.width,l=c*b.height):(k=c*a.height,l=d*b.width):"start"===e?l=b.width:"end"===e?k=a.width:"inner"!==e&&(k=a.width/2,l=b.width/2),this.paddingLeft=Math.max((k-g+f)*this.width/(this.width-g),0),this.paddingRight=Math.max((l-j+f)*this.width/(this.width-j),0)}else{let c=b.height/2,d=a.height/2;"start"===e?(c=0,d=a.height):"end"===e&&(c=b.height,d=0),this.paddingTop=c+f,this.paddingBottom=d+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){O(this.options.afterFit,[this])}isHorizontal(){let{axis:a,position:b}=this.options;return"top"===b||"bottom"===b||"x"===a}isFullSize(){return this.options.fullSize}_convertTicksToLabels(a){let b,c;for(this.beforeTickToLabelConversion(),this.generateTickLabels(a),b=0,c=a.length;b<c;b++)H(a[b].label)&&(a.splice(b,1),c--,b--);this.afterTickToLabelConversion()}_getLabelSizes(){let a=this._labelSizes;if(!a){let b=this.options.ticks.sampleSize,c=this.ticks;b<c.length&&(c=cF(c,b)),this._labelSizes=a=this._computeLabelSizes(c,c.length,this.options.ticks.maxTicksLimit)}return a}_computeLabelSizes(a,b,c){let d,e,f,g,h,i,j,k,l,m,n,{ctx:o,_longestTextCache:p}=this,q=[],r=[],s=Math.floor(b/cE(b,c)),t=0,u=0;for(d=0;d<b;d+=s){if(g=a[d].label,o.font=i=(h=this._resolveTickFontOptions(d)).string,j=p[i]=p[i]||{data:{},gc:[]},k=h.lineHeight,l=m=0,H(g)||I(g)){if(I(g))for(e=0,f=g.length;e<f;++e)H(n=g[e])||I(n)||(l=a$(o,j.data,j.gc,l,n),m+=k)}else l=a$(o,j.data,j.gc,l,g),m=k;q.push(l),r.push(m),t=Math.max(l,t),u=Math.max(m,u)}P(p,a=>{let c,d=a.gc,e=d.length/2;if(e>b){for(c=0;c<e;++c)delete a.data[d[c]];d.splice(0,e)}});let v=q.indexOf(t),w=r.indexOf(u),x=a=>({width:q[a]||0,height:r[a]||0});return{first:x(0),last:x(b-1),widest:x(v),highest:x(w),widths:q,heights:r}}getLabelForValue(a){return a}getPixelForValue(a,b){return NaN}getValueForPixel(a){}getPixelForTick(a){let b=this.ticks;return a<0||a>b.length-1?null:this.getPixelForValue(b[a].value)}getPixelForDecimal(a){this._reversePixels&&(a=1-a);let b=this._startPixel+a*this._length;return av(this._alignToPixels?a_(this.chart,b,0):b,-32768,32767)}getDecimalForPixel(a){let b=(a-this._startPixel)/this._length;return this._reversePixels?1-b:b}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:a,max:b}=this;return a<0&&b<0?b:a>0&&b>0?a:0}getContext(a){var b,c;let d=this.ticks||[];if(a>=0&&a<d.length){let c=d[a];return c.$context||(b=this.getContext(),c.$context=bj(b,{tick:c,index:a,type:"tick"}))}return this.$context||(this.$context=(c=this.chart.getContext(),bj(c,{scale:this,type:"scale"})))}_tickSize(){let a=this.options.ticks,b=ao(this.labelRotation),c=Math.abs(Math.cos(b)),d=Math.abs(Math.sin(b)),e=this._getLabelSizes(),f=a.autoSkipPadding||0,g=e?e.widest.width+f:0,h=e?e.highest.height+f:0;return this.isHorizontal()?h*c>g*d?g/c:h/d:h*d<g*c?h/c:g/d}_isVisible(){let a=this.options.display;return"auto"!==a?!!a:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(a){let b,c,d,e,f,g,h,i,j,k,l,m,n=this.axis,o=this.chart,p=this.options,{grid:q,position:r,border:s}=p,t=q.offset,u=this.isHorizontal(),v=this.ticks.length+ +!!t,w=cG(q),x=[],y=s.setContext(this.getContext()),z=y.display?y.width:0,A=z/2,B=function(a){return a_(o,a,z)};if("top"===r)b=B(this.bottom),g=this.bottom-w,i=b-A,k=B(a.top)+A,m=a.bottom;else if("bottom"===r)b=B(this.top),k=a.top,m=B(a.bottom)-A,g=b+A,i=this.top+w;else if("left"===r)b=B(this.right),f=this.right-w,h=b-A,j=B(a.left)+A,l=a.right;else if("right"===r)b=B(this.left),j=a.left,l=B(a.right)-A,f=b+A,h=this.left+w;else if("x"===n){if("center"===r)b=B((a.top+a.bottom)/2+.5);else if(J(r)){let a=Object.keys(r)[0],c=r[a];b=B(this.chart.scales[a].getPixelForValue(c))}k=a.top,m=a.bottom,i=(g=b+A)+w}else if("y"===n){if("center"===r)b=B((a.left+a.right)/2);else if(J(r)){let a=Object.keys(r)[0],c=r[a];b=B(this.chart.scales[a].getPixelForValue(c))}h=(f=b-A)-w,j=a.left,l=a.right}let C=M(p.ticks.maxTicksLimit,v),D=Math.max(1,Math.ceil(v/C));for(c=0;c<v;c+=D){let a=this.getContext(c),b=q.setContext(a),n=s.setContext(a),p=b.lineWidth,r=b.color,v=n.dash||[],w=n.dashOffset,y=b.tickWidth,z=b.tickColor,A=b.tickBorderDash||[],B=b.tickBorderDashOffset;void 0!==(d=function(a,b,c){let d,e=a.ticks.length,f=Math.min(b,e-1),g=a._startPixel,h=a._endPixel,i=a.getPixelForTick(f);if(!c||(d=1===e?Math.max(i-g,h-i):0===b?(a.getPixelForTick(1)-i)/2:(i-a.getPixelForTick(f-1))/2,!((i+=f<b?d:-d)<g-1e-6)&&!(i>h+1e-6)))return i}(this,c,t))&&(e=a_(o,d,p),u?f=h=j=l=e:g=i=k=m=e,x.push({tx1:f,ty1:g,tx2:h,ty2:i,x1:j,y1:k,x2:l,y2:m,width:p,color:r,borderDash:v,borderDashOffset:w,tickWidth:y,tickColor:z,tickBorderDash:A,tickBorderDashOffset:B}))}return this._ticksLength=v,this._borderValue=b,x}_computeLabelItems(a){let b,c,d,e,f,g,h,i,j,k,l,m=this.axis,n=this.options,{position:o,ticks:p}=n,q=this.isHorizontal(),r=this.ticks,{align:s,crossAlign:t,padding:u,mirror:v}=p,w=cG(n.grid),x=w+u,y=v?-u:x,z=-ao(this.labelRotation),A=[],B="middle";if("top"===o)f=this.bottom-y,g=this._getXAxisLabelAlignment();else if("bottom"===o)f=this.top+y,g=this._getXAxisLabelAlignment();else if("left"===o){let a=this._getYAxisLabelAlignment(w);g=a.textAlign,e=a.x}else if("right"===o){let a=this._getYAxisLabelAlignment(w);g=a.textAlign,e=a.x}else if("x"===m){if("center"===o)f=(a.top+a.bottom)/2+x;else if(J(o)){let a=Object.keys(o)[0],b=o[a];f=this.chart.scales[a].getPixelForValue(b)+x}g=this._getXAxisLabelAlignment()}else if("y"===m){if("center"===o)e=(a.left+a.right)/2-x;else if(J(o)){let a=Object.keys(o)[0],b=o[a];e=this.chart.scales[a].getPixelForValue(b)}g=this._getYAxisLabelAlignment(w).textAlign}"y"===m&&("start"===s?B="top":"end"===s&&(B="bottom"));let C=this._getLabelSizes();for(b=0,c=r.length;b<c;++b){let a;d=r[b].label;let m=p.setContext(this.getContext(b));h=this.getPixelForTick(b)+p.labelOffset,j=(i=this._resolveTickFontOptions(b)).lineHeight;let n=(k=I(d)?d.length:1)/2,s=m.color,u=m.textStrokeColor,w=m.textStrokeWidth,x=g;if(q?(e=h,"inner"===g&&(x=b===c-1?this.options.reverse?"left":"right":0===b?this.options.reverse?"right":"left":"center"),l="top"===o?"near"===t||0!==z?-k*j+j/2:"center"===t?-C.highest.height/2-n*j+j:-C.highest.height+j/2:"near"===t||0!==z?j/2:"center"===t?C.highest.height/2-n*j:C.highest.height-k*j,v&&(l*=-1),0===z||m.showLabelBackdrop||(e+=j/2*Math.sin(z))):(f=h,l=(1-k)*j/2),m.showLabelBackdrop){let d=bg(m.backdropPadding),e=C.heights[b],f=C.widths[b],h=l-d.top,i=0-d.left;switch(B){case"middle":h-=e/2;break;case"bottom":h-=e}switch(g){case"center":i-=f/2;break;case"right":i-=f;break;case"inner":b===c-1?i-=f:b>0&&(i-=f/2)}a={left:i,top:h,width:f+d.width,height:e+d.height,color:m.backdropColor}}A.push({label:d,font:i,textOffset:l,options:{rotation:z,color:s,strokeColor:u,strokeWidth:w,textAlign:x,textBaseline:B,translation:[e,f],backdrop:a}})}return A}_getXAxisLabelAlignment(){let{position:a,ticks:b}=this.options;if(-ao(this.labelRotation))return"top"===a?"left":"right";let c="center";return"start"===b.align?c="left":"end"===b.align?c="right":"inner"===b.align&&(c="inner"),c}_getYAxisLabelAlignment(a){let b,c,{position:d,ticks:{crossAlign:e,mirror:f,padding:g}}=this.options,h=this._getLabelSizes(),i=a+g,j=h.widest.width;return"left"===d?f?(c=this.right+g,"near"===e?b="left":"center"===e?(b="center",c+=j/2):(b="right",c+=j)):(c=this.right-i,"near"===e?b="right":"center"===e?(b="center",c-=j/2):(b="left",c=this.left)):"right"===d?f?(c=this.left+g,"near"===e?b="right":"center"===e?(b="center",c-=j/2):(b="left",c-=j)):(c=this.left+i,"near"===e?b="left":"center"===e?(b="center",c+=j/2):(b="right",c=this.right)):b="right",{textAlign:b,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;let a=this.chart,b=this.options.position;return"left"===b||"right"===b?{top:0,left:this.left,bottom:a.height,right:this.right}:"top"===b||"bottom"===b?{top:this.top,left:0,bottom:this.bottom,right:a.width}:void 0}drawBackground(){let{ctx:a,options:{backgroundColor:b},left:c,top:d,width:e,height:f}=this;b&&(a.save(),a.fillStyle=b,a.fillRect(c,d,e,f),a.restore())}getLineWidthForValue(a){let b=this.options.grid;if(!this._isVisible()||!b.display)return 0;let c=this.ticks.findIndex(b=>b.value===a);return c>=0?b.setContext(this.getContext(c)).lineWidth:0}drawGrid(a){let b,c,d=this.options.grid,e=this.ctx,f=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(a)),g=(a,b,c)=>{c.width&&c.color&&(e.save(),e.lineWidth=c.width,e.strokeStyle=c.color,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset,e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(b.x,b.y),e.stroke(),e.restore())};if(d.display)for(b=0,c=f.length;b<c;++b){let a=f[b];d.drawOnChartArea&&g({x:a.x1,y:a.y1},{x:a.x2,y:a.y2},a),d.drawTicks&&g({x:a.tx1,y:a.ty1},{x:a.tx2,y:a.ty2},{color:a.tickColor,width:a.tickWidth,borderDash:a.tickBorderDash,borderDashOffset:a.tickBorderDashOffset})}}drawBorder(){let a,b,c,d,{chart:e,ctx:f,options:{border:g,grid:h}}=this,i=g.setContext(this.getContext()),j=g.display?i.width:0;if(!j)return;let k=h.setContext(this.getContext(0)).lineWidth,l=this._borderValue;this.isHorizontal()?(a=a_(e,this.left,j)-j/2,b=a_(e,this.right,k)+k/2,c=d=l):(c=a_(e,this.top,j)-j/2,d=a_(e,this.bottom,k)+k/2,a=b=l),f.save(),f.lineWidth=i.width,f.strokeStyle=i.color,f.beginPath(),f.moveTo(a,c),f.lineTo(b,d),f.stroke(),f.restore()}drawLabels(a){if(!this.options.ticks.display)return;let b=this.ctx,c=this._computeLabelArea();for(let d of(c&&a4(b,c),this.getLabelItems(a))){let a=d.options,c=d.font;a8(b,d.label,0,d.textOffset,c,a)}c&&a5(b)}drawTitle(){let a,b,{ctx:c,options:{position:d,title:e,reverse:f}}=this;if(!e.display)return;let g=bh(e.font),h=bg(e.padding),i=e.align,j=g.lineHeight/2;"bottom"===d||"center"===d||J(d)?(j+=h.bottom,I(e.text)&&(j+=g.lineHeight*(e.text.length-1))):j+=h.top;let{titleX:k,titleY:l,maxWidth:m,rotation:n}=function(a,b,c,d){let e,f,g,{top:h,left:i,bottom:j,right:k,chart:l}=a,{chartArea:m,scales:n}=l,o=0,p=j-h,q=k-i;if(a.isHorizontal()){if(f=aF(d,i,k),J(c)){let a=Object.keys(c)[0],d=c[a];g=n[a].getPixelForValue(d)+p-b}else g="center"===c?(m.bottom+m.top)/2+p-b:cD(a,c,b);e=k-i}else{if(J(c)){let a=Object.keys(c)[0],d=c[a];f=n[a].getPixelForValue(d)-q+b}else f="center"===c?(m.left+m.right)/2-q+b:cD(a,c,b);g=aF(d,j,h),o="left"===c?-af:af}return{titleX:f,titleY:g,maxWidth:e,rotation:o}}(this,j,d,i);a8(c,e.text,0,0,g,{color:e.color,maxWidth:m,rotation:n,textAlign:(a=aE(i),(f&&"right"!==d||!f&&"right"===d)&&(a="left"===(b=a)?"right":"right"===b?"left":b),a),textBaseline:"middle",translation:[k,l]})}draw(a){this._isVisible()&&(this.drawBackground(),this.drawGrid(a),this.drawBorder(),this.drawTitle(),this.drawLabels(a))}_layers(){let a=this.options,b=a.ticks&&a.ticks.z||0,c=M(a.grid&&a.grid.z,-1),d=M(a.border&&a.border.z,0);return this._isVisible()&&this.draw===cI.prototype.draw?[{z:c,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:d,draw:()=>{this.drawBorder()}},{z:b,draw:a=>{this.drawLabels(a)}}]:[{z:b,draw:a=>{this.draw(a)}}]}getMatchingVisibleMetas(a){let b,c,d=this.chart.getSortedVisibleDatasetMetas(),e=this.axis+"AxisID",f=[];for(b=0,c=d.length;b<c;++b){let c=d[b];c[e]!==this.id||a&&c.type!==a||f.push(c)}return f}_resolveTickFontOptions(a){return bh(this.options.ticks.setContext(this.getContext(a)).font)}_maxDigits(){let a=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/a}}class cJ{constructor(a,b,c){this.type=a,this.scope=b,this.override=c,this.items=Object.create(null)}isForType(a){return Object.prototype.isPrototypeOf.call(this.type.prototype,a.prototype)}register(a){var b;let c,d=Object.getPrototypeOf(a);"id"in(b=d)&&"defaults"in b&&(c=this.register(d));let e=this.items,f=a.id,g=this.scope+"."+f;if(!f)throw Error("class does not have id: "+a);return f in e||(e[f]=a,function(a,b,c){var d,e;let f=U(Object.create(null),[c?aZ.get(c):{},aZ.get(b),a.defaults]);aZ.set(b,f),a.defaultRoutes&&(d=b,Object.keys(e=a.defaultRoutes).forEach(a=>{let b=a.split("."),c=b.pop(),f=[d].concat(b).join("."),g=e[a].split("."),h=g.pop(),i=g.join(".");aZ.route(f,c,i,h)})),a.descriptors&&aZ.describe(b,a.descriptors)}(a,g,c),this.override&&aZ.override(a.id,a.overrides)),g}get(a){return this.items[a]}unregister(a){let b=this.items,c=a.id,d=this.scope;c in b&&delete b[c],d&&c in aZ[d]&&(delete aZ[d][c],this.override&&delete aV[c])}}var cK=new class{constructor(){this.controllers=new cJ(b6,"datasets",!0),this.elements=new cJ(cB,"elements"),this.plugins=new cJ(Object,"plugins"),this.scales=new cJ(cI,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...a){this._each("register",a)}remove(...a){this._each("unregister",a)}addControllers(...a){this._each("register",a,this.controllers)}addElements(...a){this._each("register",a,this.elements)}addPlugins(...a){this._each("register",a,this.plugins)}addScales(...a){this._each("register",a,this.scales)}getController(a){return this._get(a,this.controllers,"controller")}getElement(a){return this._get(a,this.elements,"element")}getPlugin(a){return this._get(a,this.plugins,"plugin")}getScale(a){return this._get(a,this.scales,"scale")}removeControllers(...a){this._each("unregister",a,this.controllers)}removeElements(...a){this._each("unregister",a,this.elements)}removePlugins(...a){this._each("unregister",a,this.plugins)}removeScales(...a){this._each("unregister",a,this.scales)}_each(a,b,c){[...b].forEach(b=>{let d=c||this._getRegistryForType(b);c||d.isForType(b)||d===this.plugins&&b.id?this._exec(a,d,b):P(b,b=>{let d=c||this._getRegistryForType(b);this._exec(a,d,b)})})}_exec(a,b,c){let d=Z(a);O(c["before"+d],[],c),b[a](c),O(c["after"+d],[],c)}_getRegistryForType(a){for(let b=0;b<this._typedRegistries.length;b++){let c=this._typedRegistries[b];if(c.isForType(a))return c}return this.plugins}_get(a,b,c){let d=b.get(a);if(void 0===d)throw Error('"'+a+'" is not a registered '+c+".");return d}};class cL{constructor(){this._init=[]}notify(a,b,c,d){"beforeInit"===b&&(this._init=this._createDescriptors(a,!0),this._notify(this._init,a,"install"));let e=d?this._descriptors(a).filter(d):this._descriptors(a),f=this._notify(e,a,b,c);return"afterDestroy"===b&&(this._notify(e,a,"stop"),this._notify(this._init,a,"uninstall")),f}_notify(a,b,c,d){for(let e of(d=d||{},a)){let a=e.plugin;if(!1===O(a[c],[b,d,e.options],a)&&d.cancelable)return!1}return!0}invalidate(){H(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(a){if(this._cache)return this._cache;let b=this._cache=this._createDescriptors(a);return this._notifyStateChanges(a),b}_createDescriptors(a,b){let c=a&&a.config,d=M(c.options&&c.options.plugins,{}),e=function(a){let b={},c=[],d=Object.keys(cK.plugins.items);for(let a=0;a<d.length;a++)c.push(cK.getPlugin(d[a]));let e=a.plugins||[];for(let a=0;a<e.length;a++){let d=e[a];-1===c.indexOf(d)&&(c.push(d),b[d.id]=!0)}return{plugins:c,localIds:b}}(c);return!1!==d||b?function(a,{plugins:b,localIds:c},d,e){let f=[],g=a.getContext();for(let i of b){var h;let b=i.id,j=(h=d[b],e||!1!==h?!0===h?{}:h:null);null!==j&&f.push({plugin:i,options:function(a,{plugin:b,local:c},d,e){let f=a.pluginScopeKeys(b),g=a.getOptionScopes(d,f);return c&&b.defaults&&g.push(b.defaults),a.createResolver(g,e,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(a.config,{plugin:i,local:c[b]},j,g)})}return f}(a,e,d,b):[]}_notifyStateChanges(a){let b=this._oldCache||[],c=this._cache,d=(a,b)=>a.filter(a=>!b.some(b=>a.plugin.id===b.plugin.id));this._notify(d(b,c),a,"stop"),this._notify(d(c,b),a,"start")}}function cM(a,b){let c=aZ.datasets[a]||{};return((b.datasets||{})[a]||{}).indexAxis||b.indexAxis||c.indexAxis||"x"}function cN(a){if("x"===a||"y"===a||"r"===a)return a}function cO(a,...b){if(cN(a))return a;for(let d of b){var c;let b=d.axis||("top"===(c=d.position)||"bottom"===c?"x":"left"===c||"right"===c?"y":void 0)||a.length>1&&cN(a[0].toLowerCase());if(b)return b}throw Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function cP(a,b,c){if(c[b+"AxisID"]===a)return{axis:b}}function cQ(a){let b=a.options||(a.options={});b.plugins=M(b.plugins,{}),b.scales=function(a,b){let c=aV[a.type]||{scales:{}},d=b.scales||{},e=cM(a.type,b),f=Object.create(null);return Object.keys(d).forEach(b=>{let g=d[b];if(!J(g))return console.error(`Invalid scale configuration for scale: ${b}`);if(g._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${b}`);let h=cO(b,g,function(a,b){if(b.data&&b.data.datasets){let c=b.data.datasets.filter(b=>b.xAxisID===a||b.yAxisID===a);if(c.length)return cP(a,"x",c[0])||cP(a,"y",c[0])}return{}}(b,a),aZ.scales[g.type]),i=h===e?"_index_":"_value_",j=c.scales||{};f[b]=V(Object.create(null),[{axis:h},g,j[h],j[i]])}),a.data.datasets.forEach(c=>{let e=c.type||a.type,g=c.indexAxis||cM(e,b),h=(aV[e]||{}).scales||{};Object.keys(h).forEach(a=>{let b,e=(b=a,"_index_"===a?b=g:"_value_"===a&&(b="x"===g?"y":"x"),b),i=c[e+"AxisID"]||e;f[i]=f[i]||Object.create(null),V(f[i],[{axis:e},d[i],h[a]])})}),Object.keys(f).forEach(a=>{let b=f[a];V(b,[aZ.scales[b.type],aZ.scale])}),f}(a,b)}function cR(a){return(a=a||{}).datasets=a.datasets||[],a.labels=a.labels||[],a}let cS=new Map,cT=new Set;function cU(a,b){let c=cS.get(a);return c||(c=b(),cS.set(a,c),cT.add(c)),c}let cV=(a,b,c)=>{let d=Y(b,c);void 0!==d&&a.add(d)};class cW{constructor(a){this._config=function(a){return(a=a||{}).data=cR(a.data),cQ(a),a}(a),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(a){this._config.type=a}get data(){return this._config.data}set data(a){this._config.data=cR(a)}get options(){return this._config.options}set options(a){this._config.options=a}get plugins(){return this._config.plugins}update(){let a=this._config;this.clearCache(),cQ(a)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(a){return cU(a,()=>[[`datasets.${a}`,""]])}datasetAnimationScopeKeys(a,b){return cU(`${a}.transition.${b}`,()=>[[`datasets.${a}.transitions.${b}`,`transitions.${b}`],[`datasets.${a}`,""]])}datasetElementScopeKeys(a,b){return cU(`${a}-${b}`,()=>[[`datasets.${a}.elements.${b}`,`datasets.${a}`,`elements.${b}`,""]])}pluginScopeKeys(a){let b=a.id,c=this.type;return cU(`${c}-plugin-${b}`,()=>[[`plugins.${b}`,...a.additionalOptionScopes||[]]])}_cachedScopes(a,b){let c=this._scopeCache,d=c.get(a);return(!d||b)&&(d=new Map,c.set(a,d)),d}getOptionScopes(a,b,c){let{options:d,type:e}=this,f=this._cachedScopes(a,c),g=f.get(b);if(g)return g;let h=new Set;b.forEach(b=>{a&&(h.add(a),b.forEach(b=>cV(h,a,b))),b.forEach(a=>cV(h,d,a)),b.forEach(a=>cV(h,aV[e]||{},a)),b.forEach(a=>cV(h,aZ,a)),b.forEach(a=>cV(h,aW,a))});let i=Array.from(h);return 0===i.length&&i.push(Object.create(null)),cT.has(b)&&f.set(b,i),i}chartOptionScopes(){let{options:a,type:b}=this;return[a,aV[b]||{},aZ.datasets[b]||{},{type:b},aZ,aW]}resolveNamedOptions(a,b,c,d=[""]){let e={$shared:!0},{resolver:f,subPrefixes:g}=cX(this._resolverCache,a,d),h=f;if(function(a,b){let{isScriptable:c,isIndexable:d}=bm(a);for(let e of b){let b=c(e),f=d(e),g=(f||b)&&a[e];if(b&&(_(g)||cY(g))||f&&I(g))return!0}return!1}(f,b)){e.$shared=!1,c=_(c)?c():c;let b=this.createResolver(a,c,g);h=bl(f,c,b)}for(let a of b)e[a]=h[a];return e}createResolver(a,b,c=[""],d){let{resolver:e}=cX(this._resolverCache,a,c);return J(b)?bl(e,b,void 0,d):e}}function cX(a,b,c){let d=a.get(b);d||(d=new Map,a.set(b,d));let e=c.join(),f=d.get(e);return f||(f={resolver:bk(b,c),subPrefixes:c.filter(a=>!a.toLowerCase().includes("hover"))},d.set(e,f)),f}let cY=a=>J(a)&&Object.getOwnPropertyNames(a).some(b=>_(a[b])),cZ=["top","bottom","left","right","chartArea"];function c$(a,b){return"top"===a||"bottom"===a||-1===cZ.indexOf(a)&&"x"===b}function c_(a,b){return function(c,d){return c[a]===d[a]?c[b]-d[b]:c[a]-d[a]}}function c0(a){let b=a.chart,c=b.options.animation;b.notifyPlugins("afterRender"),O(c&&c.onComplete,[a],b)}function c1(a){let b=a.chart,c=b.options.animation;O(c&&c.onProgress,[a],b)}function c2(a){return a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}let c3={},c4=a=>{let b=c2(a);return Object.values(c3).filter(a=>a.canvas===b).pop()};class c5{static defaults=aZ;static instances=c3;static overrides=aV;static registry=cK;static version="4.5.0";static getChart=c4;static register(...a){cK.add(...a),c6()}static unregister(...a){cK.remove(...a),c6()}constructor(a,b){let c=this.config=new cW(b),d=c2(a),e=c4(d);if(e)throw Error("Canvas is already in use. Chart with ID '"+e.id+"' must be destroyed before the canvas with ID '"+e.canvas.id+"' can be reused.");let f=c.createResolver(c.chartOptionScopes(),this.getContext());this.platform=new(c.platform||cA),this.platform.updateConfig(c);let g=this.platform.acquireContext(d,f.aspectRatio),h=g&&g.canvas,i=h&&h.height,j=h&&h.width;if(this.id=G(),this.ctx=g,this.canvas=h,this.width=j,this.height=i,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(a,b){let c;return function(...d){return b?(clearTimeout(c),c=setTimeout(a,b,d)):a.apply(this,d),b}}(a=>this.update(a),f.resizeDelay||0),this._dataChanges=[],c3[this.id]=this,!g||!h)return void console.error("Failed to create chart: can't acquire context from the given item");bT.listen(this,"complete",c0),bT.listen(this,"progress",c1),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:a,maintainAspectRatio:b},width:c,height:d,_aspectRatio:e}=this;return H(a)?b&&e?e:d?c/d:null:a}get data(){return this.config.data}set data(a){this.config.data=a}get options(){return this._options}set options(a){this.config.options=a}get registry(){return cK}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return a0(this.canvas,this.ctx),this}stop(){return bT.stop(this),this}resize(a,b){bT.running(this)?this._resizeBeforeDraw={width:a,height:b}:this._resize(a,b)}_resize(a,b){let c=this.options,d=this.canvas,e=c.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(d,a,b,e),g=c.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,bE(this,g,!0)&&(this.notifyPlugins("resize",{size:f}),O(c.onResize,[this,f],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){P(this.options.scales||{},(a,b)=>{a.id=b})}buildOrUpdateScales(){let a=this.options,b=a.scales,c=this.scales,d=Object.keys(c).reduce((a,b)=>(a[b]=!1,a),{}),e=[];b&&(e=e.concat(Object.keys(b).map(a=>{let c=b[a],d=cO(a,c),e="r"===d,f="x"===d;return{options:c,dposition:e?"chartArea":f?"bottom":"left",dtype:e?"radialLinear":f?"category":"linear"}}))),P(e,b=>{let e=b.options,f=e.id,g=cO(f,e),h=M(e.type,b.dtype);(void 0===e.position||c$(e.position,g)!==c$(b.dposition))&&(e.position=b.dposition),d[f]=!0;let i=null;f in c&&c[f].type===h?i=c[f]:c[(i=new(cK.getScale(h))({id:f,type:h,ctx:this.ctx,chart:this})).id]=i,i.init(e,a)}),P(d,(a,b)=>{a||delete c[b]}),P(c,a=>{cy.configure(this,a,a.options),cy.addBox(this,a)})}_updateMetasets(){let a=this._metasets,b=this.data.datasets.length,c=a.length;if(a.sort((a,b)=>a.index-b.index),c>b){for(let a=b;a<c;++a)this._destroyDatasetMeta(a);a.splice(b,c-b)}this._sortedMetasets=a.slice(0).sort(c_("order","index"))}_removeUnreferencedMetasets(){let{_metasets:a,data:{datasets:b}}=this;a.length>b.length&&delete this._stacks,a.forEach((a,c)=>{0===b.filter(b=>b===a._dataset).length&&this._destroyDatasetMeta(c)})}buildOrUpdateControllers(){let a,b,c=[],d=this.data.datasets;for(this._removeUnreferencedMetasets(),a=0,b=d.length;a<b;a++){let b=d[a],e=this.getDatasetMeta(a),f=b.type||this.config.type;if(e.type&&e.type!==f&&(this._destroyDatasetMeta(a),e=this.getDatasetMeta(a)),e.type=f,e.indexAxis=b.indexAxis||cM(f,this.options),e.order=b.order||0,e.index=a,e.label=""+b.label,e.visible=this.isDatasetVisible(a),e.controller)e.controller.updateIndex(a),e.controller.linkScales();else{let b=cK.getController(f),{datasetElementType:d,dataElementType:g}=aZ.datasets[f];Object.assign(b,{dataElementType:cK.getElement(g),datasetElementType:d&&cK.getElement(d)}),e.controller=new b(this,a),c.push(e.controller)}}return this._updateMetasets(),c}_resetElements(){P(this.data.datasets,(a,b)=>{this.getDatasetMeta(b).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(a){let b=this.config;b.update();let c=this._options=b.createResolver(b.chartOptionScopes(),this.getContext()),d=this._animationsDisabled=!c.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:a,cancelable:!0}))return;let e=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let a=0,b=this.data.datasets.length;a<b;a++){let{controller:b}=this.getDatasetMeta(a),c=!d&&-1===e.indexOf(b);b.buildOrUpdateElements(c),f=Math.max(+b.getMaxOverflow(),f)}f=this._minPadding=c.layout.autoPadding?f:0,this._updateLayout(f),d||P(e,a=>{a.reset()}),this._updateDatasets(a),this.notifyPlugins("afterUpdate",{mode:a}),this._layers.sort(c_("z","_idx"));let{_active:g,_lastEvent:h}=this;h?this._eventHandler(h,!0):g.length&&this._updateHoverStyles(g,g,!0),this.render()}_updateScales(){P(this.scales,a=>{cy.removeBox(this,a)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let a=this.options;aa(new Set(Object.keys(this._listeners)),new Set(a.events))&&!!this._responsiveListeners===a.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:a}=this;for(let{method:c,start:d,count:e}of this._getUniformDataChanges()||[]){var b="_removeElements"===c?-e:e;for(let c of Object.keys(a)){let e=+c;if(e>=d){let f=a[c];delete a[c],(b>0||e>d)&&(a[e+b]=f)}}}}_getUniformDataChanges(){let a=this._dataChanges;if(!a||!a.length)return;this._dataChanges=[];let b=this.data.datasets.length,c=b=>new Set(a.filter(a=>a[0]===b).map((a,b)=>b+","+a.splice(1).join(","))),d=c(0);for(let a=1;a<b;a++)if(!aa(d,c(a)))return;return Array.from(d).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(a){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;cy.update(this,this.width,this.height,a);let b=this.chartArea,c=b.width<=0||b.height<=0;this._layers=[],P(this.boxes,a=>{c&&"chartArea"===a.position||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,b)=>{a._idx=b}),this.notifyPlugins("afterLayout")}_updateDatasets(a){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:a,cancelable:!0})){for(let a=0,b=this.data.datasets.length;a<b;++a)this.getDatasetMeta(a).controller.configure();for(let b=0,c=this.data.datasets.length;b<c;++b)this._updateDataset(b,_(a)?a({datasetIndex:b}):a);this.notifyPlugins("afterDatasetsUpdate",{mode:a})}}_updateDataset(a,b){let c=this.getDatasetMeta(a),d={meta:c,index:a,mode:b,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",d)&&(c.controller._update(b),d.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",d))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bT.has(this)?this.attached&&!bT.running(this)&&bT.start(this):(this.draw(),c0({chart:this})))}draw(){let a;if(this._resizeBeforeDraw){let{width:a,height:b}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,b)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let b=this._layers;for(a=0;a<b.length&&b[a].z<=0;++a)b[a].draw(this.chartArea);for(this._drawDatasets();a<b.length;++a)b[a].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(a){let b,c,d=this._sortedMetasets,e=[];for(b=0,c=d.length;b<c;++b){let c=d[b];(!a||c.visible)&&e.push(c)}return e}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let a=this.getSortedVisibleDatasetMetas();for(let b=a.length-1;b>=0;--b)this._drawDataset(a[b]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(a){let b=this.ctx,c={meta:a,index:a.index,cancelable:!0},d=bS(this,a);!1!==this.notifyPlugins("beforeDatasetDraw",c)&&(d&&a4(b,d),a.controller.draw(),d&&a5(b),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(a){return a3(a,this.chartArea,this._minPadding)}getElementsAtEventForMode(a,b,c,d){let e=co.modes[b];return"function"==typeof e?e(this,a,c,d):[]}getDatasetMeta(a){let b=this.data.datasets[a],c=this._metasets,d=c.filter(a=>a&&a._dataset===b).pop();return d||(d={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:b&&b.order||0,index:a,_dataset:b,_parsed:[],_sorted:!1},c.push(d)),d}getContext(){return this.$context||(this.$context=bj(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(a){let b=this.data.datasets[a];if(!b)return!1;let c=this.getDatasetMeta(a);return"boolean"==typeof c.hidden?!c.hidden:!b.hidden}setDatasetVisibility(a,b){this.getDatasetMeta(a).hidden=!b}toggleDataVisibility(a){this._hiddenIndices[a]=!this._hiddenIndices[a]}getDataVisibility(a){return!this._hiddenIndices[a]}_updateVisibility(a,b,c){let d=c?"show":"hide",e=this.getDatasetMeta(a),f=e.controller._resolveAnimations(void 0,d);$(b)?(e.data[b].hidden=!c,this.update()):(this.setDatasetVisibility(a,c),f.update(e,{visible:c}),this.update(b=>b.datasetIndex===a?d:void 0))}hide(a,b){this._updateVisibility(a,b,!1)}show(a,b){this._updateVisibility(a,b,!0)}_destroyDatasetMeta(a){let b=this._metasets[a];b&&b.controller&&b.controller._destroy(),delete this._metasets[a]}_stop(){let a,b;for(this.stop(),bT.remove(this),a=0,b=this.data.datasets.length;a<b;++a)this._destroyDatasetMeta(a)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:a,ctx:b}=this;this._stop(),this.config.clearCache(),a&&(this.unbindEvents(),a0(a,b),this.platform.releaseContext(b),this.canvas=null,this.ctx=null),delete c3[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...a){return this.canvas.toDataURL(...a)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let a=this._listeners,b=this.platform,c=(c,d)=>{b.addEventListener(this,c,d),a[c]=d},d=(a,b,c)=>{a.offsetX=b,a.offsetY=c,this._eventHandler(a)};P(this.options.events,a=>c(a,d))}bindResponsiveEvents(){let a;this._responsiveListeners||(this._responsiveListeners={});let b=this._responsiveListeners,c=this.platform,d=(a,d)=>{c.addEventListener(this,a,d),b[a]=d},e=(a,d)=>{b[a]&&(c.removeEventListener(this,a,d),delete b[a])},f=(a,b)=>{this.canvas&&this.resize(a,b)},g=()=>{e("attach",g),this.attached=!0,this.resize(),d("resize",f),d("detach",a)};a=()=>{this.attached=!1,e("resize",f),this._stop(),this._resize(0,0),d("attach",g)},c.isAttached(this.canvas)?g():a()}unbindEvents(){P(this._listeners,(a,b)=>{this.platform.removeEventListener(this,b,a)}),this._listeners={},P(this._responsiveListeners,(a,b)=>{this.platform.removeEventListener(this,b,a)}),this._responsiveListeners=void 0}updateHoverStyle(a,b,c){let d,e,f,g=c?"set":"remove";for("dataset"===b&&this.getDatasetMeta(a[0].datasetIndex).controller["_"+g+"DatasetHoverStyle"](),e=0,f=a.length;e<f;++e){let b=(d=a[e])&&this.getDatasetMeta(d.datasetIndex).controller;b&&b[g+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(a){let b=this._active||[],c=a.map(({datasetIndex:a,index:b})=>{let c=this.getDatasetMeta(a);if(!c)throw Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[b],index:b}});Q(c,b)||(this._active=c,this._lastEvent=null,this._updateHoverStyles(c,b))}notifyPlugins(a,b,c){return this._plugins.notify(this,a,b,c)}isPluginEnabled(a){return 1===this._plugins._cache.filter(b=>b.plugin.id===a).length}_updateHoverStyles(a,b,c){let d=this.options.hover,e=(a,b)=>a.filter(a=>!b.some(b=>a.datasetIndex===b.datasetIndex&&a.index===b.index)),f=e(b,a),g=c?a:e(a,b);f.length&&this.updateHoverStyle(f,d.mode,!1),g.length&&d.mode&&this.updateHoverStyle(g,d.mode,!0)}_eventHandler(a,b){let c={event:a,replay:b,cancelable:!0,inChartArea:this.isPointInArea(a)},d=b=>(b.options.events||this.options.events).includes(a.native.type);if(!1===this.notifyPlugins("beforeEvent",c,d))return;let e=this._handleEvent(a,b,c.inChartArea);return c.cancelable=!1,this.notifyPlugins("afterEvent",c,d),(e||c.changed)&&this.render(),this}_handleEvent(a,b,c){var d;let{_active:e=[],options:f}=this,g=this._getActiveElements(a,e,c,b),h="mouseup"===a.type||"click"===a.type||"contextmenu"===a.type,i=(d=this._lastEvent,c&&"mouseout"!==a.type?h?d:a:null);c&&(this._lastEvent=null,O(f.onHover,[a,g,this],this),h&&O(f.onClick,[a,g,this],this));let j=!Q(g,e);return(j||b)&&(this._active=g,this._updateHoverStyles(g,e,b)),this._lastEvent=i,j}_getActiveElements(a,b,c,d){if("mouseout"===a.type)return[];if(!c)return b;let e=this.options.hover;return this.getElementsAtEventForMode(a,e.mode,e,d)}}function c6(){return P(c5.instances,a=>a._plugins.invalidate())}function c7(a,b,c,d){return{x:c+a*Math.cos(b),y:d+a*Math.sin(b)}}function c8(a,b,c,d,e,f){let{x:g,y:h,startAngle:i,pixelMargin:j,innerRadius:k}=b,l=Math.max(b.outerRadius+d+c-j,0),m=k>0?k+d+c+j:0,n=0,o=e-i;if(d){let a=l>0?l-d:0,b=((k>0?k-d:0)+a)/2;n=(o-(0!==b?o*b/(b+d):o))/2}let p=Math.max(.001,o*l-c/ab)/l,q=(o-p)/2,r=i+q+n,s=e-q-n,{outerStart:t,outerEnd:u,innerStart:v,innerEnd:w}=function(a,b,c,d){let e=bd(a.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),f=(c-b)/2,g=Math.min(f,d*b/2),h=a=>{let b=(c-Math.min(f,a))*d/2;return av(a,0,Math.min(f,b))};return{outerStart:h(e.outerStart),outerEnd:h(e.outerEnd),innerStart:av(e.innerStart,0,g),innerEnd:av(e.innerEnd,0,g)}}(b,m,l,s-r),x=l-t,y=l-u,z=r+t/x,A=s-u/y,B=m+v,C=m+w,D=r+v/B,E=s-w/C;if(a.beginPath(),f){let b=(z+A)/2;if(a.arc(g,h,l,z,b),a.arc(g,h,l,b,A),u>0){let b=c7(y,A,g,h);a.arc(b.x,b.y,u,A,s+af)}let c=c7(C,s,g,h);if(a.lineTo(c.x,c.y),w>0){let b=c7(C,E,g,h);a.arc(b.x,b.y,w,s+af,E+Math.PI)}let d=(s-w/m+(r+v/m))/2;if(a.arc(g,h,m,s-w/m,d,!0),a.arc(g,h,m,d,r+v/m,!0),v>0){let b=c7(B,D,g,h);a.arc(b.x,b.y,v,D+Math.PI,r-af)}let e=c7(x,r,g,h);if(a.lineTo(e.x,e.y),t>0){let b=c7(x,z,g,h);a.arc(b.x,b.y,t,r-af,z)}}else{a.moveTo(g,h);let b=Math.cos(z)*l+g,c=Math.sin(z)*l+h;a.lineTo(b,c);let d=Math.cos(A)*l+g,e=Math.sin(A)*l+h;a.lineTo(d,e)}a.closePath()}function c9(a,b,c=b){a.lineCap=M(c.borderCapStyle,b.borderCapStyle),a.setLineDash(M(c.borderDash,b.borderDash)),a.lineDashOffset=M(c.borderDashOffset,b.borderDashOffset),a.lineJoin=M(c.borderJoinStyle,b.borderJoinStyle),a.lineWidth=M(c.borderWidth,b.borderWidth),a.strokeStyle=M(c.borderColor,b.borderColor)}function da(a,b,c){a.lineTo(c.x,c.y)}function db(a,b,c={}){let d=a.length,{start:e=0,end:f=d-1}=c,{start:g,end:h}=b,i=Math.max(e,g),j=Math.min(f,h);return{count:d,start:i,loop:b.loop,ilen:j<i&&!(e<g&&f<g||e>h&&f>h)?d+j-i:j-i}}function dc(a,b,c,d){let e,f,g,{points:h,options:i}=b,{count:j,start:k,loop:l,ilen:m}=db(h,c,d),n=i.stepped?a6:i.tension||"monotone"===i.cubicInterpolationMode?a7:da,{move:o=!0,reverse:p}=d||{};for(e=0;e<=m;++e)(f=h[(k+(p?m-e:e))%j]).skip||(o?(a.moveTo(f.x,f.y),o=!1):n(a,g,f,p,i.stepped),g=f);return l&&n(a,g,f=h[(k+(p?m:0))%j],p,i.stepped),!!l}function dd(a,b,c,d){let e,f,g,h,i,j,k=b.points,{count:l,start:m,ilen:n}=db(k,c,d),{move:o=!0,reverse:p}=d||{},q=0,r=0,s=a=>(m+(p?n-a:a))%l,t=()=>{h!==i&&(a.lineTo(q,i),a.lineTo(q,h),a.lineTo(q,j))};for(o&&(f=k[s(0)],a.moveTo(f.x,f.y)),e=0;e<=n;++e){if((f=k[s(e)]).skip)continue;let b=f.x,c=f.y,d=0|b;d===g?(c<h?h=c:c>i&&(i=c),q=(r*q+b)/++r):(t(),a.lineTo(b,c),g=d,r=0,h=i=c),j=c}t()}function de(a){let b=a.options,c=b.borderDash&&b.borderDash.length;return a._decimated||a._loop||b.tension||"monotone"===b.cubicInterpolationMode||b.stepped||c?dc:dd}let df="function"==typeof Path2D;class dg extends cB{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:a=>"borderDash"!==a&&"fill"!==a};constructor(a){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,a&&Object.assign(this,a)}updateControlPoints(a,b){let c=this.options;if((c.tension||"monotone"===c.cubicInterpolationMode)&&!c.stepped&&!this._pointsUpdated){let d=c.spanGaps?this._loop:this._fullLoop;!function(a,b,c,d,e){let f,g,h,i;if(b.spanGaps&&(a=a.filter(a=>!a.skip)),"monotone"===b.cubicInterpolationMode)!function(a,b="x"){let c,d,e,f=by(b),g=a.length,h=Array(g).fill(0),i=Array(g),j=bx(a,0);for(c=0;c<g;++c)if(d=e,e=j,j=bx(a,c+1),e){if(j){let a=j[b]-e[b];h[c]=0!==a?(j[f]-e[f])/a:0}i[c]=d?j?aj(h[c-1])!==aj(h[c])?0:(h[c-1]+h[c])/2:h[c-1]:h[c]}!function(a,b,c){let d,e,f,g,h,i=a.length,j=bx(a,0);for(let k=0;k<i-1;++k)if(h=j,j=bx(a,k+1),h&&j){if(ak(b[k],0,bw)){c[k]=c[k+1]=0;continue}(g=Math.pow(d=c[k]/b[k],2)+Math.pow(e=c[k+1]/b[k],2))<=9||(f=3/Math.sqrt(g),c[k]=d*f*b[k],c[k+1]=e*f*b[k])}}(a,h,i),function(a,b,c="x"){let d,e,f,g=by(c),h=a.length,i=bx(a,0);for(let j=0;j<h;++j){if(e=f,f=i,i=bx(a,j+1),!f)continue;let h=f[c],k=f[g];e&&(d=(h-e[c])/3,f[`cp1${c}`]=h-d,f[`cp1${g}`]=k-d*b[j]),i&&(d=(i[c]-h)/3,f[`cp2${c}`]=h+d,f[`cp2${g}`]=k+d*b[j])}}(a,i,b)}(a,e);else{let c=d?a[a.length-1]:a[0];for(f=0,g=a.length;f<g;++f)i=function(a,b,c,d){let e=a.skip?b:a,f=c.skip?b:c,g=ar(b,e),h=ar(f,b),i=g/(g+h),j=h/(g+h);i=isNaN(i)?0:i,j=isNaN(j)?0:j;let k=d*i,l=d*j;return{previous:{x:b.x-k*(f.x-e.x),y:b.y-k*(f.y-e.y)},next:{x:b.x+l*(f.x-e.x),y:b.y+l*(f.y-e.y)}}}(c,h=a[f],a[Math.min(f+1,g-!d)%g],b.tension),h.cp1x=i.previous.x,h.cp1y=i.previous.y,h.cp2x=i.next.x,h.cp2y=i.next.y,c=h}b.capBezierPoints&&function(a,b){let c,d,e,f,g,h=a3(a[0],b);for(c=0,d=a.length;c<d;++c)g=f,f=h,h=c<d-1&&a3(a[c+1],b),f&&(e=a[c],g&&(e.cp1x=bz(e.cp1x,b.left,b.right),e.cp1y=bz(e.cp1y,b.top,b.bottom)),h&&(e.cp2x=bz(e.cp2x,b.left,b.right),e.cp2y=bz(e.cp2y,b.top,b.bottom)))}(a,c)}(this._points,c,a,d,b),this._pointsUpdated=!0}}set points(a){this._points=a,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(a,b){let c=a.points,d=a.options.spanGaps,e=c.length;if(!e)return[];let f=!!a._loop,{start:g,end:h}=function(a,b,c,d){let e=0,f=b-1;if(c&&!d)for(;e<b&&!a[e].skip;)e++;for(;e<b&&a[e].skip;)e++;for(e%=b,c&&(f+=e);f>e&&a[f%b].skip;)f--;return{start:e,end:f%=b}}(c,e,f,d);if(!0===d)return bP(a,[{start:g,end:h,loop:f}],c,b);let i=h<g?h+e:h,j=!!a._fullLoop&&0===g&&h===e-1;return bP(a,function(a,b,c,d){let e,f=a.length,g=[],h=b,i=a[b];for(e=b+1;e<=c;++e){let c=a[e%f];c.skip||c.stop?i.skip||(d=!1,g.push({start:b%f,end:(e-1)%f,loop:d}),b=h=c.stop?e:null):(h=e,i.skip&&(b=e)),i=c}return null!==h&&g.push({start:b%f,end:h%f,loop:d}),g}(c,g,i,j),c,b)}(this,this.options.segment))}first(){let a=this.segments,b=this.points;return a.length&&b[a[0].start]}last(){let a=this.segments,b=this.points,c=a.length;return c&&b[a[c-1].end]}interpolate(a,b){let c,d,e=this.options,f=a[b],g=this.points,h=bO(this,{property:b,start:f,end:f});if(!h.length)return;let i=[],j=e.stepped?bG:e.tension||"monotone"===e.cubicInterpolationMode?bH:bF;for(c=0,d=h.length;c<d;++c){let{start:d,end:k}=h[c],l=g[d],m=g[k];if(l===m){i.push(l);continue}let n=Math.abs((f-l[b])/(m[b]-l[b])),o=j(l,m,n,e.stepped);o[b]=a[b],i.push(o)}return 1===i.length?i[0]:i}pathSegment(a,b,c){return de(this)(a,this,b,c)}path(a,b,c){let d=this.segments,e=de(this),f=this._loop;for(let g of(b=b||0,c=c||this.points.length-b,d))f&=e(a,this,g,{start:b,end:b+c-1});return!!f}draw(a,b,c,d){let e=this.options||{};(this.points||[]).length&&e.borderWidth&&(a.save(),function(a,b,c,d){if(df&&!b.options.segment){let e;(e=b._path)||(e=b._path=new Path2D,b.path(e,c,d)&&e.closePath()),c9(a,b.options),a.stroke(e)}else{let{segments:e,options:f}=b,g=de(b);for(let h of e)c9(a,f,h.style),a.beginPath(),g(a,b,h,{start:c,end:c+d-1})&&a.closePath(),a.stroke()}}(a,this,c,d),a.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function dh(a,b,c,d){let e=a.options,{[c]:f}=a.getProps([c],d);return Math.abs(b-f)<e.radius+e.hitRadius}class di extends cB{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(a){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,a&&Object.assign(this,a)}inRange(a,b,c){let d=this.options,{x:e,y:f}=this.getProps(["x","y"],c);return Math.pow(a-e,2)+Math.pow(b-f,2)<Math.pow(d.hitRadius+d.radius,2)}inXRange(a,b){return dh(this,a,"x",b)}inYRange(a,b){return dh(this,a,"y",b)}getCenterPoint(a){let{x:b,y:c}=this.getProps(["x","y"],a);return{x:b,y:c}}size(a){let b=(a=a||this.options||{}).radius||0,c=(b=Math.max(b,b&&a.hoverRadius||0))&&a.borderWidth||0;return(b+c)*2}draw(a,b){let c=this.options;!this.skip&&!(c.radius<.1)&&a3(this,b,this.size(c)/2)&&(a.strokeStyle=c.borderColor,a.lineWidth=c.borderWidth,a.fillStyle=c.backgroundColor,a1(a,c,this.x,this.y))}getRange(){let a=this.options||{};return a.radius+a.hitRadius}}function dj(a,b){let c,d,e,f,g,{x:h,y:i,base:j,width:k,height:l}=a.getProps(["x","y","base","width","height"],b);return a.horizontal?(g=l/2,c=Math.min(h,j),d=Math.max(h,j),e=i-g,f=i+g):(c=h-(g=k/2),d=h+g,e=Math.min(i,j),f=Math.max(i,j)),{left:c,top:e,right:d,bottom:f}}function dk(a,b,c,d){return a?0:av(b,c,d)}function dl(a,b,c,d){let e=null===b,f=null===c,g=a&&!(e&&f)&&dj(a,d);return g&&(e||aw(b,g.left,g.right))&&(f||aw(c,g.top,g.bottom))}function dm(a,b){a.rect(b.x,b.y,b.w,b.h)}function dn(a,b,c={}){let d=a.x!==c.x?-b:0,e=a.y!==c.y?-b:0,f=(a.x+a.w!==c.x+c.w?b:0)-d,g=(a.y+a.h!==c.y+c.h?b:0)-e;return{x:a.x+d,y:a.y+e,w:a.w+f,h:a.h+g,radius:a.radius}}class dp extends cB{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(a){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,a&&Object.assign(this,a)}draw(a){var b;let{inflateAmount:c,options:{borderColor:d,backgroundColor:e}}=this,{inner:f,outer:g}=function(a){let b=dj(a),c=b.right-b.left,d=b.bottom-b.top,e=function(a,b,c){let d=a.options.borderWidth,e=a.borderSkipped,f=be(d);return{t:dk(e.top,f.top,0,c),r:dk(e.right,f.right,0,b),b:dk(e.bottom,f.bottom,0,c),l:dk(e.left,f.left,0,b)}}(a,c/2,d/2),f=function(a,b,c){let{enableBorderRadius:d}=a.getProps(["enableBorderRadius"]),e=a.options.borderRadius,f=bf(e),g=Math.min(b,c),h=a.borderSkipped,i=d||J(e);return{topLeft:dk(!i||h.top||h.left,f.topLeft,0,g),topRight:dk(!i||h.top||h.right,f.topRight,0,g),bottomLeft:dk(!i||h.bottom||h.left,f.bottomLeft,0,g),bottomRight:dk(!i||h.bottom||h.right,f.bottomRight,0,g)}}(a,c/2,d/2);return{outer:{x:b.left,y:b.top,w:c,h:d,radius:f},inner:{x:b.left+e.l,y:b.top+e.t,w:c-e.l-e.r,h:d-e.t-e.b,radius:{topLeft:Math.max(0,f.topLeft-Math.max(e.t,e.l)),topRight:Math.max(0,f.topRight-Math.max(e.t,e.r)),bottomLeft:Math.max(0,f.bottomLeft-Math.max(e.b,e.l)),bottomRight:Math.max(0,f.bottomRight-Math.max(e.b,e.r))}}}}(this),h=(b=g.radius).topLeft||b.topRight||b.bottomLeft||b.bottomRight?a9:dm;a.save(),(g.w!==f.w||g.h!==f.h)&&(a.beginPath(),h(a,dn(g,c,f)),a.clip(),h(a,dn(f,-c,g)),a.fillStyle=d,a.fill("evenodd")),a.beginPath(),h(a,dn(f,c)),a.fillStyle=e,a.fill(),a.restore()}inRange(a,b,c){return dl(this,a,b,c)}inXRange(a,b){return dl(this,a,null,b)}inYRange(a,b){return dl(this,null,a,b)}getCenterPoint(a){let{x:b,y:c,base:d,horizontal:e}=this.getProps(["x","y","base","horizontal"],a);return{x:e?(b+d)/2:b,y:e?c:(c+d)/2}}getRange(a){return"x"===a?this.width/2:this.height/2}}let dq=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],dr=dq.map(a=>a.replace("rgb(","rgba(").replace(")",", 0.5)"));function ds(a,b,c,d){if(d)return;let e=b[a],f=c[a];return"angle"===a&&(e=at(e),f=at(f)),{property:a,start:e,end:f}}function dt(a,b,c){for(;b>a;b--){let a=c[b];if(!isNaN(a.x)&&!isNaN(a.y))break}return b}function du(a,b,c,d){return a&&b?d(a[c],b[c]):a?a[c]:b?b[c]:0}function dv(a,b){let c=[],d=!1;return I(a)?(d=!0,c=a):c=function(a,b){let{x:c=null,y:d=null}=a||{},e=b.points,f=[];return b.segments.forEach(({start:a,end:b})=>{b=dt(a,b,e);let g=e[a],h=e[b];null!==d?(f.push({x:g.x,y:d}),f.push({x:h.x,y:d})):null!==c&&(f.push({x:c,y:g.y}),f.push({x:c,y:h.y}))}),f}(a,b),c.length?new dg({points:c,options:{tension:0},_loop:d,_fullLoop:d}):null}function dw(a){return a&&!1!==a.fill}class dx{constructor(a){this.x=a.x,this.y=a.y,this.radius=a.radius}pathSegment(a,b,c){let{x:d,y:e,radius:f}=this;return b=b||{start:0,end:ac},a.arc(d,e,f,b.end,b.start,!0),!c.bounds}interpolate(a){let{x:b,y:c,radius:d}=this,e=a.angle;return{x:b+Math.cos(e)*d,y:c+Math.sin(e)*d,angle:e}}}function dy(a,b,c){let d=function(a){let{chart:b,fill:c,line:d}=a;if(K(c)){var e,f=b,g=c;let a=f.getDatasetMeta(g);return a&&f.isDatasetVisible(g)?a.dataset:null}if("stack"===c)return function(a){let{scale:b,index:c,line:d}=a,e=[],f=d.segments,g=d.points,h=function(a,b){let c=[],d=a.getMatchingVisibleMetas("line");for(let a=0;a<d.length;a++){let e=d[a];if(e.index===b)break;e.hidden||c.unshift(e.dataset)}return c}(b,c);h.push(dv({x:null,y:b.bottom},d));for(let a=0;a<f.length;a++){let b=f[a];for(let a=b.start;a<=b.end;a++)!function(a,b,c){let d=[];for(let e=0;e<c.length;e++){let{first:f,last:g,point:h}=function(a,b,c){let d=a.interpolate(b,"x");if(!d)return{};let e=d[c],f=a.segments,g=a.points,h=!1,i=!1;for(let a=0;a<f.length;a++){let b=f[a],d=g[b.start][c],j=g[b.end][c];if(aw(e,d,j)){h=e===d,i=e===j;break}}return{first:h,last:i,point:d}}(c[e],b,"x");if(h&&(!f||!g)){if(f)d.unshift(h);else if(a.push(h),!g)break}}a.push(...d)}(e,g[a],h)}return new dg({points:e,options:{}})}(a);if("shape"===c)return!0;let h=((e=a).scale||{}).getPointPositionForValue?function(a){let{scale:b,fill:c}=a,d=b.options,e=b.getLabels().length,f=d.reverse?b.max:b.min,g="start"===c?f:"end"===c?b.options.reverse?b.min:b.max:J(c)?c.value:b.getBaseValue(),h=[];if(d.grid.circular){let a=b.getPointPositionForValue(0,f);return new dx({x:a.x,y:a.y,radius:b.getDistanceFromCenterForValue(g)})}for(let a=0;a<e;++a)h.push(b.getPointPositionForValue(a,g));return h}(e):function(a){let b,{scale:c={},fill:d}=a,e=(b=null,"start"===d?b=c.bottom:"end"===d?b=c.top:J(d)?b=c.getPixelForValue(d.value):c.getBasePixel&&(b=c.getBasePixel()),b);if(K(e)){let a=c.isHorizontal();return{x:a?e:null,y:a?null:e}}return null}(e);return h instanceof dx?h:dv(h,d)}(b),{chart:e,index:f,line:g,scale:h,axis:i}=b,j=g.options,k=j.fill,l=j.backgroundColor,{above:m=l,below:n=l}=k||{},o=e.getDatasetMeta(f),p=bS(e,o);d&&g.points.length&&(a4(a,c),function(a,b){let{line:c,target:d,above:e,below:f,area:g,scale:h,clip:i}=b,j=c._loop?"angle":b.axis;a.save();let k=f;f!==e&&("x"===j?(dz(a,d,g.top),dB(a,{line:c,target:d,color:e,scale:h,property:j,clip:i}),a.restore(),a.save(),dz(a,d,g.bottom)):"y"===j&&(dA(a,d,g.left),dB(a,{line:c,target:d,color:f,scale:h,property:j,clip:i}),a.restore(),a.save(),dA(a,d,g.right),k=e)),dB(a,{line:c,target:d,color:k,scale:h,property:j,clip:i}),a.restore()}(a,{line:g,target:d,above:m,below:n,area:c,scale:h,axis:i,clip:p}),a5(a))}function dz(a,b,c){let{segments:d,points:e}=b,f=!0,g=!1;for(let h of(a.beginPath(),d)){let{start:d,end:i}=h,j=e[d],k=e[dt(d,i,e)];f?(a.moveTo(j.x,j.y),f=!1):(a.lineTo(j.x,c),a.lineTo(j.x,j.y)),(g=!!b.pathSegment(a,h,{move:g}))?a.closePath():a.lineTo(k.x,c)}a.lineTo(b.first().x,c),a.closePath(),a.clip()}function dA(a,b,c){let{segments:d,points:e}=b,f=!0,g=!1;for(let h of(a.beginPath(),d)){let{start:d,end:i}=h,j=e[d],k=e[dt(d,i,e)];f?(a.moveTo(j.x,j.y),f=!1):(a.lineTo(c,j.y),a.lineTo(j.x,j.y)),(g=!!b.pathSegment(a,h,{move:g}))?a.closePath():a.lineTo(c,k.y)}a.lineTo(c,b.first().y),a.closePath(),a.clip()}function dB(a,b){let{line:c,target:d,property:e,color:f,scale:g,clip:h}=b;for(let{source:b,target:i,start:j,end:k}of function(a,b,c){let d=a.segments,e=a.points,f=b.points,g=[];for(let a of d){let{start:d,end:h}=a;h=dt(d,h,e);let i=ds(c,e[d],e[h],a.loop);if(!b.segments){g.push({source:a,target:i,start:e[d],end:e[h]});continue}for(let d of bO(b,i)){let b=ds(c,f[d.start],f[d.end],d.loop);for(let f of bN(a,e,b))g.push({source:f,target:d,start:{[c]:du(i,b,"start",Math.max)},end:{[c]:du(i,b,"end",Math.min)}})}}return g}(c,d,e)){let l,{style:{backgroundColor:m=f}={}}=b,n=!0!==d;a.save(),a.fillStyle=m,function(a,b,c,d){let e=b.chart.chartArea,{property:f,start:g,end:h}=d||{};if("x"===f||"y"===f){let b,d,i,j;"x"===f?(b=g,d=e.top,i=h,j=e.bottom):(b=e.left,d=g,i=e.right,j=h),a.beginPath(),c&&(b=Math.max(b,c.left),i=Math.min(i,c.right),d=Math.max(d,c.top),j=Math.min(j,c.bottom)),a.rect(b,d,i-b,j-d),a.clip()}}(a,g,h,n&&ds(e,j,k)),a.beginPath();let o=!!c.pathSegment(a,b);if(n){o?a.closePath():dC(a,d,k,e);let b=!!d.pathSegment(a,i,{move:o,reverse:!0});(l=o&&b)||dC(a,d,j,e)}a.closePath(),a.fill(l?"evenodd":"nonzero"),a.restore()}}function dC(a,b,c,d){let e=b.interpolate(c,d);e&&a.lineTo(e.x,e.y)}let dD=(a,b)=>{let{boxHeight:c=b,boxWidth:d=b}=a;return a.usePointStyle&&(c=Math.min(c,b),d=a.pointStyleWidth||Math.min(d,b)),{boxWidth:d,boxHeight:c,itemHeight:Math.max(b,c)}};class dE extends cB{constructor(a){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=a.chart,this.options=a.options,this.ctx=a.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(a,b,c){this.maxWidth=a,this.maxHeight=b,this._margins=c,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let a=this.options.labels||{},b=O(a.generateLabels,[this.chart],this)||[];a.filter&&(b=b.filter(b=>a.filter(b,this.chart.data))),a.sort&&(b=b.sort((b,c)=>a.sort(b,c,this.chart.data))),this.options.reverse&&b.reverse(),this.legendItems=b}fit(){let a,b,{options:c,ctx:d}=this;if(!c.display){this.width=this.height=0;return}let e=c.labels,f=bh(e.font),g=f.size,h=this._computeTitleHeight(),{boxWidth:i,itemHeight:j}=dD(e,g);d.font=f.string,this.isHorizontal()?(a=this.maxWidth,b=this._fitRows(h,g,i,j)+10):(b=this.maxHeight,a=this._fitCols(h,f,i,j)+10),this.width=Math.min(a,c.maxWidth||this.maxWidth),this.height=Math.min(b,c.maxHeight||this.maxHeight)}_fitRows(a,b,c,d){let{ctx:e,maxWidth:f,options:{labels:{padding:g}}}=this,h=this.legendHitBoxes=[],i=this.lineWidths=[0],j=d+g,k=a;e.textAlign="left",e.textBaseline="middle";let l=-1,m=-j;return this.legendItems.forEach((a,n)=>{let o=c+b/2+e.measureText(a.text).width;(0===n||i[i.length-1]+o+2*g>f)&&(k+=j,i[i.length-(n>0?0:1)]=0,m+=j,l++),h[n]={left:0,top:m,row:l,width:o,height:d},i[i.length-1]+=o+g}),k}_fitCols(a,b,c,d){let{ctx:e,maxHeight:f,options:{labels:{padding:g}}}=this,h=this.legendHitBoxes=[],i=this.columnSizes=[],j=f-a,k=g,l=0,m=0,n=0,o=0;return this.legendItems.forEach((a,f)=>{var p,q,r,s,t,u,v,w,x,y,z,A;let B,C,{itemWidth:D,itemHeight:E}=(p=c,q=b,r=e,s=a,t=d,{itemWidth:(u=s,v=p,w=q,x=r,(B=u.text)&&"string"!=typeof B&&(B=B.reduce((a,b)=>a.length>b.length?a:b)),v+w.size/2+x.measureText(B).width),itemHeight:(y=t,z=s,A=q.lineHeight,C=y,"string"!=typeof z.text&&(C=dF(z,A)),C)});f>0&&m+E+2*g>j&&(k+=l+g,i.push({width:l,height:m}),n+=l+g,o++,l=m=0),h[f]={left:n,top:m,col:o,width:D,height:E},l=Math.max(l,D),m+=E+g}),k+=l,i.push({width:l,height:m}),k}adjustHitBoxes(){if(!this.options.display)return;let a=this._computeTitleHeight(),{legendHitBoxes:b,options:{align:c,labels:{padding:d},rtl:e}}=this,f=bI(e,this.left,this.width);if(this.isHorizontal()){let e=0,g=aF(c,this.left+d,this.right-this.lineWidths[e]);for(let h of b)e!==h.row&&(e=h.row,g=aF(c,this.left+d,this.right-this.lineWidths[e])),h.top+=this.top+a+d,h.left=f.leftForLtr(f.x(g),h.width),g+=h.width+d}else{let e=0,g=aF(c,this.top+a+d,this.bottom-this.columnSizes[e].height);for(let h of b)h.col!==e&&(e=h.col,g=aF(c,this.top+a+d,this.bottom-this.columnSizes[e].height)),h.top=g,h.left+=this.left+d,h.left=f.leftForLtr(f.x(h.left),h.width),g+=h.height+d}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let a=this.ctx;a4(a,this),this._draw(),a5(a)}}_draw(){let a,{options:b,columnSizes:c,lineWidths:d,ctx:e}=this,{align:f,labels:g}=b,h=aZ.color,i=bI(b.rtl,this.left,this.width),j=bh(g.font),{padding:k}=g,l=j.size,m=l/2;this.drawTitle(),e.textAlign=i.textAlign("left"),e.textBaseline="middle",e.lineWidth=.5,e.font=j.string;let{boxWidth:n,boxHeight:o,itemHeight:p}=dD(g,l),q=function(a,b,c){if(isNaN(n)||n<=0||isNaN(o)||o<0)return;e.save();let d=M(c.lineWidth,1);if(e.fillStyle=M(c.fillStyle,h),e.lineCap=M(c.lineCap,"butt"),e.lineDashOffset=M(c.lineDashOffset,0),e.lineJoin=M(c.lineJoin,"miter"),e.lineWidth=d,e.strokeStyle=M(c.strokeStyle,h),e.setLineDash(M(c.lineDash,[])),g.usePointStyle){let f={radius:o*Math.SQRT2/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:d};a2(e,f,i.xPlus(a,n/2),b+m,g.pointStyleWidth&&n)}else{let f=b+Math.max((l-o)/2,0),g=i.leftForLtr(a,n),h=bf(c.borderRadius);e.beginPath(),Object.values(h).some(a=>0!==a)?a9(e,{x:g,y:f,w:n,h:o,radius:h}):e.rect(g,f,n,o),e.fill(),0!==d&&e.stroke()}e.restore()},r=function(a,b,c){a8(e,c.text,a,b+p/2,j,{strikethrough:c.hidden,textAlign:i.textAlign(c.textAlign)})},s=this.isHorizontal(),t=this._computeTitleHeight();a=s?{x:aF(f,this.left+k,this.right-d[0]),y:this.top+k+t,line:0}:{x:this.left+k,y:aF(f,this.top+t+k,this.bottom-c[0].height),line:0},bJ(this.ctx,b.textDirection);let u=p+k;this.legendItems.forEach((h,l)=>{var o,p;e.strokeStyle=h.fontColor,e.fillStyle=h.fontColor;let v=e.measureText(h.text).width,w=i.textAlign(h.textAlign||(h.textAlign=g.textAlign)),x=n+m+v,y=a.x,z=a.y;if(i.setWidth(this.width),s?l>0&&y+x+k>this.right&&(z=a.y+=u,a.line++,y=a.x=aF(f,this.left+k,this.right-d[a.line])):l>0&&z+u>this.bottom&&(y=a.x=y+c[a.line].width+k,a.line++,z=a.y=aF(f,this.top+t+k,this.bottom-c[a.line].height)),q(i.x(y),z,h),o=y+n+m,p=s?y+x:this.right,y=w===(b.rtl?"left":"right")?p:"center"===w?(o+p)/2:o,r(i.x(y),z,h),s)a.x+=x+k;else if("string"!=typeof h.text){let b=j.lineHeight;a.y+=dF(h,b)+k}else a.y+=u}),bK(this.ctx,b.textDirection)}drawTitle(){let a,b=this.options,c=b.title,d=bh(c.font),e=bg(c.padding);if(!c.display)return;let f=bI(b.rtl,this.left,this.width),g=this.ctx,h=c.position,i=d.size/2,j=e.top+i,k=this.left,l=this.width;if(this.isHorizontal())l=Math.max(...this.lineWidths),a=this.top+j,k=aF(b.align,k,this.right-l);else{let c=this.columnSizes.reduce((a,b)=>Math.max(a,b.height),0);a=j+aF(b.align,this.top,this.bottom-c-b.labels.padding-this._computeTitleHeight())}let m=aF(h,k,k+l);g.textAlign=f.textAlign(aE(h)),g.textBaseline="middle",g.strokeStyle=c.color,g.fillStyle=c.color,g.font=d.string,a8(g,c.text,m,a,d)}_computeTitleHeight(){let a=this.options.title,b=bh(a.font),c=bg(a.padding);return a.display?b.lineHeight+c.height:0}_getLegendItemAt(a,b){let c,d,e;if(aw(a,this.left,this.right)&&aw(b,this.top,this.bottom)){for(c=0,e=this.legendHitBoxes;c<e.length;++c)if(aw(a,(d=e[c]).left,d.left+d.width)&&aw(b,d.top,d.top+d.height))return this.legendItems[c]}return null}handleEvent(a){var b,c;let d=this.options;if(b=a.type,c=d,("mousemove"!==b&&"mouseout"!==b||!c.onHover&&!c.onLeave)&&(!c.onClick||"click"!==b&&"mouseup"!==b))return;let e=this._getLegendItemAt(a.x,a.y);if("mousemove"===a.type||"mouseout"===a.type){let b=this._hoveredItem,c=null!==b&&null!==e&&b.datasetIndex===e.datasetIndex&&b.index===e.index;b&&!c&&O(d.onLeave,[a,b,this],this),this._hoveredItem=e,e&&!c&&O(d.onHover,[a,e,this],this)}else e&&O(d.onClick,[a,e,this],this)}}function dF(a,b){return b*(a.text?a.text.length:0)}var dG={id:"legend",_element:dE,start(a,b,c){let d=a.legend=new dE({ctx:a.ctx,options:c,chart:a});cy.configure(a,d,c),cy.addBox(a,d)},stop(a){cy.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,b,c){let d=a.legend;cy.configure(a,d,c),d.options=c},afterUpdate(a){let b=a.legend;b.buildLabels(),b.adjustHitBoxes()},afterEvent(a,b){b.replay||a.legend.handleEvent(b.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,b,c){let d=b.datasetIndex,e=c.chart;e.isDatasetVisible(d)?(e.hide(d),b.hidden=!0):(e.show(d),b.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){let b=a.data.datasets,{labels:{usePointStyle:c,pointStyle:d,textAlign:e,color:f,useBorderRadius:g,borderRadius:h}}=a.legend.options;return a._getSortedDatasetMetas().map(a=>{let i=a.controller.getStyle(c?0:void 0),j=bg(i.borderWidth);return{text:b[a.index].label,fillStyle:i.backgroundColor,fontColor:f,hidden:!a.visible,lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:(j.width+j.height)/4,strokeStyle:i.borderColor,pointStyle:d||i.pointStyle,rotation:i.rotation,textAlign:e||i.textAlign,borderRadius:g&&(h||i.borderRadius),datasetIndex:a.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};class dH extends cB{constructor(a){super(),this.chart=a.chart,this.options=a.options,this.ctx=a.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(a,b){let c=this.options;if(this.left=0,this.top=0,!c.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=a,this.height=this.bottom=b;let d=I(c.text)?c.text.length:1;this._padding=bg(c.padding);let e=d*bh(c.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=e:this.width=e}isHorizontal(){let a=this.options.position;return"top"===a||"bottom"===a}_drawArgs(a){let b,c,d,{top:e,left:f,bottom:g,right:h,options:i}=this,j=i.align,k=0;return this.isHorizontal()?(c=aF(j,f,h),d=e+a,b=h-f):("left"===i.position?(c=f+a,d=aF(j,g,e),k=-.5*ab):(c=h-a,d=aF(j,e,g),k=.5*ab),b=g-e),{titleX:c,titleY:d,maxWidth:b,rotation:k}}draw(){let a=this.ctx,b=this.options;if(!b.display)return;let c=bh(b.font),d=c.lineHeight/2+this._padding.top,{titleX:e,titleY:f,maxWidth:g,rotation:h}=this._drawArgs(d);a8(a,b.text,0,0,c,{color:b.color,maxWidth:g,rotation:h,textAlign:aE(b.align),textBaseline:"middle",translation:[e,f]})}}var dI={id:"title",_element:dH,start(a,b,c){let d=new dH({ctx:a.ctx,options:c,chart:a});cy.configure(a,d,c),cy.addBox(a,d),a.titleBlock=d},stop(a){let b=a.titleBlock;cy.removeBox(a,b),delete a.titleBlock},beforeUpdate(a,b,c){let d=a.titleBlock;cy.configure(a,d,c),d.options=c},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;let dJ={average(a){let b,c;if(!a.length)return!1;let d=new Set,e=0,f=0;for(b=0,c=a.length;b<c;++b){let c=a[b].element;if(c&&c.hasValue()){let a=c.tooltipPosition();d.add(a.x),e+=a.y,++f}}return 0!==f&&0!==d.size&&{x:[...d].reduce((a,b)=>a+b)/d.size,y:e/f}},nearest(a,b){let c,d,e;if(!a.length)return!1;let f=b.x,g=b.y,h=1/0;for(c=0,d=a.length;c<d;++c){let d=a[c].element;if(d&&d.hasValue()){let a=ar(b,d.getCenterPoint());a<h&&(h=a,e=d)}}if(e){let a=e.tooltipPosition();f=a.x,g=a.y}return{x:f,y:g}}};function dK(a,b){return b&&(I(b)?Array.prototype.push.apply(a,b):a.push(b)),a}function dL(a){return("string"==typeof a||a instanceof String)&&a.indexOf("\n")>-1?a.split("\n"):a}function dM(a,b){let c=a.chart.ctx,{body:d,footer:e,title:f}=a,{boxWidth:g,boxHeight:h}=b,i=bh(b.bodyFont),j=bh(b.titleFont),k=bh(b.footerFont),l=f.length,m=e.length,n=d.length,o=bg(b.padding),p=o.height,q=0,r=d.reduce((a,b)=>a+b.before.length+b.lines.length+b.after.length,0);r+=a.beforeBody.length+a.afterBody.length,l&&(p+=l*j.lineHeight+(l-1)*b.titleSpacing+b.titleMarginBottom),r&&(p+=n*(b.displayColors?Math.max(h,i.lineHeight):i.lineHeight)+(r-n)*i.lineHeight+(r-1)*b.bodySpacing),m&&(p+=b.footerMarginTop+m*k.lineHeight+(m-1)*b.footerSpacing);let s=0,t=function(a){q=Math.max(q,c.measureText(a).width+s)};return c.save(),c.font=j.string,P(a.title,t),c.font=i.string,P(a.beforeBody.concat(a.afterBody),t),s=b.displayColors?g+2+b.boxPadding:0,P(d,a=>{P(a.before,t),P(a.lines,t),P(a.after,t)}),s=0,c.font=k.string,P(a.footer,t),c.restore(),{width:q+=o.width,height:p}}function dN(a,b,c){let d=c.yAlign||b.yAlign||function(a,b){let{y:c,height:d}=b;return c<d/2?"top":c>a.height-d/2?"bottom":"center"}(a,c);return{xAlign:c.xAlign||b.xAlign||function(a,b,c,d){let{x:e,width:f}=c,{width:g,chartArea:{left:h,right:i}}=a,j="center";return"center"===d?j=e<=(h+i)/2?"left":"right":e<=f/2?j="left":e>=g-f/2&&(j="right"),function(a,b,c,d){let{x:e,width:f}=d,g=c.caretSize+c.caretPadding;if("left"===a&&e+f+g>b.width||"right"===a&&e-f-g<0)return!0}(j,a,b,c)&&(j="center"),j}(a,b,c,d),yAlign:d}}function dO(a,b,c,d){let{caretSize:e,caretPadding:f,cornerRadius:g}=a,{xAlign:h,yAlign:i}=c,j=e+f,{topLeft:k,topRight:l,bottomLeft:m,bottomRight:n}=bf(g),o=function(a,b){let{x:c,width:d}=a;return"right"===b?c-=d:"center"===b&&(c-=d/2),c}(b,h),p=function(a,b,c){let{y:d,height:e}=a;return"top"===b?d+=c:"bottom"===b?d-=e+c:d-=e/2,d}(b,i,j);return"center"===i?"left"===h?o+=j:"right"===h&&(o-=j):"left"===h?o-=Math.max(k,m)+e:"right"===h&&(o+=Math.max(l,n)+e),{x:av(o,0,d.width-b.width),y:av(p,0,d.height-b.height)}}function dP(a,b,c){let d=bg(c.padding);return"center"===b?a.x+a.width/2:"right"===b?a.x+a.width-d.right:a.x+d.left}function dQ(a,b){let c=b&&b.dataset&&b.dataset.tooltip&&b.dataset.tooltip.callbacks;return c?a.override(c):a}let dR={beforeTitle:F,title(a){if(a.length>0){let b=a[0],c=b.chart.data.labels,d=c?c.length:0;if(this&&this.options&&"dataset"===this.options.mode)return b.dataset.label||"";if(b.label)return b.label;if(d>0&&b.dataIndex<d)return c[b.dataIndex]}return""},afterTitle:F,beforeBody:F,beforeLabel:F,label(a){if(this&&this.options&&"dataset"===this.options.mode)return a.label+": "+a.formattedValue||a.formattedValue;let b=a.dataset.label||"";b&&(b+=": ");let c=a.formattedValue;return H(c)||(b+=c),b},labelColor(a){let b=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:b.borderColor,backgroundColor:b.backgroundColor,borderWidth:b.borderWidth,borderDash:b.borderDash,borderDashOffset:b.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){let b=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:b.pointStyle,rotation:b.rotation}},afterLabel:F,afterBody:F,beforeFooter:F,footer:F,afterFooter:F};function dS(a,b,c,d){let e=a[b].call(c,d);return void 0===e?dR[b].call(c,d):e}class dT extends cB{static positioners=dJ;constructor(a){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=a.chart,this.options=a.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(a){this.options=a,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let a=this._cachedAnimations;if(a)return a;let b=this.chart,c=this.options.setContext(this.getContext()),d=c.enabled&&b.options.animation&&c.animations,e=new bX(this.chart,d);return d._cacheable&&(this._cachedAnimations=Object.freeze(e)),e}getContext(){var a;return this.$context||(this.$context=(a=this.chart.getContext(),bj(a,{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(a,b){let{callbacks:c}=b,d=dS(c,"beforeTitle",this,a),e=dS(c,"title",this,a),f=dS(c,"afterTitle",this,a),g=[];return g=dK(g,dL(d)),g=dK(g,dL(e)),g=dK(g,dL(f))}getBeforeBody(a,b){return dK([],dL(dS(b.callbacks,"beforeBody",this,a)))}getBody(a,b){let{callbacks:c}=b,d=[];return P(a,a=>{let b={before:[],lines:[],after:[]},e=dQ(c,a);dK(b.before,dL(dS(e,"beforeLabel",this,a))),dK(b.lines,dS(e,"label",this,a)),dK(b.after,dL(dS(e,"afterLabel",this,a))),d.push(b)}),d}getAfterBody(a,b){return dK([],dL(dS(b.callbacks,"afterBody",this,a)))}getFooter(a,b){let{callbacks:c}=b,d=dS(c,"beforeFooter",this,a),e=dS(c,"footer",this,a),f=dS(c,"afterFooter",this,a),g=[];return g=dK(g,dL(d)),g=dK(g,dL(e)),g=dK(g,dL(f))}_createItems(a){let b,c,d=this._active,e=this.chart.data,f=[],g=[],h=[],i=[];for(b=0,c=d.length;b<c;++b)i.push(function(a,b){let{element:c,datasetIndex:d,index:e}=b,f=a.getDatasetMeta(d).controller,{label:g,value:h}=f.getLabelAndValue(e);return{chart:a,label:g,parsed:f.getParsed(e),raw:a.data.datasets[d].data[e],formattedValue:h,dataset:f.getDataset(),dataIndex:e,datasetIndex:d,element:c}}(this.chart,d[b]));return a.filter&&(i=i.filter((b,c,d)=>a.filter(b,c,d,e))),a.itemSort&&(i=i.sort((b,c)=>a.itemSort(b,c,e))),P(i,b=>{let c=dQ(a.callbacks,b);f.push(dS(c,"labelColor",this,b)),g.push(dS(c,"labelPointStyle",this,b)),h.push(dS(c,"labelTextColor",this,b))}),this.labelColors=f,this.labelPointStyles=g,this.labelTextColors=h,this.dataPoints=i,i}update(a,b){let c,d=this.options.setContext(this.getContext()),e=this._active,f=[];if(e.length){let a=dJ[d.position].call(this,e,this._eventPosition);f=this._createItems(d),this.title=this.getTitle(f,d),this.beforeBody=this.getBeforeBody(f,d),this.body=this.getBody(f,d),this.afterBody=this.getAfterBody(f,d),this.footer=this.getFooter(f,d);let b=this._size=dM(this,d),g=Object.assign({},a,b),h=dN(this.chart,d,g),i=dO(d,g,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,c={opacity:1,x:i.x,y:i.y,width:b.width,height:b.height,caretX:a.x,caretY:a.y}}else 0!==this.opacity&&(c={opacity:0});this._tooltipItems=f,this.$context=void 0,c&&this._resolveAnimations().update(this,c),a&&d.external&&d.external.call(this,{chart:this.chart,tooltip:this,replay:b})}drawCaret(a,b,c,d){let e=this.getCaretPosition(a,c,d);b.lineTo(e.x1,e.y1),b.lineTo(e.x2,e.y2),b.lineTo(e.x3,e.y3)}getCaretPosition(a,b,c){let d,e,f,g,h,i,{xAlign:j,yAlign:k}=this,{caretSize:l,cornerRadius:m}=c,{topLeft:n,topRight:o,bottomLeft:p,bottomRight:q}=bf(m),{x:r,y:s}=a,{width:t,height:u}=b;return"center"===k?(h=s+u/2,"left"===j?(e=(d=r)-l,g=h+l,i=h-l):(e=(d=r+t)+l,g=h-l,i=h+l),f=d):(e="left"===j?r+Math.max(n,p)+l:"right"===j?r+t-Math.max(o,q)-l:this.caretX,"top"===k?(h=(g=s)-l,d=e-l,f=e+l):(h=(g=s+u)+l,d=e+l,f=e-l),i=g),{x1:d,x2:e,x3:f,y1:g,y2:h,y3:i}}drawTitle(a,b,c){let d,e,f,g=this.title,h=g.length;if(h){let i=bI(c.rtl,this.x,this.width);for(f=0,a.x=dP(this,c.titleAlign,c),b.textAlign=i.textAlign(c.titleAlign),b.textBaseline="middle",d=bh(c.titleFont),e=c.titleSpacing,b.fillStyle=c.titleColor,b.font=d.string;f<h;++f)b.fillText(g[f],i.x(a.x),a.y+d.lineHeight/2),a.y+=d.lineHeight+e,f+1===h&&(a.y+=c.titleMarginBottom-e)}}_drawColorBox(a,b,c,d,e){let f=this.labelColors[c],g=this.labelPointStyles[c],{boxHeight:h,boxWidth:i}=e,j=bh(e.bodyFont),k=dP(this,"left",e),l=d.x(k),m=h<j.lineHeight?(j.lineHeight-h)/2:0,n=b.y+m;if(e.usePointStyle){let b={radius:Math.min(i,h)/2,pointStyle:g.pointStyle,rotation:g.rotation,borderWidth:1},c=d.leftForLtr(l,i)+i/2,j=n+h/2;a.strokeStyle=e.multiKeyBackground,a.fillStyle=e.multiKeyBackground,a1(a,b,c,j),a.strokeStyle=f.borderColor,a.fillStyle=f.backgroundColor,a1(a,b,c,j)}else{a.lineWidth=J(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,a.strokeStyle=f.borderColor,a.setLineDash(f.borderDash||[]),a.lineDashOffset=f.borderDashOffset||0;let b=d.leftForLtr(l,i),c=d.leftForLtr(d.xPlus(l,1),i-2),g=bf(f.borderRadius);Object.values(g).some(a=>0!==a)?(a.beginPath(),a.fillStyle=e.multiKeyBackground,a9(a,{x:b,y:n,w:i,h:h,radius:g}),a.fill(),a.stroke(),a.fillStyle=f.backgroundColor,a.beginPath(),a9(a,{x:c,y:n+1,w:i-2,h:h-2,radius:g}),a.fill()):(a.fillStyle=e.multiKeyBackground,a.fillRect(b,n,i,h),a.strokeRect(b,n,i,h),a.fillStyle=f.backgroundColor,a.fillRect(c,n+1,i-2,h-2))}a.fillStyle=this.labelTextColors[c]}drawBody(a,b,c){let d,e,f,g,h,i,{body:j}=this,{bodySpacing:k,bodyAlign:l,displayColors:m,boxHeight:n,boxWidth:o,boxPadding:p}=c,q=bh(c.bodyFont),r=q.lineHeight,s=0,t=bI(c.rtl,this.x,this.width),u=function(c){b.fillText(c,t.x(a.x+s),a.y+r/2),a.y+=r+k},v=t.textAlign(l);for(b.textAlign=l,b.textBaseline="middle",b.font=q.string,a.x=dP(this,v,c),b.fillStyle=c.bodyColor,P(this.beforeBody,u),s=m&&"right"!==v?"center"===l?o/2+p:o+2+p:0,f=0,h=j.length;f<h;++f){for(d=j[f],b.fillStyle=this.labelTextColors[f],P(d.before,u),e=d.lines,m&&e.length&&(this._drawColorBox(b,a,f,t,c),r=Math.max(q.lineHeight,n)),g=0,i=e.length;g<i;++g)u(e[g]),r=q.lineHeight;P(d.after,u)}s=0,r=q.lineHeight,P(this.afterBody,u),a.y-=k}drawFooter(a,b,c){let d,e,f=this.footer,g=f.length;if(g){let h=bI(c.rtl,this.x,this.width);for(a.x=dP(this,c.footerAlign,c),a.y+=c.footerMarginTop,b.textAlign=h.textAlign(c.footerAlign),b.textBaseline="middle",d=bh(c.footerFont),b.fillStyle=c.footerColor,b.font=d.string,e=0;e<g;++e)b.fillText(f[e],h.x(a.x),a.y+d.lineHeight/2),a.y+=d.lineHeight+c.footerSpacing}}drawBackground(a,b,c,d){let{xAlign:e,yAlign:f}=this,{x:g,y:h}=a,{width:i,height:j}=c,{topLeft:k,topRight:l,bottomLeft:m,bottomRight:n}=bf(d.cornerRadius);b.fillStyle=d.backgroundColor,b.strokeStyle=d.borderColor,b.lineWidth=d.borderWidth,b.beginPath(),b.moveTo(g+k,h),"top"===f&&this.drawCaret(a,b,c,d),b.lineTo(g+i-l,h),b.quadraticCurveTo(g+i,h,g+i,h+l),"center"===f&&"right"===e&&this.drawCaret(a,b,c,d),b.lineTo(g+i,h+j-n),b.quadraticCurveTo(g+i,h+j,g+i-n,h+j),"bottom"===f&&this.drawCaret(a,b,c,d),b.lineTo(g+m,h+j),b.quadraticCurveTo(g,h+j,g,h+j-m),"center"===f&&"left"===e&&this.drawCaret(a,b,c,d),b.lineTo(g,h+k),b.quadraticCurveTo(g,h,g+k,h),b.closePath(),b.fill(),d.borderWidth>0&&b.stroke()}_updateAnimationTarget(a){let b=this.chart,c=this.$animations,d=c&&c.x,e=c&&c.y;if(d||e){let c=dJ[a.position].call(this,this._active,this._eventPosition);if(!c)return;let f=this._size=dM(this,a),g=Object.assign({},c,this._size),h=dN(b,a,g),i=dO(a,g,h,b);(d._to!==i.x||e._to!==i.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=f.width,this.height=f.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,i))}}_willRender(){return!!this.opacity}draw(a){let b=this.options.setContext(this.getContext()),c=this.opacity;if(!c)return;this._updateAnimationTarget(b);let d={width:this.width,height:this.height},e={x:this.x,y:this.y};c=.001>Math.abs(c)?0:c;let f=bg(b.padding),g=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;b.enabled&&g&&(a.save(),a.globalAlpha=c,this.drawBackground(e,a,d,b),bJ(a,b.textDirection),e.y+=f.top,this.drawTitle(e,a,b),this.drawBody(e,a,b),this.drawFooter(e,a,b),bK(a,b.textDirection),a.restore())}getActiveElements(){return this._active||[]}setActiveElements(a,b){let c=this._active,d=a.map(({datasetIndex:a,index:b})=>{let c=this.chart.getDatasetMeta(a);if(!c)throw Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[b],index:b}}),e=!Q(c,d),f=this._positionChanged(d,b);(e||f)&&(this._active=d,this._eventPosition=b,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(a,b,c=!0){if(b&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let d=this.options,e=this._active||[],f=this._getActiveElements(a,e,b,c),g=this._positionChanged(f,a),h=b||!Q(f,e)||g;return h&&(this._active=f,(d.enabled||d.external)&&(this._eventPosition={x:a.x,y:a.y},this.update(!0,b))),h}_getActiveElements(a,b,c,d){let e=this.options;if("mouseout"===a.type)return[];if(!d)return b.filter(a=>this.chart.data.datasets[a.datasetIndex]&&void 0!==this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index));let f=this.chart.getElementsAtEventForMode(a,e.mode,e,c);return e.reverse&&f.reverse(),f}_positionChanged(a,b){let{caretX:c,caretY:d,options:e}=this,f=dJ[e.position].call(this,a,b);return!1!==f&&(c!==f.x||d!==f.y)}}var dU={id:"tooltip",_element:dT,positioners:dJ,afterInit(a,b,c){c&&(a.tooltip=new dT({chart:a,options:c}))},beforeUpdate(a,b,c){a.tooltip&&a.tooltip.initialize(c)},reset(a,b,c){a.tooltip&&a.tooltip.initialize(c)},afterDraw(a){let b=a.tooltip;if(b&&b._willRender()){let c={tooltip:b};if(!1===a.notifyPlugins("beforeTooltipDraw",{...c,cancelable:!0}))return;b.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",c)}},afterEvent(a,b){if(a.tooltip){let c=b.replay;a.tooltip.handleEvent(b.event,c,b.inChartArea)&&(b.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,b)=>b.bodyFont.size,boxWidth:(a,b)=>b.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>"filter"!==a&&"itemSort"!==a&&"external"!==a,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function dV(a){let b=this.getLabels();return a>=0&&a<b.length?b[a]:a}class dW extends cI{static id="category";static defaults={ticks:{callback:dV}};constructor(a){super(a),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(a){let b=this._addedLabels;if(b.length){let a=this.getLabels();for(let{index:c,label:d}of b)a[c]===d&&a.splice(c,1);this._addedLabels=[]}super.init(a)}parse(a,b){let c,d;if(H(a))return null;let e=this.getLabels();return c=b=isFinite(b)&&e[b]===a?b:function(a,b,c,d){let e=a.indexOf(b);if(-1===e){var f;return f=c,"string"==typeof b?(f=a.push(b)-1,d.unshift({index:f,label:b})):isNaN(b)&&(f=null),f}return e!==a.lastIndexOf(b)?c:e}(e,a,M(b,a),this._addedLabels),d=e.length-1,null===c?null:av(Math.round(c),0,d)}determineDataLimits(){let{minDefined:a,maxDefined:b}=this.getUserBounds(),{min:c,max:d}=this.getMinMax(!0);"ticks"===this.options.bounds&&(a||(c=0),b||(d=this.getLabels().length-1)),this.min=c,this.max=d}buildTicks(){let a=this.min,b=this.max,c=this.options.offset,d=[],e=this.getLabels();e=0===a&&b===e.length-1?e:e.slice(a,b+1),this._valueRange=Math.max(e.length-!c,1),this._startValue=this.min-.5*!!c;for(let c=a;c<=b;c++)d.push({value:c});return d}getLabelForValue(a){return dV.call(this,a)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(a){return"number"!=typeof a&&(a=this.parse(a)),null===a?NaN:this.getPixelForDecimal((a-this._startValue)/this._valueRange)}getPixelForTick(a){let b=this.ticks;return a<0||a>b.length-1?null:this.getPixelForValue(b[a].value)}getValueForPixel(a){return Math.round(this._startValue+this.getDecimalForPixel(a)*this._valueRange)}getBasePixel(){return this.bottom}}function dX(a,b,{horizontal:c,minRotation:d}){let e=ao(d),f=(c?Math.sin(e):Math.cos(e))||.001,g=.75*b*(""+a).length;return Math.min(b/f,g)}class dY extends cI{constructor(a){super(a),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(a,b){return H(a)||("number"==typeof a||a instanceof Number)&&!isFinite(+a)?null:+a}handleTickRangeOptions(){let{beginAtZero:a}=this.options,{minDefined:b,maxDefined:c}=this.getUserBounds(),{min:d,max:e}=this,f=a=>d=b?d:a,g=a=>e=c?e:a;if(a){let a=aj(d),b=aj(e);a<0&&b<0?g(0):a>0&&b>0&&f(0)}if(d===e){let b=0===e?1:Math.abs(.05*e);g(e+b),a||f(d-b)}this.min=d,this.max=e}getTickLimit(){let a,{maxTicksLimit:b,stepSize:c}=this.options.ticks;return c?(a=Math.ceil(this.max/c)-Math.floor(this.min/c)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${c} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3):(a=this.computeTickLimit(),b=b||11),b&&(a=Math.min(b,a)),a}computeTickLimit(){return 1/0}buildTicks(){let a=this.options,b=a.ticks,c=this.getTickLimit(),d=function(a,b){let c,d,e,f,g=[],{bounds:h,step:i,min:j,max:k,precision:l,count:m,maxTicks:n,maxDigits:o,includeBounds:p}=a,q=i||1,r=n-1,{min:s,max:t}=b,u=!H(j),v=!H(k),w=!H(m),x=(t-s)/(o+1),y=al((t-s)/r/q)*q;if(y<1e-14&&!u&&!v)return[{value:s},{value:t}];(f=Math.ceil(t/y)-Math.floor(s/y))>r&&(y=al(f*y/r/q)*q),H(l)||(y=Math.ceil(y*(c=Math.pow(10,l)))/c),"ticks"===h?(d=Math.floor(s/y)*y,e=Math.ceil(t/y)*y):(d=s,e=t),u&&v&&i&&function(a,b){let c=Math.round(a);return c-b<=a&&c+b>=a}((k-j)/i,y/1e3)?(f=Math.round(Math.min((k-j)/y,n)),y=(k-j)/f,d=j,e=k):w?(d=u?j:d,y=((e=v?k:e)-d)/(f=m-1)):f=ak(f=(e-d)/y,Math.round(f),y/1e3)?Math.round(f):Math.ceil(f);let z=Math.max(ap(y),ap(d));d=Math.round(d*(c=Math.pow(10,H(l)?z:l)))/c,e=Math.round(e*c)/c;let A=0;for(u&&(p&&d!==j?(g.push({value:j}),d<j&&A++,ak(Math.round((d+A*y)*c)/c,j,dX(j,x,a))&&A++):d<j&&A++);A<f;++A){let a=Math.round((d+A*y)*c)/c;if(v&&a>k)break;g.push({value:a})}return v&&p&&e!==k?g.length&&ak(g[g.length-1].value,k,dX(k,x,a))?g[g.length-1].value=k:g.push({value:k}):v&&e!==k||g.push({value:e}),g}({maxTicks:c=Math.max(2,c),bounds:a.bounds,min:a.min,max:a.max,precision:b.precision,step:b.stepSize,count:b.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:b.minRotation||0,includeBounds:!1!==b.includeBounds},this._range||this);return"ticks"===a.bounds&&an(d,this,"value"),a.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){let a=this.ticks,b=this.min,c=this.max;if(super.configure(),this.options.offset&&a.length){let d=(c-b)/Math.max(a.length-1,1)/2;b-=d,c+=d}this._startValue=b,this._endValue=c,this._valueRange=c-b}getLabelForValue(a){return aS(a,this.chart.options.locale,this.options.ticks.format)}}class dZ extends dY{static id="linear";static defaults={ticks:{callback:aU.formatters.numeric}};determineDataLimits(){let{min:a,max:b}=this.getMinMax(!0);this.min=K(a)?a:0,this.max=K(b)?b:1,this.handleTickRangeOptions()}computeTickLimit(){let a=this.isHorizontal(),b=a?this.width:this.height,c=ao(this.options.ticks.minRotation),d=(a?Math.sin(c):Math.cos(c))||.001;return Math.ceil(b/Math.min(40,this._resolveTickFontOptions(0).lineHeight/d))}getPixelForValue(a){return null===a?NaN:this.getPixelForDecimal((a-this._startValue)/this._valueRange)}getValueForPixel(a){return this._startValue+this.getDecimalForPixel(a)*this._valueRange}}let d$=a=>Math.floor(ai(a)),d_=(a,b)=>Math.pow(10,d$(a)+b);function d0(a){return 1==a/Math.pow(10,d$(a))}function d1(a,b,c){let d=Math.pow(10,c),e=Math.floor(a/d);return Math.ceil(b/d)-e}class d2 extends cI{static id="logarithmic";static defaults={ticks:{callback:aU.formatters.logarithmic,major:{enabled:!0}}};constructor(a){super(a),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(a,b){let c=dY.prototype.parse.apply(this,[a,b]);if(0===c){this._zero=!0;return}return K(c)&&c>0?c:null}determineDataLimits(){let{min:a,max:b}=this.getMinMax(!0);this.min=K(a)?Math.max(0,a):null,this.max=K(b)?Math.max(0,b):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!K(this._userMin)&&(this.min=a===d_(this.min,0)?d_(this.min,-1):d_(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:a,maxDefined:b}=this.getUserBounds(),c=this.min,d=this.max,e=b=>c=a?c:b,f=a=>d=b?d:a;c===d&&(c<=0?(e(1),f(10)):(e(d_(c,-1)),f(d_(d,1)))),c<=0&&e(d_(d,-1)),d<=0&&f(d_(c,1)),this.min=c,this.max=d}buildTicks(){let a=this.options,b=function(a,{min:b,max:c}){b=L(a.min,b);let d=[],e=d$(b),f=function(a,b){let c=d$(b-a);for(;d1(a,b,c)>10;)c++;for(;10>d1(a,b,c);)c--;return Math.min(c,d$(a))}(b,c),g=f<0?Math.pow(10,Math.abs(f)):1,h=Math.pow(10,f),i=e>f?Math.pow(10,e):0,j=Math.round((b-i)*g)/g,k=Math.floor((b-i)/h/10)*h*10,l=Math.floor((j-k)/Math.pow(10,f)),m=L(a.min,Math.round((i+k+l*Math.pow(10,f))*g)/g);for(;m<c;)d.push({value:m,major:d0(m),significand:l}),l>=10?l=l<15?15:20:l++,l>=20&&(l=2,g=++f>=0?1:g),m=Math.round((i+k+l*Math.pow(10,f))*g)/g;let n=L(a.max,m);return d.push({value:n,major:d0(n),significand:l}),d}({min:this._userMin,max:this._userMax},this);return"ticks"===a.bounds&&an(b,this,"value"),a.reverse?(b.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),b}getLabelForValue(a){return void 0===a?"0":aS(a,this.chart.options.locale,this.options.ticks.format)}configure(){let a=this.min;super.configure(),this._startValue=ai(a),this._valueRange=ai(this.max)-ai(a)}getPixelForValue(a){return((void 0===a||0===a)&&(a=this.min),null===a||isNaN(a))?NaN:this.getPixelForDecimal(a===this.min?0:(ai(a)-this._startValue)/this._valueRange)}getValueForPixel(a){let b=this.getDecimalForPixel(a);return Math.pow(10,this._startValue+b*this._valueRange)}}function d3(a){let b=a.ticks;if(b.display&&a.display){let a=bg(b.backdropPadding);return M(b.font&&b.font.size,aZ.font.size)+a.height}return 0}function d4(a,b,c,d,e){return a===d||a===e?{start:b-c/2,end:b+c/2}:a<d||a>e?{start:b-c,end:b}:{start:b,end:b+c}}function d5(a,b,c,d){let{ctx:e}=a;if(c)e.arc(a.xCenter,a.yCenter,b,0,ac);else{let c=a.getPointPosition(0,b);e.moveTo(c.x,c.y);for(let f=1;f<d;f++)c=a.getPointPosition(f,b),e.lineTo(c.x,c.y)}}class d6 extends dY{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:aU.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:a=>a,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(a){super(a),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let a=this._padding=bg(d3(this.options)/2),b=this.width=this.maxWidth-a.width,c=this.height=this.maxHeight-a.height;this.xCenter=Math.floor(this.left+b/2+a.left),this.yCenter=Math.floor(this.top+c/2+a.top),this.drawingArea=Math.floor(Math.min(b,c)/2)}determineDataLimits(){let{min:a,max:b}=this.getMinMax(!1);this.min=K(a)&&!isNaN(a)?a:0,this.max=K(b)&&!isNaN(b)?b:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/d3(this.options))}generateTickLabels(a){dY.prototype.generateTickLabels.call(this,a),this._pointLabels=this.getLabels().map((a,b)=>{let c=O(this.options.pointLabels.callback,[a,b],this);return c||0===c?c:""}).filter((a,b)=>this.chart.getDataVisibility(b))}fit(){let a=this.options;a.display&&a.pointLabels.display?function(a){let b={l:a.left+a._padding.left,r:a.right-a._padding.right,t:a.top+a._padding.top,b:a.bottom-a._padding.bottom},c=Object.assign({},b),d=[],e=[],f=a._pointLabels.length,g=a.options.pointLabels,h=g.centerPointLabels?ab/f:0;for(let k=0;k<f;k++){var i,j;let f=g.setContext(a.getPointLabelContext(k));e[k]=f.padding;let l=a.getPointPosition(k,a.drawingArea+e[k],h),m=bh(f.font),n=(i=a.ctx,j=I(j=a._pointLabels[k])?j:[j],{w:function(a,b,c,d){let e,f,g,h,i,j=(d=d||{}).data=d.data||{},k=d.garbageCollect=d.garbageCollect||[];d.font!==b&&(j=d.data={},k=d.garbageCollect=[],d.font=b),a.save(),a.font=b;let l=0,m=c.length;for(e=0;e<m;e++)if(null==(h=c[e])||I(h)){if(I(h))for(f=0,g=h.length;f<g;f++)null==(i=h[f])||I(i)||(l=a$(a,j,k,l,i))}else l=a$(a,j,k,l,h);a.restore();let n=k.length/2;if(n>c.length){for(e=0;e<n;e++)delete j[k[e]];k.splice(0,n)}return l}(i,m.string,j),h:j.length*m.lineHeight});d[k]=n;let o=at(a.getIndexAngle(k)+h),p=Math.round(180/ab*o);!function(a,b,c,d,e){let f=Math.abs(Math.sin(c)),g=Math.abs(Math.cos(c)),h=0,i=0;d.start<b.l?(h=(b.l-d.start)/f,a.l=Math.min(a.l,b.l-h)):d.end>b.r&&(h=(d.end-b.r)/f,a.r=Math.max(a.r,b.r+h)),e.start<b.t?(i=(b.t-e.start)/g,a.t=Math.min(a.t,b.t-i)):e.end>b.b&&(i=(e.end-b.b)/g,a.b=Math.max(a.b,b.b+i))}(c,b,o,d4(p,l.x,n.w,0,180),d4(p,l.y,n.h,90,270))}a.setCenterPoint(b.l-c.l,c.r-b.r,b.t-c.t,c.b-b.b),a._pointLabelItems=function(a,b,c){let d,e=[],f=a._pointLabels.length,g=a.options,{centerPointLabels:h,display:i}=g.pointLabels,j={extra:d3(g)/2,additionalAngle:h?ab/f:0};for(let g=0;g<f;g++){j.padding=c[g],j.size=b[g];let f=function(a,b,c){var d,e,f,g,h,i,j;let k=a.drawingArea,{extra:l,additionalAngle:m,padding:n,size:o}=c,p=a.getPointPosition(b,k+l+n,m),q=Math.round(180/ab*at(p.angle+af)),r=(d=p.y,e=o.h,90===(f=q)||270===f?d-=e/2:(f>270||f<90)&&(d-=e),d),s=0===(g=q)||180===g?"center":g<180?"left":"right",t=(h=p.x,i=o.w,"right"===(j=s)?h-=i:"center"===j&&(h-=i/2),h);return{visible:!0,x:p.x,y:r,textAlign:s,left:t,top:r,right:t+o.w,bottom:r+o.h}}(a,g,j);e.push(f),"auto"===i&&(f.visible=function(a,b){if(!b)return!0;let{left:c,top:d,right:e,bottom:f}=a;return!(a3({x:c,y:d},b)||a3({x:c,y:f},b)||a3({x:e,y:d},b)||a3({x:e,y:f},b))}(f,d),f.visible&&(d=f))}return e}(a,d,e)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(a,b,c,d){this.xCenter+=Math.floor((a-b)/2),this.yCenter+=Math.floor((c-d)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(a,b,c,d))}getIndexAngle(a){return at(a*(ac/(this._pointLabels.length||1))+ao(this.options.startAngle||0))}getDistanceFromCenterForValue(a){if(H(a))return NaN;let b=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-a)*b:(a-this.min)*b}getValueForDistanceFromCenter(a){if(H(a))return NaN;let b=a/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-b:this.min+b}getPointLabelContext(a){let b=this._pointLabels||[];if(a>=0&&a<b.length){var c;let d=b[a];return c=this.getContext(),bj(c,{label:d,index:a,type:"pointLabel"})}}getPointPosition(a,b,c=0){let d=this.getIndexAngle(a)-af+c;return{x:Math.cos(d)*b+this.xCenter,y:Math.sin(d)*b+this.yCenter,angle:d}}getPointPositionForValue(a,b){return this.getPointPosition(a,this.getDistanceFromCenterForValue(b))}getBasePosition(a){return this.getPointPositionForValue(a||0,this.getBaseValue())}getPointLabelPosition(a){let{left:b,top:c,right:d,bottom:e}=this._pointLabelItems[a];return{left:b,top:c,right:d,bottom:e}}drawBackground(){let{backgroundColor:a,grid:{circular:b}}=this.options;if(a){let c=this.ctx;c.save(),c.beginPath(),d5(this,this.getDistanceFromCenterForValue(this._endValue),b,this._pointLabels.length),c.closePath(),c.fillStyle=a,c.fill(),c.restore()}}drawGrid(){let a,b,c,d=this.ctx,e=this.options,{angleLines:f,grid:g,border:h}=e,i=this._pointLabels.length;if(e.pointLabels.display&&function(a,b){let{ctx:c,options:{pointLabels:d}}=a;for(let e=b-1;e>=0;e--){let b=a._pointLabelItems[e];if(!b.visible)continue;let f=d.setContext(a.getPointLabelContext(e));!function(a,b,c){let{left:d,top:e,right:f,bottom:g}=c,{backdropColor:h}=b;if(!H(h)){let c=bf(b.borderRadius),i=bg(b.backdropPadding);a.fillStyle=h;let j=d-i.left,k=e-i.top,l=f-d+i.width,m=g-e+i.height;Object.values(c).some(a=>0!==a)?(a.beginPath(),a9(a,{x:j,y:k,w:l,h:m,radius:c}),a.fill()):a.fillRect(j,k,l,m)}}(c,f,b);let g=bh(f.font),{x:h,y:i,textAlign:j}=b;a8(c,a._pointLabels[e],h,i+g.lineHeight/2,g,{color:f.color,textAlign:j,textBaseline:"middle"})}}(this,i),g.display&&this.ticks.forEach((a,c)=>{if(0!==c||0===c&&this.min<0){b=this.getDistanceFromCenterForValue(a.value);let d=this.getContext(c),e=g.setContext(d),f=h.setContext(d);!function(a,b,c,d,e){let f=a.ctx,g=b.circular,{color:h,lineWidth:i}=b;(g||d)&&h&&i&&!(c<0)&&(f.save(),f.strokeStyle=h,f.lineWidth=i,f.setLineDash(e.dash||[]),f.lineDashOffset=e.dashOffset,f.beginPath(),d5(a,c,g,d),f.closePath(),f.stroke(),f.restore())}(this,e,b,i,f)}}),f.display){for(d.save(),a=i-1;a>=0;a--){let g=f.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:i}=g;i&&h&&(d.lineWidth=i,d.strokeStyle=h,d.setLineDash(g.borderDash),d.lineDashOffset=g.borderDashOffset,b=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,b),d.beginPath(),d.moveTo(this.xCenter,this.yCenter),d.lineTo(c.x,c.y),d.stroke())}d.restore()}}drawBorder(){}drawLabels(){let a,b,c=this.ctx,d=this.options,e=d.ticks;if(!e.display)return;let f=this.getIndexAngle(0);c.save(),c.translate(this.xCenter,this.yCenter),c.rotate(f),c.textAlign="center",c.textBaseline="middle",this.ticks.forEach((f,g)=>{if(0===g&&this.min>=0&&!d.reverse)return;let h=e.setContext(this.getContext(g)),i=bh(h.font);if(a=this.getDistanceFromCenterForValue(this.ticks[g].value),h.showLabelBackdrop){c.font=i.string,b=c.measureText(f.label).width,c.fillStyle=h.backdropColor;let d=bg(h.backdropPadding);c.fillRect(-b/2-d.left,-a-i.size/2-d.top,b+d.width,i.size+d.height)}a8(c,f.label,0,-a,i,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),c.restore()}drawTitle(){}}let d7={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},d8=Object.keys(d7);function d9(a,b){return a-b}function ea(a,b){if(H(b))return null;let c=a._adapter,{parser:d,round:e,isoWeekday:f}=a._parseOpts,g=b;return("function"==typeof d&&(g=d(g)),K(g)||(g="string"==typeof d?c.parse(g,d):c.parse(g)),null===g)?null:(e&&(g="week"===e&&(am(f)||!0===f)?c.startOf(g,"isoWeek",f):c.startOf(g,e)),+g)}function eb(a,b,c,d){let e=d8.length;for(let f=d8.indexOf(a);f<e-1;++f){let a=d7[d8[f]],e=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((c-b)/(e*a.size))<=d)return d8[f]}return d8[e-1]}function ec(a,b,c){if(c){if(c.length){let{lo:d,hi:e}=ax(c,b);a[c[d]>=b?c[d]:c[e]]=!0}}else a[b]=!0}function ed(a,b,c){let d,e,f=[],g={},h=b.length;for(d=0;d<h;++d)g[e=b[d]]=d,f.push({value:e,major:!1});return 0!==h&&c?function(a,b,c,d){let e,f,g=a._adapter,h=+g.startOf(b[0].value,d),i=b[b.length-1].value;for(e=h;e<=i;e=+g.add(e,1,d))(f=c[e])>=0&&(b[f].major=!0);return b}(a,f,g,c):f}class ee extends cI{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(a){super(a),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(a,b={}){let c=a.time||(a.time={}),d=this._adapter=new cj._date(a.adapters.date);d.init(b),V(c.displayFormats,d.formats()),this._parseOpts={parser:c.parser,round:c.round,isoWeekday:c.isoWeekday},super.init(a),this._normalized=b.normalized}parse(a,b){return void 0===a?null:ea(this,a)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let a=this.options,b=this._adapter,c=a.time.unit||"day",{min:d,max:e,minDefined:f,maxDefined:g}=this.getUserBounds();function h(a){f||isNaN(a.min)||(d=Math.min(d,a.min)),g||isNaN(a.max)||(e=Math.max(e,a.max))}f&&g||(h(this._getLabelBounds()),("ticks"!==a.bounds||"labels"!==a.ticks.source)&&h(this.getMinMax(!1))),d=K(d)&&!isNaN(d)?d:+b.startOf(Date.now(),c),e=K(e)&&!isNaN(e)?e:+b.endOf(Date.now(),c)+1,this.min=Math.min(d,e-1),this.max=Math.max(d+1,e)}_getLabelBounds(){let a=this.getLabelTimestamps(),b=1/0,c=-1/0;return a.length&&(b=a[0],c=a[a.length-1]),{min:b,max:c}}buildTicks(){let a=this.options,b=a.time,c=a.ticks,d="labels"===c.source?this.getLabelTimestamps():this._generate();"ticks"===a.bounds&&d.length&&(this.min=this._userMin||d[0],this.max=this._userMax||d[d.length-1]);let e=this.min,f=function(a,b,c){let d=0,e=a.length;for(;d<e&&a[d]<b;)d++;for(;e>d&&a[e-1]>c;)e--;return d>0||e<a.length?a.slice(d,e):a}(d,e,this.max);return this._unit=b.unit||(c.autoSkip?eb(b.minUnit,this.min,this.max,this._getLabelCapacity(e)):function(a,b,c,d,e){for(let f=d8.length-1;f>=d8.indexOf(c);f--){let c=d8[f];if(d7[c].common&&a._adapter.diff(e,d,c)>=b-1)return c}return d8[c?d8.indexOf(c):0]}(this,f.length,b.minUnit,this.min,this.max)),this._majorUnit=c.major.enabled&&"year"!==this._unit?function(a){for(let b=d8.indexOf(a)+1,c=d8.length;b<c;++b)if(d7[d8[b]].common)return d8[b]}(this._unit):void 0,this.initOffsets(d),a.reverse&&f.reverse(),ed(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(a=>+a.value))}initOffsets(a=[]){let b,c,d=0,e=0;this.options.offset&&a.length&&(b=this.getDecimalForValue(a[0]),d=1===a.length?1-b:(this.getDecimalForValue(a[1])-b)/2,c=this.getDecimalForValue(a[a.length-1]),e=1===a.length?c:(c-this.getDecimalForValue(a[a.length-2]))/2);let f=a.length<3?.5:.25;d=av(d,0,f),e=av(e,0,f),this._offsets={start:d,end:e,factor:1/(d+1+e)}}_generate(){let a,b,c=this._adapter,d=this.min,e=this.max,f=this.options,g=f.time,h=g.unit||eb(g.minUnit,d,e,this._getLabelCapacity(d)),i=M(f.ticks.stepSize,1),j="week"===h&&g.isoWeekday,k=am(j)||!0===j,l={},m=d;if(k&&(m=+c.startOf(m,"isoWeek",j)),m=+c.startOf(m,k?"day":h),c.diff(e,d,h)>1e5*i)throw Error(d+" and "+e+" are too far apart with stepSize of "+i+" "+h);let n="data"===f.ticks.source&&this.getDataTimestamps();for(a=m,b=0;a<e;a=+c.add(a,i,h),b++)ec(l,a,n);return(a===e||"ticks"===f.bounds||1===b)&&ec(l,a,n),Object.keys(l).sort(d9).map(a=>+a)}getLabelForValue(a){let b=this._adapter,c=this.options.time;return c.tooltipFormat?b.format(a,c.tooltipFormat):b.format(a,c.displayFormats.datetime)}format(a,b){let c=this.options.time.displayFormats,d=this._unit,e=b||c[d];return this._adapter.format(a,e)}_tickFormatFunction(a,b,c,d){let e=this.options,f=e.ticks.callback;if(f)return O(f,[a,b,c],this);let g=e.time.displayFormats,h=this._unit,i=this._majorUnit,j=h&&g[h],k=i&&g[i],l=c[b],m=i&&k&&l&&l.major;return this._adapter.format(a,d||(m?k:j))}generateTickLabels(a){let b,c,d;for(b=0,c=a.length;b<c;++b)(d=a[b]).label=this._tickFormatFunction(d.value,b,a)}getDecimalForValue(a){return null===a?NaN:(a-this.min)/(this.max-this.min)}getPixelForValue(a){let b=this._offsets,c=this.getDecimalForValue(a);return this.getPixelForDecimal((b.start+c)*b.factor)}getValueForPixel(a){let b=this._offsets,c=this.getDecimalForPixel(a)/b.factor-b.end;return this.min+c*(this.max-this.min)}_getLabelSize(a){let b=this.options.ticks,c=this.ctx.measureText(a).width,d=ao(this.isHorizontal()?b.maxRotation:b.minRotation),e=Math.cos(d),f=Math.sin(d),g=this._resolveTickFontOptions(0).size;return{w:c*e+g*f,h:c*f+g*e}}_getLabelCapacity(a){let b=this.options.time,c=b.displayFormats,d=c[b.unit]||c.millisecond,e=this._tickFormatFunction(a,0,ed(this,[a],this._majorUnit),d),f=this._getLabelSize(e),g=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return g>0?g:1}getDataTimestamps(){let a,b,c=this._cache.data||[];if(c.length)return c;let d=this.getMatchingVisibleMetas();if(this._normalized&&d.length)return this._cache.data=d[0].controller.getAllParsedValues(this);for(a=0,b=d.length;a<b;++a)c=c.concat(d[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(c)}getLabelTimestamps(){let a,b,c=this._cache.labels||[];if(c.length)return c;let d=this.getLabels();for(a=0,b=d.length;a<b;++a)c.push(ea(this,d[a]));return this._cache.labels=this._normalized?c:this.normalize(c)}normalize(a){return aC(a.sort(d9))}}function ef(a,b,c){let d,e,f,g,h=0,i=a.length-1;c?(b>=a[h].pos&&b<=a[i].pos&&({lo:h,hi:i}=ay(a,"pos",b)),{pos:d,time:f}=a[h],{pos:e,time:g}=a[i]):(b>=a[h].time&&b<=a[i].time&&({lo:h,hi:i}=ay(a,"time",b)),{time:d,pos:f}=a[h],{time:e,pos:g}=a[i]);let j=e-d;return j?f+(g-f)*(b-d)/j:f}class eg extends ee{static id="timeseries";static defaults=ee.defaults;constructor(a){super(a),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let a=this._getTimestampsForTable(),b=this._table=this.buildLookupTable(a);this._minPos=ef(b,this.min),this._tableRange=ef(b,this.max)-this._minPos,super.initOffsets(a)}buildLookupTable(a){let b,c,d,{min:e,max:f}=this,g=[],h=[];for(b=0,c=a.length;b<c;++b)(d=a[b])>=e&&d<=f&&g.push(d);if(g.length<2)return[{time:e,pos:0},{time:f,pos:1}];for(b=0,c=g.length;b<c;++b)Math.round((g[b+1]+g[b-1])/2)!==(d=g[b])&&h.push({time:d,pos:b/(c-1)});return h}_generate(){let a=this.min,b=this.max,c=super.getDataTimestamps();return c.includes(a)&&c.length||c.splice(0,0,a),c.includes(b)&&1!==c.length||c.push(b),c.sort((a,b)=>a-b)}_getTimestampsForTable(){let a=this._cache.all||[];if(a.length)return a;let b=this.getDataTimestamps(),c=this.getLabelTimestamps();return a=b.length&&c.length?this.normalize(b.concat(c)):b.length?b:c,a=this._cache.all=a}getDecimalForValue(a){return(ef(this._table,a)-this._minPos)/this._tableRange}getValueForPixel(a){let b=this._offsets,c=this.getDecimalForPixel(a)/b.factor-b.end;return ef(this._table,c*this._tableRange+this._minPos,!0)}}let eh="label";function ei(a,b){"function"==typeof a?a(b):a&&(a.current=b)}function ej(a,b){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eh,d=[];a.datasets=b.map(b=>{let e=a.datasets.find(a=>a[c]===b[c]);return!e||!b.data||d.includes(e)?{...b}:(d.push(e),Object.assign(e,b),e)})}let ek=(0,d.forwardRef)(function(a,b){let{height:c=150,width:e=300,redraw:f=!1,datasetIdKey:g,type:h,data:i,options:j,plugins:k=[],fallbackContent:l,updateMode:m,...n}=a,o=(0,d.useRef)(null),p=(0,d.useRef)(null),q=()=>{o.current&&(p.current=new c5(o.current,{type:h,data:function(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eh,c={labels:[],datasets:[]};return c.labels=a.labels,ej(c,a.datasets,b),c}(i,g),options:j&&{...j},plugins:k}),ei(b,p.current))},r=()=>{ei(b,null),p.current&&(p.current.destroy(),p.current=null)};return(0,d.useEffect)(()=>{!f&&p.current&&j&&function(a,b){let c=a.options;c&&b&&Object.assign(c,b)}(p.current,j)},[f,j]),(0,d.useEffect)(()=>{!f&&p.current&&(p.current.config.data.labels=i.labels)},[f,i.labels]),(0,d.useEffect)(()=>{!f&&p.current&&i.datasets&&ej(p.current.config.data,i.datasets,g)},[f,i.datasets]),(0,d.useEffect)(()=>{p.current&&(f?(r(),setTimeout(q)):p.current.update(m))},[f,j,i.labels,i.datasets,m]),(0,d.useEffect)(()=>{p.current&&(r(),setTimeout(q))},[h]),(0,d.useEffect)(()=>(q(),()=>r()),[]),d.default.createElement("canvas",{ref:o,role:"img",height:c,width:e,...n},l)});function el(a,b){return c5.register(b),(0,d.forwardRef)((b,c)=>d.default.createElement(ek,{...b,ref:c,type:a}))}let em=el("line",class extends b6{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(a){let b=this._cachedMeta,{dataset:c,data:d=[],_dataset:e}=b,f=this.chart._animationsDisabled,{start:g,count:h}=aG(b,d,f);this._drawStart=g,this._drawCount=h,aH(b)&&(g=0,h=d.length),c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!e._decimated,c.points=d;let i=this.resolveDatasetElementOptions(a);this.options.showLine||(i.borderWidth=0),i.segment=this.options.segment,this.updateElement(c,void 0,{animated:!f,options:i},a),this.updateElements(d,g,h,a)}updateElements(a,b,c,d){let e="reset"===d,{iScale:f,vScale:g,_stacked:h,_dataset:i}=this._cachedMeta,{sharedOptions:j,includeOptions:k}=this._getSharedOptions(b,d),l=f.axis,m=g.axis,{spanGaps:n,segment:o}=this.options,p=am(n)?n:1/0,q=this.chart._animationsDisabled||e||"none"===d,r=b+c,s=a.length,t=b>0&&this.getParsed(b-1);for(let c=0;c<s;++c){let n=a[c],s=q?n:{};if(c<b||c>=r){s.skip=!0;continue}let u=this.getParsed(c),v=H(u[m]),w=s[l]=f.getPixelForValue(u[l],c),x=s[m]=e||v?g.getBasePixel():g.getPixelForValue(h?this.applyStack(g,u,h):u[m],c);s.skip=isNaN(w)||isNaN(x)||v,s.stop=c>0&&Math.abs(u[l]-t[l])>p,o&&(s.parsed=u,s.raw=i.data[c]),k&&(s.options=j||this.resolveDataElementOptions(c,n.active?"active":d)),q||this.updateElement(n,c,s,d),t=u}}getMaxOverflow(){let a=this._cachedMeta,b=a.dataset,c=b.options&&b.options.borderWidth||0,d=a.data||[];return d.length?Math.max(c,d[0].size(this.resolveDataElementOptions(0)),d[d.length-1].size(this.resolveDataElementOptions(d.length-1)))/2:c}draw(){let a=this._cachedMeta;a.dataset.updateControlPoints(this.chart.chartArea,a.iScale.axis),super.draw()}}),en=el("bar",class extends b6{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(a,b,c,d){return b8(a,b,c,d)}parseArrayData(a,b,c,d){return b8(a,b,c,d)}parseObjectData(a,b,c,d){let e,f,g,h,{iScale:i,vScale:j}=a,{xAxisKey:k="x",yAxisKey:l="y"}=this._parsing,m="x"===i.axis?k:l,n="x"===j.axis?k:l,o=[];for(e=c,f=c+d;e<f;++e)h=b[e],(g={})[i.axis]=i.parse(Y(h,m),e),o.push(b7(Y(h,n),g,j,e));return o}updateRangeFromParsed(a,b,c,d){super.updateRangeFromParsed(a,b,c,d);let e=c._custom;e&&b===this._cachedMeta.vScale&&(a.min=Math.min(a.min,e.min),a.max=Math.max(a.max,e.max))}getMaxOverflow(){return 0}getLabelAndValue(a){let{iScale:b,vScale:c}=this._cachedMeta,d=this.getParsed(a),e=d._custom,f=b9(e)?"["+e.start+", "+e.end+"]":""+c.getLabelForValue(d[c.axis]);return{label:""+b.getLabelForValue(d[b.axis]),value:f}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(a){let b=this._cachedMeta;this.updateElements(b.data,0,b.data.length,a)}updateElements(a,b,c,d){let e="reset"===d,{index:f,_cachedMeta:{vScale:g}}=this,h=g.getBasePixel(),i=g.isHorizontal(),j=this._getRuler(),{sharedOptions:k,includeOptions:l}=this._getSharedOptions(b,d);for(let m=b;m<b+c;m++){let b=this.getParsed(m),c=e||H(b[g.axis])?{base:h,head:h}:this._calculateBarValuePixels(m),n=this._calculateBarIndexPixels(m,j),o=(b._stacks||{})[g.axis],p={horizontal:i,base:c.base,enableBorderRadius:!o||b9(b._custom)||f===o._top||f===o._bottom,x:i?c.head:n.center,y:i?n.center:c.head,height:i?n.size:Math.abs(c.size),width:i?Math.abs(c.size):n.size};l&&(p.options=k||this.resolveDataElementOptions(m,a[m].active?"active":d));let q=p.options||a[m].options;!function(a,b,c,d){let e,f,g,h,i,j=b.borderSkipped,k={};if(!j){a.borderSkipped=k;return}if(!0===j){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:l,end:m,reverse:n,top:o,bottom:p}=(a.horizontal?(e=a.base>a.x,f="left",g="right"):(e=a.base<a.y,f="bottom",g="top"),e?(h="end",i="start"):(h="start",i="end"),{start:f,end:g,reverse:e,top:h,bottom:i});"middle"===j&&c&&(a.enableBorderRadius=!0,(c._top||0)===d?j=o:(c._bottom||0)===d?j=p:(k[ca(p,l,m,n)]=!0,j=o)),k[ca(j,l,m,n)]=!0,a.borderSkipped=k}(p,q,o,f),function(a,{inflateAmount:b},c){a.inflateAmount="auto"===b?.33*(1===c):b}(p,q,j.ratio),this.updateElement(a[m],m,p,d)}}_getStacks(a,b){let{iScale:c}=this._cachedMeta,d=c.getMatchingVisibleMetas(this._type).filter(a=>a.controller.options.grouped),e=c.options.stacked,f=[],g=this._cachedMeta.controller.getParsed(b),h=g&&g[c.axis],i=a=>{let b=a._parsed.find(a=>a[c.axis]===h),d=b&&b[a.vScale.axis];if(H(d)||isNaN(d))return!0};for(let c of d)if(!(void 0!==b&&i(c))&&((!1===e||-1===f.indexOf(c.stack)||void 0===e&&void 0===c.stack)&&f.push(c.stack),c.index===a))break;return f.length||f.push(void 0),f}_getStackCount(a){return this._getStacks(void 0,a).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let a=this.chart.scales,b=this.chart.options.indexAxis;return Object.keys(a).filter(c=>a[c].axis===b).shift()}_getAxis(){let a={},b=this.getFirstScaleIdForIndexAxis();for(let c of this.chart.data.datasets)a[M("x"===this.chart.options.indexAxis?c.xAxisID:c.yAxisID,b)]=!0;return Object.keys(a)}_getStackIndex(a,b,c){let d=this._getStacks(a,c),e=void 0!==b?d.indexOf(b):-1;return -1===e?d.length-1:e}_getRuler(){let a,b,c=this.options,d=this._cachedMeta,e=d.iScale,f=[];for(a=0,b=d.data.length;a<b;++a)f.push(e.getPixelForValue(this.getParsed(a)[e.axis],a));let g=c.barThickness;return{min:g||function(a){let b,c,d,e,f=a.iScale,g=function(a,b){if(!a._cache.$bar){let c=a.getMatchingVisibleMetas(b),d=[];for(let b=0,e=c.length;b<e;b++)d=d.concat(c[b].controller.getAllParsedValues(a));a._cache.$bar=aC(d.sort((a,b)=>a-b))}return a._cache.$bar}(f,a.type),h=f._length,i=()=>{32767!==d&&-32768!==d&&($(e)&&(h=Math.min(h,Math.abs(d-e)||h)),e=d)};for(b=0,c=g.length;b<c;++b)d=f.getPixelForValue(g[b]),i();for(b=0,e=void 0,c=f.ticks.length;b<c;++b)d=f.getPixelForTick(b),i();return h}(d),pixels:f,start:e._startPixel,end:e._endPixel,stackCount:this._getStackCount(),scale:e,grouped:c.grouped,ratio:g?1:c.categoryPercentage*c.barPercentage}}_calculateBarValuePixels(a){let b,c,{_cachedMeta:{vScale:d,_stacked:e,index:f},options:{base:g,minBarLength:h}}=this,i=g||0,j=this.getParsed(a),k=j._custom,l=b9(k),m=j[d.axis],n=0,o=e?this.applyStack(d,j,e):m;o!==m&&(n=o-m,o=m),l&&(m=k.barStart,o=k.barEnd-k.barStart,0!==m&&aj(m)!==aj(k.barEnd)&&(n=0),n+=m);let p=H(g)||l?n:g,q=d.getPixelForValue(p);if(Math.abs(c=(b=this.chart.getDataVisibility(a)?d.getPixelForValue(n+o):q)-q)<h){var r;c=(0!==(r=c)?aj(r):(d.isHorizontal()?1:-1)*(d.min>=i?1:-1))*h,m===i&&(q-=c/2);let a=d.getPixelForDecimal(0),g=d.getPixelForDecimal(1),k=Math.min(a,g);b=(q=Math.max(Math.min(q,Math.max(a,g)),k))+c,e&&!l&&(j._stacks[d.axis]._visualValues[f]=d.getValueForPixel(b)-d.getValueForPixel(q))}if(q===d.getPixelForValue(i)){let a=aj(c)*d.getLineWidthForValue(i)/2;q+=a,c-=a}return{size:c,base:q,head:b,center:b+c/2}}_calculateBarIndexPixels(a,b){let c,d,e=b.scale,f=this.options,g=f.skipNull,h=M(f.maxBarThickness,1/0),i=this._getAxisCount();if(b.grouped){let e=g?this._getStackCount(a):b.stackCount,j="flex"===f.barThickness?function(a,b,c,d){let e=b.pixels,f=e[a],g=a>0?e[a-1]:null,h=a<e.length-1?e[a+1]:null,i=c.categoryPercentage;null===g&&(g=f-(null===h?b.end-b.start:h-f)),null===h&&(h=f+f-g);let j=f-(f-Math.min(g,h))/2*i;return{chunk:Math.abs(h-g)/2*i/d,ratio:c.barPercentage,start:j}}(a,b,f,e*i):function(a,b,c,d){let e,f,g=c.barThickness;return H(g)?(e=b.min*c.categoryPercentage,f=c.barPercentage):(e=g*d,f=1),{chunk:e/d,ratio:f,start:b.pixels[a]-e/2}}(a,b,f,e*i),k="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,l=this._getAxis().indexOf(M(k,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,g?a:void 0)+l;c=j.start+j.chunk*m+j.chunk/2,d=Math.min(h,j.chunk*j.ratio)}else c=e.getPixelForValue(this.getParsed(a)[e.axis],a),d=Math.min(h,b.min*b.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){let a=this._cachedMeta,b=a.vScale,c=a.data,d=c.length,e=0;for(;e<d;++e)null===this.getParsed(e)[b.axis]||c[e].hidden||c[e].draw(this._ctx)}}),eo=el("doughnut",cd),ep=Symbol.for("constructDateFrom");function eq(a,b){return"function"==typeof a?a(b):a&&"object"==typeof a&&ep in a?a[ep](b):a instanceof Date?new a.constructor(b):new Date(b)}function er(a,b){return eq(b||a,a)}let es={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function et(a){return (b={})=>{let c=b.width?String(b.width):a.defaultWidth;return a.formats[c]||a.formats[a.defaultWidth]}}let eu={date:et({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:et({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:et({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ev={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ew(a){return(b,c)=>{let d;if("formatting"===(c?.context?String(c.context):"standalone")&&a.formattingValues){let b=a.defaultFormattingWidth||a.defaultWidth,e=c?.width?String(c.width):b;d=a.formattingValues[e]||a.formattingValues[b]}else{let b=a.defaultWidth,e=c?.width?String(c.width):a.defaultWidth;d=a.values[e]||a.values[b]}return d[a.argumentCallback?a.argumentCallback(b):b]}}function ex(a){return(b,c={})=>{let d,e=c.width,f=e&&a.matchPatterns[e]||a.matchPatterns[a.defaultMatchWidth],g=b.match(f);if(!g)return null;let h=g[0],i=e&&a.parsePatterns[e]||a.parsePatterns[a.defaultParseWidth],j=Array.isArray(i)?function(a,b){for(let c=0;c<a.length;c++)if(b(a[c]))return c}(i,a=>a.test(h)):function(a,b){for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&b(a[c]))return c}(i,a=>a.test(h));return d=a.valueCallback?a.valueCallback(j):j,{value:d=c.valueCallback?c.valueCallback(d):d,rest:b.slice(h.length)}}}let ey={code:"en-US",formatDistance:(a,b,c)=>{let d,e=es[a];if(d="string"==typeof e?e:1===b?e.one:e.other.replace("{{count}}",b.toString()),c?.addSuffix)if(c.comparison&&c.comparison>0)return"in "+d;else return d+" ago";return d},formatLong:eu,formatRelative:(a,b,c,d)=>ev[a],localize:{ordinalNumber:(a,b)=>{let c=Number(a),d=c%100;if(d>20||d<10)switch(d%10){case 1:return c+"st";case 2:return c+"nd";case 3:return c+"rd"}return c+"th"},era:ew({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ew({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:a=>a-1}),month:ew({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ew({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ew({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(a){return(b,c={})=>{let d=b.match(a.matchPattern);if(!d)return null;let e=d[0],f=b.match(a.parsePattern);if(!f)return null;let g=a.valueCallback?a.valueCallback(f[0]):f[0];return{value:g=c.valueCallback?c.valueCallback(g):g,rest:b.slice(e.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:a=>parseInt(a,10)}),era:ex({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ex({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:ex({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ex({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ex({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},ez=(a,b)=>{switch(a){case"P":return b.date({width:"short"});case"PP":return b.date({width:"medium"});case"PPP":return b.date({width:"long"});default:return b.date({width:"full"})}},eA=(a,b)=>{switch(a){case"p":return b.time({width:"short"});case"pp":return b.time({width:"medium"});case"ppp":return b.time({width:"long"});default:return b.time({width:"full"})}},eB={p:eA,P:(a,b)=>{let c,d=a.match(/(P+)(p+)?/)||[],e=d[1],f=d[2];if(!f)return ez(a,b);switch(e){case"P":c=b.dateTime({width:"short"});break;case"PP":c=b.dateTime({width:"medium"});break;case"PPP":c=b.dateTime({width:"long"});break;default:c=b.dateTime({width:"full"})}return c.replace("{{date}}",ez(e,b)).replace("{{time}}",eA(f,b))}},eC=/^D+$/,eD=/^Y+$/,eE=["D","DD","YY","YYYY"];function eF(a,b,c){let d=function(a,b,c){let d="Y"===a[0]?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${b}\`) for formatting ${d} to the input \`${c}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(a,b,c);if(console.warn(d),eE.includes(a))throw RangeError(d)}let eG={};class eH{subPriority=0;validate(a,b){return!0}}class eI extends eH{constructor(a,b,c,d,e){super(),this.value=a,this.validateValue=b,this.setValue=c,this.priority=d,e&&(this.subPriority=e)}validate(a,b){return this.validateValue(a,this.value,b)}set(a,b,c){return this.setValue(a,b,this.value,c)}}class eJ extends eH{priority=10;subPriority=-1;constructor(a,b){super(),this.context=a||(a=>eq(b,a))}set(a,b){return b.timestampIsSet?a:eq(a,function(a,b){var c;let d="function"==typeof(c=b)&&c.prototype?.constructor===c?new b(0):eq(b,0);return d.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),d.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),d}(a,this.context))}}class eK{run(a,b,c,d){let e=this.parse(a,b,c,d);return e?{setter:new eI(e.value,this.validate,this.set,this.priority,this.subPriority),rest:e.rest}:null}validate(a,b,c){return!0}}let eL={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},eM={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function eN(a,b){return a?{value:b(a.value),rest:a.rest}:a}function eO(a,b){let c=b.match(a);return c?{value:parseInt(c[0],10),rest:b.slice(c[0].length)}:null}function eP(a,b){let c=b.match(a);if(!c)return null;if("Z"===c[0])return{value:0,rest:b.slice(1)};let d="+"===c[1]?1:-1,e=c[2]?parseInt(c[2],10):0;return{value:d*(36e5*e+6e4*(c[3]?parseInt(c[3],10):0)+(c[5]?parseInt(c[5],10):0)*1e3),rest:b.slice(c[0].length)}}function eQ(a){return eO(eL.anyDigitsSigned,a)}function eR(a,b){switch(a){case 1:return eO(eL.singleDigit,b);case 2:return eO(eL.twoDigits,b);case 3:return eO(eL.threeDigits,b);case 4:return eO(eL.fourDigits,b);default:return eO(RegExp("^\\d{1,"+a+"}"),b)}}function eS(a,b){switch(a){case 1:return eO(eL.singleDigitSigned,b);case 2:return eO(eL.twoDigitsSigned,b);case 3:return eO(eL.threeDigitsSigned,b);case 4:return eO(eL.fourDigitsSigned,b);default:return eO(RegExp("^-?\\d{1,"+a+"}"),b)}}function eT(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function eU(a,b){let c,d=b>0,e=d?b:1-b;if(e<=50)c=a||100;else{let b=e+50;c=a+100*Math.trunc(b/100)-100*(a>=b%100)}return d?c:1-c}function eV(a){return a%400==0||a%4==0&&a%100!=0}function eW(a,b){let c=b?.weekStartsOn??b?.locale?.options?.weekStartsOn??eG.weekStartsOn??eG.locale?.options?.weekStartsOn??0,d=er(a,b?.in),e=d.getDay();return d.setDate(d.getDate()-(7*(e<c)+e-c)),d.setHours(0,0,0,0),d}function eX(a,b){let c=er(a,b?.in),d=c.getFullYear(),e=b?.firstWeekContainsDate??b?.locale?.options?.firstWeekContainsDate??eG.firstWeekContainsDate??eG.locale?.options?.firstWeekContainsDate??1,f=eq(b?.in||a,0);f.setFullYear(d+1,0,e),f.setHours(0,0,0,0);let g=eW(f,b),h=eq(b?.in||a,0);h.setFullYear(d,0,e),h.setHours(0,0,0,0);let i=eW(h,b);return+c>=+g?d+1:+c>=+i?d:d-1}function eY(a,b){return eW(a,{...b,weekStartsOn:1})}function eZ(a,b){let c=er(a,b?.in);return Math.round((eW(c,b)-function(a,b){let c=b?.firstWeekContainsDate??b?.locale?.options?.firstWeekContainsDate??eG.firstWeekContainsDate??eG.locale?.options?.firstWeekContainsDate??1,d=eX(a,b),e=eq(b?.in||a,0);return e.setFullYear(d,0,c),e.setHours(0,0,0,0),eW(e,b)}(c,b))/6048e5)+1}function e$(a,b){let c=er(a,b?.in),d=c.getFullYear(),e=eq(c,0);e.setFullYear(d+1,0,4),e.setHours(0,0,0,0);let f=eY(e),g=eq(c,0);g.setFullYear(d,0,4),g.setHours(0,0,0,0);let h=eY(g);return c.getTime()>=f.getTime()?d+1:c.getTime()>=h.getTime()?d:d-1}function e_(a,b){let c=er(a,b?.in);return Math.round((eY(c)-function(a,b){let c=e$(a,void 0),d=eq(a,0);return d.setFullYear(c,0,4),d.setHours(0,0,0,0),eY(d)}(c))/6048e5)+1}let e0=[31,28,31,30,31,30,31,31,30,31,30,31],e1=[31,29,31,30,31,30,31,31,30,31,30,31];function e2(a,b,c){let d=er(a,c?.in);return isNaN(b)?eq(c?.in||a,NaN):(b&&d.setDate(d.getDate()+b),d)}function e3(a,b,c){let d=c?.weekStartsOn??c?.locale?.options?.weekStartsOn??eG.weekStartsOn??eG.locale?.options?.weekStartsOn??0,e=er(a,c?.in),f=e.getDay(),g=7-d;return e2(e,b<0||b>6?b-(f+g)%7:((b%7+7)%7+g)%7-(f+g)%7,c)}function e4(a){let b=er(a),c=new Date(Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()));return c.setUTCFullYear(b.getFullYear()),a-c}let e5={G:new class extends eK{priority=140;parse(a,b,c){switch(b){case"G":case"GG":case"GGG":return c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"});case"GGGGG":return c.era(a,{width:"narrow"});default:return c.era(a,{width:"wide"})||c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"})}}set(a,b,c){return b.era=c,a.setFullYear(c,0,1),a.setHours(0,0,0,0),a}incompatibleTokens=["R","u","t","T"]},y:new class extends eK{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(a,b,c){let d=a=>({year:a,isTwoDigitYear:"yy"===b});switch(b){case"y":return eN(eR(4,a),d);case"yo":return eN(c.ordinalNumber(a,{unit:"year"}),d);default:return eN(eR(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c){let d=a.getFullYear();if(c.isTwoDigitYear){let b=eU(c.year,d);return a.setFullYear(b,0,1),a.setHours(0,0,0,0),a}let e="era"in b&&1!==b.era?1-c.year:c.year;return a.setFullYear(e,0,1),a.setHours(0,0,0,0),a}},Y:new class extends eK{priority=130;parse(a,b,c){let d=a=>({year:a,isTwoDigitYear:"YY"===b});switch(b){case"Y":return eN(eR(4,a),d);case"Yo":return eN(c.ordinalNumber(a,{unit:"year"}),d);default:return eN(eR(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c,d){let e=eX(a,d);if(c.isTwoDigitYear){let b=eU(c.year,e);return a.setFullYear(b,0,d.firstWeekContainsDate),a.setHours(0,0,0,0),eW(a,d)}let f="era"in b&&1!==b.era?1-c.year:c.year;return a.setFullYear(f,0,d.firstWeekContainsDate),a.setHours(0,0,0,0),eW(a,d)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends eK{priority=130;parse(a,b){return"R"===b?eS(4,a):eS(b.length,a)}set(a,b,c){let d=eq(a,0);return d.setFullYear(c,0,4),d.setHours(0,0,0,0),eY(d)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends eK{priority=130;parse(a,b){return"u"===b?eS(4,a):eS(b.length,a)}set(a,b,c){return a.setFullYear(c,0,1),a.setHours(0,0,0,0),a}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends eK{priority=120;parse(a,b,c){switch(b){case"Q":case"QQ":return eR(b.length,a);case"Qo":return c.ordinalNumber(a,{unit:"quarter"});case"QQQ":return c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return c.quarter(a,{width:"narrow",context:"formatting"});default:return c.quarter(a,{width:"wide",context:"formatting"})||c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setMonth((c-1)*3,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends eK{priority=120;parse(a,b,c){switch(b){case"q":case"qq":return eR(b.length,a);case"qo":return c.ordinalNumber(a,{unit:"quarter"});case"qqq":return c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return c.quarter(a,{width:"narrow",context:"standalone"});default:return c.quarter(a,{width:"wide",context:"standalone"})||c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setMonth((c-1)*3,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends eK{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(a,b,c){let d=a=>a-1;switch(b){case"M":return eN(eO(eL.month,a),d);case"MM":return eN(eR(2,a),d);case"Mo":return eN(c.ordinalNumber(a,{unit:"month"}),d);case"MMM":return c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return c.month(a,{width:"narrow",context:"formatting"});default:return c.month(a,{width:"wide",context:"formatting"})||c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setMonth(c,1),a.setHours(0,0,0,0),a}},L:new class extends eK{priority=110;parse(a,b,c){let d=a=>a-1;switch(b){case"L":return eN(eO(eL.month,a),d);case"LL":return eN(eR(2,a),d);case"Lo":return eN(c.ordinalNumber(a,{unit:"month"}),d);case"LLL":return c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return c.month(a,{width:"narrow",context:"standalone"});default:return c.month(a,{width:"wide",context:"standalone"})||c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setMonth(c,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends eK{priority=100;parse(a,b,c){switch(b){case"w":return eO(eL.week,a);case"wo":return c.ordinalNumber(a,{unit:"week"});default:return eR(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c,d){return eW(function(a,b,c){let d=er(a,c?.in),e=eZ(d,c)-b;return d.setDate(d.getDate()-7*e),er(d,c?.in)}(a,c,d),d)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends eK{priority=100;parse(a,b,c){switch(b){case"I":return eO(eL.week,a);case"Io":return c.ordinalNumber(a,{unit:"week"});default:return eR(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c){return eY(function(a,b,c){let d=er(a,void 0),e=e_(d,void 0)-b;return d.setDate(d.getDate()-7*e),d}(a,c))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends eK{priority=90;subPriority=1;parse(a,b,c){switch(b){case"d":return eO(eL.date,a);case"do":return c.ordinalNumber(a,{unit:"date"});default:return eR(b.length,a)}}validate(a,b){let c=eV(a.getFullYear()),d=a.getMonth();return c?b>=1&&b<=e1[d]:b>=1&&b<=e0[d]}set(a,b,c){return a.setDate(c),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends eK{priority=90;subpriority=1;parse(a,b,c){switch(b){case"D":case"DD":return eO(eL.dayOfYear,a);case"Do":return c.ordinalNumber(a,{unit:"date"});default:return eR(b.length,a)}}validate(a,b){return eV(a.getFullYear())?b>=1&&b<=366:b>=1&&b<=365}set(a,b,c){return a.setMonth(0,c),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends eK{priority=90;parse(a,b,c){switch(b){case"E":case"EE":case"EEE":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return c.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=e3(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends eK{priority=90;parse(a,b,c,d){let e=a=>{let b=7*Math.floor((a-1)/7);return(a+d.weekStartsOn+6)%7+b};switch(b){case"e":case"ee":return eN(eR(b.length,a),e);case"eo":return eN(c.ordinalNumber(a,{unit:"day"}),e);case"eee":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"eeeee":return c.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=e3(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends eK{priority=90;parse(a,b,c,d){let e=a=>{let b=7*Math.floor((a-1)/7);return(a+d.weekStartsOn+6)%7+b};switch(b){case"c":case"cc":return eN(eR(b.length,a),e);case"co":return eN(c.ordinalNumber(a,{unit:"day"}),e);case"ccc":return c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});case"ccccc":return c.day(a,{width:"narrow",context:"standalone"});case"cccccc":return c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});default:return c.day(a,{width:"wide",context:"standalone"})||c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=e3(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends eK{priority=90;parse(a,b,c){let d=a=>0===a?7:a;switch(b){case"i":case"ii":return eR(b.length,a);case"io":return c.ordinalNumber(a,{unit:"day"});case"iii":return eN(c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiii":return eN(c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiiii":return eN(c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);default:return eN(c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d)}}validate(a,b){return b>=1&&b<=7}set(a,b,c){return(a=function(a,b,c){let d=er(a,void 0),e=function(a,b){let c=er(a,b?.in).getDay();return 0===c?7:c}(d,void 0);return e2(d,b-e,c)}(a,c)).setHours(0,0,0,0),a}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends eK{priority=80;parse(a,b,c){switch(b){case"a":case"aa":case"aaa":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(eT(c),0,0,0),a}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends eK{priority=80;parse(a,b,c){switch(b){case"b":case"bb":case"bbb":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(eT(c),0,0,0),a}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends eK{priority=80;parse(a,b,c){switch(b){case"B":case"BB":case"BBB":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(eT(c),0,0,0),a}incompatibleTokens=["a","b","t","T"]},h:new class extends eK{priority=70;parse(a,b,c){switch(b){case"h":return eO(eL.hour12h,a);case"ho":return c.ordinalNumber(a,{unit:"hour"});default:return eR(b.length,a)}}validate(a,b){return b>=1&&b<=12}set(a,b,c){let d=a.getHours()>=12;return d&&c<12?a.setHours(c+12,0,0,0):d||12!==c?a.setHours(c,0,0,0):a.setHours(0,0,0,0),a}incompatibleTokens=["H","K","k","t","T"]},H:new class extends eK{priority=70;parse(a,b,c){switch(b){case"H":return eO(eL.hour23h,a);case"Ho":return c.ordinalNumber(a,{unit:"hour"});default:return eR(b.length,a)}}validate(a,b){return b>=0&&b<=23}set(a,b,c){return a.setHours(c,0,0,0),a}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends eK{priority=70;parse(a,b,c){switch(b){case"K":return eO(eL.hour11h,a);case"Ko":return c.ordinalNumber(a,{unit:"hour"});default:return eR(b.length,a)}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.getHours()>=12&&c<12?a.setHours(c+12,0,0,0):a.setHours(c,0,0,0),a}incompatibleTokens=["h","H","k","t","T"]},k:new class extends eK{priority=70;parse(a,b,c){switch(b){case"k":return eO(eL.hour24h,a);case"ko":return c.ordinalNumber(a,{unit:"hour"});default:return eR(b.length,a)}}validate(a,b){return b>=1&&b<=24}set(a,b,c){return a.setHours(c<=24?c%24:c,0,0,0),a}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends eK{priority=60;parse(a,b,c){switch(b){case"m":return eO(eL.minute,a);case"mo":return c.ordinalNumber(a,{unit:"minute"});default:return eR(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setMinutes(c,0,0),a}incompatibleTokens=["t","T"]},s:new class extends eK{priority=50;parse(a,b,c){switch(b){case"s":return eO(eL.second,a);case"so":return c.ordinalNumber(a,{unit:"second"});default:return eR(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setSeconds(c,0),a}incompatibleTokens=["t","T"]},S:new class extends eK{priority=30;parse(a,b){return eN(eR(b.length,a),a=>Math.trunc(a*Math.pow(10,-b.length+3)))}set(a,b,c){return a.setMilliseconds(c),a}incompatibleTokens=["t","T"]},X:new class extends eK{priority=10;parse(a,b){switch(b){case"X":return eP(eM.basicOptionalMinutes,a);case"XX":return eP(eM.basic,a);case"XXXX":return eP(eM.basicOptionalSeconds,a);case"XXXXX":return eP(eM.extendedOptionalSeconds,a);default:return eP(eM.extended,a)}}set(a,b,c){return b.timestampIsSet?a:eq(a,a.getTime()-e4(a)-c)}incompatibleTokens=["t","T","x"]},x:new class extends eK{priority=10;parse(a,b){switch(b){case"x":return eP(eM.basicOptionalMinutes,a);case"xx":return eP(eM.basic,a);case"xxxx":return eP(eM.basicOptionalSeconds,a);case"xxxxx":return eP(eM.extendedOptionalSeconds,a);default:return eP(eM.extended,a)}}set(a,b,c){return b.timestampIsSet?a:eq(a,a.getTime()-e4(a)-c)}incompatibleTokens=["t","T","X"]},t:new class extends eK{priority=40;parse(a){return eQ(a)}set(a,b,c){return[eq(a,1e3*c),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends eK{priority=20;parse(a){return eQ(a)}set(a,b,c){return[eq(a,c),{timestampIsSet:!0}]}incompatibleTokens="*"}},e6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,e7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,e8=/^'([^]*?)'?$/,e9=/''/g,fa=/\S/,fb=/[a-zA-Z]/,fc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fd=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,fe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ff=/^([+-])(\d{2})(?::?(\d{2}))?$/;function fg(a){return a?parseInt(a):1}function fh(a){return a&&parseFloat(a.replace(",","."))||0}let fi=[31,null,31,30,31,30,31,31,30,31,30,31];function fj(a){return a%400==0||a%4==0&&a%100!=0}function fk(a){return!(!(a instanceof Date||"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a))&&"number"!=typeof a||isNaN(+er(a)))}function fl(a,...b){let c=eq.bind(null,a||b.find(a=>"object"==typeof a));return b.map(c)}function fm(a,b){let c=er(a,b?.in);return c.setHours(0,0,0,0),c}function fn(a,b,c){let[d,e]=fl(c?.in,a,b),f=fm(d),g=fm(e);return Math.round((f-e4(f)-(g-e4(g)))/864e5)}function fo(a,b){let c=er(a,b?.in);return c.setFullYear(c.getFullYear(),0,1),c.setHours(0,0,0,0),c}function fp(a,b){let c=Math.abs(a).toString().padStart(b,"0");return(a<0?"-":"")+c}let fq={y(a,b){let c=a.getFullYear(),d=c>0?c:1-c;return fp("yy"===b?d%100:d,b.length)},M(a,b){let c=a.getMonth();return"M"===b?String(c+1):fp(c+1,2)},d:(a,b)=>fp(a.getDate(),b.length),a(a,b){let c=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.toUpperCase();case"aaa":return c;case"aaaaa":return c[0];default:return"am"===c?"a.m.":"p.m."}},h:(a,b)=>fp(a.getHours()%12||12,b.length),H:(a,b)=>fp(a.getHours(),b.length),m:(a,b)=>fp(a.getMinutes(),b.length),s:(a,b)=>fp(a.getSeconds(),b.length),S(a,b){let c=b.length;return fp(Math.trunc(a.getMilliseconds()*Math.pow(10,c-3)),b.length)}},fr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fs={G:function(a,b,c){let d=+(a.getFullYear()>0);switch(b){case"G":case"GG":case"GGG":return c.era(d,{width:"abbreviated"});case"GGGGG":return c.era(d,{width:"narrow"});default:return c.era(d,{width:"wide"})}},y:function(a,b,c){if("yo"===b){let b=a.getFullYear();return c.ordinalNumber(b>0?b:1-b,{unit:"year"})}return fq.y(a,b)},Y:function(a,b,c,d){let e=eX(a,d),f=e>0?e:1-e;return"YY"===b?fp(f%100,2):"Yo"===b?c.ordinalNumber(f,{unit:"year"}):fp(f,b.length)},R:function(a,b){return fp(e$(a),b.length)},u:function(a,b){return fp(a.getFullYear(),b.length)},Q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"Q":return String(d);case"QQ":return fp(d,2);case"Qo":return c.ordinalNumber(d,{unit:"quarter"});case"QQQ":return c.quarter(d,{width:"abbreviated",context:"formatting"});case"QQQQQ":return c.quarter(d,{width:"narrow",context:"formatting"});default:return c.quarter(d,{width:"wide",context:"formatting"})}},q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"q":return String(d);case"qq":return fp(d,2);case"qo":return c.ordinalNumber(d,{unit:"quarter"});case"qqq":return c.quarter(d,{width:"abbreviated",context:"standalone"});case"qqqqq":return c.quarter(d,{width:"narrow",context:"standalone"});default:return c.quarter(d,{width:"wide",context:"standalone"})}},M:function(a,b,c){let d=a.getMonth();switch(b){case"M":case"MM":return fq.M(a,b);case"Mo":return c.ordinalNumber(d+1,{unit:"month"});case"MMM":return c.month(d,{width:"abbreviated",context:"formatting"});case"MMMMM":return c.month(d,{width:"narrow",context:"formatting"});default:return c.month(d,{width:"wide",context:"formatting"})}},L:function(a,b,c){let d=a.getMonth();switch(b){case"L":return String(d+1);case"LL":return fp(d+1,2);case"Lo":return c.ordinalNumber(d+1,{unit:"month"});case"LLL":return c.month(d,{width:"abbreviated",context:"standalone"});case"LLLLL":return c.month(d,{width:"narrow",context:"standalone"});default:return c.month(d,{width:"wide",context:"standalone"})}},w:function(a,b,c,d){let e=eZ(a,d);return"wo"===b?c.ordinalNumber(e,{unit:"week"}):fp(e,b.length)},I:function(a,b,c){let d=e_(a);return"Io"===b?c.ordinalNumber(d,{unit:"week"}):fp(d,b.length)},d:function(a,b,c){return"do"===b?c.ordinalNumber(a.getDate(),{unit:"date"}):fq.d(a,b)},D:function(a,b,c){let d=function(a,b){let c=er(a,void 0);return fn(c,fo(c))+1}(a);return"Do"===b?c.ordinalNumber(d,{unit:"dayOfYear"}):fp(d,b.length)},E:function(a,b,c){let d=a.getDay();switch(b){case"E":case"EE":case"EEE":return c.day(d,{width:"abbreviated",context:"formatting"});case"EEEEE":return c.day(d,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},e:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"e":return String(f);case"ee":return fp(f,2);case"eo":return c.ordinalNumber(f,{unit:"day"});case"eee":return c.day(e,{width:"abbreviated",context:"formatting"});case"eeeee":return c.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(e,{width:"short",context:"formatting"});default:return c.day(e,{width:"wide",context:"formatting"})}},c:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"c":return String(f);case"cc":return fp(f,b.length);case"co":return c.ordinalNumber(f,{unit:"day"});case"ccc":return c.day(e,{width:"abbreviated",context:"standalone"});case"ccccc":return c.day(e,{width:"narrow",context:"standalone"});case"cccccc":return c.day(e,{width:"short",context:"standalone"});default:return c.day(e,{width:"wide",context:"standalone"})}},i:function(a,b,c){let d=a.getDay(),e=0===d?7:d;switch(b){case"i":return String(e);case"ii":return fp(e,b.length);case"io":return c.ordinalNumber(e,{unit:"day"});case"iii":return c.day(d,{width:"abbreviated",context:"formatting"});case"iiiii":return c.day(d,{width:"narrow",context:"formatting"});case"iiiiii":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},a:function(a,b,c){let d=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(a,b,c){let d,e=a.getHours();switch(d=12===e?fr.noon:0===e?fr.midnight:e/12>=1?"pm":"am",b){case"b":case"bb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(a,b,c){let d,e=a.getHours();switch(d=e>=17?fr.evening:e>=12?fr.afternoon:e>=4?fr.morning:fr.night,b){case"B":case"BB":case"BBB":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(a,b,c){if("ho"===b){let b=a.getHours()%12;return 0===b&&(b=12),c.ordinalNumber(b,{unit:"hour"})}return fq.h(a,b)},H:function(a,b,c){return"Ho"===b?c.ordinalNumber(a.getHours(),{unit:"hour"}):fq.H(a,b)},K:function(a,b,c){let d=a.getHours()%12;return"Ko"===b?c.ordinalNumber(d,{unit:"hour"}):fp(d,b.length)},k:function(a,b,c){let d=a.getHours();return(0===d&&(d=24),"ko"===b)?c.ordinalNumber(d,{unit:"hour"}):fp(d,b.length)},m:function(a,b,c){return"mo"===b?c.ordinalNumber(a.getMinutes(),{unit:"minute"}):fq.m(a,b)},s:function(a,b,c){return"so"===b?c.ordinalNumber(a.getSeconds(),{unit:"second"}):fq.s(a,b)},S:function(a,b){return fq.S(a,b)},X:function(a,b,c){let d=a.getTimezoneOffset();if(0===d)return"Z";switch(b){case"X":return fu(d);case"XXXX":case"XX":return fv(d);default:return fv(d,":")}},x:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"x":return fu(d);case"xxxx":case"xx":return fv(d);default:return fv(d,":")}},O:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"O":case"OO":case"OOO":return"GMT"+ft(d,":");default:return"GMT"+fv(d,":")}},z:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"z":case"zz":case"zzz":return"GMT"+ft(d,":");default:return"GMT"+fv(d,":")}},t:function(a,b,c){return fp(Math.trunc(a/1e3),b.length)},T:function(a,b,c){return fp(+a,b.length)}};function ft(a,b=""){let c=a>0?"-":"+",d=Math.abs(a),e=Math.trunc(d/60),f=d%60;return 0===f?c+String(e):c+String(e)+b+fp(f,2)}function fu(a,b){return a%60==0?(a>0?"-":"+")+fp(Math.abs(a)/60,2):fv(a,b)}function fv(a,b=""){let c=Math.abs(a);return(a>0?"-":"+")+fp(Math.trunc(c/60),2)+b+fp(c%60,2)}let fw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fy=/^'([^]*?)'?$/,fz=/''/g,fA=/[a-zA-Z]/;function fB(a,b,c){let d=er(a,c?.in);if(isNaN(b))return eq(c?.in||a,NaN);if(!b)return d;let e=d.getDate(),f=eq(c?.in||a,d.getTime());return(f.setMonth(d.getMonth()+b+1,0),e>=f.getDate())?f:(d.setFullYear(f.getFullYear(),f.getMonth(),e),d)}function fC(a,b,c){return eq(c?.in||a,+er(a)+b)}function fD(a,b){let c=er(a)-er(b);return c<0?-1:c>0?1:c}function fE(a){return b=>{let c=(a?Math[a]:Math.trunc)(b);return 0===c?0:c}}function fF(a,b){let c=er(a,b?.in);return c.setHours(23,59,59,999),c}function fG(a,b){let c=er(a,b?.in),d=c.getMonth();return c.setFullYear(c.getFullYear(),d+1,0),c.setHours(23,59,59,999),c}function fH(a,b,c){let[d,e,f]=fl(c?.in,a,a,b),g=fD(e,f),h=Math.abs(function(a,b,c){let[d,e]=fl(void 0,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}(e,f));if(h<1)return 0;1===e.getMonth()&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-g*h);let i=fD(e,f)===-g;(function(a,b){let c=er(a,void 0);return+fF(c,void 0)==+fG(c,b)})(d)&&1===h&&1===fD(d,f)&&(i=!1);let j=g*(h-i);return 0===j?0:j}function fI(a,b,c){let[d,e]=fl(c?.in,a,b),f=fJ(d,e),g=Math.abs(fn(d,e));d.setDate(d.getDate()-f*g);let h=Number(fJ(d,e)===-f),i=f*(g-h);return 0===i?0:i}function fJ(a,b){let c=a.getFullYear()-b.getFullYear()||a.getMonth()-b.getMonth()||a.getDate()-b.getDate()||a.getHours()-b.getHours()||a.getMinutes()-b.getMinutes()||a.getSeconds()-b.getSeconds()||a.getMilliseconds()-b.getMilliseconds();return c<0?-1:c>0?1:c}let fK={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};function fL({machineId:a,data:b,isLoading:e,isDark:f=!1,themeColors:g}){let[h,i]=(0,d.useState)("oee"),[j,k]=(0,d.useState)("7d");return e?(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Cargando gráficos..."})}),(0,c.jsx)("p",{children:"Procesando datos históricos..."})]}):b&&b.oee_history?(0,c.jsxs)("div",{className:"historical-charts",style:{background:f?"linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%)":"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",borderRadius:"20px",padding:"2rem",boxShadow:f?"0 8px 25px rgba(0,0,0,0.3)":"0 8px 25px rgba(0,0,0,0.08)",border:f?`1px solid ${g?.border||"#404040"}`:"none"},children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h4",{className:"mb-1",style:{fontWeight:"700",color:g?.text||(f?"#ffffff":"#333")},children:[(0,c.jsx)("i",{className:"fas fa-chart-line me-2",style:{color:g?.primary||"#667eea"}}),"Análisis Histórico"]}),(0,c.jsx)("p",{className:"mb-0",style:{fontSize:"0.9rem",color:g?.textSecondary||(f?"#a0a0a0":"#6c757d")},children:a?`M\xe1quina: ${a}`:"Vista general de todas las máquinas"})]}),(0,c.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,c.jsxs)("select",{className:"form-select form-select-sm border-0",value:j,onChange:a=>k(a.target.value),style:{width:"140px",background:f?"linear-gradient(135deg, #404040 0%, #505050 100%)":"linear-gradient(135deg, #f8f9ff 0%, #e8f2ff 100%)",borderRadius:"10px",fontWeight:"500",color:g?.text||(f?"#ffffff":"#333"),border:f?`1px solid ${g?.border||"#555"}`:"none"},children:[(0,c.jsx)("option",{value:"1d",children:"Último Día"}),(0,c.jsx)("option",{value:"7d",children:"7 Días"}),(0,c.jsx)("option",{value:"30d",children:"30 Días"})]}),(0,c.jsxs)("button",{className:"btn btn-sm text-white border-0",style:{background:`linear-gradient(135deg, ${g?.primary||"#667eea"} 0%, ${g?.secondary||"#764ba2"} 100%)`,borderRadius:"10px",fontWeight:"600",boxShadow:`0 4px 15px ${g?.primary?g.primary+"40":"rgba(102, 126, 234, 0.3)"}`},children:[(0,c.jsx)("i",{className:"fas fa-download me-2"}),"Exportar"]})]})]}),(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)("div",{className:"d-flex flex-wrap gap-2",children:[{id:"oee",label:"OEE Histórico",icon:"fas fa-tachometer-alt"},{id:"production",label:"Producción",icon:"fas fa-chart-bar"},{id:"downtime",label:"Paradas",icon:"fas fa-pause-circle"},{id:"costs",label:"Costos €",icon:"fas fa-euro-sign"},{id:"operators",label:"Operadores",icon:"fas fa-users"}].map(a=>(0,c.jsxs)("button",{className:`btn px-4 py-2 border-0 ${h===a.id?"text-white":""}`,onClick:()=>i(a.id),style:{borderRadius:"12px",background:h===a.id?`linear-gradient(135deg, ${g?.primary||"#667eea"} 0%, ${g?.secondary||"#764ba2"} 100%)`:f?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",transition:"all 0.3s ease",fontWeight:h===a.id?"600":"500",boxShadow:h===a.id?`0 4px 15px ${g?.primary?g.primary+"40":"rgba(102, 126, 234, 0.3)"}`:"none",minWidth:"130px",color:h===a.id?"#ffffff":g?.textSecondary||(f?"#a0a0a0":"#6c757d"),border:f&&h!==a.id?`1px solid ${g?.border||"#555"}`:"none"},children:[(0,c.jsx)("i",{className:`${a.icon} me-2`}),a.label]},a.id))})}),(0,c.jsxs)("div",{className:"chart-content p-3",style:{background:f?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)",borderRadius:"15px",border:f?`1px solid ${g?.border||"#404040"}`:"none"},children:["oee"===h&&(0,c.jsx)(fM,{data:b.oee_history,isDark:f,themeColors:g}),"production"===h&&(0,c.jsx)(fN,{data:b.production,isDark:f,themeColors:g}),"downtime"===h&&(0,c.jsx)(fO,{data:b.downtime,isDark:f,themeColors:g}),"costs"===h&&(0,c.jsx)(fP,{data:b.cost_analysis,isDark:f,themeColors:g}),"operators"===h&&(0,c.jsx)(fQ,{data:b.operator_metrics,isDark:f,themeColors:g})]}),(0,c.jsxs)("div",{className:"row mt-4",children:[(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15",style:{background:`linear-gradient(135deg, ${g?.success||(f?"#48bb78":"#38a169")} 0%, ${g?.success||(f?"#48bb78":"#38a169")}dd 100%)`,border:"none",boxShadow:f?"0 4px 15px rgba(0,0,0,0.3)":"0 4px 15px rgba(56, 161, 105, 0.2)"},children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",style:{fontWeight:"700"},children:[(b.summary?.avg_oee*100||0).toFixed(1),"%",(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white ms-2"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-tachometer-alt"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem",opacity:.9},children:"OEE Promedio"})}),(0,c.jsxs)("div",{className:"ms-auto text-white",style:{fontSize:"0.8rem",opacity:.8},children:["+",Math.round((b.summary?.avg_oee*100||0)-65),"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15",style:{background:`linear-gradient(135deg, ${g?.primary||(f?"#667eea":"#5a67d8")} 0%, ${g?.primary||(f?"#667eea":"#5a67d8")}dd 100%)`,border:"none",boxShadow:f?"0 4px 15px rgba(0,0,0,0.3)":"0 4px 15px rgba(90, 103, 216, 0.2)"},children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",style:{fontWeight:"700"},children:[b.summary?.total_production?.toLocaleString()||0,(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white ms-2"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-chart-bar"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem",opacity:.9},children:"Producción Total"})}),(0,c.jsx)("div",{className:"ms-auto text-white",style:{fontSize:"0.8rem",opacity:.8},children:"+100%"})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15",style:{background:`linear-gradient(135deg, ${g?.warning||(f?"#ed8936":"#d69e2e")} 0%, ${g?.warning||(f?"#ed8936":"#d69e2e")}dd 100%)`,border:"none",boxShadow:f?"0 4px 15px rgba(0,0,0,0.3)":"0 4px 15px rgba(214, 158, 46, 0.2)"},children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",style:{fontWeight:"700"},children:[b.summary?.total_downtime_hours?.toFixed(1)||0,"h",(0,c.jsx)("i",{className:"bx bxs-down-arrow-alt font-14 text-white ms-2"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-pause-circle"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem",opacity:.9},children:"Paradas (horas)"})}),(0,c.jsxs)("div",{className:"ms-auto text-white",style:{fontSize:"0.8rem",opacity:.8},children:["-",Math.round((b.summary?.total_downtime_hours||0)/10),"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15",style:{background:`linear-gradient(135deg, ${g?.info||(f?"#4299e1":"#3182ce")} 0%, ${g?.info||(f?"#4299e1":"#3182ce")}dd 100%)`,border:"none",boxShadow:f?"0 4px 15px rgba(0,0,0,0.3)":"0 4px 15px rgba(49, 130, 206, 0.2)"},children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",style:{fontWeight:"700"},children:[b.summary?.total_records||0,(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white ms-2"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-database"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem",opacity:.9},children:"Registros Totales"})}),(0,c.jsxs)("div",{className:"ms-auto text-white",style:{fontSize:"0.8rem",opacity:.8},children:["+",Math.round((b.summary?.total_records||0)/100),"%"]})]})]})})})]})]}):(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("i",{className:"fas fa-chart-line text-muted mb-3",style:{fontSize:"3rem"}}),(0,c.jsx)("h5",{className:"text-muted",children:"No hay datos históricos disponibles"})]})}function fM({data:a,isDark:b=!1,themeColors:d}){let e={labels:a.map(a=>new Date(a.periodo)),datasets:[{label:"OEE (%)",data:a.map(a=>Number((100*a.oee).toFixed(2))),borderColor:d?.success||(b?"#48bb78":"#38a169"),backgroundColor:d?.success?d.success+"20":b?"#48bb7820":"#38a16920",tension:.2,fill:!0,borderWidth:3,pointRadius:6,pointHoverRadius:8},{label:"Disponibilidad (%)",data:a.map(a=>Number((100*a.disponibilidad).toFixed(2))),borderColor:d?.info||(b?"#4299e1":"#3182ce"),backgroundColor:d?.info?d.info+"20":b?"#4299e120":"#3182ce20",tension:.2,borderWidth:2,pointRadius:5,pointHoverRadius:7},{label:"Rendimiento (%)",data:a.map(a=>Number((100*a.rendimiento).toFixed(2))),borderColor:d?.warning||(b?"#ed8936":"#d69e2e"),backgroundColor:d?.warning?d.warning+"20":b?"#ed893620":"#d69e2e20",tension:.2,borderWidth:2,pointRadius:5,pointHoverRadius:7},{label:"Calidad (%)",data:a.map(a=>Number((100*a.calidad).toFixed(2))),borderColor:d?.primary||(b?"#667eea":"#5a67d8"),backgroundColor:d?.primary?d.primary+"20":b?"#667eea20":"#5a67d820",tension:.2,borderWidth:2,pointRadius:5,pointHoverRadius:7}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"},padding:20,usePointStyle:!0}},title:{display:!0,text:"Evolución OEE y Componentes",color:d?.text||(b?"#ffffff":"#333"),font:{size:16,weight:"bold"},padding:{top:10,bottom:30}},tooltip:{mode:"index",intersect:!1,backgroundColor:b?"rgba(0,0,0,0.9)":"rgba(255,255,255,0.95)",titleColor:d?.text||(b?"#ffffff":"#333"),bodyColor:d?.text||(b?"#ffffff":"#333"),borderColor:d?.border||(b?"#555":"#ddd"),borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{title:a=>new Date(a[0].label).toLocaleString("es-ES"),label:a=>`${a.dataset.label}: ${a.parsed.y.toFixed(1)}%`}}},scales:{x:{type:"time",time:{displayFormats:{hour:"HH:mm",day:"dd/MM"}},title:{display:!0,text:"Tiempo",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11}},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}},y:{beginAtZero:!0,max:100,title:{display:!0,text:"Porcentaje (%)",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11},callback:a=>`${a}%`},grid:{color:a=>65===a.tick.value?d?.error||(b?"#f56565":"#e53e3e"):d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return(0,c.jsxs)("div",{className:"chart-container",style:{height:"400px"},children:[(0,c.jsx)(em,{data:e,options:f}),(0,c.jsxs)("div",{className:"row mt-4 g-2",children:[(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card border-danger text-center",children:(0,c.jsxs)("div",{className:"card-body py-2",children:[(0,c.jsx)("small",{className:"text-danger fw-bold",children:"Meta OEE"}),(0,c.jsx)("div",{className:"badge bg-danger",children:"65%"})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card border-primary text-center",children:(0,c.jsxs)("div",{className:"card-body py-2",children:[(0,c.jsx)("small",{className:"text-primary fw-bold",children:"Disponibilidad"}),(0,c.jsx)("div",{className:"badge bg-primary",children:"85%"})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card border-warning text-center",children:(0,c.jsxs)("div",{className:"card-body py-2",children:[(0,c.jsx)("small",{className:"text-warning fw-bold",children:"Rendimiento"}),(0,c.jsx)("div",{className:"badge bg-warning",children:"80%"})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card border-info text-center",children:(0,c.jsxs)("div",{className:"card-body py-2",children:[(0,c.jsx)("small",{className:"text-info fw-bold",children:"Calidad"}),(0,c.jsx)("div",{className:"badge bg-info",children:"95%"})]})})})]})]})}function fN({data:a,isDark:b=!1,themeColors:d}){let e={labels:a.map(a=>new Date(a.periodo).toLocaleDateString("es-ES")),datasets:[{label:"Piezas OK",data:a.map(a=>a.piezas_ok),backgroundColor:d?.success||(b?"#48bb78":"#38a169"),borderColor:d?.success||(b?"#48bb78":"#38a169"),borderWidth:2,borderRadius:4},{label:"Piezas NOK",data:a.map(a=>a.piezas_nok),backgroundColor:d?.error||(b?"#f56565":"#e53e3e"),borderColor:d?.error||(b?"#f56565":"#e53e3e"),borderWidth:2,borderRadius:4},{label:"Piezas RW",data:a.map(a=>a.piezas_rw),backgroundColor:d?.warning||(b?"#ed8936":"#d69e2e"),borderColor:d?.warning||(b?"#ed8936":"#d69e2e"),borderWidth:2,borderRadius:4}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"},padding:20,usePointStyle:!0}},title:{display:!0,text:"Producción Diaria por Estado",color:d?.text||(b?"#ffffff":"#333"),font:{size:16,weight:"bold"},padding:{top:10,bottom:30}},tooltip:{backgroundColor:b?"rgba(0,0,0,0.9)":"rgba(255,255,255,0.95)",titleColor:d?.text||(b?"#ffffff":"#333"),bodyColor:d?.text||(b?"#ffffff":"#333"),borderColor:d?.border||(b?"#555":"#ddd"),borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:a=>`${a.dataset.label}: ${a.parsed.y.toLocaleString()} piezas`}}},scales:{x:{stacked:!0,title:{display:!0,text:"Fecha",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11}},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Piezas",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11},callback:a=>a.toLocaleString()},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}}}};return(0,c.jsx)("div",{className:"chart-container",style:{height:"400px"},children:(0,c.jsx)(ek,{type:"bar",data:e,options:f})})}function fO({data:a,isDark:b=!1,themeColors:d}){let e=Object.entries(a.reduce((a,b)=>{let c=b.causa||"Sin especificar";return a[c]=(a[c]||0)+b.duracion_horas,a},{})).sort(([,a],[,b])=>b-a).slice(0,10),f={labels:e.map(([a])=>a),datasets:[{type:"bar",label:"Horas de Parada",data:e.map(([,a])=>Number(a.toFixed(2))),backgroundColor:d?.error||(b?"#f56565":"#e53e3e"),borderColor:d?.error||(b?"#f56565":"#e53e3e"),borderWidth:2,borderRadius:4,yAxisID:"y"},{type:"line",label:"% Acumulado",data:e.map((a,b)=>{let c=e.reduce((a,[,b])=>a+b,0);return Number((e.slice(0,b+1).reduce((a,[,b])=>a+b,0)/c*100).toFixed(1))}),borderColor:d?.info||(b?"#4299e1":"#3182ce"),backgroundColor:d?.info?d.info+"20":b?"#4299e120":"#3182ce20",borderWidth:3,pointRadius:6,pointHoverRadius:8,tension:.3,yAxisID:"y1"}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"},padding:20,usePointStyle:!0}},title:{display:!0,text:"Análisis Pareto - Causas de Parada",color:d?.text||(b?"#ffffff":"#333"),font:{size:16,weight:"bold"},padding:{top:10,bottom:30}},tooltip:{backgroundColor:b?"rgba(0,0,0,0.9)":"rgba(255,255,255,0.95)",titleColor:d?.text||(b?"#ffffff":"#333"),bodyColor:d?.text||(b?"#ffffff":"#333"),borderColor:d?.border||(b?"#555":"#ddd"),borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:a=>0===a.datasetIndex?`${a.dataset.label}: ${a.parsed.y.toFixed(2)} horas`:`${a.dataset.label}: ${a.parsed.y.toFixed(1)}%`}}},scales:{x:{title:{display:!0,text:"Causa de Parada",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:10},maxRotation:45},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}},y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"Horas",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11},callback:a=>`${a}h`},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,max:100,title:{display:!0,text:"% Acumulado",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11},callback:a=>`${a}%`},grid:{drawOnChartArea:!1}}}};return(0,c.jsx)("div",{className:"chart-container",style:{height:"400px"},children:(0,c.jsx)(ek,{type:"bar",data:f,options:g})})}function fP({data:a,isDark:b=!1,themeColors:d}){let e={labels:a.map(a=>a.Cod_maquina),datasets:[{label:"Paradas No Planificadas (€)",data:a.map(a=>a.costo_paradas_no_planificadas_euros),backgroundColor:d?.error||(b?"#f56565":"#e53e3e"),borderColor:d?.error||(b?"#f56565":"#e53e3e"),borderWidth:2,borderRadius:4},{label:"Scrap (€)",data:a.map(a=>a.costo_scrap_euros),backgroundColor:d?.warning||(b?"#ed8936":"#d69e2e"),borderColor:d?.warning||(b?"#ed8936":"#d69e2e"),borderWidth:2,borderRadius:4},{label:"Oportunidad Perdida (€)",data:a.map(a=>a.costo_oportunidad_perdida_euros),backgroundColor:d?.secondary||(b?"#764ba2":"#6b46c1"),borderColor:d?.secondary||(b?"#764ba2":"#6b46c1"),borderWidth:2,borderRadius:4}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"},padding:20,usePointStyle:!0}},title:{display:!0,text:"Análisis de Costos por Máquina (€)",color:d?.text||(b?"#ffffff":"#333"),font:{size:16,weight:"bold"},padding:{top:10,bottom:30}},tooltip:{backgroundColor:b?"rgba(0,0,0,0.9)":"rgba(255,255,255,0.95)",titleColor:d?.text||(b?"#ffffff":"#333"),bodyColor:d?.text||(b?"#ffffff":"#333"),borderColor:d?.border||(b?"#555":"#ddd"),borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:a=>`${a.dataset.label}: €${a.parsed.y.toLocaleString("es-ES",{minimumFractionDigits:2})}`}}},scales:{x:{stacked:!0,title:{display:!0,text:"Máquina",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11}},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Euros (€)",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11},callback:a=>`€${a.toLocaleString("es-ES")}`},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}}}};return(0,c.jsx)("div",{className:"chart-container",style:{height:"400px"},children:(0,c.jsx)(ek,{type:"bar",data:e,options:f})})}function fQ({data:a,isDark:b=!1,themeColors:d}){let e={labels:a.map(a=>a.operario),datasets:[{label:"Piezas/Hora",data:a.map(a=>a.piezas_por_hora),backgroundColor:a.map((a,c)=>{let e=[d?.success||(b?"#48bb78":"#38a169"),d?.info||(b?"#4299e1":"#3182ce"),d?.warning||(b?"#ed8936":"#d69e2e"),d?.primary||(b?"#667eea":"#5a67d8"),d?.secondary||(b?"#764ba2":"#6b46c1")];return e[c%e.length]}),borderColor:a.map((a,c)=>{let e=[d?.success||(b?"#48bb78":"#38a169"),d?.info||(b?"#4299e1":"#3182ce"),d?.warning||(b?"#ed8936":"#d69e2e"),d?.primary||(b?"#667eea":"#5a67d8"),d?.secondary||(b?"#764ba2":"#6b46c1")];return e[c%e.length]}),borderWidth:2,borderRadius:4}]},f={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},title:{display:!0,text:"Productividad por Operador",color:d?.text||(b?"#ffffff":"#333"),font:{size:16,weight:"bold"},padding:{top:10,bottom:30}},tooltip:{backgroundColor:b?"rgba(0,0,0,0.9)":"rgba(255,255,255,0.95)",titleColor:d?.text||(b?"#ffffff":"#333"),bodyColor:d?.text||(b?"#ffffff":"#333"),borderColor:d?.border||(b?"#555":"#ddd"),borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{title:b=>`${a[b[0].dataIndex].operario}`,label:b=>{let c=a[b.dataIndex];return[`Piezas/Hora: ${b.parsed.x.toFixed(2)}`,`Total OK: ${c.total_piezas_ok?.toLocaleString()||"N/A"}`,`Eficiencia: ${(100*(c.eficiencia_promedio||0)).toFixed(1)}%`,`Ranking: #${c.ranking_productividad||"N/A"}`]}}}},scales:{x:{beginAtZero:!0,title:{display:!0,text:"Piezas por Hora",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11},callback:a=>a.toFixed(1)},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}},y:{title:{display:!0,text:"Operador",color:d?.text||(b?"#ffffff":"#333"),font:{size:12,weight:"bold"}},ticks:{color:d?.textSecondary||(b?"#a0a0a0":"#666"),font:{size:11}},grid:{color:d?.border||(b?"#404040":"#e0e0e0"),drawBorder:!1}}}};return(0,c.jsx)("div",{className:"chart-container",style:{height:"400px"},children:(0,c.jsx)(ek,{type:"bar",data:e,options:f})})}function fR({data:a,isLoading:b,machineId:e,isDark:f=!1,themeColors:g}){let[h,i]=(0,d.useState)("today"),[j,k]=(0,d.useState)(!1);if(b)return(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Calculando costos..."})}),(0,c.jsx)("p",{children:"Analizando impacto financiero..."})]});let l=a?.cost_analysis||[],m=l.reduce((a,b)=>a+(b.costo_total_perdidas_euros||0),0);return(0,c.jsxs)("div",{className:"financial-dashboard",children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,c.jsxs)("h5",{className:"mb-0",children:[(0,c.jsx)("i",{className:"fas fa-euro-sign me-2 text-success"}),"Análisis Financiero ",e?`- ${e}`:""]}),(0,c.jsxs)("div",{className:"d-flex gap-2",children:[(0,c.jsxs)("select",{className:"form-select form-select-sm",value:h,onChange:a=>i(a.target.value),style:{width:"150px"},children:[(0,c.jsx)("option",{value:"today",children:"Hoy"}),(0,c.jsx)("option",{value:"week",children:"Esta Semana"}),(0,c.jsx)("option",{value:"month",children:"Este Mes"})]}),(0,c.jsxs)("button",{className:"btn btn-sm btn-primary",children:[(0,c.jsx)("i",{className:"fas fa-file-excel me-1"}),"Exportar P&L"]}),(0,c.jsxs)("a",{className:"btn btn-sm btn-outline-secondary",href:"/SS/scadaPlantav2.html",target:"_blank",rel:"noopener noreferrer",children:[(0,c.jsx)("i",{className:"fas fa-external-link-alt me-1"}),"Abrir SCADA Original"]})]})]}),(0,c.jsxs)("div",{className:"row mb-4",children:[(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-danger",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:["€",m.toFixed(0),(0,c.jsx)("i",{className:"bx bxs-down-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-exclamation-triangle"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Pérdidas Totales"})}),(0,c.jsxs)("div",{className:"ms-auto font-14 text-white",children:["-",Math.round(m/1e4*100)||15,"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-warning",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:["€",l.reduce((a,b)=>a+(b.costo_paradas_no_planificadas_euros||0),0).toFixed(0),(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-pause-circle"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Costo Paradas"})}),(0,c.jsxs)("div",{className:"ms-auto font-14 text-white",children:["+",Math.round(l.reduce((a,b)=>a+(b.costo_paradas_no_planificadas_euros||0),0)/m*100)||40,"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-info",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:["€",l.reduce((a,b)=>a+(b.costo_scrap_euros||0),0).toFixed(0),(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-recycle"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Costo Scrap"})}),(0,c.jsxs)("div",{className:"ms-auto font-14 text-white",children:["+",Math.round(l.reduce((a,b)=>a+(b.costo_scrap_euros||0),0)/m*100)||30,"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-success",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:["€",l.reduce((a,b)=>a+(b.costo_oportunidad_perdida_euros||0),0).toFixed(0),(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-chart-line"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Oportunidad Perdida"})}),(0,c.jsxs)("div",{className:"ms-auto font-14 text-white",children:["+",Math.round(l.reduce((a,b)=>a+(b.costo_oportunidad_perdida_euros||0),0)/m*100)||15,"%"]})]})]})})})]}),(0,c.jsxs)("div",{className:"row mb-4",children:[(0,c.jsx)("div",{className:"col-12 col-lg-8",children:(0,c.jsxs)("div",{className:"card radius-15",children:[(0,c.jsx)("div",{className:"card-header border-bottom-0",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("h5",{className:"mb-0",children:"Calculadora ROI - Acciones de Mejora"})}),(0,c.jsxs)("div",{className:"dropdown ms-auto",children:[(0,c.jsx)("div",{className:"cursor-pointer font-24 dropdown-toggle dropdown-toggle-nocaret","data-bs-toggle":"dropdown",children:(0,c.jsx)("i",{className:"bx bx-dots-horizontal-rounded"})}),(0,c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Acción"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Otra acción"}),(0,c.jsx)("div",{className:"dropdown-divider"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Algo más aquí"})]})]})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)(fS,{costAnalysis:l})})]})}),(0,c.jsx)("div",{className:"col-12 col-lg-4",children:(0,c.jsxs)("div",{className:"card radius-15",children:[(0,c.jsx)("div",{className:"card-header border-bottom-0",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("h5",{className:"mb-0",children:"Metas vs Realidad"})}),(0,c.jsxs)("div",{className:"dropdown ms-auto",children:[(0,c.jsx)("div",{className:"cursor-pointer font-24 dropdown-toggle dropdown-toggle-nocaret","data-bs-toggle":"dropdown",children:(0,c.jsx)("i",{className:"bx bx-dots-horizontal-rounded"})}),(0,c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Acción"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Otra acción"}),(0,c.jsx)("div",{className:"dropdown-divider"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Algo más aquí"})]})]})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)(fT,{data:a})})]})})]}),(0,c.jsxs)("div",{className:"card radius-15",children:[(0,c.jsx)("div",{className:"card-header border-bottom-0",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("h5",{className:"mb-0",children:"Desglose Financiero por Máquina"})}),(0,c.jsx)("div",{className:"ms-auto",children:(0,c.jsxs)("button",{className:"btn btn-primary btn-sm",onClick:()=>k(!j),children:[(0,c.jsx)("i",{className:"fas fa-eye me-1"}),j?"Ocultar":"Mostrar"," Detalles"]})})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped table-hover",children:[(0,c.jsx)("thead",{className:"table-dark",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Máquina"}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-pause-circle me-1"}),"Paradas (€)"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-recycle me-1"}),"Scrap (€)"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-chart-line me-1"}),"Oportunidad (€)"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-calculator me-1"}),"Total (€)"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-percentage me-1"}),"% del Total"]}),(0,c.jsx)("th",{children:"Acciones"})]})}),(0,c.jsx)("tbody",{children:l.sort((a,b)=>b.costo_total_perdidas_euros-a.costo_total_perdidas_euros).map((a,b)=>(0,c.jsxs)("tr",{className:b<3?"table-warning":"",children:[(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"machine-icon me-2",children:(0,c.jsx)("i",{className:"fas fa-cog text-primary",style:{fontSize:"1.2rem"}})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:a.Cod_maquina}),(0,c.jsx)("br",{}),(0,c.jsx)("small",{className:"text-muted",children:a.desc_maquina})]})]})}),(0,c.jsxs)("td",{children:[(0,c.jsxs)("span",{className:"text-danger",children:["€",(a.costo_paradas_no_planificadas_euros||0).toFixed(0)]}),j&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsxs)("small",{className:"text-muted",children:[a.minutos_perdidos_no_planificados||0," min"]})]})]}),(0,c.jsx)("td",{children:(0,c.jsxs)("span",{className:"text-warning",children:["€",(a.costo_scrap_euros||0).toFixed(0)]})}),(0,c.jsx)("td",{children:(0,c.jsxs)("span",{className:"text-info",children:["€",(a.costo_oportunidad_perdida_euros||0).toFixed(0)]})}),(0,c.jsx)("td",{children:(0,c.jsxs)("strong",{className:"text-danger",children:["€",(a.costo_total_perdidas_euros||0).toFixed(0)]})}),(0,c.jsxs)("td",{children:[(0,c.jsx)("div",{className:"progress",style:{width:"60px"},children:(0,c.jsx)("div",{className:"progress-bar bg-secondary",style:{width:`${m>0?a.costo_total_perdidas_euros/m*100:0}%`}})}),(0,c.jsxs)("small",{className:"ms-1",children:[m>0?(a.costo_total_perdidas_euros/m*100).toFixed(1):0,"%"]})]}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"btn-group",role:"group",children:[(0,c.jsx)("button",{className:"btn btn-sm btn-outline-primary",title:"Analizar",children:(0,c.jsx)("i",{className:"fas fa-search"})}),(0,c.jsx)("button",{className:"btn btn-sm btn-outline-success",title:"Plan de Acción",children:(0,c.jsx)("i",{className:"fas fa-tasks"})})]})})]},a.Cod_maquina))}),(0,c.jsx)("tfoot",{className:"table-secondary",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"TOTAL"})}),(0,c.jsx)("th",{className:"text-danger",children:(0,c.jsxs)("strong",{children:["€",l.reduce((a,b)=>a+(b.costo_paradas_no_planificadas_euros||0),0).toFixed(0)]})}),(0,c.jsx)("th",{className:"text-warning",children:(0,c.jsxs)("strong",{children:["€",l.reduce((a,b)=>a+(b.costo_scrap_euros||0),0).toFixed(0)]})}),(0,c.jsx)("th",{className:"text-info",children:(0,c.jsxs)("strong",{children:["€",l.reduce((a,b)=>a+(b.costo_oportunidad_perdida_euros||0),0).toFixed(0)]})}),(0,c.jsx)("th",{className:"text-danger",children:(0,c.jsxs)("strong",{children:["€",m.toFixed(0)]})}),(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"100%"})}),(0,c.jsx)("th",{})]})})]})})})]}),(0,c.jsx)("div",{className:"row mt-4",children:(0,c.jsx)("div",{className:"col-12",children:(0,c.jsxs)("div",{className:"card radius-15",children:[(0,c.jsx)("div",{className:"card-header border-bottom-0 bg-info text-white",children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h5",{className:"mb-0",children:[(0,c.jsx)("i",{className:"fas fa-lightbulb me-2"}),"Insights Financieros Automáticos"]})}),(0,c.jsxs)("div",{className:"dropdown ms-auto",children:[(0,c.jsx)("div",{className:"cursor-pointer font-24 dropdown-toggle dropdown-toggle-nocaret","data-bs-toggle":"dropdown",children:(0,c.jsx)("i",{className:"bx bx-dots-horizontal-rounded"})}),(0,c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Acción"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Otra acción"}),(0,c.jsx)("div",{className:"dropdown-divider"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Algo más aquí"})]})]})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)(fU,{costAnalysis:l,totalLosses:m})})]})})})]})}function fS({costAnalysis:a}){let[b,e]=(0,d.useState)("reduce_downtime"),[f,g]=(0,d.useState)(20),h={reduce_downtime:{label:"Reducir Paradas 20%",description:"Implementar mantenimiento predictivo",cost:15e3,calculate:(a,b)=>a.reduce((a,b)=>a+(b.costo_paradas_no_planificadas_euros||0),0)*(b/100)},improve_quality:{label:"Mejorar Calidad 15%",description:"Calibración y control de proceso",cost:8e3,calculate:(a,b)=>a.reduce((a,b)=>a+(b.costo_scrap_euros||0),0)*(b/100)},optimize_speed:{label:"Optimizar Velocidad 10%",description:"Ajuste de parámetros y eliminar microparadas",cost:5e3,calculate:(a,b)=>a.reduce((a,b)=>a+(b.costo_oportunidad_perdida_euros||0),0)*(b/100)}},i=h[b],j=30*i.calculate(a,f),k=i.cost>0?i.cost/j:0,l=j>0?(12*j-i.cost)/i.cost*100:0;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"row mb-4",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("div",{className:"card border-primary",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("h6",{className:"card-title text-primary",children:[(0,c.jsx)("i",{className:"fas fa-tasks me-2"}),"Acción de Mejora"]}),(0,c.jsx)("select",{className:"form-select",value:b,onChange:a=>e(a.target.value),children:Object.entries(h).map(([a,b])=>(0,c.jsx)("option",{value:a,children:b.label},a))}),(0,c.jsx)("small",{className:"text-muted mt-2",children:i.description})]})})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("div",{className:"card border-info",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("h6",{className:"card-title text-info",children:[(0,c.jsx)("i",{className:"fas fa-percentage me-2"}),"Mejora Esperada"]}),(0,c.jsx)("input",{type:"range",className:"form-range",min:"5",max:"50",value:f,onChange:a=>g(parseInt(a.target.value))}),(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[(0,c.jsx)("small",{className:"text-muted",children:"5%"}),(0,c.jsxs)("div",{className:"badge bg-info fs-6",children:[f,"%"]}),(0,c.jsx)("small",{className:"text-muted",children:"50%"})]})]})})})]}),(0,c.jsxs)("div",{className:"row g-3",children:[(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsx)("div",{className:"card border-success text-center",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("i",{className:"fas fa-euro-sign text-success mb-2",style:{fontSize:"2rem"}}),(0,c.jsx)("h6",{className:"card-title text-success",children:"Inversión"}),(0,c.jsxs)("h4",{className:"text-success",children:["€",i.cost.toLocaleString()]})]})})}),(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsx)("div",{className:"card border-primary text-center",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("i",{className:"fas fa-chart-line text-primary mb-2",style:{fontSize:"2rem"}}),(0,c.jsx)("h6",{className:"card-title text-primary",children:"Ahorro Mensual"}),(0,c.jsxs)("h4",{className:"text-primary",children:["€",j.toFixed(0)]})]})})}),(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsx)("div",{className:"card border-warning text-center",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("i",{className:"fas fa-clock text-warning mb-2",style:{fontSize:"2rem"}}),(0,c.jsx)("h6",{className:"card-title text-warning",children:"Payback"}),(0,c.jsxs)("h4",{className:"text-warning",children:[k.toFixed(1)," meses"]})]})})}),(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsx)("div",{className:"card border-info text-center",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("i",{className:"fas fa-percentage text-info mb-2",style:{fontSize:"2rem"}}),(0,c.jsx)("h6",{className:"card-title text-info",children:"ROI Anual"}),(0,c.jsxs)("h4",{className:"text-info",children:[l.toFixed(0),"%"]})]})})})]})]})}function fT({data:a}){let b={daily_loss:a?.cost_analysis?.reduce((a,b)=>a+(b.costo_total_perdidas_euros||0),0)||0,downtime_cost:a?.cost_analysis?.reduce((a,b)=>a+(b.costo_paradas_no_planificadas_euros||0),0)||0,scrap_cost:a?.cost_analysis?.reduce((a,b)=>a+(b.costo_scrap_euros||0),0)||0,oee_actual:100*(a?.summary?.avg_oee||0)},d=[{label:"Pérdida Diaria",target:1e3,actual:b.daily_loss,format:"euro"},{label:"Costo Paradas",target:500,actual:b.downtime_cost,format:"euro"},{label:"Costo Scrap",target:300,actual:b.scrap_cost,format:"euro"},{label:"OEE",target:65,actual:b.oee_actual,format:"percent"}];return(0,c.jsx)("div",{className:"target-analysis",children:d.map((a,b)=>{let d=a.target>0?a.actual/a.target*100:0,e="OEE"===a.label?d>=100:d<=100;return(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,c.jsx)("h6",{className:"mb-0",children:a.label}),(0,c.jsxs)("div",{className:"text-end",children:[(0,c.jsxs)("div",{className:`fw-bold ${e?"text-success":"text-danger"}`,children:["euro"===a.format?"€":"",a.actual.toFixed(+("euro"!==a.format)),"percent"===a.format?"%":""]}),(0,c.jsxs)("small",{className:"text-muted",children:["Meta: ","euro"===a.format?"€":"",a.target,"percent"===a.format?"%":""]})]})]}),(0,c.jsx)("div",{className:"progress mb-2",style:{height:"12px"},children:(0,c.jsx)("div",{className:`progress-bar ${e?"bg-success":"bg-danger"}`,style:{width:`${Math.min(Math.abs(d),150)}%`}})}),(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,c.jsx)("small",{className:"text-muted",children:"Desviación"}),(0,c.jsxs)("div",{className:`badge ${e?"bg-success":"bg-danger"}`,children:[d>0?"+":"",d.toFixed(1),"%"]})]}),Math.abs(d-100)>20&&(0,c.jsx)("div",{className:`alert alert-${e?"success":"warning"} py-1 mt-2`,children:(0,c.jsxs)("small",{children:[(0,c.jsx)("i",{className:`fas fa-${e?"check-circle":"exclamation-triangle"} me-1`}),e?"¡Objetivo cumplido!":"Requiere atención"]})})]},b)})})}function fU({costAnalysis:a,totalLosses:b}){let d=[],e=a.sort((a,b)=>b.costo_total_perdidas_euros-a.costo_total_perdidas_euros).slice(0,3);if(e.length>0){let a=e.reduce((a,b)=>a+b.costo_total_perdidas_euros,0);d.push(`💰 Las 3 m\xe1quinas m\xe1s costosas (${e.map(a=>a.Cod_maquina).join(", ")}) representan ${(a/b*100).toFixed(1)}% de las p\xe9rdidas totales.`)}let f=a.reduce((a,b)=>b.costo_oportunidad_perdida_euros>a.costo_oportunidad_perdida_euros?b:a,a[0]||{});if(f?.costo_oportunidad_perdida_euros>100&&d.push(`⚡ Mayor oportunidad de mejora: ${f.Cod_maquina} con €${f.costo_oportunidad_perdida_euros.toFixed(2)} en velocidad sub\xf3ptima.`),d.push(`📈 Proyecci\xf3n anual: €${(365*b).toLocaleString()} en p\xe9rdidas si mantiene el ritmo actual.`),b>500){let a=e.reduce((a,b)=>a+b.costo_total_perdidas_euros,0);d.push(`🎯 Recomendaci\xf3n: Enfocar esfuerzos en las top 3 m\xe1quinas podr\xeda reducir €${(.3*a).toFixed(2)}/d\xeda con acciones espec\xedficas.`)}return(0,c.jsxs)("div",{className:"financial-insights",children:[0===d.length?(0,c.jsxs)("div",{className:"text-center py-4",children:[(0,c.jsx)("i",{className:"fas fa-chart-line text-success mb-3",style:{fontSize:"3rem"}}),(0,c.jsx)("h6",{className:"text-success",children:"¡Excelente rendimiento financiero!"}),(0,c.jsx)("p",{className:"text-muted",children:"No se detectaron problemas críticos en el análisis."})]}):(0,c.jsx)("div",{className:"row",children:d.map((a,b)=>(0,c.jsx)("div",{className:"col-md-6 mb-3",children:(0,c.jsx)("div",{className:"card border-warning",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-flex align-items-start",children:[(0,c.jsx)("i",{className:"fas fa-lightbulb text-warning me-3 mt-1",style:{fontSize:"1.2rem"}}),(0,c.jsx)("div",{className:"flex-grow-1",children:(0,c.jsx)("p",{className:"mb-0",children:a})})]})})})},b))}),a.length>0&&(0,c.jsx)("div",{className:"row mt-4",children:(0,c.jsx)("div",{className:"col-12",children:(0,c.jsx)("div",{className:"card border-success",children:(0,c.jsxs)("div",{className:"card-body text-center",children:[(0,c.jsxs)("h6",{className:"text-success mb-2",children:[(0,c.jsx)("i",{className:"fas fa-trophy me-2"}),"Máquina Más Eficiente"]}),(0,c.jsx)("p",{className:"mb-1",children:(0,c.jsx)("strong",{children:a.reduce((a,b)=>b.costo_total_perdidas_euros<a.costo_total_perdidas_euros?b:a).Cod_maquina})}),(0,c.jsxs)("small",{className:"text-muted",children:["Menor costo de pérdidas: €",a.reduce((a,b)=>b.costo_total_perdidas_euros<a.costo_total_perdidas_euros?b:a).costo_total_perdidas_euros.toFixed(0)]})]})})})}),(0,c.jsxs)("div",{className:"switcher-body",children:[(0,c.jsx)("button",{className:"btn btn-primary btn-switcher shadow-sm",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasScrolling","aria-controls":"offcanvasScrolling",children:(0,c.jsx)("i",{className:"bx bx-cog bx-spin"})}),(0,c.jsxs)("div",{className:"offcanvas offcanvas-end shadow border-start-0 p-2","data-bs-scroll":"true","data-bs-backdrop":"false",tabIndex:-1,id:"offcanvasScrolling",children:[(0,c.jsxs)("div",{className:"offcanvas-header border-bottom",children:[(0,c.jsx)("h5",{className:"offcanvas-title",id:"offcanvasScrollingLabel",children:"Personalizador de Tema"}),(0,c.jsx)("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas"})]}),(0,c.jsxs)("div",{className:"offcanvas-body",children:[(0,c.jsx)("h6",{className:"mb-0",children:"Variación de Tema"}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"lightmode",value:"option1",defaultChecked:!0}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"lightmode",children:"Claro"})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"darkmode",value:"option2"}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"darkmode",children:"Oscuro"})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"darksidebar",value:"option3"}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"darksidebar",children:"Barra Lateral Oscura"})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"ColorLessIcons",value:"option4"}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"ColorLessIcons",children:"Iconos sin Color"})]})]})]})]})]})}cj._date.override({_id:"date-fns",formats:function(){return fK},parse:function(a,b){if(null==a)return null;let c=typeof a;return"number"===c||a instanceof Date?a=er(a):"string"===c&&(a="string"==typeof b?function(a,b,c,d){let e=()=>eq(d?.in||c,NaN),f=Object.assign({},eG),g=d?.locale??f.locale??ey,h=d?.firstWeekContainsDate??d?.locale?.options?.firstWeekContainsDate??f.firstWeekContainsDate??f.locale?.options?.firstWeekContainsDate??1,i=d?.weekStartsOn??d?.locale?.options?.weekStartsOn??f.weekStartsOn??f.locale?.options?.weekStartsOn??0;if(!b)return a?e():er(c,d?.in);let j={firstWeekContainsDate:h,weekStartsOn:i,locale:g},k=[new eJ(d?.in,c)],l=b.match(e7).map(a=>{let b=a[0];return b in eB?(0,eB[b])(a,g.formatLong):a}).join("").match(e6),m=[];for(let c of l){var n,o;!d?.useAdditionalWeekYearTokens&&(n=c,eD.test(n))&&eF(c,b,a),!d?.useAdditionalDayOfYearTokens&&(o=c,eC.test(o))&&eF(c,b,a);let f=c[0],h=e5[f];if(h){let{incompatibleTokens:b}=h;if(Array.isArray(b)){let a=m.find(a=>b.includes(a.token)||a.token===f);if(a)throw RangeError(`The format string mustn't contain \`${a.fullToken}\` and \`${c}\` at the same time`)}else if("*"===h.incompatibleTokens&&m.length>0)throw RangeError(`The format string mustn't contain \`${c}\` and any other token at the same time`);m.push({token:f,fullToken:c});let d=h.run(a,c,g.match,j);if(!d)return e();k.push(d.setter),a=d.rest}else{if(f.match(fb))throw RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");if("''"===c?c="'":"'"===f&&(c=c.match(e8)[1].replace(e9,"'")),0!==a.indexOf(c))return e();a=a.slice(c.length)}}if(a.length>0&&fa.test(a))return e();let p=k.map(a=>a.priority).sort((a,b)=>b-a).filter((a,b,c)=>c.indexOf(a)===b).map(a=>k.filter(b=>b.priority===a).sort((a,b)=>b.subPriority-a.subPriority)).map(a=>a[0]),q=er(c,d?.in);if(isNaN(+q))return e();let r={};for(let a of p){if(!a.validate(q,j))return e();let b=a.set(q,r,j);Array.isArray(b)?(q=b[0],Object.assign(r,b[1])):q=b}return q}(a,b,new Date,this.options):function(a,b){let c,d,e=()=>eq(b?.in,NaN),f=b?.additionalDigits??2,g=function(a){let b,c={},d=a.split(fc.dateTimeDelimiter);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],fc.timeZoneDelimiter.test(c.date)&&(c.date=a.split(fc.timeZoneDelimiter)[0],b=a.substr(c.date.length,a.length))),b){let a=fc.timezone.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(g.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(g.date,f);c=function(a,b){var c,d,e,f,g,h,i,j;if(null===b)return new Date(NaN);let k=a.match(fd);if(!k)return new Date(NaN);let l=!!k[4],m=fg(k[1]),n=fg(k[2])-1,o=fg(k[3]),p=fg(k[4]),q=fg(k[5])-1;if(l){return(c=0,d=p,e=q,d>=1&&d<=53&&e>=0&&e<=6)?function(a,b,c){let d=new Date(0);d.setUTCFullYear(a,0,4);let e=d.getUTCDay()||7;return d.setUTCDate(d.getUTCDate()+((b-1)*7+c+1-e)),d}(b,p,q):new Date(NaN)}{let a=new Date(0);return(f=b,g=n,h=o,g>=0&&g<=11&&h>=1&&h<=(fi[g]||(fj(f)?29:28))&&(i=b,(j=m)>=1&&j<=(fj(i)?366:365)))?(a.setUTCFullYear(b,n,Math.max(m,o)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!c||isNaN(+c))return e();let h=+c,i=0;if(g.time&&isNaN(i=function(a){var b,c,d;let e=a.match(fe);if(!e)return NaN;let f=fh(e[1]),g=fh(e[2]),h=fh(e[3]);return(b=f,c=g,d=h,24===b?0===c&&0===d:d>=0&&d<60&&c>=0&&c<60&&b>=0&&b<25)?36e5*f+6e4*g+1e3*h:NaN}(g.time)))return e();if(g.timezone){if(isNaN(d=function(a){var b,c;if("Z"===a)return 0;let d=a.match(ff);if(!d)return 0;let e="+"===d[1]?-1:1,f=parseInt(d[2]),g=d[3]&&parseInt(d[3])||0;return(b=0,(c=g)>=0&&c<=59)?e*(36e5*f+6e4*g):NaN}(g.timezone)))return e()}else{let a=new Date(h+i),c=er(0,b?.in);return c.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),c.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),c}return er(h+i+d,b?.in)}(a,this.options)),fk(a)?a.getTime():null},format:function(a,b){return function(a,b,c){let d=c?.locale??eG.locale??ey,e=c?.firstWeekContainsDate??c?.locale?.options?.firstWeekContainsDate??eG.firstWeekContainsDate??eG.locale?.options?.firstWeekContainsDate??1,f=c?.weekStartsOn??c?.locale?.options?.weekStartsOn??eG.weekStartsOn??eG.locale?.options?.weekStartsOn??0,g=er(a,c?.in);if(!fk(g))throw RangeError("Invalid time value");let h=b.match(fx).map(a=>{let b=a[0];return"p"===b||"P"===b?(0,eB[b])(a,d.formatLong):a}).join("").match(fw).map(a=>{if("''"===a)return{isToken:!1,value:"'"};let b=a[0];if("'"===b)return{isToken:!1,value:function(a){let b=a.match(fy);return b?b[1].replace(fz,"'"):a}(a)};if(fs[b])return{isToken:!0,value:a};if(b.match(fA))throw RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:a}});d.localize.preprocessor&&(h=d.localize.preprocessor(g,h));let i={firstWeekContainsDate:e,weekStartsOn:f,locale:d};return h.map(e=>{if(!e.isToken)return e.value;let f=e.value;return(!c?.useAdditionalWeekYearTokens&&eD.test(f)||!c?.useAdditionalDayOfYearTokens&&eC.test(f))&&eF(f,b,String(a)),(0,fs[f[0]])(g,f,d.localize,i)}).join("")}(a,b,this.options)},add:function(a,b,c){switch(c){case"millisecond":return fC(a,b);case"second":return fC(a,1e3*b,void 0);case"minute":let d=er(a,void 0);return d.setTime(d.getTime()+6e4*b),d;case"hour":return fC(a,36e5*b,void 0);case"day":return e2(a,b);case"week":return e2(a,7*b,void 0);case"month":return fB(a,b);case"quarter":return fB(a,3*b,void 0);case"year":return fB(a,12*b,void 0);default:return a}},diff:function(a,b,c){var d,e,f;switch(c){case"millisecond":return er(a)-er(b);case"second":return function(a,b,c){let d=(er(a)-er(b))/1e3;return fE(void 0)(d)}(a,b);case"minute":return function(a,b,c){let d=(er(a)-er(b))/6e4;return fE(void 0)(d)}(a,b);case"hour":let[g,h]=fl(void 0,a,b);return fE(d?.roundingMethod)((g-h)/36e5);case"day":return fI(a,b);case"week":let i=fI(a,b,void 0)/7;return fE(e?.roundingMethod)(i);case"month":return fH(a,b);case"quarter":let j=fH(a,b,void 0)/3;return fE(f?.roundingMethod)(j);case"year":return function(a,b,c){let[d,e]=fl(void 0,a,b),f=fD(d,e),g=Math.abs(function(a,b,c){let[d,e]=fl(void 0,a,b);return d.getFullYear()-e.getFullYear()}(d,e));d.setFullYear(1584),e.setFullYear(1584);let h=fD(d,e)===-f,i=f*(g-h);return 0===i?0:i}(a,b);default:return 0}},startOf:function(a,b,c){switch(b){case"second":let d=er(a,void 0);return d.setMilliseconds(0),d;case"minute":let e=er(a,void 0);return e.setSeconds(0,0),e;case"hour":let f=er(a,void 0);return f.setMinutes(0,0,0),f;case"day":return fm(a);case"week":return eW(a);case"isoWeek":return eW(a,{weekStartsOn:+c});case"month":let g=er(a,void 0);return g.setDate(1),g.setHours(0,0,0,0),g;case"quarter":let h=er(a,void 0),i=h.getMonth();return h.setMonth(i-i%3,1),h.setHours(0,0,0,0),h;case"year":return fo(a);default:return a}},endOf:function(a,b){switch(b){case"second":let c=er(a,void 0);return c.setMilliseconds(999),c;case"minute":let d=er(a,void 0);return d.setSeconds(59,999),d;case"hour":let e=er(a,void 0);return e.setMinutes(59,59,999),e;case"day":return fF(a);case"week":return function(a,b){let c=(void 0)??void 0??eG.weekStartsOn??eG.locale?.options?.weekStartsOn??0,d=er(a,b?.in),e=d.getDay();return d.setDate(d.getDate()+((e<c?-7:0)+6-(e-c))),d.setHours(23,59,59,999),d}(a);case"month":return fG(a);case"quarter":let f=er(a,void 0),g=f.getMonth();return f.setMonth(g-g%3+3,0),f.setHours(23,59,59,999),f;case"year":let h=er(a,void 0),i=h.getFullYear();return h.setFullYear(i+1,0,0),h.setHours(23,59,59,999),h;default:return a}}}),c5.register(dW,dZ,di,dg,dI,dU,dG,ee,dp);var fV=a.i(80923),fW=a.i(75815);function fX({data:a,onMachineClick:b,className:e=""}){let[f,g]=(0,d.useState)("bar"),[h,i]=(0,d.useState)("ok"),[j,k]=(0,d.useState)(!1),l=(0,d.useRef)(null),m=a||[],n=m.map(a=>a.machineName),o=m.map(a=>a[h]),p=a=>({ok:"Piezas OK",nok:"Piezas NOK",rw:"Rechazos",efficiency:"Eficiencia (%)"})[a]||a,q=a=>({ok:"#28a745",nok:"#dc3545",rw:"#ffc107",efficiency:"#007bff"})[a]||"#6c757d",r={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:`Producci\xf3n por M\xe1quina - ${p(h)}`,font:{size:16,weight:"bold"},padding:{top:10,bottom:30}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#ccc",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(a){let b=a.dataset.label||"";return b&&(b+=": "),b+=a.parsed.y.toLocaleString("es-ES"),"efficiency"===h&&(b+="%"),b}}}},scales:"bar"===f?{y:{beginAtZero:!0,ticks:{callback:function(a){return"efficiency"===h?a+"%":a.toLocaleString("es-ES")}}},x:{ticks:{maxRotation:45,minRotation:45}}}:void 0,onClick:(a,c)=>{if(c.length>0&&b){let a=c[0].index,d=m[a]?.machineId;d&&b(d)}}},s={labels:n,datasets:[{label:p(h),data:o,backgroundColor:"doughnut"===f?["#28a745","#dc3545","#ffc107","#007bff","#17a2b8","#fd7e14","#e83e8c","#6f42c1"]:q(h),borderColor:"line"===f?q(h):"#fff",borderWidth:"line"===f?2:1,fill:"line"===f,tension:.4,pointBackgroundColor:q(h),pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},t=a=>{k(!0),i(a),setTimeout(()=>k(!1),300)},u=a=>{k(!0),g(a),setTimeout(()=>k(!1),300)};return(0,c.jsxs)("div",{className:`jsx-a870e2cb7f97e23e machine-production-chart ${e}`,children:[(0,c.jsxs)("div",{className:"jsx-a870e2cb7f97e23e chart-header",children:[(0,c.jsx)("div",{className:"jsx-a870e2cb7f97e23e metric-buttons",children:(0,c.jsxs)("div",{role:"group",className:"jsx-a870e2cb7f97e23e btn-group",children:[(0,c.jsxs)("button",{type:"button",onClick:()=>t("ok"),className:`jsx-a870e2cb7f97e23e btn ${"ok"===h?"btn-success":"btn-outline-success"}`,children:[(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-check me-1"}),"Piezas OK"]}),(0,c.jsxs)("button",{type:"button",onClick:()=>t("nok"),className:`jsx-a870e2cb7f97e23e btn ${"nok"===h?"btn-danger":"btn-outline-danger"}`,children:[(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-times me-1"}),"Piezas NOK"]}),(0,c.jsxs)("button",{type:"button",onClick:()=>t("rw"),className:`jsx-a870e2cb7f97e23e btn ${"rw"===h?"btn-warning":"btn-outline-warning"}`,children:[(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-redo me-1"}),"Rechazos"]}),(0,c.jsxs)("button",{type:"button",onClick:()=>t("efficiency"),className:`jsx-a870e2cb7f97e23e btn ${"efficiency"===h?"btn-primary":"btn-outline-primary"}`,children:[(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-chart-line me-1"}),"Eficiencia"]})]})}),(0,c.jsx)("div",{className:"jsx-a870e2cb7f97e23e chart-type-buttons",children:(0,c.jsxs)("div",{role:"group",className:"jsx-a870e2cb7f97e23e btn-group",children:[(0,c.jsx)("button",{type:"button",onClick:()=>u("bar"),title:"Gráfico de Barras",className:`jsx-a870e2cb7f97e23e btn ${"bar"===f?"btn-primary":"btn-outline-primary"}`,children:(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-chart-bar"})}),(0,c.jsx)("button",{type:"button",onClick:()=>u("line"),title:"Gráfico de Líneas",className:`jsx-a870e2cb7f97e23e btn ${"line"===f?"btn-primary":"btn-outline-primary"}`,children:(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-chart-line"})}),(0,c.jsx)("button",{type:"button",onClick:()=>u("doughnut"),title:"Gráfico Circular",className:`jsx-a870e2cb7f97e23e btn ${"doughnut"===f?"btn-primary":"btn-outline-primary"}`,children:(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-chart-pie"})})]})})]}),(0,c.jsx)("div",{className:"jsx-a870e2cb7f97e23e chart-container",children:(0,c.jsx)("div",{className:"jsx-a870e2cb7f97e23e chart-wrapper",children:(()=>{if(j)return(0,c.jsx)("div",{className:"chart-loading",children:(0,c.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Cargando..."})})});switch(f){case"doughnut":return(0,c.jsx)(eo,{ref:l,data:s,options:r});case"line":return(0,c.jsx)(em,{ref:l,data:s,options:r});default:return(0,c.jsx)(en,{ref:l,data:s,options:r})}})()})}),(0,c.jsx)("div",{className:"jsx-a870e2cb7f97e23e chart-info",children:(0,c.jsxs)("small",{className:"jsx-a870e2cb7f97e23e text-muted",children:[(0,c.jsx)("i",{className:"jsx-a870e2cb7f97e23e fas fa-info-circle me-1"}),"Haz clic en las barras para ver detalles de cada máquina"]})}),(0,c.jsx)(fW.default,{id:"a870e2cb7f97e23e",children:".machine-production-chart.jsx-a870e2cb7f97e23e{background:#fff;border-radius:15px;margin:1rem 0;padding:1.5rem;box-shadow:0 4px 15px #0000001a}.chart-header.jsx-a870e2cb7f97e23e{flex-wrap:wrap;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:1.5rem;display:flex}.metric-buttons.jsx-a870e2cb7f97e23e .btn-group.jsx-a870e2cb7f97e23e,.chart-type-buttons.jsx-a870e2cb7f97e23e .btn-group.jsx-a870e2cb7f97e23e{box-shadow:0 2px 4px #0000001a}.chart-container.jsx-a870e2cb7f97e23e{height:400px;margin:1rem 0;position:relative}.chart-wrapper.jsx-a870e2cb7f97e23e{width:100%;height:100%;position:relative}.chart-loading.jsx-a870e2cb7f97e23e{background:#fffc;border-radius:10px;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.chart-info.jsx-a870e2cb7f97e23e{text-align:center;margin-top:1rem}.btn-group.jsx-a870e2cb7f97e23e .btn.jsx-a870e2cb7f97e23e{margin:0 2px;transition:all .3s;border-radius:20px!important}.btn-group.jsx-a870e2cb7f97e23e .btn.jsx-a870e2cb7f97e23e:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}@media (width<=768px){.chart-header.jsx-a870e2cb7f97e23e{flex-direction:column;align-items:stretch}.metric-buttons.jsx-a870e2cb7f97e23e .btn-group.jsx-a870e2cb7f97e23e,.chart-type-buttons.jsx-a870e2cb7f97e23e .btn-group.jsx-a870e2cb7f97e23e{width:100%}.chart-container.jsx-a870e2cb7f97e23e{height:300px}.btn-group.jsx-a870e2cb7f97e23e .btn.jsx-a870e2cb7f97e23e{flex:1;font-size:.875rem}}@media (width<=480px){.machine-production-chart.jsx-a870e2cb7f97e23e{padding:1rem}.chart-container.jsx-a870e2cb7f97e23e{height:250px}.btn-group.jsx-a870e2cb7f97e23e .btn.jsx-a870e2cb7f97e23e{padding:.375rem .5rem;font-size:.8rem}}"})]})}c5.register(dW,dZ,dp,dI,dU,dG,class extends cB{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:a=>"borderDash"!==a};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(a){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,a&&Object.assign(this,a)}inRange(a,b,c){let{angle:d,distance:e}=aq(this.getProps(["x","y"],c),{x:a,y:b}),{startAngle:f,endAngle:g,innerRadius:h,outerRadius:i,circumference:j}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],c),k=(this.options.spacing+this.options.borderWidth)/2,l=M(j,g-f),m=au(d,f,g)&&f!==g,n=l>=ac||m,o=aw(e,h+k,i+k);return n&&o}getCenterPoint(a){let{x:b,y:c,startAngle:d,endAngle:e,innerRadius:f,outerRadius:g}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],a),{offset:h,spacing:i}=this.options,j=(d+e)/2,k=(f+g+i+h)/2;return{x:b+Math.cos(j)*k,y:c+Math.sin(j)*k}}tooltipPosition(a){return this.getCenterPoint(a)}draw(a){let{options:b,circumference:c}=this,d=(b.offset||0)/4,e=(b.spacing||0)/2,f=b.circular;if(this.pixelMargin=.33*("inner"===b.borderAlign),this.fullCircles=c>ac?Math.floor(c/ac):0,0===c||this.innerRadius<0||this.outerRadius<0)return;a.save();let g=(this.startAngle+this.endAngle)/2;a.translate(Math.cos(g)*d,Math.sin(g)*d);let h=d*(1-Math.sin(Math.min(ab,c||0)));a.fillStyle=b.backgroundColor,a.strokeStyle=b.borderColor,function(a,b,c,d,e){let{fullCircles:f,startAngle:g,circumference:h}=b,i=b.endAngle;if(f){c8(a,b,c,d,i,e);for(let b=0;b<f;++b)a.fill();isNaN(h)||(i=g+(h%ac||ac))}c8(a,b,c,d,i,e),a.fill()}(a,this,h,e,f),function(a,b,c,d,e){let{fullCircles:f,startAngle:g,circumference:h,options:i}=b,{borderWidth:j,borderJoinStyle:k,borderDash:l,borderDashOffset:m,borderRadius:n}=i,o="inner"===i.borderAlign;if(!j)return;a.setLineDash(l||[]),a.lineDashOffset=m,o?(a.lineWidth=2*j,a.lineJoin=k||"round"):(a.lineWidth=j,a.lineJoin=k||"bevel");let p=b.endAngle;if(f){c8(a,b,c,d,p,e);for(let b=0;b<f;++b)a.stroke();isNaN(h)||(p=g+(h%ac||ac))}o&&function(a,b,c){let{startAngle:d,pixelMargin:e,x:f,y:g,outerRadius:h,innerRadius:i}=b,j=e/h;a.beginPath(),a.arc(f,g,h,d-j,c+j),i>e?(j=e/i,a.arc(f,g,i,c+j,d-j,!0)):a.arc(f,g,e,c+af,d-af),a.closePath(),a.clip()}(a,b,p),i.selfJoin&&p-g>=ab&&0===n&&"miter"!==k&&function(a,b,c){let{startAngle:d,x:e,y:f,outerRadius:g,innerRadius:h,options:i}=b,{borderWidth:j,borderJoinStyle:k}=i,l=Math.min(j/g,at(d-c));if(a.beginPath(),a.arc(e,f,g-j/2,d+l/2,c-l/2),h>0){let b=Math.min(j/h,at(d-c));a.arc(e,f,h+j/2,c-b/2,d+b/2,!0)}else{let b=Math.min(j/2,g*at(d-c));if("round"===k)a.arc(e,f,b,c-ab/2,d+ab/2,!0);else if("bevel"===k){let g=2*b*b,h=-g*Math.cos(c+ab/2)+e,i=-g*Math.sin(c+ab/2)+f,j=g*Math.cos(d+ab/2)+e,k=g*Math.sin(d+ab/2)+f;a.lineTo(h,i),a.lineTo(j,k)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}(a,b,p),f||(c8(a,b,c,d,p,e),a.stroke())}(a,this,h,e,f),a.restore()}},di,dg,{id:"filler",afterDatasetsUpdate(a,b,c){let d,e,f,g,h=(a.data.datasets||[]).length,i=[];for(e=0;e<h;++e)f=(d=a.getDatasetMeta(e)).dataset,g=null,f&&f.options&&f instanceof dg&&(g={visible:a.isDatasetVisible(e),index:e,fill:function(a,b,c){var d,e,f,g;let h=function(a){let b=a.options,c=b.fill,d=M(c&&c.target,c);return void 0===d&&(d=!!b.backgroundColor),!1!==d&&null!==d&&(!0===d?"origin":d)}(a);if(J(h))return!isNaN(h.value)&&h;let i=parseFloat(h);return K(i)&&Math.floor(i)===i?(d=h[0],e=b,f=i,g=c,("-"===d||"+"===d)&&(f=e+f),f!==e&&!(f<0)&&!(f>=g)&&f):["origin","start","end","stack","shape"].indexOf(h)>=0&&h}(f,e,h),chart:a,axis:d.controller.options.indexAxis,scale:d.vScale,line:f}),d.$filler=g,i.push(g);for(e=0;e<h;++e)(g=i[e])&&!1!==g.fill&&(g.fill=function(a,b,c){let d,e=a[b].fill,f=[b];if(!c)return e;for(;!1!==e&&-1===f.indexOf(e);){if(!K(e))return e;if(!(d=a[e]))break;if(d.visible)return e;f.push(e),e=d.fill}return!1}(i,e,c.propagate))},beforeDraw(a,b,c){let d="beforeDraw"===c.drawTime,e=a.getSortedVisibleDatasetMetas(),f=a.chartArea;for(let b=e.length-1;b>=0;--b){let c=e[b].$filler;c&&(c.line.updateControlPoints(f,c.axis),d&&c.fill&&dy(a.ctx,c,f))}},beforeDatasetsDraw(a,b,c){if("beforeDatasetsDraw"!==c.drawTime)return;let d=a.getSortedVisibleDatasetMetas();for(let b=d.length-1;b>=0;--b){let c=d[b].$filler;dw(c)&&dy(a.ctx,c,a.chartArea)}},beforeDatasetDraw(a,b,c){let d=b.meta.$filler;dw(d)&&"beforeDatasetDraw"===c.drawTime&&dy(a.ctx,d,a.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}});var fY=a.i(21139);function fZ({machine:a,isOpen:b,onClose:e}){let{isDark:f,themeColors:g}=(0,fY.useTheme)(),[h,i]=(0,d.useState)("graficos"),[j,k]=(0,d.useState)(null),[l,m]=(0,d.useState)(null),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(null),[r,s]=(0,d.useState)(!1),[t,u]=(0,d.useState)(!1),[v,w]=(0,d.useState)(!1),[x,y]=(0,d.useState)("cards"),[z,A]=(0,d.useState)("all"),[B,C]=(0,d.useState)("all"),[D,E]=(0,d.useState)("fecha"),[F,G]=(0,d.useState)(a?.machine?.Cod_maquina||""),[H,I]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let a=()=>I(window.innerWidth<768);return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,d.useEffect)(()=>{b&&a&&(J(h),l||K(),n||L(),p||M())},[b,a,h]);let J=async b=>{if(a){s(!0);try{let c=await fetch("/api/scada/machine-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({machineId:a.machine.Cod_maquina,tab:b})}),d=await c.json();d.success&&k(d.data)}catch(a){console.error("Erro ao buscar dados da tab:",a)}finally{s(!1)}}},K=async()=>{if(a){u(!0);try{let b=await fetch(`/api/analytics/historical?machineId=${a.machine.Cod_maquina}&days=30&aggregation=day`),c=await b.json();c.success&&m(c.data)}catch(a){console.error("Error fetching historical data:",a)}finally{u(!1)}}},L=async()=>{if(a){w(!0);try{let[b,c]=await Promise.all([fetch(`/api/analytics/historical?machineId=${a.machine.Cod_maquina}&days=30`),fetch(`/api/analytics/insights?machineId=${a.machine.Cod_maquina}`)]),[d,e]=await Promise.all([b.json(),c.json()]);d.success&&e.success&&o({historical:d.data,insights:e.data})}catch(a){console.error("Error fetching financial data:",a)}finally{w(!1)}}},M=async()=>{if(a)try{let b=await fetch(`/api/analytics/insights?machineId=${a.machine.Cod_maquina}`),c=await b.json();c.success&&q(c.data)}catch(a){console.error("Error fetching insights:",a)}};return b&&a?(0,c.jsx)("div",{className:"modal fade show",style:{display:"block",backgroundColor:f?"rgba(0,0,0,0.8)":"rgba(0,0,0,0.6)",zIndex:1060},onClick:e,children:(0,c.jsx)("div",{className:"modal-dialog modal-xl",onClick:a=>a.stopPropagation(),style:{maxWidth:H?"98vw":"95vw",margin:H?"0.5rem auto":"1rem auto",width:"100%"},children:(0,c.jsxs)("div",{className:"modal-content border-0",style:{borderRadius:H?"15px":"20px",overflow:"hidden",backgroundColor:g.background,color:g.text,boxShadow:`0 25px 50px ${g.shadow}`,maxHeight:"95vh",display:"flex",flexDirection:"column"},children:[(0,c.jsx)("div",{className:"modal-header border-0",style:{background:`linear-gradient(135deg, ${g.primary} 0%, ${g.secondary} 100%)`,color:"white",padding:H?"1rem":"1.5rem 2rem",flexShrink:0},children:(0,c.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,c.jsx)("div",{className:H?"me-2":"me-3",children:(0,c.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{width:H?"50px":"60px",height:H?"50px":"60px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"15px",backdropFilter:"blur(10px)"},children:(0,c.jsx)("i",{className:"fas fa-cog",style:{fontSize:H?"1.4rem":"1.8rem",color:"white"}})})}),(0,c.jsxs)("div",{className:"flex-grow-1",children:[(0,c.jsx)("h3",{className:"modal-title mb-1",style:{fontWeight:"600",fontSize:H?"1.2rem":"1.5rem",lineHeight:"1.2"},children:a.machine.Cod_maquina}),!H&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"mb-1",style:{fontSize:"1.1rem",opacity:"0.9"},children:a.machine.desc_maquina}),(0,c.jsxs)("small",{style:{opacity:"0.8",fontSize:"0.9rem"},children:[(0,c.jsx)("i",{className:"fas fa-info-circle me-1"}),"Panel de control y análisis completo"]})]})]}),(0,c.jsx)("button",{type:"button",className:"btn-close",onClick:e,style:{filter:"invert(1)",opacity:"0.8",fontSize:"1.2rem",padding:"0.8rem"}})]})}),(0,c.jsxs)("div",{className:"modal-body p-0",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,c.jsx)("div",{className:"machine-status-header",style:{background:f?"linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%)":"linear-gradient(135deg, #f8f9ff 0%, #e8f2ff 100%)",padding:H?"1rem":"2rem",borderBottom:`1px solid ${g.border}`,flexShrink:0},children:(0,c.jsx)("div",{className:"row g-2 g-md-4",children:[{icon:"fas fa-info-circle",value:function(a){switch(a){case"PRODUCIENDO":return"PRODUCCIÓN";case"ACTIVA":return"ACTIVA";case"PARADA":return"PARADA";case"MANTENIMIENTO":return"MANTENIMIENTO";default:return"INACTIVA"}}(a.status),label:"Estado Actual",color:"PRODUCIENDO"===a.status?g.success:"ACTIVA"===a.status?g.info:"MANTENIMIENTO"===a.status?g.warning:g.error},{icon:"fas fa-check-circle",value:a.production.ok.toLocaleString(),label:"Piezas OK",color:g.success},{icon:"fas fa-times-circle",value:a.production.nok.toLocaleString(),label:"Piezas NOK",color:g.error},{icon:"fas fa-tachometer-alt",value:`${a.efficiency}%`,label:"Eficiencia",color:a.efficiency>=80?g.success:a.efficiency>=60?g.warning:g.error}].map((a,b)=>(0,c.jsx)("div",{className:"col-6 col-lg-3",children:(0,c.jsx)("div",{className:"card border-0 h-100",style:{borderRadius:H?"15px":"20px",background:g.surface,border:`1px solid ${g.border}`,boxShadow:`0 8px 25px ${g.shadow}`,transition:"all 0.3s ease"},children:(0,c.jsxs)("div",{className:"card-body text-center",style:{padding:H?"1rem 0.5rem":"1.5rem"},children:[(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsx)("div",{className:"d-inline-flex align-items-center justify-content-center rounded-circle mb-2",style:{width:"50px",height:"50px",backgroundColor:`${a.color}20`,color:a.color},children:(0,c.jsx)("i",{className:a.icon,style:{fontSize:"1.2rem"}})})}),(0,c.jsx)("h6",{className:"fw-bold mb-1",style:{color:a.color},children:a.value}),(0,c.jsx)("small",{style:{color:g.textSecondary},children:a.label})]})})},b))})}),(0,c.jsx)("div",{className:"tabs-navigation",style:{background:g.background,padding:H?"0.5rem 1rem 0":"1rem 2rem 0",borderBottom:`1px solid ${g.border}`,flexShrink:0,overflowX:"auto"},children:(0,c.jsx)("div",{className:"d-flex gap-1",style:{minWidth:"max-content"},children:[{id:"resumen",label:"Resumen",icon:"fas fa-dashboard"},{id:"of",label:"OF Actual",icon:"fas fa-clipboard-list"},{id:"paros",label:"Paradas",icon:"fas fa-pause-circle"},{id:"produccion",label:"Producción",icon:"fas fa-chart-line"},{id:"oee",label:"OEE",icon:"fas fa-tachometer-alt"},{id:"historico",label:"Histórico",icon:"fas fa-history"},{id:"graficos",label:"Gráficos",icon:"fas fa-chart-area"},{id:"financiero",label:"Análisis €",icon:"fas fa-euro-sign"},{id:"insights",label:"Insights IA",icon:"fas fa-lightbulb"},{id:"gestion",label:"Gestión",icon:"fas fa-cogs"},{id:"pedidos",label:"Pedidos",icon:"fas fa-shopping-cart"},{id:"ventas",label:"Ventas",icon:"fas fa-dollar-sign"}].map(a=>(0,c.jsxs)("button",{className:"btn border-0 position-relative",onClick:()=>i(a.id),style:{borderRadius:"12px 12px 0 0",background:h===a.id?`linear-gradient(135deg, ${g.primary} 0%, ${g.secondary} 100%)`:"transparent",transition:"all 0.3s ease",fontWeight:h===a.id?"600":"500",boxShadow:h===a.id?`0 -4px 20px ${g.primary}40`:"none",transform:h===a.id?"translateY(-2px)":"translateY(0)",minWidth:H?"80px":"140px",padding:H?"0.5rem 0.75rem":"0.75rem 1rem",fontSize:H?"0.8rem":"0.9rem",color:h===a.id?"white":g.textSecondary},children:[(0,c.jsx)("i",{className:`${a.icon} ${H?"d-block":"me-2"}`,style:{opacity:h===a.id?"1":"0.7",fontSize:H?"0.9rem":"1rem"}}),(0,c.jsx)("span",{className:"d-none d-md-inline",children:a.label}),(0,c.jsx)("span",{className:"d-md-none d-none d-sm-inline",style:{fontSize:"0.8rem"},children:a.label.split(" ")[0]}),h===a.id&&(0,c.jsx)("div",{className:"position-absolute bottom-0 start-0 w-100",style:{height:"3px",background:"rgba(255,255,255,0.8)",borderRadius:"2px 2px 0 0"}})]},a.id))})}),(0,c.jsx)("div",{className:"tab-content",style:{minHeight:H?"400px":"500px",padding:H?"1rem":"2rem",background:f?"linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%)":"linear-gradient(135deg, #fafbff 0%, #f0f7ff 100%)",flex:1,overflow:"auto"},children:r&&["of","paros","produccion","oee","pedidos","ventas"].includes(h)?(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("div",{className:"spinner-border mb-3",style:{color:g.primary},role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Cargando..."})}),(0,c.jsx)("h6",{style:{color:g.primary},children:"Cargando datos..."}),(0,c.jsx)("small",{style:{color:g.textSecondary},children:"Procesando información de la máquina"})]}):(0,c.jsx)("div",{className:"tab-content-container",children:function(a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){switch(a){case"resumen":return w=i,x=d,y=f,z=u,(0,c.jsxs)("div",{className:"resumen-content",children:[(0,c.jsx)("div",{className:"row mb-4",children:[{icon:"fas fa-tachometer-alt",value:`${w?.efficiency||0}%`,label:"OEE Actual",color:z.primary},{icon:"fas fa-check-circle",value:w?.production?.ok||0,label:"Piezas OK",color:z.success},{icon:"fas fa-times-circle",value:w?.production?.nok||0,label:"Piezas NOK",color:z.error},{icon:"fas fa-clock",value:`${x?.summary?.total_downtime_hours?.toFixed(1)||0}h`,label:"Paradas Mes",color:z.warning},{icon:"fas fa-euro-sign",value:`€${(x?.cost_analysis?.[0]?.costo_total_perdidas_euros||0).toLocaleString("es-ES")}`,label:"Pérdidas Mes",color:z.info},{icon:"fas fa-chart-line",value:x?.summary?.total_production?.toLocaleString()||0,label:"Prod. Total",color:z.secondary}].map((a,b)=>(0,c.jsx)("div",{className:"col-md-2",children:(0,c.jsx)("div",{className:"card text-center",style:{background:z.surface,border:`1px solid ${z.border}`,borderRadius:"15px"},children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("i",{className:`${a.icon} mb-2`,style:{fontSize:"2rem",color:a.color}}),(0,c.jsx)("h5",{style:{color:a.color},children:a.value}),(0,c.jsx)("small",{style:{color:z.textSecondary},children:a.label})]})})},b))}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"card",style:{background:z.surface,border:`1px solid ${z.border}`},children:[(0,c.jsx)("div",{className:"card-header",style:{background:z.warning,color:"white"},children:(0,c.jsxs)("h6",{className:"mb-0",children:[(0,c.jsx)("i",{className:"fas fa-exclamation-triangle me-2"}),"Alertas Activas"]})}),(0,c.jsx)("div",{className:"card-body",children:y?.alertas?.length>0?(0,c.jsx)("div",{className:"list-group list-group-flush",children:y.alertas.slice(0,3).map((a,b)=>(0,c.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{style:{color:"CRITICA"===a.severidad?z.error:"ALTA"===a.severidad?z.warning:z.info},children:a.tipo.replace("_"," ")}),(0,c.jsx)("br",{}),(0,c.jsx)("small",{style:{color:z.textSecondary},children:a.mensaje})]}),(0,c.jsx)("span",{className:`badge bg-${"CRITICA"===a.severidad?"danger":"ALTA"===a.severidad?"warning":"info"}`,children:a.severidad})]},b))}):(0,c.jsxs)("div",{className:"text-center py-3",children:[(0,c.jsx)("i",{className:"fas fa-check-circle mb-2",style:{fontSize:"2rem",color:z.success}}),(0,c.jsx)("p",{style:{color:z.success},className:"mb-0",children:"Sin alertas activas"})]})})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"card",style:{background:z.surface,border:`1px solid ${z.border}`},children:[(0,c.jsx)("div",{className:"card-header",style:{background:z.info,color:"white"},children:(0,c.jsxs)("h6",{className:"mb-0",children:[(0,c.jsx)("i",{className:"fas fa-lightbulb me-2"}),"Recomendaciones IA"]})}),(0,c.jsx)("div",{className:"card-body",children:y?.recomendaciones?.length>0?(0,c.jsx)("div",{className:"list-group list-group-flush",children:y.recomendaciones.slice(0,3).map((a,b)=>(0,c.jsxs)("div",{className:"list-group-item",children:[(0,c.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[(0,c.jsx)("h6",{className:"mb-1",style:{color:z.text},children:a.accion}),(0,c.jsx)("small",{style:{color:z.textSecondary},children:a.prioridad})]}),(0,c.jsx)("p",{className:"mb-1",style:{color:z.textSecondary},children:a.descripcion}),(0,c.jsxs)("small",{style:{color:z.success},children:["ROI estimado: €",a.roi_estimado]})]},b))}):(0,c.jsxs)("div",{className:"text-center py-3",children:[(0,c.jsx)("i",{className:"fas fa-robot mb-2",style:{fontSize:"2rem",color:z.textSecondary}}),(0,c.jsx)("p",{style:{color:z.textSecondary},className:"mb-0",children:"Generando recomendaciones..."})]})})]})})]})]});case"of":return b?(A=b,B=u,(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"card",style:{background:B.surface,border:`1px solid ${B.border}`},children:[(0,c.jsx)("div",{className:"card-header",style:{background:B.primary,color:"white"},children:(0,c.jsxs)("h6",{children:[(0,c.jsx)("i",{className:"fas fa-clipboard-list me-2"}),"Información de la OF"]})}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label fw-bold",style:{color:B.text},children:"Código OF:"}),(0,c.jsx)("span",{className:"ms-2",style:{color:B.textSecondary},children:A.Rt_Cod_of||"--"})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label fw-bold",style:{color:B.text},children:"Producto:"}),(0,c.jsx)("span",{className:"ms-2",style:{color:B.textSecondary},children:A.Rt_Desc_producto||A.Rt_Desc_produto||"--"})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label fw-bold",style:{color:B.text},children:"Planificadas:"}),(0,c.jsxs)("span",{className:"ms-2",style:{color:B.textSecondary},children:[A.Rt_Unidades_planning||0," unidades"]})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label fw-bold",style:{color:B.text},children:"Producidas:"}),(0,c.jsxs)("span",{className:"ms-2",style:{color:B.textSecondary},children:[A.total_produced||0," unidades"]})]})]})]})})})):f$(u);case"paros":return b?function(a,b,d,e,f,g,h,i,j,k){let l=Array.isArray(a)?a:a?.paros||[];return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("select",{className:"form-select form-select-sm me-2 d-inline-block w-auto",value:e,onChange:a=>f(a.target.value),style:{background:k.background,border:`1px solid ${k.border}`,color:k.text},children:(0,c.jsx)("option",{value:"all",children:"Todos los tipos"})}),(0,c.jsx)("select",{className:"form-select form-select-sm me-2 d-inline-block w-auto",value:g,onChange:a=>h(a.target.value),style:{background:k.background,border:`1px solid ${k.border}`,color:k.text},children:(0,c.jsx)("option",{value:"all",children:"Cualquier duración"})}),(0,c.jsx)("select",{className:"form-select form-select-sm d-inline-block w-auto",value:i,onChange:a=>j(a.target.value),style:{background:k.background,border:`1px solid ${k.border}`,color:k.text},children:(0,c.jsx)("option",{value:"fecha",children:"Fecha"})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("button",{className:`btn btn-sm btn-outline-primary ${"list"===b?"active":""}`,onClick:()=>d("list"),children:(0,c.jsx)("i",{className:"fas fa-list"})}),(0,c.jsx)("button",{className:`btn btn-sm btn-outline-primary ${"cards"===b?"active":""}`,onClick:()=>d("cards"),children:(0,c.jsx)("i",{className:"fas fa-th"})}),(0,c.jsx)("button",{className:`btn btn-sm btn-outline-primary ${"stats"===b?"active":""}`,onClick:()=>d("stats"),children:(0,c.jsx)("i",{className:"fas fa-chart-pie"})})]})]}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",style:{background:k.surface},children:[(0,c.jsx)("thead",{style:{background:k.primary,color:"white"},children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-calendar me-2"}),"Hora Inicio"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-calendar me-2"}),"Hora Fin"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-clock me-2"}),"Duración"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-clipboard-list me-2"}),"OF"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-barcode me-2"}),"Referencia"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-list me-2"}),"Tipo"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-exclamation-triangle me-2"}),"Descripción"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-user me-2"}),"Operario / OP Obs"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-sticky-note me-2"}),"Observaciones"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-hourglass-half me-2"}),"Segundos"]})]})}),(0,c.jsx)("tbody",{style:{color:k.text},children:l.map((a,b)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:new Date(a.fecha_ini||a.fecha_inicio).toLocaleString("es-ES")}),(0,c.jsx)("td",{children:a.fecha_fin?new Date(a.fecha_fin).toLocaleString("es-ES"):"En curso"}),(0,c.jsxs)("td",{children:[a.duracion_minutos??a.duracion_calculada??0," min"]}),(0,c.jsx)("td",{children:a.cod_of||"--"}),(0,c.jsx)("td",{children:a.referencia||"--"}),(0,c.jsx)("td",{children:a.id_paro||""}),(0,c.jsx)("td",{children:a.desc_paro||""}),(0,c.jsx)("td",{children:a.Id_operario?`${a.Id_operario}`:"0 / 0"}),(0,c.jsx)("td",{children:a.observaciones||""}),(0,c.jsx)("td",{children:(a.duracion_minutos??0)*60})]},b))})]})})]})}(b,j,k,l,m,n,o,p,q,u):f$(u);case"produccion":return b?(0,c.jsx)(f_,{data:b,themeColors:u}):f$(u);case"oee":return b?(C=b,D=u,(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",style:{background:D.surface},children:[(0,c.jsx)("thead",{style:{background:D.primary,color:"white"},children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-calendar me-2"}),"Data"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-sun me-2"}),"Turno"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-clock me-2"}),"Disponibilidade"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-chart-line me-2"}),"Rendimento"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-check-circle me-2"}),"Qualidade"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-trophy me-2"}),"OEE"]})]})}),(0,c.jsx)("tbody",{style:{color:D.text},children:C.map((a,b)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:new Date(a.fecha).toLocaleDateString("pt-BR")}),(0,c.jsx)("td",{children:a.turno}),(0,c.jsxs)("td",{className:f0(a.disponibilidad),children:[a.disponibilidad,"%"]}),(0,c.jsxs)("td",{className:f0(a.rendimiento),children:[a.rendimiento,"%"]}),(0,c.jsxs)("td",{className:f0(a.calidad),children:[a.calidad,"%"]}),(0,c.jsx)("td",{className:f0(a.oee),children:(0,c.jsxs)("strong",{children:[a.oee,"%"]})})]},b))})]})})):f$(u);case"historico":return b?(E=b,F=u,(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",style:{background:F.surface},children:[(0,c.jsx)("thead",{style:{background:F.primary,color:"white"},children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-calendar me-2"}),"Data"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-check me-2 text-success"}),"Total OK"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-times me-2 text-danger"}),"Total NOK"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-redo me-2 text-warning"}),"Total RW"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-percentage me-2"}),"Eficiência"]})]})}),(0,c.jsx)("tbody",{style:{color:F.text},children:E.map((a,b)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:new Date(a.fecha).toLocaleDateString("pt-BR")}),(0,c.jsx)("td",{className:"text-success",children:a.total_ok}),(0,c.jsx)("td",{className:"text-danger",children:a.total_nok}),(0,c.jsx)("td",{className:"text-warning",children:a.total_rw}),(0,c.jsxs)("td",{className:f0(a.eficiencia_diaria),children:[Math.round(a.eficiencia_diaria),"%"]})]},b))})]})})):f$(u);case"graficos":return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"mb-4 p-3 rounded",style:{background:u.surface,border:`1px solid ${u.border}`},children:(0,c.jsxs)("div",{className:"row align-items-center",children:[(0,c.jsxs)("div",{className:"col-md-6",children:[(0,c.jsxs)("label",{className:"form-label fw-bold mb-2",style:{color:u.text},children:[(0,c.jsx)("i",{className:"fas fa-industry me-2",style:{color:u.primary}}),"Seleccionar Máquina para Análisis:"]}),(0,c.jsxs)("select",{className:"form-select",value:r,onChange:a=>s(a.target.value),style:{background:u.background,border:`1px solid ${u.border}`,color:u.text,borderRadius:"10px"},children:[(0,c.jsxs)("option",{value:i?.machine?.Cod_maquina,children:[i?.machine?.Cod_maquina," - ",i?.machine?.desc_maquina," (Actual)"]}),(0,c.jsx)("option",{value:"ALL",children:"Todas las Máquinas (Comparativo)"}),(0,c.jsx)("option",{value:"M001",children:"M001 - Torno CNC Principal"}),(0,c.jsx)("option",{value:"M002",children:"M002 - Fresadora Universal"}),(0,c.jsx)("option",{value:"M003",children:"M003 - Centro Mecanizado"}),(0,c.jsx)("option",{value:"M004",children:"M004 - Rectificadora"})]})]}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"d-flex flex-wrap gap-2 mt-2 mt-md-4",children:[(0,c.jsxs)("span",{className:"badge",style:{background:`${u.success}20`,color:u.success,padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.8rem"},children:[(0,c.jsx)("i",{className:"fas fa-chart-line me-1"}),"Análisis en Tiempo Real"]}),(0,c.jsxs)("span",{className:"badge",style:{background:`${u.info}20`,color:u.info,padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.8rem"},children:[(0,c.jsx)("i",{className:"fas fa-sync me-1"}),"Auto-actualización"]})]})})]})}),(0,c.jsx)(fL,{machineId:"ALL"===r?void 0:r,data:d,isLoading:g,isDark:t,themeColors:u})]});case"financiero":return(0,c.jsx)(fR,{data:e,isLoading:h,machineId:i?.machine?.Cod_maquina,isDark:t,themeColors:u});case"insights":return G=f,H=u,G?(0,c.jsx)("div",{className:"insights-content",children:(0,c.jsx)("div",{className:"row mb-4",children:(0,c.jsx)("div",{className:"col-12",children:(0,c.jsxs)("div",{className:"card",style:{background:H.surface,border:`1px solid ${H.border}`},children:[(0,c.jsx)("div",{className:"card-header",style:{background:H.primary,color:"white"},children:(0,c.jsxs)("h6",{className:"mb-0",children:[(0,c.jsx)("i",{className:"fas fa-brain me-2"}),"Análisis Inteligente de Rendimiento"]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("h6",{style:{color:H.primary},children:"Estado General"}),(0,c.jsxs)("div",{className:`alert alert-${"OPTIMAL"===G.estado_general?"success":"WARNING"===G.estado_general?"warning":"danger"}`,children:[(0,c.jsx)("i",{className:`fas fa-${"OPTIMAL"===G.estado_general?"check":"WARNING"===G.estado_general?"exclamation-triangle":"times"} me-2`}),G.estado_general||"EVALUANDO"]}),(0,c.jsx)("p",{className:"small",style:{color:H.textSecondary},children:G.diagnostico_general})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("h6",{style:{color:H.success},children:"Puntos Fuertes"}),(0,c.jsx)("ul",{className:"list-unstyled",children:G.puntos_fuertes?.map((a,b)=>(0,c.jsxs)("li",{style:{color:H.text},children:[(0,c.jsx)("i",{className:"fas fa-plus-circle me-2",style:{color:H.success}}),a]},b))})]}),(0,c.jsxs)("div",{className:"col-md-4",children:[(0,c.jsx)("h6",{style:{color:H.error},children:"Áreas de Mejora"}),(0,c.jsx)("ul",{className:"list-unstyled",children:G.areas_mejora?.map((a,b)=>(0,c.jsxs)("li",{style:{color:H.text},children:[(0,c.jsx)("i",{className:"fas fa-exclamation-circle me-2",style:{color:H.error}}),a]},b))})]})]})})]})})})}):(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("div",{className:"spinner-border mb-3",style:{color:H.primary}}),(0,c.jsx)("p",{style:{color:H.text},children:"Analizando datos con IA..."})]});case"gestion":var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=i,N=u;let O=async(a,b={})=>{try{console.log(`🔧 Ejecutando acci\xf3n: ${a}`);let c=await fetch("/api/management",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a,machineId:M?.machine?.Cod_maquina,data:b})}),d=await c.json();d.success?alert(`✅ ${d.message}`):alert(`❌ Error: ${d.error}`)}catch(a){console.error("Error ejecutando acción:",a),alert("❌ Error ejecutando acción")}};return(0,c.jsx)("div",{className:"gestion-content",children:(0,c.jsx)("div",{className:"row mb-4",children:(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"card",style:{background:N.surface,border:`1px solid ${N.border}`},children:[(0,c.jsx)("div",{className:"card-header",style:{background:N.primary,color:"white"},children:(0,c.jsxs)("h6",{className:"mb-0",children:[(0,c.jsx)("i",{className:"fas fa-tools me-2"}),"Gestión de Paradas"]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"d-grid gap-2",children:[(0,c.jsxs)("button",{className:"btn",style:{background:N.info,color:"white",borderRadius:"10px"},onClick:()=>alert("🚧 Función en desarrollo - Reclasificar paradas seleccionadas"),children:[(0,c.jsx)("i",{className:"fas fa-edit me-2"}),"Reclasificar Paradas"]}),(0,c.jsxs)("button",{className:"btn",style:{background:N.warning,color:"white",borderRadius:"10px"},onClick:()=>O("merge_microstops",{threshold:120,mergeWindow:300}),children:[(0,c.jsx)("i",{className:"fas fa-compress-arrows-alt me-2"}),"Mergear Micro-paradas"]})]})})]})})})});case"pedidos":return b?(I=b,J=u,(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",style:{background:J.surface},children:[(0,c.jsx)("thead",{style:{background:J.primary,color:"white"},children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-hashtag me-2"}),"Código"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-box me-2"}),"Produto"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-sort-numeric-up me-2"}),"Quantidade"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-check-double me-2"}),"Entregue"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-calendar me-2"}),"Data Pedido"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-flag me-2"}),"Status"]})]})}),(0,c.jsx)("tbody",{style:{color:J.text},children:I.map((a,b)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:a.cod_pedido}),(0,c.jsx)("td",{children:a.desc_produto}),(0,c.jsx)("td",{children:a.cantidad_pedido}),(0,c.jsx)("td",{children:a.cantidad_entregada}),(0,c.jsx)("td",{children:new Date(a.fecha_pedido).toLocaleDateString("pt-BR")}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:`badge ${function(a){switch(a?.toLowerCase()){case"completado":return"bg-success";case"en produccion":return"bg-primary";case"pendiente":return"bg-warning";default:return"bg-secondary"}}(a.estado_pedido)}`,children:a.estado_pedido})})]},b))})]})})):f$(u);case"ventas":return b?(K=b,L=u,(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",style:{background:L.surface},children:[(0,c.jsx)("thead",{style:{background:L.primary,color:"white"},children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-hashtag me-2"}),"Código"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-user me-2"}),"Cliente"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-box me-2"}),"Produto"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-sort-numeric-up me-2"}),"Quantidade"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-dollar-sign me-2"}),"Valor"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-calendar me-2"}),"Data"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)("i",{className:"fas fa-truck me-2"}),"Entrega"]})]})}),(0,c.jsx)("tbody",{style:{color:L.text},children:K.map((a,b)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:a.cod_venta}),(0,c.jsx)("td",{children:a.cliente}),(0,c.jsx)("td",{children:a.produto}),(0,c.jsx)("td",{children:a.cantidad}),(0,c.jsxs)("td",{children:["€",a.valor_venta]}),(0,c.jsx)("td",{children:new Date(a.fecha_venta).toLocaleDateString("pt-BR")}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:`badge ${function(a){switch(a?.toLowerCase()){case"entregado":return"bg-success";case"en transito":return"bg-primary";case"pendiente":return"bg-warning";default:return"bg-secondary"}}(a.estado_entrega)}`,children:a.estado_entrega})})]},b))})]})})):f$(u);default:return(0,c.jsx)("div",{style:{color:u.text},children:"Sección no implementada"})}}(h,j,l,n,p,t,v,a,x,y,z,A,B,C,D,E,F,G,f,g,0)})})]}),(0,c.jsx)("div",{className:"modal-footer border-0",style:{background:g.background,padding:H?"1rem":"1.5rem 2rem",borderTop:`1px solid ${g.border}`,flexShrink:0},children:(0,c.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-stretch align-items-md-center w-100 gap-2",children:[(0,c.jsx)("div",{className:"d-flex flex-wrap gap-2 justify-content-center justify-content-md-start",children:[{icon:"fas fa-download",label:"Exportar"},{icon:"fas fa-print",label:"Imprimir"},{icon:"fas fa-share",label:"Compartir"}].map(a=>(0,c.jsxs)("button",{type:"button",className:"btn border-0",style:{borderRadius:"12px",background:f?"linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%)":"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",boxShadow:`0 4px 15px ${g.shadow}`,transition:"all 0.3s ease",fontWeight:"500",color:g.text,fontSize:H?"0.8rem":"0.9rem",padding:H?"0.5rem 1rem":"0.75rem 1.25rem"},children:[(0,c.jsx)("i",{className:`${a.icon} me-2`}),a.label]},a.label))}),(0,c.jsxs)("div",{className:"d-flex flex-wrap gap-2 justify-content-center justify-content-md-end",children:[(0,c.jsxs)("button",{type:"button",className:"btn border-0",style:{borderRadius:"12px",background:f?"linear-gradient(135deg, #4a4a00 0%, #6a6a00 100%)":"linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)",boxShadow:`0 4px 15px ${g.warning}40`,transition:"all 0.3s ease",fontWeight:"500",color:f?"#ffeb3b":"#856404",fontSize:H?"0.8rem":"0.9rem",padding:H?"0.5rem 1rem":"0.75rem 1.25rem"},children:[(0,c.jsx)("i",{className:"fas fa-cog me-2"}),"Configurar"]}),(0,c.jsxs)("button",{type:"button",className:"btn text-white border-0",onClick:e,style:{borderRadius:"12px",background:`linear-gradient(135deg, ${g.primary} 0%, ${g.secondary} 100%)`,boxShadow:`0 4px 15px ${g.primary}60`,transition:"all 0.3s ease",fontWeight:"600",fontSize:H?"0.8rem":"0.9rem",padding:H?"0.5rem 1rem":"0.75rem 1.25rem"},children:[(0,c.jsx)("i",{className:"fas fa-times me-2"}),"Cerrar"]})]})]})})]})})}):null}function f$(a){return(0,c.jsxs)("div",{className:"text-center py-4",children:[(0,c.jsx)("i",{className:"fas fa-info-circle mb-2",style:{fontSize:"2rem",color:a.textSecondary}}),(0,c.jsx)("p",{style:{color:a.textSecondary},children:"No hay datos disponibles para esta sección"})]})}function f_({data:a,themeColors:b}){let[e,f]=(0,d.useState)([]),[g,h]=(0,d.useState)(null),[i,j]=(0,d.useState)(!0);(0,d.useEffect)(()=>{k();let a=setInterval(k,6e4);return()=>clearInterval(a)},[]);let k=async()=>{j(!0);try{let a=await fetch("/api/scada/production");if(a.ok){let b=await a.json();f(b.data||[])}}catch(a){console.error("Error al obtener datos de producción:",a)}finally{j(!1)}};return i&&0===e.length?(0,c.jsx)("div",{className:"text-center p-4",children:(0,c.jsx)("div",{className:"spinner-border",style:{color:b.primary},role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Cargando datos de producción..."})})}):(0,c.jsxs)("div",{className:"production-content",children:[(0,c.jsx)("div",{className:"row mb-4",children:(0,c.jsx)("div",{className:"col-12",children:(0,c.jsx)("div",{className:"card border-0",style:{background:b.surface,boxShadow:`0 8px 25px ${b.shadow}`},children:(0,c.jsxs)("div",{className:"card-body text-center",children:[(0,c.jsxs)("h4",{className:"card-title mb-3",style:{color:b.text},children:[(0,c.jsx)("i",{className:"fas fa-chart-line me-2",style:{color:b.primary}}),"Estado de Producción"]}),(0,c.jsxs)("div",{className:"row g-3 justify-content-center",children:[(0,c.jsx)("div",{className:"col-md-4 col-sm-6",children:(0,c.jsx)(fV.default,{targetValue:e.reduce((a,b)=>a+b.ok,0),label:"Piezas OK (Mes)",showIncrement:!0})}),(0,c.jsx)("div",{className:"col-md-4 col-sm-6",children:(0,c.jsx)(fV.default,{targetValue:e.reduce((a,b)=>a+b.nok,0),label:"Piezas NOK (Mes)",showIncrement:!1})}),(0,c.jsx)("div",{className:"col-md-4 col-sm-6",children:(0,c.jsx)(fV.default,{targetValue:e.reduce((a,b)=>a+b.rw,0),label:"Rechazos (Mes)",showIncrement:!1})})]})]})})})}),(0,c.jsx)("div",{className:"row mb-4",children:(0,c.jsx)("div",{className:"col-12",children:(0,c.jsx)(fX,{data:e,onMachineClick:a=>{h(a)}})})})]})}function f0(a){return a>=80?"text-success":a>=60?"text-warning":"text-danger"}function f1(){let[a,b]=(0,d.useState)([]),[e,f]=(0,d.useState)(!0),[g,h]=(0,d.useState)(null),[i,j]=(0,d.useState)(""),[k,l]=(0,d.useState)(null),[m,n]=(0,d.useState)(!1),{currentTheme:o}=function(){let[a,b]=(0,d.useState)("light");return(0,d.useEffect)(()=>{console.log("🎨 useThemeSwitcher: Inicializando..."),b(localStorage.getItem("scada-theme")||"light");let a=a=>{let c=a.detail.theme;b(c),console.log("🔄 useThemeSwitcher: Tema cambiado a:",c)};return document.addEventListener("themeChange",a),()=>{document.removeEventListener("themeChange",a)}},[]),{currentTheme:a}}();(0,d.useEffect)(()=>{console.log("🏠 Dashboard: Tema actual:",o),console.log("💡 Theme Customizer: Haz clic en el botón ⚙️ en la esquina inferior derecha para cambiar el tema")},[o]);let[p,q]=(0,d.useState)(null),[r,s]=(0,d.useState)(null),[t,u]=(0,d.useState)("day"),v=async a=>{try{let b;if((b="month"===a?await fetch("/api/analytics/monthly"):await fetch("/api/analytics/daily"))&&b.ok){let c=await b.json();c.success&&("month"===a?q(c.data):s(c.data),console.log(`📊 Datos cargados para per\xedodo: ${a}`,c.data))}}catch(b){console.error(`❌ Error cargando datos para per\xedodo ${a}:`,b)}};(0,d.useEffect)(()=>{v("day"),v("month")},[]);let w=a=>{let b=a.target.id.replace("period","").toLowerCase();u(b),v(b)},x="month"===t?p:r,y=a.map(a=>"PARADA"===a.status?{type:"PARADA",machine:`${a.machine.desc_maquina} -${a.machine.Cod_maquina}`,code:a.machine.Cod_maquina,message:a.downtime||"Parada detectada",time:new Date().toLocaleTimeString("es-ES")}:(a.production?.nok||0)>0?{type:"CALIDAD",machine:`${a.machine.desc_maquina} -${a.machine.Cod_maquina}`,code:a.machine.Cod_maquina,message:`Piezas NOK: ${a.production.nok}`,time:new Date().toLocaleTimeString("es-ES")}:null).filter(Boolean),z=async()=>{try{console.log("🔄 Buscando datos de las máquinas...");let a=await fetch("/api/scada/machines"),c=await a.json();c.success?(b(c.data),j(new Date().toLocaleTimeString("es-ES")),h(null),console.log(`✅ ${c.count} m\xe1quinas cargadas`)):(h(c.message||"Error al cargar datos"),console.error("❌ Error en la API:",c.message))}catch(a){h("Error de conexión"),console.error("❌ Error de fetch:",a)}finally{f(!1)}};return((0,d.useEffect)(()=>{z(),fetch("/api/analytics/monthly").then(a=>a.json()).then(a=>{a?.success&&q(a.data)}).catch(()=>{});let a=setInterval(()=>{z(),fetch("/api/analytics/monthly").then(a=>a.json()).then(a=>{a?.success&&q(a.data)}).catch(()=>{})},3e4);return()=>clearInterval(a)},[]),e)?(0,c.jsx)("div",{className:"wrapper",children:(0,c.jsx)("div",{className:"page-content-wrapper",children:(0,c.jsx)("div",{className:"page-content",children:(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Cargando..."})}),(0,c.jsx)("h5",{children:"Cargando datos de las máquinas..."})]})})})})}):g?(0,c.jsx)("div",{className:"wrapper",children:(0,c.jsx)("div",{className:"page-content-wrapper",children:(0,c.jsx)("div",{className:"page-content",children:(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("i",{className:"fas fa-exclamation-triangle text-danger mb-3",style:{fontSize:"3rem"}}),(0,c.jsx)("h5",{className:"text-danger mb-3",children:g}),(0,c.jsxs)("button",{className:"btn btn-primary",onClick:z,children:[(0,c.jsx)("i",{className:"fas fa-redo me-2"}),"Intentar de Nuevo"]})]})})})})}):(0,c.jsxs)("div",{className:"wrapper",children:[(0,c.jsxs)("div",{className:"sidebar-wrapper","data-simplebar":"true",children:[(0,c.jsxs)("div",{className:"sidebar-header",children:[(0,c.jsx)("div",{className:"",children:(0,c.jsx)("img",{src:"assets/images/logo-icon.png",className:"logo-icon-2",alt:""})}),(0,c.jsx)("div",{children:(0,c.jsx)("h4",{className:"logo-text",children:"Sistema SCADA"})}),(0,c.jsx)("a",{href:"javascript:;",className:"toggle-btn ms-auto",children:(0,c.jsx)("i",{className:"bx bx-menu"})})]}),(0,c.jsxs)("ul",{className:"metismenu",id:"menu",children:[(0,c.jsxs)("li",{children:[(0,c.jsxs)("a",{href:"javascript:;",className:"has-arrow",children:[(0,c.jsx)("div",{className:"parent-icon icon-color-1",children:(0,c.jsx)("i",{className:"bx bx-home-alt"})}),(0,c.jsx)("div",{className:"menu-title",children:"Panel de Control"})]}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:(0,c.jsxs)("a",{href:"#",children:[(0,c.jsx)("i",{className:"bx bx-right-arrow-alt"}),"Máquinas"]})}),(0,c.jsx)("li",{children:(0,c.jsxs)("a",{href:"#",children:[(0,c.jsx)("i",{className:"bx bx-right-arrow-alt"}),"Producción"]})}),(0,c.jsx)("li",{children:(0,c.jsxs)("a",{href:"#",children:[(0,c.jsx)("i",{className:"bx bx-right-arrow-alt"}),"OEE"]})})]})]}),(0,c.jsx)("li",{className:"menu-label",children:"Monitoreo"}),(0,c.jsx)("li",{children:(0,c.jsxs)("a",{href:"javascript:;",children:[(0,c.jsx)("div",{className:"parent-icon icon-color-2",children:(0,c.jsx)("i",{className:"fas fa-chart-line"})}),(0,c.jsx)("div",{className:"menu-title",children:"Informes"})]})}),(0,c.jsx)("li",{children:(0,c.jsxs)("a",{href:"javascript:;",children:[(0,c.jsx)("div",{className:"parent-icon icon-color-3",children:(0,c.jsx)("i",{className:"fas fa-cogs"})}),(0,c.jsx)("div",{className:"menu-title",children:"Configuración"})]})})]})]}),(0,c.jsx)("header",{className:"top-header",children:(0,c.jsxs)("nav",{className:"navbar navbar-expand",children:[(0,c.jsx)("div",{className:"left-topbar d-flex align-items-center",children:(0,c.jsx)("a",{href:"javascript:;",className:"toggle-btn",children:(0,c.jsx)("i",{className:"bx bx-menu"})})}),(0,c.jsx)("div",{className:"flex-grow-1 search-bar",children:(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("button",{className:"btn btn-search-back search-arrow-back",type:"button",children:(0,c.jsx)("i",{className:"bx bx-arrow-back"})}),(0,c.jsx)("input",{type:"text",className:"form-control",placeholder:"buscar"}),(0,c.jsx)("button",{className:"btn btn-search",type:"button",children:(0,c.jsx)("i",{className:"lni lni-search-alt"})})]})}),(0,c.jsx)("div",{className:"right-topbar ms-auto",children:(0,c.jsxs)("ul",{className:"navbar-nav",children:[(0,c.jsx)("li",{className:"nav-item search-btn-mobile",children:(0,c.jsx)("a",{className:"nav-link position-relative",href:"javascript:;",children:(0,c.jsx)("i",{className:"bx bx-search vertical-align-middle"})})}),(0,c.jsxs)("li",{className:"nav-item dropdown dropdown-lg",children:[(0,c.jsxs)("a",{className:"nav-link dropdown-toggle dropdown-toggle-nocaret position-relative",href:"javascript:;","data-bs-toggle":"dropdown",children:[(0,c.jsx)("span",{className:"msg-count",children:y.length}),(0,c.jsx)("i",{className:"bx bx-bell vertical-align-middle"})]}),(0,c.jsxs)("div",{className:"dropdown-menu dropdown-menu-end",children:[(0,c.jsx)("a",{href:"javascript:;",children:(0,c.jsxs)("div",{className:"msg-header",children:[(0,c.jsxs)("h6",{className:"msg-header-title",children:[y.length," Nuevas"]}),(0,c.jsx)("p",{className:"msg-header-subtitle",children:"Alertas de Máquinas"})]})}),(0,c.jsxs)("div",{className:"header-notifications-list",children:[0===y.length&&(0,c.jsx)("div",{className:"dropdown-item text-center text-muted",children:"Sin alertas"}),y.slice(0,8).map((b,d)=>(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",onClick:c=>{c.preventDefault();var d=b.code;let e=a.find(a=>a.machine.Cod_maquina===d);e&&(l(e),n(!0))},children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:`notify ${"PARADA"===b.type?"bg-light-danger text-danger":"bg-light-warning text-warning"}`,children:(0,c.jsx)("i",{className:`${"PARADA"===b.type?"fas fa-exclamation-triangle":"fas fa-times-circle"}`})}),(0,c.jsxs)("div",{className:"flex-grow-1",children:[(0,c.jsxs)("h6",{className:"msg-name",children:[b.machine,(0,c.jsx)("span",{className:"msg-time float-end",children:b.time})]}),(0,c.jsxs)("p",{className:"msg-info",children:[b.type,": ",b.message]})]})]})},d))]}),(0,c.jsx)("a",{href:"javascript:;",children:(0,c.jsx)("div",{className:"text-center msg-footer",children:"Ver Todas las Alertas"})})]})]}),(0,c.jsxs)("li",{className:"nav-item dropdown dropdown-user-profile",children:[(0,c.jsx)("a",{className:"nav-link dropdown-toggle dropdown-toggle-nocaret",href:"javascript:;","data-bs-toggle":"dropdown",children:(0,c.jsxs)("div",{className:"d-flex user-box align-items-center",children:[(0,c.jsxs)("div",{className:"user-info",children:[(0,c.jsx)("p",{className:"user-name mb-0",children:"Operador SCADA"}),(0,c.jsx)("p",{className:"designattion mb-0",children:"En línea"})]}),(0,c.jsx)("img",{src:"assets/images/avatars/avatar-1.png",className:"user-img",alt:"user avatar"})]})}),(0,c.jsxs)("div",{className:"dropdown-menu dropdown-menu-end",children:[(0,c.jsxs)("a",{className:"dropdown-item",href:"javascript:;",children:[(0,c.jsx)("i",{className:"bx bx-user"}),(0,c.jsx)("span",{children:"Perfil"})]}),(0,c.jsxs)("a",{className:"dropdown-item",href:"javascript:;",children:[(0,c.jsx)("i",{className:"bx bx-cog"}),(0,c.jsx)("span",{children:"Configuración"})]}),(0,c.jsxs)("a",{className:"dropdown-item",href:"javascript:;",children:[(0,c.jsx)("i",{className:"bx bx-tachometer"}),(0,c.jsx)("span",{children:"Panel"})]}),(0,c.jsx)("div",{className:"dropdown-divider mb-0"}),(0,c.jsxs)("a",{className:"dropdown-item",href:"javascript:;",children:[(0,c.jsx)("i",{className:"bx bx-power-off"}),(0,c.jsx)("span",{children:"Cerrar Sesión"})]})]})]})]})})]})}),(0,c.jsx)("div",{className:"page-wrapper",children:(0,c.jsx)("div",{className:"page-content-wrapper",children:(0,c.jsxs)("div",{className:"page-content",children:[(0,c.jsxs)("div",{className:"page-breadcrumb d-none d-sm-flex align-items-center mb-3",children:[(0,c.jsx)("div",{className:"breadcrumb-title pe-3",children:"Panel de Control"}),(0,c.jsx)("div",{className:"ps-3",children:(0,c.jsx)("nav",{"aria-label":"breadcrumb",children:(0,c.jsxs)("ol",{className:"breadcrumb mb-0 p-0",children:[(0,c.jsx)("li",{className:"breadcrumb-item",children:(0,c.jsx)("a",{href:"javascript:;",children:(0,c.jsx)("i",{className:"bx bx-home-alt"})})}),(0,c.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sincronizado"})]})})}),(0,c.jsx)("div",{className:"ms-auto",children:(0,c.jsxs)("small",{className:"text-muted",children:[(0,c.jsx)("i",{className:"fas fa-clock me-1"}),"Última Actualización: ",i]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-success",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:[a.filter(a=>"PRODUCIENDO"===a.status).length,(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-play-circle"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Produciendo"})}),(0,c.jsxs)("div",{className:"ms-auto font-14 text-white",children:["+",Math.round(a.filter(a=>"PRODUCIENDO"===a.status).length/a.length*100)||0,"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-primary",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:[a.filter(a=>"ACTIVA"===a.status).length,(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-power-off"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Activas"})}),(0,c.jsxs)("div",{className:"ms-auto font-14 text-white",children:["+",Math.round(a.filter(a=>"ACTIVA"===a.status).length/a.length*100)||0,"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-danger",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:[a.filter(a=>"PARADA"===a.status).length,(0,c.jsx)("i",{className:"bx bxs-down-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-pause-circle"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Paradas"})}),(0,c.jsxs)("div",{className:"ms-auto font-14 text-white",children:["-",Math.round(a.filter(a=>"PARADA"===a.status).length/a.length*100)||0,"%"]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-3",children:(0,c.jsx)("div",{className:"card radius-15 bg-info",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"mb-0 text-white",children:[p?.total??a.length,(0,c.jsx)("i",{className:"bx bxs-up-arrow-alt font-14 text-white"})]})}),(0,c.jsx)("div",{className:"ms-auto font-35 text-white",children:(0,c.jsx)("i",{className:"fas fa-box"})})]}),(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0 text-white",children:"Producción Mes"})}),(0,c.jsx)("div",{className:"ms-auto font-14 text-white",children:p?`${p.eficiencia}% ef.`:""})]})]})})})]}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-12",children:(0,c.jsxs)("div",{className:"card radius-15",children:[(0,c.jsx)("div",{className:"card-header border-bottom-0",children:(0,c.jsxs)("div",{className:"d-lg-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("h5",{className:"mb-2 mb-lg-0",children:"Estado de Máquinas en Tiempo Real"})}),(0,c.jsx)("div",{className:"ms-lg-auto mb-2 mb-lg-0",children:(0,c.jsx)("div",{className:"btn-group-round",children:(0,c.jsxs)("div",{className:"btn-group",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-white",children:"Todas"}),(0,c.jsx)("button",{type:"button",className:"btn btn-white",children:"Produciendo"}),(0,c.jsx)("button",{type:"button",className:"btn btn-white",children:"Paradas"})]})})})]})}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("div",{className:"row",children:a.map(a=>{var b;return(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4 col-xl-3 mb-3",children:(0,c.jsx)("div",{className:"card radius-15 machine-card cursor-pointer border shadow-none",onClick:()=>{l(a),n(!0)},style:{cursor:"pointer",transition:"all 0.2s"},onMouseEnter:a=>{a.currentTarget.style.transform="scale(1.02)",a.currentTarget.style.boxShadow="0 4px 15px rgba(0,0,0,0.1)"},onMouseLeave:a=>{a.currentTarget.style.transform="scale(1)",a.currentTarget.style.boxShadow=""},children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,c.jsx)("div",{className:"machine-icon me-3",children:(0,c.jsx)("i",{className:`${(b=a.machine.Cod_maquina).includes("DOBL")?"fas fa-industry":b.includes("SOLD")?"fas fa-fire":b.includes("TROQ")?"fas fa-cut":b.includes("TERM")?"fas fa-compress-arrows-alt":"fas fa-cog"} text-primary`,style:{fontSize:"1.5rem"}})}),(0,c.jsxs)("div",{className:"flex-grow-1",children:[(0,c.jsx)("h6",{className:"mb-0 fw-bold",children:a.machine.desc_maquina}),(0,c.jsx)("small",{className:"text-muted",children:a.machine.Cod_maquina})]}),(0,c.jsx)("div",{children:(0,c.jsxs)("span",{className:`badge rounded-pill ${(a=>{switch(a){case"PRODUCIENDO":return"text-success";case"ACTIVA":return"text-primary";case"PARADA":return"text-danger";case"MANTENIMIENTO":return"text-warning";default:return"text-secondary"}})(a.status).replace("text-","bg-")}`,children:[(0,c.jsx)("i",{className:`${(a=>{switch(a){case"PRODUCIENDO":return"fas fa-play-circle";case"ACTIVA":return"fas fa-power-off";case"PARADA":return"fas fa-pause-circle";case"MANTENIMIENTO":return"fas fa-tools";case"INACTIVA":return"fas fa-stop-circle";default:return"fas fa-question-circle"}})(a.status)} me-1`}),(a=>{switch(a){case"PRODUCIENDO":return"PRODUCIENDO";case"ACTIVA":return"ACTIVA";case"PARADA":return"PARADA";case"MANTENIMIENTO":return"MANTENIMIENTO";case"INACTIVA":return"INACTIVA";default:return"DESCONOCIDO"}})(a.status)]})})]}),(0,c.jsxs)("div",{className:"machine-details",children:[a.currentOF&&"--"!==a.currentOF&&(0,c.jsxs)("div",{className:"detail-row mb-2",children:[(0,c.jsxs)("small",{className:"text-muted",children:[(0,c.jsx)("i",{className:"fas fa-clipboard-list me-1"}),"OF:"]}),(0,c.jsx)("span",{className:"ms-1",children:a.currentOF})]}),a.operator&&(0,c.jsxs)("div",{className:"detail-row mb-2",children:[(0,c.jsxs)("small",{className:"text-muted",children:[(0,c.jsx)("i",{className:"fas fa-user me-1"}),"Operador:"]}),(0,c.jsx)("span",{className:"ms-1",children:a.operator})]}),a.production.total>0&&(0,c.jsxs)("div",{className:"detail-row mb-2",children:[(0,c.jsxs)("small",{className:"text-muted",children:[(0,c.jsx)("i",{className:"fas fa-chart-bar me-1"}),"Producción:"]}),(0,c.jsx)("span",{className:"text-success ms-1",children:a.production.ok}),(0,c.jsx)("span",{className:"text-muted mx-1",children:"/"}),(0,c.jsx)("span",{className:"text-danger",children:a.production.nok})]}),a.efficiency>0&&(0,c.jsxs)("div",{className:"detail-row mb-2",children:[(0,c.jsxs)("small",{className:"text-muted",children:[(0,c.jsx)("i",{className:"fas fa-percentage me-1"}),"Eficiencia:"]}),(0,c.jsxs)("span",{className:`ms-1 ${a.efficiency>=80?"text-success":a.efficiency>=60?"text-warning":"text-danger"}`,children:[a.efficiency,"%"]})]}),a.downtime&&"PARADA"===a.status&&(0,c.jsxs)("div",{className:"detail-row",children:[(0,c.jsxs)("small",{className:"text-muted",children:[(0,c.jsx)("i",{className:"fas fa-exclamation-triangle me-1"}),"Motivo:"]}),(0,c.jsx)("small",{className:"text-danger ms-1",children:a.downtime})]})]})]})})},a.machine.id_maquina)})}),0===a.length&&(0,c.jsxs)("div",{className:"text-center py-5",children:[(0,c.jsx)("i",{className:"fas fa-industry text-muted mb-3",style:{fontSize:"3rem"}}),(0,c.jsx)("h5",{className:"text-muted",children:"Ninguna máquina encontrada"})]})]})]})})}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-12 col-lg-6",children:(0,c.jsx)("div",{className:"card radius-15",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("h5",{className:"mb-0",children:"Eficiencia por Tipo de Máquina"})}),(0,c.jsxs)("div",{className:"dropdown ms-auto",children:[(0,c.jsx)("div",{className:"cursor-pointer font-24 dropdown-toggle dropdown-toggle-nocaret","data-bs-toggle":"dropdown",children:(0,c.jsx)("i",{className:"bx bx-dots-horizontal-rounded"})}),(0,c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Acción"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Otra acción"}),(0,c.jsx)("div",{className:"dropdown-divider"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Algo más aquí"})]})]})]}),(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsxs)("div",{className:"progress-wrapper mb-4",children:[(0,c.jsxs)("p",{className:"mb-1",children:["Dobladora ",(0,c.jsxs)("span",{className:"float-end",children:[a.filter(a=>a.machine.Cod_maquina.includes("DOBL")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("DOBL")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("DOBL")).length):0,"%"]})]}),(0,c.jsx)("div",{className:"progress radius-15",style:{height:"5px"},children:(0,c.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:`${a.filter(a=>a.machine.Cod_maquina.includes("DOBL")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("DOBL")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("DOBL")).length):0}%`}})})]}),(0,c.jsxs)("div",{className:"progress-wrapper mb-4",children:[(0,c.jsxs)("p",{className:"mb-1",children:["Soldadura ",(0,c.jsxs)("span",{className:"float-end",children:[a.filter(a=>a.machine.Cod_maquina.includes("SOLD")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("SOLD")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("SOLD")).length):0,"%"]})]}),(0,c.jsx)("div",{className:"progress radius-15",style:{height:"5px"},children:(0,c.jsx)("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:`${a.filter(a=>a.machine.Cod_maquina.includes("SOLD")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("SOLD")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("SOLD")).length):0}%`}})})]}),(0,c.jsxs)("div",{className:"progress-wrapper mb-4",children:[(0,c.jsxs)("p",{className:"mb-1",children:["Troqueladora ",(0,c.jsxs)("span",{className:"float-end",children:[a.filter(a=>a.machine.Cod_maquina.includes("TROQ")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("TROQ")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("TROQ")).length):0,"%"]})]}),(0,c.jsx)("div",{className:"progress radius-15",style:{height:"5px"},children:(0,c.jsx)("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:`${a.filter(a=>a.machine.Cod_maquina.includes("TROQ")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("TROQ")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("TROQ")).length):0}%`}})})]}),(0,c.jsxs)("div",{className:"progress-wrapper",children:[(0,c.jsxs)("p",{className:"mb-1",children:["Terminación ",(0,c.jsxs)("span",{className:"float-end",children:[a.filter(a=>a.machine.Cod_maquina.includes("TERM")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("TERM")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("TERM")).length):0,"%"]})]}),(0,c.jsx)("div",{className:"progress radius-15",style:{height:"5px"},children:(0,c.jsx)("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${a.filter(a=>a.machine.Cod_maquina.includes("TERM")).length>0?Math.round(a.filter(a=>a.machine.Cod_maquina.includes("TERM")).reduce((a,b)=>a+(b.efficiency||0),0)/a.filter(a=>a.machine.Cod_maquina.includes("TERM")).length):0}%`}})})]})]})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-6",children:(0,c.jsx)("div",{className:"card radius-15",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("h5",{className:"mb-0 me-3",children:"Estado de Producción"}),(0,c.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Período de tiempo",children:[(0,c.jsx)("input",{type:"radio",className:"btn-check",name:"periodBtn",id:"periodMonth",defaultChecked:!0,onChange:w}),(0,c.jsx)("label",{className:"btn btn-outline-primary btn-sm",htmlFor:"periodMonth",children:"Mes"}),(0,c.jsx)("input",{type:"radio",className:"btn-check",name:"periodBtn",id:"periodDay",onChange:w}),(0,c.jsx)("label",{className:"btn btn-outline-primary btn-sm",htmlFor:"periodDay",children:"Día"}),(0,c.jsx)("input",{type:"radio",className:"btn-check",name:"periodBtn",id:"periodHour",onChange:w}),(0,c.jsx)("label",{className:"btn btn-outline-primary btn-sm",htmlFor:"periodHour",children:"Hora"})]})]}),(0,c.jsxs)("div",{className:"dropdown ms-auto",children:[(0,c.jsx)("div",{className:"cursor-pointer font-24 dropdown-toggle dropdown-toggle-nocaret","data-bs-toggle":"dropdown",children:(0,c.jsx)("i",{className:"bx bx-dots-horizontal-rounded"})}),(0,c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Acción"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Otra acción"}),(0,c.jsx)("div",{className:"dropdown-divider"}),(0,c.jsx)("a",{className:"dropdown-item",href:"javascript:;",children:"Algo más aquí"})]})]})]}),(0,c.jsxs)("div",{className:"row mt-3 g-3",children:[(0,c.jsx)("div",{className:"col-12 col-lg-6",children:(0,c.jsx)("div",{className:"card radius-15 border shadow-none",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0",children:"Piezas OK (Día)"})}),(0,c.jsx)("div",{className:"ms-auto text-success",children:(0,c.jsxs)("span",{children:["+",x?.ok??0]})})]}),(0,c.jsx)("h4",{className:"mb-0",children:x?.ok??0})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-6",children:(0,c.jsx)("div",{className:"card radius-15 border shadow-none",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0",children:"Piezas NOK (Día)"})}),(0,c.jsx)("div",{className:"ms-auto text-danger",children:(0,c.jsxs)("span",{children:["+",x?.nok??0]})})]}),(0,c.jsx)("h4",{className:"mb-0",children:x?.nok??0})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-6",children:(0,c.jsx)("div",{className:"card radius-15 border shadow-none",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0",children:"Retrabajo (Día)"})}),(0,c.jsx)("div",{className:"ms-auto text-warning",children:(0,c.jsxs)("span",{children:["+",x?.rw??0]})})]}),(0,c.jsx)("h4",{className:"mb-0",children:x?.rw??0})]})})}),(0,c.jsx)("div",{className:"col-12 col-lg-6",children:(0,c.jsx)("div",{className:"card radius-15 border shadow-none",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"mb-0",children:"Pérdidas Día (€)"})}),(0,c.jsx)("div",{className:"ms-auto text-danger",children:(0,c.jsx)("span",{children:x?x.perdidas_eur.toLocaleString("es-ES",{style:"currency",currency:"EUR"}):"—"})})]}),(0,c.jsx)("h4",{className:"mb-0",children:x?x.perdidas_eur.toLocaleString("es-ES",{style:"currency",currency:"EUR"}):"—"})]})})})]})]})})})]})]})})}),(0,c.jsx)(fZ,{machine:k,isOpen:m,onClose:()=>n(!1)}),(0,c.jsx)("div",{className:"footer",children:(0,c.jsx)("p",{className:"mb-0",children:"Sistema SCADA MRPII - © 2024 Grupo KH"})}),(0,c.jsxs)("div",{className:"switcher-body",children:[(0,c.jsx)("button",{className:"btn btn-primary btn-switcher shadow-sm",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasScrolling","aria-controls":"offcanvasScrolling",children:(0,c.jsx)("i",{className:"bx bx-cog bx-spin"})}),(0,c.jsxs)("div",{className:"offcanvas offcanvas-end shadow border-start-0 p-2","data-bs-scroll":"true","data-bs-backdrop":"false",tabIndex:-1,id:"offcanvasScrolling",children:[(0,c.jsxs)("div",{className:"offcanvas-header border-bottom",children:[(0,c.jsx)("h5",{className:"offcanvas-title",id:"offcanvasScrollingLabel",children:"Personalizador de Tema"}),(0,c.jsx)("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas"})]}),(0,c.jsxs)("div",{className:"offcanvas-body",children:[(0,c.jsx)("h6",{className:"mb-0",children:"Variación de Tema"}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"lightmode",value:"option1",defaultChecked:!0}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"lightmode",children:"Claro"})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"darkmode",value:"option2"}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"darkmode",children:"Oscuro"})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"darksidebar",value:"option3"}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"darksidebar",children:"Barra Lateral Oscura"})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"form-check form-check-inline",children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"ColorLessIcons",value:"option4"}),(0,c.jsx)("label",{className:"form-check-label",htmlFor:"ColorLessIcons",children:"Iconos sin Color"})]})]})]})]})]})}}];

//# sourceMappingURL=Downloads_mrpii%202_src_app_page_tsx_b5e986d6._.js.map